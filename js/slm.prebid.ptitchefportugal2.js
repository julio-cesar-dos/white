if(function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){var _result,_callbacks,_collect,collect_fn,_resolveScope,resolveScope_fn,_enabled,_data,_defer,_ready,_dirty,_hash,_resolve,resolve_fn,_isExternalModule,isExternalModule_fn,_externalModuleFlow,externalModuleFlow_fn,_getExternalIntegration,getExternalIntegration_fn,_regularFlow,regularFlow_fn,_callForConfig,callForConfig_fn,_callForExtensions,callForExtensions_fn,_callId5Fetch,callId5Fetch_fn,_createFetchRequestData,createFetchRequestData_fn,_processFetchCallResponse,processFetchCallResponse_fn,__defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i),__accessCheck=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},__privateGet=(e,t,i)=>(__accessCheck(e,t,"read from private field"),i?i.call(e):t.get(e)),__privateAdd=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},__privateSet=(e,t,i,r)=>(__accessCheck(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),__privateMethod=(e,t,i)=>(__accessCheck(e,t,"access private method"),i);function register(e,t,i,r){if("function"!=typeof i)throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(t)?t.reverse().reduce(((t,i)=>register.bind(null,e,i,t,r)),i)():Promise.resolve().then((()=>e.registry[t]?e.registry[t].reduce(((e,t)=>t.hook.bind(null,e,r)),i)():i(r)))}function addHook(e,t,i,r){const n=r;e.registry[i]||(e.registry[i]=[]),"before"===t&&(r=(e,t)=>Promise.resolve().then(n.bind(null,t)).then(e.bind(null,t))),"after"===t&&(r=(e,t)=>{let i;return Promise.resolve().then(e.bind(null,t)).then((e=>(i=e,n(i,t)))).then((()=>i))}),"error"===t&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch((e=>n(e,t)))),e.registry[i].push({hook:r,orig:n})}function removeHook(e,t,i){if(!e.registry[t])return;const r=e.registry[t].map((e=>e.orig)).indexOf(i);-1!==r&&e.registry[t].splice(r,1)}const bind=Function.bind,bindable=bind.bind(bind);function bindApi(e,t,i){const r=bindable(removeHook,null).apply(null,i?[t,i]:[t]);e.api={remove:r},e.remove=r,["before","error","after","wrap"].forEach((r=>{const n=i?[t,r,i]:[t,r];e[r]=e.api[r]=bindable(addHook,null).apply(null,n)}))}function Singular(){const e=Symbol("Singular"),t={registry:{}},i=register.bind(null,t,e);return bindApi(i,t,e),i}function Collection(){const e={registry:{}},t=register.bind(null,e);return bindApi(t,e),t}const Hook={Singular:Singular,Collection:Collection},hooks=new Hook.Collection;class Store{constructor(e){this.subscribers=[],this.state=e}setState(e){return this.state=Object.assign(Object.assign({},this.state),"function"==typeof e?e(this.state):e),Promise.all(this.subscribers.map((e=>e(this.state))))}getAdUnits(){return Object.values(this.state.adUnits)}subscribe(e){this.subscribers.push(e)}unsubscribe(e){this.subscribers=this.subscribers.filter((t=>t!==e))}getAdUnitsById(e){return e.map((e=>this.state.adUnits[e]))}getAdUnitById(e){return this.state.adUnits[e]}getAdUnitByHtml(e){return this.getAdUnits().find((t=>t.htmlId===e))}}const StateManager=new Store({adUnits:{},metaAdUnits:{}}),mergeObjectsRecursively=(e,t,i=[])=>(Object.keys(e).forEach((r=>{if(0===i.length||i.length>0&&-1!==i.indexOf(r)){if("object"==typeof e[r]&&!Array.isArray(e[r])&&void 0!==t[r])return mergeObjectsRecursively(e[r],t[r]);t[r]=-1===Object.keys(t).indexOf(r)?e[r]:t[r]}})),t),getParameterByName$1=e=>{const t=new RegExp(`[\\?&]${e}=([^&#]*)`).exec(null===window||void 0===window?void 0:window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))};function getQueryStringParams(e){const t={},i=("?"===e[0]?e.substring(1):e).split("&");for(let r=0;r<i.length;r+=1){const e=i[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return t}const debugIsOn=()=>"true"===getParameterByName$1("slmpbjs_debug"),demoIsOn=()=>null!==localStorage.getItem("akcelo_demo");function getBrowser(){const e=navigator.userAgent;let t;function i(t,i=1){const r=e.match(t);return r&&r.length>1&&r[i]||""}return/opera|opr/i.test(e)?t={name:"Opera",type:"opera",version:i(/version\/(\d+(\.\d+)?)/i)||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(e)?t={name:"Internet Explorer",type:"msie",version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?t={name:"Microsft Edge",type:"msedge",version:i(/edge\/(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(e)?t={name:"Google Chrome",type:"chrome",version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/firefox/i.test(e)?t={name:"Firefox",type:"firefox",version:i(/(?:firefox)[ \/](\d+(\.\d+)?)/i)}:!/like android/i.test(e)&&/android/i.test(e)?t={name:"Android",type:"android",version:i(/version\/(\d+(\.\d+)?)/i)}:/safari/i.test(e)?t={name:"Safari",type:"safari",version:i(/version\/(\d+(\.\d+)?)/i)}:(t={name:i(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /,2)},t.type=t.name.toLowerCase().replace(/\s/g,"")),t}const isMobile=()=>{let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},getBidCpmAdjustment$1=(e={customAdjustments:[]})=>{const t={};return e.customAdjustments&&e.customAdjustments.length>0&&e.customAdjustments.forEach((e=>{e.bidder&&"function"==typeof e.adjustment&&(t[e.bidder]={bidCpmAdjustment:e.adjustment})})),t},getStringsFromAdUnitSizes=(e,t=null)=>{const i=[];return"string"==typeof e?e:0===e.length?"nosize":(Array.isArray(e)&&e.forEach((e=>{i.push(function(e,t){let i=null;return t&&"native"===t?"native":"string"==typeof e?e:(2===e.length&&(i=`${e[0]}x${e[1]}`),i&&t&&"video"===t?"video-".concat(i):i||"unknown")}(e,t))})),i)},getOutstreamRenderer=()=>({url:"https://ads.sportslocalmedia.com/akceloOutstream.js",render:e=>{new window.AkceloOutstream(e)}}),getCloseButton=(e=80,t=!1)=>{const i=`slm-close-${Math.random().toString(36).substring(2,15)}`,r=document.createElement("div");return r.setAttribute("id",i),r.classList.add("slm-close"),r.setAttribute("title","Close"),r.innerHTML=`\n    <style>\n        #${i}::before {position:absolute;content:"";top:-${(e-20)/2}px;right:-${(e-40)/2}px;width:${e}px;height:${e}px;border-radius:50%;pointer-events:all;}\n    </style>\n    <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve"\n    width="20" height="20" viewBox="0 0 20 20" style="cursor:pointer;position:relative;display:inline;width:20px;margin-bottom:0;">\n      <g transform="matrix(0.0569703,0,0,0.0569703,-4.6066465,-4.6398328)">\n        <circle style="fill:#373737;fill-opacity:1;stroke-width:18.90076828" cx="258.31042" cy="257.79587" r="161.54251" />\n        <path style="fill:#fffffd;fill-opacity:1;stroke-width:0.6150254" d="m 169.41211,156.49219 c -10.496,0.0497 -17.51765,14.20672 -9.88477,22.04101\n        7.85367,8.42001 16.59855,15.99758 24.44716,24.46542 18.54871,18.54359 37.07296,37.11162 55.62902,55.64786 -27.35069,28.13628 -56.58081,54.64717\n        -82.52735,84.03321 -4.80727,10.6808 9.79299,23.17713 19.35156,15.85937 11.18603,-9.25489 20.38437,-20.64133 31.12591,-30.40129 16.93264,-16.93265\n        33.86528,-33.86529 50.79792,-50.79793 28.1346,27.34154 54.64725,56.59829 84.05469,82.53907 10.67333,4.77287 23.14434,-9.80942 15.8418,-19.35547\n        -9.25182,-11.19086 -20.6499,-20.38132 -30.40521,-31.12982 -16.93264,-16.93264 -33.86528,-33.86528 -50.79792,-50.79792 27.30512,-27.92294\n        56.11138,-54.51613 82.27539,-83.52148 5.21946,-10.52229 -8.42434,-23.47032 -18.50586,-16.69531 -7.93114,4.84596 -12.68507,13.31658 -19.97314,18.98074\n        -20.84814,20.84691 -41.69629,41.69383 -62.54443,62.54074 -28.17478,-27.33485 -54.61388,-56.67303 -84.11719,-82.51562 -1.50233,-0.63096\n        -3.13851,-0.93953 -4.76758,-0.89258 z" />\n       </g>\n    </svg>\n  `,t&&(r.style.display="none"),r},createIframe$1=(e="0",t="0")=>{const i=document.createElement("iframe");return i.width=e,i.height=t,i.style.border="0",i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("topmargin","0"),i.setAttribute("leftmargin","0"),i.setAttribute("allowtransparency","true"),i},domReady=e=>{"loading"!==document.readyState?e():document.addEventListener&&document.addEventListener("DOMContentLoaded",(()=>e()))},getReferrer=()=>{try{return window.top.location.href}catch(e){}return document.referrer};class Logger{constructor(e){this.additionalPrefix=e,this.isDebugOn=debugIsOn()}getInitialPrefix(){return this.additionalPrefix?`%cAkcelo Ads | ${this.additionalPrefix}`:"%cAkcelo Ads"}getDecoration(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}debug(...e){this.isDebugOn&&console.debug(`${this.getInitialPrefix()}%cDEBUG`,this.getDecoration("#034154"),this.getDecoration("#C2B2B4"),...e)}info(...e){this.isDebugOn&&console.info(`${this.getInitialPrefix()}%cINFO`,this.getDecoration("#034154"),this.getDecoration("#2176AE"),...e)}warn(...e){this.isDebugOn&&console.warn(`${this.getInitialPrefix()}%cWARNING`,this.getDecoration("#034154"),this.getDecoration("#FFBC0A"),...e)}error(...e){this.isDebugOn&&console.error(`${this.getInitialPrefix()}%cERROR`,this.getDecoration("#034154"),this.getDecoration("#D7263D"),...e)}}const BIDDERS_WITH_SAFE_FRAME=["smartadserver"],FORMAT_TYPE_DEFAULT_REFRESH_DISABLED=["skin","its"],PREBID_BIDDER_TIMEOUT=1e3,PREBID_CMP_TIMEOUT=3e4,SESSION_ID_STORAGE_KEY="akcelo_session_id",PERFORMANCE_EVENTS={LOAD_MODULE:"akcelo:load",GAM_REQUEST:"akcelo:gamRequest",BID_REQUEST:"akcelo:bidRequest"},ANALYTICS_PREBID_EVENTS={AUCTION_INIT:"auctionInit",AUCTION_END:"auctionEnd",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_WON:"bidWon",NO_BID:"noBid"},ANALYTICS_STATE_TYPES={BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",RUNNING:"running",TIMEOUT:"bidTimeout"},GAM_MODE={ALLOWED:"allowed",FORBIDDEN:"forbidden",A9_ONLY:"a9only"},VIDEO_ERROR_CODE={PLAYER_CREATION_FAILED:"1",ADS_PARAMS_TOO_LONG:"2",INVALID_AD_WINNER:"3",UNKNOWN_AD_WINNER:"4",MISSING_LINE_ITEM_MAPPING:"5",HEAVY_AD_INTERVENTION:"6",VIEWING_CONTEXT_FRAUD:"7"},HIGH_CPM_COUNTRIES=["CH","UZ","EC","AX","GT","PA","ID","CA","SV","HN","VN","PE","US","AE","RO","BE","LU","BD","KM","GR","BR","TH","CR","PH","GE"],AVERAGE_CPM_COUNTRIES=["KG","HU","KN","NO","NZ","MX","LT","DE","FR","CZ","CO","LI","CL","MY","SK","AR","UA","ES","IE","JP","BL","AT","GB","NL","MD","EE","KR","TR","RS","KZ","ET","LS","GF","PL","PT","IT","UY","IN","MC","GP","ZA","LV","SG","EG","JM","QA","PK","AM","PY","BB","BS","SA","TW","MZ","DO","TZ","BA","AZ","ME","HK","NI","AO","MO","OM","SE","IL","HR"],logger$p=new Logger("Config Manager");class ConfigManager{constructor(){this.config={adUnits:[],params:{}},this.adUnits=new Map,this.metaAdUnits=new Map,this.defaultSharedParams={},this.defaultSetupParams={gamMode:"allowed",gdprApplies:!0,allowedDomains:[],siteId:0,refresh:{enabled:!1,capping:12,timeout:3e4},userSync:{amxId:!0,id5Id:!0,pairId:!0,criteoId:!0,teadsId:!0,sharedId:!0},contextTargeting:{userVisitDuration:{VERY_LOW:0,LOW:10,MEDIUM:20,HIGH:30,VERY_HIGH:60},pageVisitDuration:{VERY_LOW:0,LOW:10,MEDIUM:20,HIGH:30,VERY_HIGH:60}},loadGoogleExoticSlots:!0},this.defaultAdUnitParams={multipleSpawn:!1,partners:{adExchange:{enabled:!1,allowAtRefresh:!1},openBidding:{enabled:!0}}}}load(e){var t,i,r,n,a;logger$p.info("Processing config",e),this.config=e;const o=Object.assign(Object.assign({},this.defaultSharedParams),this.defaultSetupParams),s=Object.assign(Object.assign({},this.defaultSharedParams),this.defaultAdUnitParams);return this.config.params=mergeObjectsRecursively(o,this.config.params||{}),this.config.adUnits=null===(t=this.config.adUnits)||void 0===t?void 0:t.filter((e=>{var t,i;return e.params=mergeObjectsRecursively(s,e.params||{}),e.type&&-1!==FORMAT_TYPE_DEFAULT_REFRESH_DISABLED.indexOf(e.type)&&((null===(i=null===(t=e.params)||void 0===t?void 0:t.refresh)||void 0===i?void 0:i.enabled)||(e.params=e.params||{refresh:{}},e.params.refresh=e.params.refresh||{},e.params.refresh.enabled=!1)),e.params=mergeObjectsRecursively(this.config.params||{},e.params||{},["gamMode","refresh"]),this.isAdUnitDeviceCompatible(e)})),null===(i=this.config.adUnits)||void 0===i||i.forEach((e=>{demoIsOn()&&e.bids&&(e.bids=[{bidder:"akcelo-demo",params:{}}]),this.adUnits.set(e.id,e)})),this.config.metaAdUnits=null===(r=this.config.metaAdUnits)||void 0===r?void 0:r.filter((e=>this.isAdUnitDeviceCompatible(e))),null===(n=this.config.metaAdUnits)||void 0===n||n.forEach((e=>{this.metaAdUnits.set(e.id,e)})),null===(a=this.config.params.setupOverrides)||void 0===a||a.forEach((e=>e())),hooks("loadConfig",(e=>(this.config=e,this.config)),this.config)}getAdUnitsConfigById(e=[]){return e.map((e=>this.adUnits.get(e)))}isAdUnitDeviceCompatible(e){return!e.device||"desktop"===e.device&&!isMobile()||"mobile"===e.device&&isMobile()}}const Config=new ConfigManager;var __awaiter$7=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$o=new Logger("Consent Manager");class ConsentManager{constructor(){this.consentType="notavailable",this.cmpId=0,logger$o.info("Module initialization")}loadConsent(){var e;return __awaiter$7(this,void 0,void 0,(function*(){if(!1!==(null===(e=Config.config.params)||void 0===e?void 0:e.gdprApplies))try{const e=yield this.getTCData();this.consentType=this.getConsentTypeByTCData(e),this.cmpId=e.cmpId}catch(t){logger$o.error(t),this.consentType="notavailable"}else this.consentType="notrequired"}))}getConsentType(){return this.consentType}getCmpId(){return this.cmpId}getConsentTypeByTCData(e){const t=this.arePersonalizedAdsAllowed(e),i=this.areNonPersonalizedAdsAllowed(e);let r="accepted";return t||(r=i?"limited":"refused"),e.gdprApplies?r:"notrequired"}getTCData(){return new Promise(((e,t)=>{this.onTcfApiLoaded().then((()=>{this.onConsentReady((t=>e(t)))}),(()=>t(new Error("No __tcfapi found on window"))))}))}arePersonalizedAdsAllowed(e){return!e.gdprApplies||e.gdprApplies&&e.purpose.consents&&e.purpose.legitimateInterests&&!0===e.purpose.consents[1]&&!0===e.purpose.consents[3]&&!0===e.purpose.consents[4]&&(!0===e.purpose.consents[2]&&!0===e.purpose.consents[7]&&!0===e.purpose.consents[9]&&!0===e.purpose.consents[10]||e.purpose.legitimateInterests[2]&&e.purpose.legitimateInterests[7]&&e.purpose.legitimateInterests[9]&&e.purpose.legitimateInterests[10])}areNonPersonalizedAdsAllowed(e){return e.gdprApplies&&e.purpose.legitimateInterests&&e.purpose.legitimateInterests[2]&&e.purpose.legitimateInterests[7]&&e.purpose.legitimateInterests[9]&&e.purpose.legitimateInterests[10]}onTcfApiLoaded(e=5e3){return new Promise(((t,i)=>{let r;const n=setTimeout((()=>{clearInterval(r),i()}),e);r=window.setInterval((()=>{void 0!==this.getTcfApi()&&(clearInterval(r),clearTimeout(n),t())}),100)}))}onConsentReady(e){this.getTcfApi()("addEventListener",2,((t,i)=>{!i||(null==t?void 0:t.gdprApplies)&&"useractioncomplete"!==(null==t?void 0:t.eventStatus)&&"tcloaded"!==(null==t?void 0:t.eventStatus)||(this.getTcfApi()("removeEventListener",2,(()=>{}),t.listenerId),e(t))}))}getTcfApi(){if(window.__tcfapi)return window.__tcfapi;const{cmpFrame:e,cmpFunction:t}=this.findCmp();return"function"==typeof t?(logger$o.info("Detected CMP inside the current iframe"),window.__tcfapi=t,window.__tcfapi):e&&e!==window?(logger$o.info("Detected CMP not accessible inside the current iframe. Creating a __tcfapi wrapper"),window.__tcfapi=this.createCmpWrapperInIframe(e),window.__tcfapi):void 0}createCmpWrapperInIframe(e){const t={};return window.addEventListener("message",(e=>{const i="string"==typeof e.data?JSON.parse(e.data):e.data;if(i.__tcfapiReturn&&i.__tcfapiReturn.callId){const e=i.__tcfapiReturn;Object.keys(t).includes(e.callId)&&t[e.callId](e.returnValue,e.success)}}),!1),(i,r,n,...a)=>{const o=`${Math.random()}`,s={__tcfapiCall:{command:i,version:r,parameter:a,callId:o}};t[o]=n,e.postMessage(s,"*")}}findCmp(){let e,t,i=window;for(;;){try{if("function"==typeof i.__tcfapi){t=i.__tcfapi,e=i;break}}catch(r){}try{if(i.frames.__tcfapiLocator){e=i;break}}catch(r){}if(i===window.top)break;i=i.parent}return{cmpFrame:e,cmpFunction:t}}}const ConsentManager$1=new ConsentManager,logger$n=new Logger("Core");function removeAdUnit(e){return logger$n.info("RemoveAdUnit",e),hooks("destroyAdUnit",(e=>{StateManager.setState((t=>{t.adUnits[e.htmlId].isDestroyed=!0}))}),{htmlId:e})}function addAdUnit(e,t){var i,r,n;logger$n.info("AddAdUnit",e,t);let a=!1,o=null===(i=Config.config.adUnits)||void 0===i?void 0:i.find((e=>e.id===t));if(o||(a=!0,o=null===(r=Config.config.metaAdUnits)||void 0===r?void 0:r.find((e=>e.id===t))),!o)return logger$n.info("Ignoring adUnit, wasn't able to find corresponding configuration",e,t),null;if(window.slmadshb=window.slmadshb||{que:[]},window.slmadshb.displayCalls=window.slmadshb.displayCalls||[],window.slmadshb.displayCalls.includes(e)){if(a||!(null===(n=o.params)||void 0===n?void 0:n.multipleSpawn))return logger$n.warn(`Display already called for htmlId ${e}, ignoring it.`),null;removeAdUnit(e)}return window.slmadshb.displayCalls.push(e),a?hooks("addMetaAdUnit",(i=>{StateManager.setState((r=>{i.metaAdUnit&&(r.metaAdUnits[e]={htmlId:e,ref:t,slmadsId:i.metaAdUnit.slmadsId,isDestroyed:!1})}))}),{htmlId:e,metaAdUnit:o}):hooks("addAdUnit",(i=>{StateManager.setState((r=>{var n,a,o;i.adUnit&&(r.adUnits[e]={htmlId:e,ref:t,slmadsId:i.adUnit.slmadsId,adUnitPath:i.adUnit.adUnitPath||null,isCapped:i.isCapped,isReadyToRequest:!1,isReadyToRender:null===(o=!(null===(a=null===(n=i.adUnit.params)||void 0===n?void 0:n.lazyLoad)||void 0===a?void 0:a.enabled))||void 0===o||o,isDestroyed:!1})}))}),{htmlId:e,adUnit:o,isCapped:!1})}function display(e){let t,i;"string"==typeof e?(t=e,i=e):(t=e.id,i=e.code),document.getElementById(t)?addAdUnit(t,i):logger$n.warn("Display ignored, couldn't find the corresponding HTMLElement",t)}performance.mark(PERFORMANCE_EVENTS.LOAD_MODULE);const init$5=e=>{if(logger$n.info("Initialization"),window.slmadshb=window.slmadshb||{},window.slmadshb.que=window.slmadshb.que||[],window.slmadshb.events=window.slmadshb.events||[],window.slmadshb.eventsTriggers=window.slmadshb.eventsTriggers||[],window.slmadshb.onEvent=(e,t)=>{window.slmadshb.events.push({name:e,callback:t}),window.slmadshb.eventsTriggers.forEach((i=>{i.name===e&&t(i.param)}))},window.slmadshb.triggerEvent=(e,t)=>{window.slmadshb.eventsTriggers.push({name:e,param:t}),window.slmadshb.events.forEach((i=>{i.name===e&&i.callback(t)}))},!window.slmadshb.loaded)return window.slmadshb.loaded=!0,Config.load(e),window.slmadshb.openAdTool=()=>{document.body&&(document.body.appendChild(document.createElement("div")).id="akcelo-adtool",document.body.appendChild(document.createElement("script")).src="//ads.sportslocalmedia.com/slm.adtool2.app.js")},(localStorage.getItem("akcelo_bookmarklet")||localStorage.getItem("akcelo_publisher_bookmarklet"))&&document.body&&(document.body.appendChild(document.createElement("div")).id="akcelo-adtool",document.body.appendChild(document.createElement("script")).src=localStorage.getItem("akcelo_bookmarklet")?"//ads.sportslocalmedia.com/slm.adtool2.app.js":"//ads.sportslocalmedia.com/slm.adtool.publisher.js"),ConsentManager$1.loadConsent().then((()=>hooks("coreInit",(()=>{function e(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(t){logger$n.error("Error processing command",t)}}window.slmadshb.processQueue=()=>{window.slmadshb.que.forEach(e)},window.slmadshb.setup=Config.config,window.slmadshb.display=display,window.slmadshb.que.push=e,window.slmadshb.processQueue()}))));logger$n.error("Multiple init detected, make sure to call the script only once")};function includes$1(e,t,i){return e&&e.includes(t,i)||!1}function arrayFrom(){return Array.from.apply(Array,arguments)}function find(e,t,i){return e&&e.find(t,i)}function findIndex(e,t,i){return e&&e.findIndex(t,i)}const _defaultPrecision=2,_lgPriceConfig={buckets:[{max:5,increment:.5}]},_mgPriceConfig={buckets:[{max:20,increment:.1}]},_hgPriceConfig={buckets:[{max:20,increment:.01}]},_densePriceConfig={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},_autoPriceConfig={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function getPriceBucketString(e,t,i=1){let r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":getCpmStringValue(e,_lgPriceConfig,i),med:""===r?"":getCpmStringValue(e,_mgPriceConfig,i),high:""===r?"":getCpmStringValue(e,_hgPriceConfig,i),auto:""===r?"":getCpmStringValue(e,_autoPriceConfig,i),dense:""===r?"":getCpmStringValue(e,_densePriceConfig,i),custom:""===r?"":getCpmStringValue(e,t,i)}}function getCpmStringValue(e,t,i){let r="";if(!isValidPriceConfig(t))return r;const n=t.buckets.reduce(((e,t)=>e.max>t.max?e:t),{max:0});let a=0,o=find(t.buckets,(t=>{if(e>n.max*i){let e=t.precision;void 0===e&&(e=_defaultPrecision),r=(t.max*i).toFixed(e)}else{if(e<=t.max*i&&e>=a*i)return t.min=a,t;a=t.max}}));return o&&(r=getCpmTarget(e,o,i)),r}function isValidPriceConfig(e){if(isEmpty(e)||!e.buckets||!Array.isArray(e.buckets))return!1;let t=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(t=!1)})),t}function getCpmTarget(e,t,i){const r=void 0!==t.precision?t.precision:_defaultPrecision,n=t.increment*i,a=t.min*i;let o=Math.floor,s=config.getConfig("cpmRoundingFunction");"function"==typeof s&&(o=s);let d,l,c=Math.pow(10,r+2),p=(e*c-a*c)/(n*c);try{d=o(p)*n+a}catch(u){l=!0}return(l||"number"!=typeof d)&&(logWarn("Invalid rounding function passed in config"),d=Math.floor(p)*n+a),d=Number(d.toFixed(10)),d.toFixed(r)}const JSON_MAPPING={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},DEBUG_MODE="pbjs_debug",STATUS={GOOD:1},EVENTS$1={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted"},AD_RENDER_FAILED_REASON={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},EVENT_ID_PATHS={bidWon:"adUnitCode"},GRANULARITY_OPTIONS$1={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp"},DEFAULT_TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},NATIVE_KEYS={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},S2S={SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"},BID_STATUS={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},REJECTION_REASON={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method"},PREBID_NATIVE_DATA_KEYS_TO_ORTB$1={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},NATIVE_ASSET_TYPES={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},NATIVE_IMAGE_TYPES={ICON:1,MAIN:3},NATIVE_KEYS_THAT_ARE_NOT_ASSETS=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],MESSAGES={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},DEFAULT_DEBUG="TRUE"===getParameterByName(DEBUG_MODE).toUpperCase(),DEFAULT_BIDDER_TIMEOUT=3e3,DEFAULT_ENABLE_SEND_ALL_BIDS=!0,DEFAULT_DISABLE_AJAX_TIMEOUT=!1,DEFAULT_BID_CACHE=!1,DEFAULT_DEVICE_ACCESS=!0,DEFAULT_MAX_NESTED_IFRAMES=10,DEFAULT_TIMEOUTBUFFER=400,RANDOM="random",FIXED="fixed",VALID_ORDERS={};VALID_ORDERS[RANDOM]=!0,VALID_ORDERS[FIXED]=!0;const DEFAULT_BIDDER_SEQUENCE=RANDOM,GRANULARITY_OPTIONS={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},ALL_TOPICS="*";function newConfig(){let e,t,i,r=[],n=null;function a(){function r(e){return a[e].val}function n(e,t){a[e].val=t}e={};const a={publisherDomain:{set(e){null!=e&&logWarn("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),n("publisherDomain",e)}},priceGranularity:{val:GRANULARITY_OPTIONS.MEDIUM,set(e){d(e)&&("string"==typeof e?n("priceGranularity",s(e)?e:GRANULARITY_OPTIONS.MEDIUM):isPlainObject(e)&&(n("customPriceBucket",e),n("priceGranularity",GRANULARITY_OPTIONS.CUSTOM),logMessage("Using custom price granularity")))}},customPriceBucket:{val:{},set(){}},mediaTypePriceGranularity:{val:{},set(e){null!=e&&n("mediaTypePriceGranularity",Object.keys(e).reduce(((t,i)=>(d(e[i])?"string"==typeof e?t[i]=s(e[i])?e[i]:r("priceGranularity"):isPlainObject(e)&&(t[i]=e[i],logMessage(`Using custom price granularity for ${i}`)):logWarn(`Invalid price granularity for media type: ${i}`),t)),{}))}},bidderSequence:{val:DEFAULT_BIDDER_SEQUENCE,set(e){VALID_ORDERS[e]?n("bidderSequence",e):logWarn(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{val:{},set(e){(function(e){if(!isPlainObject(e))return logWarn("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return logWarn(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!isArray(e[t]))return logWarn(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(isStr))return logWarn(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!isBoolean(e[t]))return logWarn(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&n("auctionOptions",e)}}};let o={debug:DEFAULT_DEBUG,bidderTimeout:DEFAULT_BIDDER_TIMEOUT,enableSendAllBids:DEFAULT_ENABLE_SEND_ALL_BIDS,useBidCache:DEFAULT_BID_CACHE,deviceAccess:DEFAULT_DEVICE_ACCESS,timeoutBuffer:DEFAULT_TIMEOUTBUFFER,disableAjaxTimeout:DEFAULT_DISABLE_AJAX_TIMEOUT,maxNestedIframes:DEFAULT_MAX_NESTED_IFRAMES};function s(e){return find(Object.keys(GRANULARITY_OPTIONS),(t=>e===GRANULARITY_OPTIONS[t]))}function d(e){if(!e)return logError("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)s(e)||logWarn("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(isPlainObject(e)&&!isValidPriceConfig(e))return logError("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(o,Object.fromEntries(Object.entries(a).map((([e,t])=>[e,Object.assign({get:r.bind(null,e),set:n.bind(null,e),enumerable:!0},t)])))),t&&u(Object.keys(t).reduce(((e,i)=>(t[i]!==o[i]&&(e[i]=o[i]||{}),e)),{})),t=o,i={}}function o(){if(n&&i&&isPlainObject(i[n])){let e=i[n];return arrayFrom(new Set(Object.keys(t).concat(Object.keys(e)))).reduce(((i,r)=>(void 0===e[r]?i[r]=t[r]:void 0===t[r]?i[r]=e[r]:isPlainObject(e[r])?i[r]=mergeDeep({},t[r],e[r]):i[r]=e[r],i)),{})}return Object.assign({},t)}const[s,d]=[o,function(){const e=o();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((e=>function(...t){if(t.length<=1&&"function"!=typeof t[0]){const i=t[0];return i?dlv(e(),i):o()}return function(e,t,i={}){let n=t;if("string"!=typeof e&&(n=e,e=ALL_TOPICS,i=t||{}),"function"!=typeof n)return void logError("listener must be a function");const a={topic:e,callback:n};return r.push(a),i.init&&n(e===ALL_TOPICS?d():{[e]:d(e)}),function(){r.splice(r.indexOf(a),1)}}(...t)})),[l,c]=[d,s].map((e=>function(...t){let i=e(...t);return i&&"object"==typeof i&&(i=deepClone(i)),i}));function p(i){if(!isPlainObject(i))return void logError("setConfig options must be an object");let r=Object.keys(i),n={};r.forEach((r=>{let a=i[r];isPlainObject(e[r])&&isPlainObject(a)&&(a=Object.assign({},e[r],a));try{n[r]=t[r]=a}catch(o){logWarn(`Cannot set config for property ${r} : `,o)}})),u(n)}function u(e){const t=Object.keys(e);r.filter((e=>includes$1(t,e.topic))).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),r.filter((e=>e.topic===ALL_TOPICS)).forEach((t=>t.callback(e)))}function m(e,t=!1){try{!function(e){if(!isPlainObject(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!isPlainObject(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((r=>{i[r]||(i[r]={}),Object.keys(e.config).forEach((n=>{let a=e.config[n];if(isPlainObject(a)){const e=t?mergeDeep:Object.assign;i[r][n]=e({},i[r][n]||{},a)}else i[r][n]=a}))}))}catch(r){logError(r)}}function g(e,t){n=e;try{return t()}finally{f()}}function f(){n=null}return a(),{getCurrentBidder:function(){return n},resetBidder:f,getConfig:d,getAnyConfig:s,readConfig:l,readAnyConfig:c,setConfig:p,mergeConfig:function(e){if(!isPlainObject(e))return void logError("mergeConfig input must be an object");const t=mergeDeep(o(),e);return p({...t}),t},setDefaults:function(i){isPlainObject(e)?(Object.assign(e,i),Object.assign(t,i)):logError("defaults must be an object")},resetConfig:a,runWithBidder:g,callbackWithBidder:function(e){return function(t){return function(...i){if("function"==typeof t)return g(e,t.bind(this,...i));logWarn("config.callbackWithBidder callback is not a function")}}},setBidderConfig:m,getBidderConfig:function(){return i},mergeBidderConfig:function(e){return m(e,!0)}}}const config=newConfig();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var i=function e(){if(this instanceof e){var i=[null];return i.push.apply(i,arguments),new(Function.bind.apply(t,i))}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),i}var justClone=clone$1;function clone$1(e){var t=Array.isArray(e)?[]:{};for(var i in e){var r=e[i];t[i]=r&&"object"==typeof r?clone$1(r):r}return t}const clone$2=getDefaultExportFromCjs(justClone),SUCCESS=0,FAIL=1,_GreedyPromise=class e{constructor(e){if(__privateAdd(this,_result,void 0),__privateAdd(this,_callbacks,void 0),"function"!=typeof e)throw new Error("resolver not a function");const t=[],i=[];let[r,n]=[SUCCESS,FAIL].map((e=>function(a){if(e===SUCCESS&&"function"==typeof(null==a?void 0:a.then))a.then(r,n);else if(!t.length)for(t.push(e,a);i.length;)i.shift()()}));try{e(r,n)}catch(a){n(a)}__privateSet(this,_result,t),__privateSet(this,_callbacks,i)}static timeout(t=0){return new e((e=>{0===t?e():setTimeout(e,t)}))}then(e,t){const i=__privateGet(this,_result);return new this.constructor(((r,n)=>{const a=()=>{let a=i[1],[o,s]=i[0]===SUCCESS?[e,r]:[t,n];if("function"==typeof o){try{a=o(a)}catch(d){return void n(d)}s=r}s(a)};i.length?a():__privateGet(this,_callbacks).push(a)}))}catch(e){return this.then(null,e)}finally(e){let t;return this.then((i=>(t=i,e())),(i=>(t=this.constructor.reject(i),e()))).then((()=>t))}static race(e){return new this(((t,i)=>{__privateMethod(this,_collect,collect_fn).call(this,e,((e,r)=>e?t(r):i(r)))}))}static all(e){return new this(((t,i)=>{let r=[];__privateMethod(this,_collect,collect_fn).call(this,e,((e,t,n)=>e?r[n]=t:i(t)),(()=>t(r)))}))}static allSettled(e){return new this((t=>{let i=[];__privateMethod(this,_collect,collect_fn).call(this,e,((e,t,r)=>i[r]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}),(()=>t(i)))}))}static resolve(e){return new this((t=>t(e)))}static reject(e){return new this(((t,i)=>i(e)))}};_result=new WeakMap,_callbacks=new WeakMap,_collect=new WeakSet,collect_fn=function(e,t,i){let r=e.length;function n(){t.apply(this,arguments),--r<=0&&i&&i()}0===e.length&&i?i():e.forEach(((e,t)=>this.resolve(e).then((e=>n(!0,e,t)),(e=>n(!1,e,t)))))},__privateAdd(_GreedyPromise,_collect);let GreedyPromise=_GreedyPromise;function defer({promiseFactory:e=(e=>new GreedyPromise(e))}={}){function t(e){return t=>e(t)}let i,r;return{promise:e(((e,t)=>{i=e,r=t})),resolve:t(i),reject:t(r)}}const scope=window,global=scope.slmpbjs=scope.slmpbjs||{};function getGlobal(){return global}function dlv(e,t,i,r,n){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:n;return e===n?i:e}function dset(e,t,i){t.split&&(t=t.split("."));for(var r,n,a=0,o=t.length,s=e;a<o&&"__proto__"!==(n=t[a++])&&"constructor"!==n&&"prototype"!==n;)s=s[n]=a===o?i:typeof(r=s[n])==typeof t?r:0*t[a]!=0||~(""+t[a]).indexOf(".")?{}:[]}global.cmd=global.cmd||[],global.que=global.que||[],scope===window&&(scope._pbjsGlobals=scope._pbjsGlobals||[],scope._pbjsGlobals.push("slmpbjs"));var tStr="String",tFn="Function",tNumb="Number",tObject="Object",tBoolean="Boolean",toString=Object.prototype.toString;let consoleExists=Boolean(window.console),consoleLogExists=Boolean(consoleExists&&window.console.log),consoleInfoExists=Boolean(consoleExists&&window.console.info),consoleWarnExists=Boolean(consoleExists&&window.console.warn),consoleErrorExists=Boolean(consoleExists&&window.console.error),eventEmitter;const pbjsInstance$3=getGlobal();function _setEventEmitter(e){eventEmitter=e}function emitEvent(...e){null!=eventEmitter&&eventEmitter(...e)}const internal={checkCookieSupport:checkCookieSupport,createTrackPixelIframeHtml:createTrackPixelIframeHtml,getWindowSelf:getWindowSelf,getWindowTop:getWindowTop,getWindowLocation:getWindowLocation,insertUserSyncIframe:insertUserSyncIframe,insertElement:insertElement,isFn:isFn,triggerPixel:triggerPixel,logError:logError,logWarn:logWarn,logMessage:logMessage,logInfo:logInfo,parseQS:parseQS,formatQS:formatQS,deepEqual:deepEqual};let prebidInternal={};function getPrebidInternal(){return prebidInternal}var getIncrementalInteger=(count=0,function(){return++count}),count;function getUniqueIdentifierStr(){return getIncrementalInteger()+Math.random().toString(16).substr(2)}function generateUUID(e){return e?(e^_getRandomData()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,generateUUID)}function _getRandomData(){return window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random()}function getBidIdParameter(e,t){return(null==t?void 0:t[e])||""}function parseQueryStringParameters(e){let t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+"="+encodeURIComponent(e[i])+"&");return t=t.replace(/&$/,""),t}function transformAdServerTargetingObj(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"):""}function parseSizesInput(e){return"string"==typeof e?e.split(",").filter((e=>e.match(/^(\d)+x(\d)+$/i))):"object"==typeof e?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[parseGPTSingleSizeArray(e)]:e.map(parseGPTSingleSizeArray):[]}function parseGPTSingleSizeArray(e){if(isValidGPTSingleSize(e))return e[0]+"x"+e[1]}function isValidGPTSingleSize(e){return isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function getWindowTop(){return window.top}function getWindowSelf(){return window.self}function getWindowLocation(){return window.location}function logMessage(){debugTurnedOn()&&consoleLogExists&&console.log.apply(console,decorateLog(arguments,"MESSAGE:"))}function logInfo(){debugTurnedOn()&&consoleInfoExists&&console.info.apply(console,decorateLog(arguments,"INFO:"))}function logWarn(){debugTurnedOn()&&consoleWarnExists&&console.warn.apply(console,decorateLog(arguments,"WARNING:")),emitEvent(EVENTS$1.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function logError(){debugTurnedOn()&&consoleErrorExists&&console.error.apply(console,decorateLog(arguments,"ERROR:")),emitEvent(EVENTS$1.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function prefixLog(e){function t(t){return function(...i){t(e,...i)}}return{logError:t(logError),logWarn:t(logWarn),logMessage:t(logMessage),logInfo:t(logInfo)}}function decorateLog(e,t){e=[].slice.call(e);let i=config.getCurrentBidder();return t&&e.unshift(t),i&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(i?`%c${i}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function debugTurnedOn(){return!!config.getConfig("debug")}const createIframe=(()=>{const e={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"};return(t,i,r={})=>{const n=t.createElement("iframe");return Object.assign(n,Object.assign({},e,i)),Object.assign(n.style,r),n}})();function createInvisibleIframe(){return createIframe(document,{id:getUniqueIdentifierStr(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function getParameterByName(e){return parseQS(getWindowLocation().search)[e]||""}function isA(e,t){return toString.call(e)==="[object "+t+"]"}function isFn(e){return isA(e,tFn)}function isStr(e){return isA(e,tStr)}const isArray=Array.isArray.bind(Array);function isNumber(e){return isA(e,tNumb)}function isPlainObject(e){return isA(e,tObject)}function isBoolean(e){return isA(e,tBoolean)}function isEmpty(e){return!e||(isArray(e)||isStr(e)?!(e.length>0):Object.keys(e).length<=0)}function isEmptyStr(e){return isStr(e)&&(!e||0===e.length)}function _each(e,t){if(isFn(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach((([e,i])=>t.call(this,i,e)))}function contains(e,t){return isFn(null==e?void 0:e.includes)&&e.includes(t)}function _map(e,t){return isFn(null==e?void 0:e.map)?e.map(t):Object.entries(e||{}).map((([i,r])=>t(r,i,e)))}function insertElement(e,t,i,r){let n;t=t||document,n=i?t.getElementsByTagName(i):t.getElementsByTagName("head");try{if(n=n.length?n:t.getElementsByTagName("body"),n.length){n=n[0];let t=r?null:n.firstChild;return n.insertBefore(e,t)}}catch(a){}}function waitForElementToLoad(e,t){let i=null;return new GreedyPromise((r=>{const n=function(){e.removeEventListener("load",n),e.removeEventListener("error",n),null!=i&&window.clearTimeout(i),r()};e.addEventListener("load",n),e.addEventListener("error",n),null!=t&&(i=window.setTimeout(n,t))}))}function triggerPixel(e,t,i){const r=new Image;t&&internal.isFn(t)&&waitForElementToLoad(r,i).then(t),r.src=e}function callBurl({source:e,burl:t}){e===S2S.SRC&&t&&internal.triggerPixel(t)}function insertHtmlIntoIframe(e){if(!e)return;const t=createInvisibleIframe();var i;internal.insertElement(t,document,"body"),(i=t.contentWindow.document).open(),i.write(e),i.close()}function insertUserSyncIframe(e,t,i){let r=internal.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),n=document.createElement("div");n.innerHTML=r;let a=n.firstChild;t&&internal.isFn(t)&&waitForElementToLoad(a,i).then(t),internal.insertElement(a,document,"html",!0)}function createTrackPixelHtml(e,t=encodeURI){if(!e)return"";let i='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return i+='<img src="'+t(e)+'"></div>',i}function encodeMacroURI(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map((e=>e[1])).reduce(((e,t)=>e.replace("$"+encodeURIComponent(t),"$"+t)),encodeURI(e))}function createTrackPixelIframeHtml(e,t=!0,i=""){return e?(t&&(e=encodeURI(e)),i&&(i=`sandbox="${i}"`),`<iframe ${i} id="${getUniqueIdentifierStr()}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""}function uniques(e,t,i){return i.indexOf(e)===t}function flatten$1(e,t){return e.concat(t)}function getBidRequest$1(e,t){if(e)return t.flatMap((e=>e.bids)).find((t=>["bidId","adId","bid_id"].some((i=>t[i]===e))))}function getValue(e,t){return e[t]}function getBidderCodes(e=pbjsInstance$3.adUnits){return e.map((e=>e.bids.map((e=>e.bidder)).reduce(flatten$1,[]))).reduce(flatten$1,[]).filter((e=>void 0!==e)).filter(uniques)}function isGptPubadsDefined(){if(window.googletag&&isFn(window.googletag.pubads)&&isFn(window.googletag.pubads().getSlots))return!0}function isApnGetTagDefined(){if(window.apntag&&isFn(window.apntag.getTag))return!0}function shuffle(e){let t=e.length;for(;t>0;){let i=Math.floor(Math.random()*t);t--;let r=e[t];e[t]=e[i],e[i]=r}return e}function deepClone(e){return clone$2(e)}function inIframe(){try{return internal.getWindowSelf()!==internal.getWindowTop()}catch(e){return!0}}function isSafariBrowser(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function replaceMacros(e,t){if(e)return Object.entries(t).reduce(((e,[t,i])=>e.replace(new RegExp("\\$\\{"+t+"\\}","g"),i||"")),e)}function replaceAuctionPrice(e,t){return replaceMacros(e,{AUCTION_PRICE:t})}function timestamp(){return(new Date).getTime()}function getPerformanceNow(){return window.performance&&window.performance.now&&window.performance.now()||0}function hasDeviceAccess(){return!1!==config.getConfig("deviceAccess")}function checkCookieSupport(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function delayExecution(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let i=0;return function(){i++,i===t&&e.apply(this,arguments)}}function groupBy(e,t){return e.reduce((function(e,i){return(e[i[t]]=e[i[t]]||[]).push(i),e}),{})}function getDefinedParams(e,t){return t.filter((t=>e[t])).reduce(((t,i)=>Object.assign(t,{[i]:e[i]})),{})}function isValidMediaTypes(e){const t=["banner","native","video"];return!!Object.keys(e).every((e=>includes$1(t,e)))&&(!e.video||!e.video.context||includes$1(["instream","outstream","adpod"],e.video.context))}function getUserConfiguredParams(e,t,i){return e.filter((e=>e.code===t)).flatMap((e=>e.bids)).filter((e=>e.bidder===i)).map((e=>e.params||{}))}function getDNT(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}const compareCodeAndSlot=(e,t)=>e.getAdUnitPath()===t||e.getSlotElementId()===t;function isAdUnitCodeMatchingSlot(e){return t=>compareCodeAndSlot(e,t)}function unsupportedBidderMessage(e,t){const i=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return`\n    ${e.code} is a ${i} ad unit\n    containing bidders that don't support ${i}: ${t}.\n    This bidder won't fetch demand.\n  `}const isInteger=Number.isInteger.bind(Number);function pick(e,t){return"object"!=typeof e?{}:t.reduce(((i,r,n)=>{if("function"==typeof r)return i;let a=r,o=r.match(/^(.+?)\sas\s(.+?)$/i);o&&(r=o[1],a=o[2]);let s=e[r];return"function"==typeof t[n+1]&&(s=t[n+1](s,i)),void 0!==s&&(i[a]=s),i}),{})}function isArrayOfNums(e,t){return isArray(e)&&(!t||e.length===t)&&e.every((e=>isInteger(e)))}function parseQS(e){return e?e.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[i,r]=t.split("=");return/\[\]$/.test(i)?(i=i.replace("[]",""),e[i]=e[i]||[],e[i].push(r)):e[i]=r||"",e}),{}):{}}function formatQS(e){return Object.keys(e).map((t=>Array.isArray(e[t])?e[t].map((e=>`${t}[]=${e}`)).join("&"):`${t}=${e[t]}`)).join("&")}function parseUrl(e,t){let i=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?i.href=e:i.href=decodeURIComponent(e);let r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:i.href,protocol:(i.protocol||"").replace(/:$/,""),hostname:i.hostname,port:+i.port,pathname:i.pathname.replace(/^(?!\/)/,"/"),search:r?i.search:internal.parseQS(i.search||""),hash:(i.hash||"").replace(/^#/,""),host:i.host||window.location.host}}function buildUrl(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?`:${e.port}`:""))+(e.pathname||"")+(e.search?`?${internal.formatQS(e.search||"")}`:"")+(e.hash?`#${e.hash}`:"")}function deepEqual(e,t,{checkTypes:i=!1}={}){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||i&&e.constructor!==t.constructor)return!1;{const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n of r){if(!t.hasOwnProperty(n))return!1;if(!deepEqual(e[n],t[n],{checkTypes:i}))return!1}return!0}}function mergeDeep(e,...t){if(!t.length)return e;const i=t.shift();if(isPlainObject(e)&&isPlainObject(i))for(const r in i)isPlainObject(i[r])?(e[r]||Object.assign(e,{[r]:{}}),mergeDeep(e[r],i[r])):isArray(i[r])?e[r]?isArray(e[r])&&i[r].forEach((t=>{let i=1;for(let n=0;n<e[r].length;n++)if(deepEqual(e[r][n],t)){i=0;break}i&&e[r].push(t)})):Object.assign(e,{[r]:[...i[r]]}):Object.assign(e,{[r]:i[r]});return mergeDeep(e,...t)}function cyrb53Hash(e,t=0){let i=function(e,t){if(isFn(Math.imul))return Math.imul(e,t);var i=(4194303&e)*(t|=0);return 4290772992&e&&(i+=(4290772992&e)*t|0),0|i},r=3735928559^t,n=1103547991^t;for(let a,o=0;o<e.length;o++)a=e.charCodeAt(o),r=i(r^a,2654435761),n=i(n^a,1597334677);return r=i(r^r>>>16,2246822507)^i(n^n>>>13,3266489909),n=i(n^n>>>16,2246822507)^i(r^r>>>13,3266489909),(4294967296*(2097151&n)+(r>>>0)).toString()}function safeJSONParse(e){try{return JSON.parse(e)}catch(t){}}function memoize(e,t=function(e){return e}){const i=new Map,r=function(){const r=t.apply(this,arguments);return i.has(r)||i.set(r,e.apply(this,arguments)),i.get(r)};return r.clear=i.clear.bind(i),r}function setScriptAttributes(e,t){Object.entries(t).forEach((([t,i])=>e.setAttribute(t,i)))}function binarySearch(e,t,i=(e=>e)){let r=0,n=e.length&&e.length-1;const a=i(t);for(;n-r>1;){const t=r+Math.round((n-r)/2);a>i(e[t])?r=t:n=t}for(;e.length>r&&a>i(e[r]);)r++;return r}const dep$4={fetch:window.fetch.bind(window),makeRequest:(e,t)=>new Request(e,t),timeout(e,t){const i=new AbortController;let r=setTimeout((()=>{i.abort(),logError(`Request timeout after ${e}ms`,t),r=null}),e);return{signal:i.signal,done(){r&&clearTimeout(r)}}}},GET="GET",POST="POST",CTYPE="Content-Type";function toFetchRequest(e,t,i={}){const r=i.method||(t?POST:GET);if(r===GET&&t){const r=parseUrl(e,i);Object.assign(r.search,t),e=buildUrl(r)}const n=new Headers(i.customHeaders);n.set(CTYPE,i.contentType||"text/plain");const a={method:r,headers:n};return r!==GET&&t&&(a.body=t),i.withCredentials&&(a.credentials="include"),i.browsingTopics&&isSecureContext&&(a.browsingTopics=!0),dep$4.makeRequest(e,a)}function fetcherFactory(e=3e3,{request:t,done:i}={}){let r=(t,i)=>{let r;null==e||null!=(null==i?void 0:i.signal)||config.getConfig("disableAjaxTimeout")||(r=dep$4.timeout(e,t),i=Object.assign({signal:r.signal},i));let n=dep$4.fetch(t,i);return null!=(null==r?void 0:r.done)&&(n=n.finally(r.done)),n};var n;return null==t&&null==i||(n=r,r=function(e,r){const a=new URL(null==(null==e?void 0:e.url)?e:e.url,document.location).origin;let o=n(e,r);return t&&t(a),i&&(o=o.finally((()=>i(a)))),o}),r}function toXHR({status:e,statusText:t="",headers:i,url:r},n){let a=0;function o(e){var t,r;if(0===a)try{a=(new DOMParser).parseFromString(n,null==(r=null==(t=null==i?void 0:i.get(CTYPE))?void 0:t.split(";"))?void 0:r[0])}catch(o){a=null,e&&e(o)}return a}return{readyState:XMLHttpRequest.DONE,status:e,statusText:t,responseText:n,response:n,responseType:"",responseURL:r,get responseXML(){return o(logError)},getResponseHeader:e=>(null==i?void 0:i.has(e))?i.get(e):null,toJSON(){return Object.assign({responseXML:o()},this)},timedOut:!1}}function attachCallbacks(e,t){const{success:i,error:r}="object"==typeof t&&null!=t?t:{success:"function"==typeof t?t:()=>null,error:(e,t)=>logError("Network error",e,t)};e.then((e=>e.text().then((t=>[e,t])))).then((([e,t])=>{const n=toXHR(e,t);e.ok||304===e.status?i(t,n):r(e.statusText,n)}),(e=>r("",Object.assign(toXHR({status:0},""),{reason:e,timedOut:"AbortError"===(null==e?void 0:e.name)}))))}function ajaxBuilder(e=3e3,{request:t,done:i}={}){const r=fetcherFactory(e,{request:t,done:i});return function(e,t,i,n={}){attachCallbacks(r(toFetchRequest(e,i,n)),t)}}const ajax$1=ajaxBuilder(),fetch$1=fetcherFactory(),ttlBufferInSeconds=15;function wrapURI(e,t){return`<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${e}]]></VASTAdTagURI>\n        ${(t=t&&(Array.isArray(t)?t:[t]))?t.map((e=>`<Impression><![CDATA[${e}]]></Impression>`)).join(""):""}\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`}function toStorageRequest(e,{index:t=auctionManager$1.index}={}){const i=e.vastXml?e.vastXml:wrapURI(e.vastUrl,e.vastImpUrl),r=t.getAuction(e);let n={type:"xml",value:i,ttlseconds:Number(e.ttl)+ttlBufferInSeconds};return config.getConfig("cache.vasttrack")&&(n.bidder=e.bidder,n.bidid=e.requestId,n.aid=e.auctionId),null!=r&&(n.timestamp=r.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(n.key=e.customCacheKey),n}function shimStorageCallback(e){return{success:function(t){let i;try{i=JSON.parse(t).responses}catch(r){return void e(r,[])}i?e(null,i):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,i){e(new Error(`Error storing video ad in the cache: ${t}: ${JSON.stringify(i)}`),[])}}}function store(e,t,i=ajaxBuilder){const r={puts:e.map(toStorageRequest)};i(config.getConfig("cache.timeout"))(config.getConfig("cache.url"),shimStorageCallback(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}function getCacheUrl(e){return`${config.getConfig("cache.url")}?uuid=${e}`}const _requestCache=new WeakMap,_approvedLoadExternalJSList=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","azerionedge","aaxBlockmeter","confiant","arcspan","airgrid","clean.io","a1Media","geoedge","mediafilter","qortex","dynamicAdBoost","contxtful","id5","lucead"];function loadExternalScript(e,t,i,r,n){if(!t||!e)return void logError("cannot load external script without url and moduleCode");if(!includes$1(_approvedLoadExternalJSList,t))return void logError(`${t} not whitelisted for loading external JavaScript`);r||(r=document);const a=d(r,e);if(a)return i&&"function"==typeof i&&(a.loaded?i():a.callbacks.push(i)),a.tag;const o=_requestCache.get(r)||{},s={loaded:!1,tag:null,callbacks:[]};return o[e]=s,_requestCache.set(r,o),i&&"function"==typeof i&&s.callbacks.push(i),logWarn(`module ${t} is loading external JavaScript`),function(t,i,r,n){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;const o=d(r,e);return o&&(o.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,i())}:a.onload=function(){i()},a.src=t,n&&setScriptAttributes(a,n),insertElement(a,r),a}(e,(function(){s.loaded=!0;try{for(let e=0;e<s.callbacks.length;e++)s.callbacks[e]()}catch(e){logError("Error executing callback","adloader.js:loadExternalScript",e)}}),r,n);function d(e,t){const i=_requestCache.get(e);return i&&i[t]?i[t]:null}}const pbjsInstance$2=getGlobal(),moduleCode="outstream";function Renderer(e){const{url:t,config:i,id:r,callback:n,loaded:a,adUnitCode:o,renderNow:s}=e;this.url=t,this.config=i,this.handlers={},this.id=r,this.renderNow=s,this.loaded=a,this.cmd=[],this.push=e=>{"function"==typeof e?this.loaded?e.call():this.cmd.push(e):logError("Commands given to Renderer.push must be wrapped in a function")},this.callback=n||(()=>{this.loaded=!0,this.process()}),this.render=function(){const e=arguments,i=()=>{this._render?this._render.apply(this,e):logWarn("No render function was provided, please use .setRender on the renderer")};isRendererPreferredFromAdUnit(o)?(logWarn(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${o}`),i()):s?i():(this.cmd.unshift(i),loadExternalScript(t,moduleCode,this.callback,this.documentContext))}.bind(this)}function isRendererRequired(e){return!(!e||!e.url&&!e.renderNow)}function executeRenderer(e,t,i){let r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,i)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}function isRendererPreferredFromAdUnit(e){const t=find(pbjsInstance$2.adUnits,(t=>t.code===e));if(!t)return!1;const i=dlv(t,"renderer"),r=!!(i&&i.url&&i.render),n=dlv(t,"mediaTypes.video.renderer"),a=!!(n&&n.url&&n.render);return!!(r&&!0!==i.backupOnly||a&&!0!==n.backupOnly)}Renderer.install=function({url:e,config:t,id:i,callback:r,loaded:n,adUnitCode:a,renderNow:o}){return new Renderer({url:e,config:t,id:i,callback:r,loaded:n,adUnitCode:a,renderNow:o})},Renderer.prototype.getConfig=function(){return this.config},Renderer.prototype.setRender=function(e){this._render=e},Renderer.prototype.setEventHandlers=function(e){this.handlers=e},Renderer.prototype.handleVideoEvent=function({id:e,eventName:t}){"function"==typeof this.handlers[t]&&this.handlers[t](),logMessage(`Prebid Renderer event for id ${e} type ${t}`)},Renderer.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){logError("Error processing Renderer command: ",e)}};class ScopedSettings{constructor(e,t){__privateAdd(this,_resolveScope),this.getSettings=e,this.defaultScope=t}get(e,t){let i=this.getOwn(e,t);return void 0===i&&(i=this.getOwn(null,t)),i}getOwn(e,t){return e=__privateMethod(this,_resolveScope,resolveScope_fn).call(this,e),dlv(this.getSettings(),`${e}.${t}`)}getScopes(){return Object.keys(this.getSettings()).filter((e=>e!==this.defaultScope))}settingsFor(e){return mergeDeep({},this.ownSettingsFor(null),this.ownSettingsFor(e))}ownSettingsFor(e){return e=__privateMethod(this,_resolveScope,resolveScope_fn).call(this,e),this.getSettings()[e]||{}}}_resolveScope=new WeakSet,resolveScope_fn=function(e){return null==e?this.defaultScope:e};const bidderSettings=new ScopedSettings((()=>getGlobal().bidderSettings||{}),JSON_MAPPING.BD_SETTING_STANDARD),MODULE_TYPE_PREBID="prebid",MODULE_TYPE_BIDDER="bidder",MODULE_TYPE_UID="userId",MODULE_TYPE_RTD="rtd",MODULE_TYPE_ANALYTICS="analytics";create.SYNC=1,create.ASYNC=2,create.QUEUE=4;var packageName="fun-hooks";function hasProxy(){return!("function"!=typeof Proxy||!Proxy.revocable)}var defaults=Object.freeze({useProxy:!0,ready:0}),hookableMap=new WeakMap,reduce="2,1,0"===[1].reduce((function(e,t,i){return[e,t,i]}),2).toString()?Array.prototype.reduce:function(e,t){var i,r=Object(this),n=r.length>>>0,a=0;if(t)i=t;else{for(;a<n&&!(a in r);)a++;i=r[a++]}for(;a<n;)a in r&&(i=e(i,r[a],a,r)),a++;return i};function rest(e,t){return Array.prototype.slice.call(e,t)}var assign=Object.assign||function(e){return reduce.call(rest(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(i){e[i]=t[i]})),e}),e)};function runAll(e){for(var t;t=e.shift();)t()}function create(e){var t,i={},r=[];function n(e,t){return"function"==typeof e?d.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?d.apply(null,arguments):"object"==typeof e?a.apply(null,arguments):void 0}function a(e,t,i){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var n={},a=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==a.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),a=r[0],o=r[1]||"sync";if(!n[a]){var s=e[a];n[a]=e[a]=d(o,s,i?[i,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return n}function o(e){var n=Array.isArray(e)?e:e.split(".");return reduce.call(n,(function(i,a,o){var d=i[a],l=!1;return d||(o===n.length-1?(t||r.push((function(){l||console.warn(packageName+": referenced '"+e+"' but it was never created")})),i[a]=s((function(e){i[a]=e,l=!0}))):i[a]={})}),i)}function s(e){var t=[],i=[],r=function(){},n={before:function(e,i){return o.call(this,t,"before",e,i)},after:function(e,t){return o.call(this,i,"after",e,t)},getHooks:function(e){var r=t.concat(i);"object"==typeof e&&(r=r.filter((function(t){return Object.keys(e).every((function(i){return t[i]===e[i]}))})));try{assign(r,{remove:function(){return r.forEach((function(e){e.remove()})),this}})}catch(n){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},a={install:function(n,a,o){this.type=n,r=o,o(t,i),e&&e(a)}};return hookableMap.set(n.after,a),n;function o(e,n,a,o){var s={hook:a,type:n,priority:o||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),r(t,i))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),r(t,i),this}}function d(i,n,a){var d=n.after&&hookableMap.get(n.after);if(d){if(d.type!==i)throw packageName+": recreated hookable with different type";return n}var l,c,p=a?o(a):s(),u={get:function(e,t){return p[t]||Reflect.get.apply(Reflect,arguments)}};return t||r.push(m),e.useProxy&&hasProxy()?c=new Proxy(n,u):(c=function(){return u.apply?u.apply(n,this,rest(arguments)):n.apply(this,arguments)},assign(c,p)),hookableMap.get(c.after).install(i,c,(function(e,t){var r,n=[];function a(e){n.push(e.hook)}e.length||t.length?(e.forEach(a),r=n.push(void 0)-1,t.forEach(a),l=function(e,t,a){var o,s=0,d="async"===i&&"function"==typeof a[a.length-1]&&a.pop();function l(e){"sync"===i?o=e:d&&d.apply(null,arguments)}function c(e){if(n[s]){var r=rest(arguments);return c.bail=l,r.unshift(c),n[s++].apply(t,r)}"sync"===i?o=e:d&&d.apply(null,arguments)}return n[r]=function(){var r=rest(arguments,1);"async"===i&&d&&(delete c.bail,r.push(c));var n=e.apply(t,r);"sync"===i&&c(n)},c.apply(null,a),o}):l=void 0,m()})),c;function m(){!t&&("sync"!==i||e.ready&create.SYNC)&&("async"!==i||e.ready&create.ASYNC)?"sync"!==i&&e.ready&create.QUEUE?u.apply=function(){var e=arguments;r.push((function(){c.apply(e[1],e[2])}))}:u.apply=function(){throw packageName+": hooked function not ready"}:u.apply=l}}return(e=assign({},defaults,e)).ready?n.ready=function(){t=!0,runAll(r)}:t=!0,n.get=o,n}var noEval=create;const funHooks=getDefaultExportFromCjs(noEval);let hook=funHooks({ready:funHooks.SYNC|funHooks.ASYNC|funHooks.QUEUE});const readyCtl=defer();hook.ready=(()=>{const e=hook.ready;return function(){try{return e.apply(hook,arguments)}finally{readyCtl.resolve()}}})();const ready=readyCtl.promise,getHook=hook.get;function setupBeforeHookFnOnce(e,t,i=15){0===e.getHooks({hook:t}).length&&e.before(t,i)}const submoduleInstallMap={};function module(e,t,{postInstallAllowed:i=!1}={}){hook("async",(function(r){r.forEach((e=>t(...e))),i&&(submoduleInstallMap[e]=t)}),e)([])}function submodule(e,...t){const i=submoduleInstallMap[e];if(i)return i(...t);getHook(e).before(((e,i)=>{i.push(t),e(i)}))}function wrapHook(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((t=>[t,{get:()=>e[t]}])))),t}const ACTIVITY_PARAM_COMPONENT="component",ACTIVITY_PARAM_COMPONENT_TYPE=ACTIVITY_PARAM_COMPONENT+"Type",ACTIVITY_PARAM_COMPONENT_NAME=ACTIVITY_PARAM_COMPONENT+"Name",ACTIVITY_PARAM_ADAPTER_CODE="adapterCode",ACTIVITY_PARAM_STORAGE_TYPE="storageType",ACTIVITY_PARAM_S2S_NAME="configName",ACTIVITY_PARAM_SYNC_TYPE="syncType",ACTIVITY_PARAM_SYNC_URL="syncUrl",ACTIVITY_PARAM_ANL_CONFIG="_config";function activityParamsBuilder(e){return function(t,i,r){const n={[ACTIVITY_PARAM_COMPONENT_TYPE]:t,[ACTIVITY_PARAM_COMPONENT_NAME]:i,[ACTIVITY_PARAM_COMPONENT]:`${t}.${i}`};return t===MODULE_TYPE_BIDDER&&(n[ACTIVITY_PARAM_ADAPTER_CODE]=e(i)),buildActivityParams(Object.assign(n,r))}}const buildActivityParams=hook("sync",(e=>e));function ruleRegistry(e=prefixLog("Activity control:")){const t={};function i(e){return t[e]=t[e]||[]}function r(t,i,r,n){let a;try{a=r(n)}catch(o){e.logError(`Exception in rule ${i} for '${t}'`,o),a={allow:!1,reason:o}}return a&&Object.assign({activity:t,name:i,component:n[ACTIVITY_PARAM_COMPONENT]},a)}const n={};function a({activity:t,name:i,allow:r,reason:a,component:o}){const s=`${i} ${r?"allowed":"denied"} '${t}' for '${o}'${a?":":""}`,d=n.hasOwnProperty(s);if(d&&clearTimeout(n[s]),n[s]=setTimeout((()=>delete n[s]),1e3),!d){const t=[s];a&&t.push(a),(r?e.logInfo:e.logWarn).apply(e,t)}}return[function(e,t,r,n=10){const a=i(e),o=a.findIndex((([e])=>n<e)),s=[n,t,r];return a.splice(o<0?a.length:o,0,s),function(){const e=a.indexOf(s);e>=0&&a.splice(e,1)}},function(e,t){let n,o;for(const[s,d,l]of i(e)){if(n!==s&&o)break;n=s;const i=r(e,d,l,t);if(i){if(!i.allow)return a(i),!1;o=i}}return o&&a(o),!0}]}const[registerActivityControl,isActivityAllowed]=ruleRegistry(),ACTIVITY_ACCESS_DEVICE="accessDevice",ACTIVITY_SYNC_USER="syncUser",ACTIVITY_ENRICH_UFPD="enrichUfpd",ACTIVITY_ENRICH_EIDS="enrichEids",ACTIVITY_FETCH_BIDS="fetchBids",ACTIVITY_REPORT_ANALYTICS="reportAnalytics",ACTIVITY_TRANSMIT_EIDS="transmitEids",ACTIVITY_TRANSMIT_UFPD="transmitUfpd",ACTIVITY_TRANSMIT_PRECISE_GEO="transmitPreciseGeo",ACTIVITY_TRANSMIT_TID="transmitTid",activityParams$2=activityParamsBuilder((e=>adaptermanager.resolveAlias(e))),STORAGE_TYPE_LOCALSTORAGE$1="html5",STORAGE_TYPE_COOKIES$1="cookie";let storageCallbacks=[];function newStorageManager({moduleName:e,moduleType:t}={},{isAllowed:i=isActivityAllowed}={}){function r(r,n){let a=e;const o=config.getCurrentBidder();return o&&t===MODULE_TYPE_BIDDER&&adaptermanager.aliasRegistry[o]===e&&(a=o),r({valid:i(ACTIVITY_ACCESS_DEVICE,activityParams$2(t,a,{[ACTIVITY_PARAM_STORAGE_TYPE]:n}))})}function n(e,t,i){if(!i||"function"!=typeof i)return r(e,t);storageCallbacks.push((function(){let n=r(e,t);i(n)}))}const a=function(e){return n((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(t){logError("Local storage api disabled")}return!1}),STORAGE_TYPE_LOCALSTORAGE$1,e)};return{setCookie:function(e,t,i,r,a,o){return n((function(n){if(n&&n.valid){const n=a&&""!==a?` ;domain=${encodeURIComponent(a)}`:"",o=i&&""!==i?` ;expires=${i}`:"",s=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie=`${e}=${encodeURIComponent(t)}${o}; path=/${n}${r?`; SameSite=${r}`:""}${s}`}}),STORAGE_TYPE_COOKIES$1,o)},getCookie:function(e,t){return n((function(t){if(t&&t.valid){let t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}return null}),STORAGE_TYPE_COOKIES$1,t)},localStorageIsEnabled:function(e){return n((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(t){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(t){}}return!1}),STORAGE_TYPE_LOCALSTORAGE$1,e)},cookiesAreEnabled:function(e){return n((function(e){return!(!e||!e.valid)&&checkCookieSupport()}),STORAGE_TYPE_COOKIES$1,e)},setDataInLocalStorage:function(e,t,i){return n((function(i){i&&i.valid&&a()&&window.localStorage.setItem(e,t)}),STORAGE_TYPE_LOCALSTORAGE$1,i)},getDataFromLocalStorage:function(e,t){return n((function(t){return t&&t.valid&&a()?window.localStorage.getItem(e):null}),STORAGE_TYPE_LOCALSTORAGE$1,t)},removeDataFromLocalStorage:function(e,t){return n((function(t){t&&t.valid&&a()&&window.localStorage.removeItem(e)}),STORAGE_TYPE_LOCALSTORAGE$1,t)},hasLocalStorage:a,findSimilarCookies:function(e,t){return n((function(t){if(t&&t.valid){const t=[];if(hasDeviceAccess()){const i=document.cookie.split(";");for(;i.length;){const r=i.pop();let n=r.indexOf("=");n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(r.slice(n+1)))}}return t}}),STORAGE_TYPE_COOKIES$1,t)}}}function getStorageManager({moduleType:e,moduleName:t,bidderCode:i}={}){function r(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return i?((e&&e!==MODULE_TYPE_BIDDER||t)&&r(),e=MODULE_TYPE_BIDDER,t=i):t&&e||r(),newStorageManager({moduleType:e,moduleName:t})}function getCoreStorageManager(e){return newStorageManager({moduleName:e,moduleType:MODULE_TYPE_PREBID})}function deviceAccessRule(){if(!hasDeviceAccess())return{allow:!1}}function storageAllowedRule(e,t=bidderSettings){if(e[ACTIVITY_PARAM_COMPONENT_TYPE]!==MODULE_TYPE_BIDDER)return;let i=t.get(e[ACTIVITY_PARAM_ADAPTER_CODE],"storageAllowed");if(i&&!0!==i){const t=e[ACTIVITY_PARAM_STORAGE_TYPE];i=Array.isArray(i)?i.some((e=>e===t)):i===t}else i=!!i;return i?void 0:{allow:i}}registerActivityControl(ACTIVITY_ACCESS_DEVICE,"deviceAccess config",deviceAccessRule),registerActivityControl(ACTIVITY_ACCESS_DEVICE,"bidderSettings.*.storageAllowed",storageAllowedRule);const USERSYNC_DEFAULT_CONFIG={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0};config.setDefaults({userSync:deepClone(USERSYNC_DEFAULT_CONFIG)});const storage$g=getCoreStorageManager("usersync");function newUserSync(e){let t={},i={image:[],iframe:[]},r=new Set,n={},a={image:!0,iframe:!1},o=e.config;function s(){if(o.syncEnabled&&e.browserSupportsCookies){try{a.iframe&&d(i.iframe,(e=>{let[t,r]=e;var n,a;logMessage(`Invoking iframe user sync for bidder: ${t}`),insertUserSyncIframe(r),a=t,(n=i).image=n.image.filter((e=>e[0]!==a))})),a.image&&d(i.image,(e=>{let[t,i]=e;logMessage(`Invoking image pixel user sync for bidder: ${t}`),triggerPixel(i)}))}catch(t){return logError("Error firing user syncs",t)}i={image:[],iframe:[]}}}function d(e,t){shuffle(e).forEach(t)}return config.getConfig("userSync",(e=>{if(e.userSync){let t=e.userSync.filterSettings;isPlainObject(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}o=Object.assign(o,e.userSync)})),e.regRule(ACTIVITY_SYNC_USER,"userSync config",(e=>{if(!o.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[ACTIVITY_PARAM_COMPONENT_TYPE]===MODULE_TYPE_BIDDER){const i=e[ACTIVITY_PARAM_SYNC_TYPE],r=e[ACTIVITY_PARAM_COMPONENT_NAME];if(!t.canBidderRegisterSync(i,r))return{allow:!1,reason:`${i} syncs are not enabled for ${r}`}}})),t.registerSync=(t,a,s)=>r.has(a)?logMessage(`already fired syncs for "${a}", ignoring registerSync call`):o.syncEnabled&&isArray(i[t])?a?0!==o.syncsPerBidder&&Number(n[a])>=o.syncsPerBidder?logWarn(`Number of user syncs exceeded for "${a}"`):void(e.isAllowed(ACTIVITY_SYNC_USER,activityParams$2(MODULE_TYPE_BIDDER,a,{[ACTIVITY_PARAM_SYNC_TYPE]:t,[ACTIVITY_PARAM_SYNC_URL]:s}))&&(i[t].push([a,s]),n=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(n,a))):logWarn("Bidder is required for registering sync"):logWarn(`User sync type "${t}" not supported`),t.bidderDone=r.add.bind(r),t.syncUsers=(e=0)=>{if(e)return setTimeout(s,Number(e));s()},t.triggerUserSyncs=()=>{o.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=(e,t)=>!o.filterSettings||!function l(e,t){let i=o.filterSettings;if(function(e,t){if(e.all&&e[t])return logWarn(`Detected presence of the "filterSettings.all" and "filterSettings.${t}" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.`),!1;let i=e.all?e.all:e[t],r=e.all?"all":t;if(!i)return!1;let n=i.filter,a=i.bidders;return n&&"include"!==n&&"exclude"!==n?(logWarn(`UserSync "filterSettings.${r}.filter" setting '${n}' is not a valid option; use either 'include' or 'exclude'.`),!1):!!("*"===a||Array.isArray(a)&&a.length>0&&a.every((e=>isStr(e)&&"*"!==e)))||(logWarn(`Detected an invalid setup in userSync "filterSettings.${r}.bidders"; use either '*' (to represent all bidders) or an array of bidders.`),!1)}(i,e)){a[e]=!0;let r=i.all?i.all:i[e],n="*"===r.bidders?[t]:r.bidders;return{include:(e,t)=>!includes$1(e,t),exclude:(e,t)=>includes$1(e,t)}[r.filter||"include"](n,t)}return!a[e]}(e,t),t}const userSync=newUserSync(Object.defineProperties({config:config.getConfig("userSync"),isAllowed:isActivityAllowed,regRule:registerActivityControl},{browserSupportsCookies:{get:function(){return!isSafariBrowser()&&storage$g.cookiesAreEnabled()}}})),OUTSTREAM$1="outstream",INSTREAM="instream";function fillVideoDefaults(e){var t;const i=null==(t=null==e?void 0:e.mediaTypes)?void 0:t.video;null!=i&&null==i.plcmt&&(i.context===OUTSTREAM$1||[2,3,4].includes(i.placement)?i.plcmt=4:i.context!==OUTSTREAM$1&&[2,6].includes(i.playbackmethod)&&(i.plcmt=2))}function isValidVideoBid(e,{index:t=auctionManager$1.index}={}){const i=dlv(t.getMediaTypes(e),"video"),r=i&&dlv(i,"context"),n=i&&dlv(i,"useCacheKey"),a=t.getAdUnit(e);return checkVideoBidSetup(e,a,i,r,n)}const checkVideoBidSetup=hook("sync",(function(e,t,i,r,n){return i&&(n||r!==OUTSTREAM$1)?config.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(logError('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with slmpbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===OUTSTREAM$1&&!n&&!(e.renderer||t&&t.renderer||i.renderer))}),"checkVideoBidSetup"),NATIVE$1="native",VIDEO="video",BANNER="banner",ADPOD="adpod";function ttlCollection({startTime:e=timestamp,ttl:t=(()=>null),monotonic:i=!1,slack:r=5e3}={}){const n=new Map,a=[],o=[],s=i?e=>o.push(e):e=>o.splice(binarySearch(o,e,(e=>e.expiry)),0,e);let d,l;function c(){if(l&&clearTimeout(l),o.length>0){const e=timestamp();d=Math.max(e,o[0].expiry+r),l=setTimeout((()=>{const e=timestamp();let t=0;for(const i of o){if(i.expiry>e)break;a.forEach((e=>{try{e(i.item)}catch(t){logError(t)}})),n.delete(i.item),t++}o.splice(0,t),l=null,c()}),d-e)}else l=null}function p(i){const n={},a=u;let o;const[p,m]=Object.entries({start:e,delta:t}).map((([e,t])=>{let p;return function(){const m=p={};GreedyPromise.resolve(t(i)).then((t=>{m===p&&(n[e]=t,a===u&&null!=n.start&&null!=n.delta&&(o=n.start+n.delta,s(g),(null==l||d>o+r)&&c()))}))}})),g={item:i,refresh:m,get expiry(){return o}};return p(),m(),g}let u={};return{[Symbol.iterator]:()=>n.keys(),add(e){!n.has(e)&&n.set(e,p(e))},clear(){o.length=0,c(),n.clear(),u={}},toArray:()=>Array.from(n.keys()),refresh(){o.length=0,c();for(const e of n.values())e.refresh()},onExpiry:e=>(a.push(e),()=>{const t=a.indexOf(e);t>=0&&a.splice(t,1)})}}const TTL_CONFIG="eventHistoryTTL";let eventTTL=null;const eventsFired=ttlCollection({monotonic:!0,ttl:()=>eventTTL});config.getConfig(TTL_CONFIG,(e=>{const t=eventTTL;e=null==e?void 0:e[TTL_CONFIG],eventTTL="number"==typeof e?1e3*e:null,t!==eventTTL&&eventsFired.refresh()}));let slice=Array.prototype.slice,push=Array.prototype.push,allEvents=Object.values(EVENTS$1);const idPaths=EVENT_ID_PATHS,_public=function(){let e={},t={};function i(e){return allEvents.includes(e)}return t.has=i,t.on=function(t,r,n){if(i(t)){let i=e[t]||{que:[]};n?(i[n]=i[n]||{que:[]},i[n].que.push(r)):i.que.push(r),e[t]=i}else logError("Wrong event name : "+t+" Valid event names :"+allEvents)},t.emit=function(t){!function(t,i){logMessage("Emitting event for: "+t);let r=i[0]||{},n=r[idPaths[t]],a=e[t]||{que:[]};var o=Object.keys(a);let s=[];eventsFired.add({eventType:t,args:r,id:n,elapsedTime:getPerformanceNow()}),n&&o.includes(n)&&push.apply(s,a[n].que),push.apply(s,a.que),(s||[]).forEach((function(e){if(e)try{e.apply(null,i)}catch(r){logError("Error executing handler:","events.js",r,t)}}))}(t,slice.call(arguments,1))},t.off=function(t,i,r){let n=e[t];isEmpty(n)||isEmpty(n.que)&&isEmpty(n[r])||r&&(isEmpty(n[r])||isEmpty(n[r].que))||(r?(n[r].que||[]).forEach((function(e){let t=n[r].que;e===i&&t.splice(t.indexOf(e),1)})):(n.que||[]).forEach((function(e){let t=n.que;e===i&&t.splice(t.indexOf(e),1)})),e[t]=n)},t.get=function(){return e},t.addEvents=function(e){allEvents=allEvents.concat(e)},t.getEvents=function(){return eventsFired.toArray().map((e=>Object.assign({},e)))},t}();_setEventEmitter(_public.emit.bind(_public));const{on:on,off:off,get:get,getEvents:getEvents,emit:emit,addEvents:addEvents,has:has}=_public,CONFIG_TOGGLE="performanceMetrics",getTime=window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),NODES=new WeakMap;function metricsFactory({now:e=getTime,mkNode:t=makeNode,mkTimer:i=makeTimer,mkRenamer:r=(e=>e),nodes:n=NODES}={}){return function(){return function a(o,s=(e=>({forEach(t){t(e)}}))){s=r(s);const d=function(e){return o.dfWalk({visit(t,i){const r=i.timestamps;if(r.hasOwnProperty(e))return r[e]}})};function c(e,t){const i=s(e);o.dfWalk({follow:(e,t)=>t.propagate&&(!e||!e.stopPropagation),visit(e,r){i.forEach((i=>{null==e?r.metrics[i]=t:(r.groups.hasOwnProperty(i)||(r.groups[i]=[]),r.groups[i].push(t))}))}})}function p(t){return i(e,(e=>c(t,e)))}function u(){let e={};return o.dfWalk({visit(t,i){e=Object.assign({},!t||t.includeGroups?i.groups:null,i.metrics,e)}}),e}const m={startTiming:p,measureTime:function(e,t){return p(e).stopAfter(t)()},measureHookTime:function(e,t,i){const r=p(e);return i(function(e){const t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t}(t))},checkpoint:function(t){o.timestamps[t]=e()},timeSince:function(t,i){const r=d(t),n=null!=r?e()-r:null;return null!=i&&c(i,n),n},timeBetween:function(e,t,i){const r=d(e),n=d(t),a=null!=r&&null!=n?n-r:null;return null!=i&&c(i,a),a},setMetric:c,getMetrics:u,fork:function({propagate:e=!0,stopPropagation:i=!1,includeGroups:r=!1}={}){return a(t([[o,{propagate:e,stopPropagation:i,includeGroups:r}]]),s)},join:function(e,{propagate:t=!0,stopPropagation:i=!1,includeGroups:r=!1}={}){const a=n.get(e);null!=a&&a.addParent(o,{propagate:t,stopPropagation:i,includeGroups:r})},newMetrics:function(){return a(o.newSibling(),s)},renameWith:function(e){return a(o,e)},toJSON:()=>u()};return n.set(m,o),m}(t([]))}}function wrapFn(e,t,i){return function(){t&&t();try{return e.apply(this,arguments)}finally{i&&i()}}}function makeTimer(e,t){const i=e();let r=!1;function n(){r||(t(e()-i),r=!0)}return n.stopBefore=e=>wrapFn(e,n),n.stopAfter=e=>wrapFn(e,null,n),n}function makeNode(e){return{metrics:{},timestamps:{},groups:{},addParent(t,i){e.push([t,i])},newSibling:()=>makeNode(e.slice()),dfWalk({visit:t,follow:i=(()=>!0),visited:r=new Set,inEdge:n}={}){let a;if(!r.has(this)){if(r.add(this),a=t(n,this),null!=a)return a;for(const[o,s]of e)if(i(n,s)&&(a=o.dfWalk({visit:t,follow:i,visited:r,inEdge:s}),null!=a))return a}}}}const nullMetrics=(()=>{const e=function(){},t=()=>({}),i={forEach:e},r=()=>null;r.stopBefore=e=>e,r.stopAfter=e=>e;const n=Object.defineProperties({dfWalk:e,newSibling:()=>n,addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((e=>[e,{get:t}]))));return metricsFactory({now:()=>0,mkNode:()=>n,mkRenamer:()=>()=>i,mkTimer:()=>r,nodes:{get:e,set:e}})()})();let enabled=!0;function useMetrics(e){return enabled&&e||nullMetrics}config.getConfig(CONFIG_TOGGLE,(e=>{enabled=!!e[CONFIG_TOGGLE]}));const newMetrics=(()=>{const e=metricsFactory();return function(){return enabled?e():nullMetrics}})();function hookTimer(e,t){return function(i,r){return function(n,...a){const o=this;return useMetrics(t.apply(o,a)).measureHookTime(e+i,n,(function(e){return r.call(o,e,...a)}))}}}const timedAuctionHook=hookTimer("requestBids.",(e=>e.metrics)),timedBidResponseHook=hookTimer("addBidResponse.",((e,t)=>t.metrics));function adjustCpm(e,t,i,{index:r=auctionManager$1.index,bs:n=bidderSettings}={}){i=i||r.getBidRequest(t);const a=null==t?void 0:t.adapterCode,o=(null==t?void 0:t.bidderCode)||(null==i?void 0:i.bidder),s=n.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),d=n.getOwn(o,"bidCpmAdjustment")||n.get(s?a:o,"bidCpmAdjustment");if(d&&"function"==typeof d)try{return d(e,Object.assign({},t),i)}catch(l){logError("Error during bid adjustment",l)}return e}const{syncUsers:syncUsers}=userSync,AUCTION_STARTED="started",AUCTION_IN_PROGRESS="inProgress",AUCTION_COMPLETED="completed";on(EVENTS$1.BID_ADJUSTMENT,(function(e){adjustBids(e)}));const MAX_REQUESTS_PER_ORIGIN=4,outstandingRequests={},sourceInfo={},queuedCalls=[],pbjsInstance$1=getGlobal();function newAuction({adUnits:e,adUnitCodes:t,callback:i,cbTimeout:r,labels:n,auctionId:a,ortb2Fragments:o,metrics:s}){s=useMetrics(s);const d=e,l=n,c=t,p=a||generateUUID(),u=r,m=new Set,g=defer();let f,b,h,y,v=[],I=i,E=[],A=[],_=[],T=[],S=[];function R(){return{auctionId:p,timestamp:f,auctionEnd:b,auctionStatus:y,adUnits:d,adUnitCodes:c,labels:l,bidderRequests:E,noBids:_,bidsReceived:A,bidsRejected:v,winningBids:T,timeout:u,metrics:s,seatNonBids:S}}function C(t){if(t?emit(EVENTS$1.AUCTION_TIMEOUT,R()):clearTimeout(h),void 0===b){let i=[];t&&(logMessage(`Auction ${p} timedOut`),i=E.filter((e=>!m.has(e.bidderRequestId))).flatMap((e=>e.bids)),i.length&&emit(EVENTS$1.BID_TIMEOUT,i)),y=AUCTION_COMPLETED,b=Date.now(),s.checkpoint("auctionEnd"),s.timeBetween("requestBids","auctionEnd","requestBids.total"),s.timeBetween("callBids","auctionEnd","requestBids.callBids"),g.resolve(),emit(EVENTS$1.AUCTION_END,R()),bidsBackCallback(d,(function(){try{if(null!=I){const e=A.filter((e=>c.includes(e.adUnitCode))).reduce(groupByPlacement,{});I.apply(pbjsInstance$1,[e,t,p]),I=null}}catch(r){logError("Error executing bidsBackHandler",null,r)}finally{i.length&&adaptermanager.callTimedOutBidders(e,i,u);let t=config.getConfig("userSync")||{};t.enableOverride||syncUsers(t.syncDelay)}}))}}function w(){config.resetBidder(),logInfo(`Bids Received for Auction with id: ${p}`,A),y=AUCTION_COMPLETED,C(!1)}function N(e){m.add(e)}function O(e){e.forEach((e=>{var t;t=e,E=E.concat(t)}));let t={},i={bidRequests:e,run:()=>{h=setTimeout((()=>C(!0)),u),y=AUCTION_IN_PROGRESS,emit(EVENTS$1.AUCTION_INIT,R());let i=auctionCallbacks(w,this);adaptermanager.callBids(d,e,i.addBidResponse,i.adapterDone,{request(e,i){n(outstandingRequests,i),n(t,e),sourceInfo[e]||(sourceInfo[e]={SRA:!0,origin:i}),t[e]>1&&(sourceInfo[e].SRA=!1)},done(e){outstandingRequests[e]--,queuedCalls[0]&&r(queuedCalls[0])&&queuedCalls.shift()}},u,N,o)}};function r(e){let t=!0,i=config.getConfig("maxRequestsPerOrigin")||MAX_REQUESTS_PER_ORIGIN;return e.bidRequests.some((e=>{let r=1,n=void 0!==e.src&&e.src===S2S.SRC?"s2s":e.bidderCode;return sourceInfo[n]&&(!1===sourceInfo[n].SRA&&(r=Math.min(e.bids.length,i)),outstandingRequests[sourceInfo[n].origin]+r>i&&(t=!1)),!t})),t&&e.run(),t}function n(e,t){void 0===e[t]?e[t]=1:e[t]++}r(i)||(logWarn("queueing auction due to limited endpoint capacity"),queuedCalls.push(i))}return on(EVENTS$1.SEAT_NON_BID,(e=>{var t;e.auctionId===p&&(t=e.seatnonbid,S=S.concat(t))})),{addBidReceived:function(e){A=A.concat(e)},addBidRejected:function(e){v=v.concat(e)},addNoBid:function(e){_=_.concat(e)},callBids:function(){y=AUCTION_STARTED,f=Date.now();let e=s.measureTime("requestBids.makeRequests",(()=>adaptermanager.makeBidRequests(d,f,p,u,l,o,s)));logInfo(`Bids Requested for Auction with id: ${p}`,e),s.checkpoint("callBids"),e.length<1?(logWarn("No valid bid requests returned for auction"),w()):addBidderRequests.call({dispatch:O,context:this},e)},addWinningBid:function(t){const i=e.find((e=>e.adUnitId===t.adUnitId));T=T.concat(t),callBurl(t),adaptermanager.callBidWonBidder(t.adapterCode||t.bidder,t,e),i&&!i.deferBilling&&adaptermanager.callBidBillableBidder(t)},setBidTargeting:function(e){adaptermanager.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:()=>T,getAuctionStart:()=>f,getAuctionEnd:()=>b,getTimeout:()=>u,getAuctionId:()=>p,getAuctionStatus:()=>y,getAdUnits:()=>d,getAdUnitCodes:()=>c,getBidRequests:()=>E,getBidsReceived:()=>A,getNoBids:()=>_,getNonBids:()=>S,getFPD:()=>o,getMetrics:()=>s,end:g.promise}}const addBidResponse=hook("sync",(function(e,t,i){this.dispatch.call(null,e,t)}),"addBidResponse"),responsesReady=hook("sync",(e=>e),"responsesReady"),addBidderRequests=hook("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),bidsBackCallback=hook("async",(function(e,t){t&&t()}),"bidsBackCallback");function auctionCallbacks(e,t,{index:i=auctionManager$1.index}={}){let r=0,n=!1,a=new Set,o={};function s(){r--,n&&0===r&&e()}function d(e,t,i){return o[t.requestId]=!0,addCommonResponseProperties(t,e),r++,i(s)}function l(e,r){d(e,r,(e=>{let n=getPreparedBidForAuction(r);emit(EVENTS$1.BID_ACCEPTED,n),n.mediaType===VIDEO?tryAddVideoBid(t,n,e):(isNativeResponse(n)&&setNativeResponseProperties(n,i.getAdUnit(n)),addBidToAuction(t,n),e())}))}function c(e,i,r){return d(e,i,(e=>{i.rejectionReason=r,logWarn(`Bid from ${i.bidder||"unknown bidder"} was rejected: ${r}`,i),emit(EVENTS$1.BID_REJECTED,i),t.addBidRejected(i),e()}))}function p(){let i=t.getBidRequests();const s=config.getConfig("auctionOptions");if(a.add(this),s&&!isEmpty(s)){const e=s.secondaryBidders;e&&!i.every((t=>includes$1(e,t.bidderCode)))&&(i=i.filter((t=>!includes$1(e,t.bidderCode))))}n=i.every((e=>a.has(e))),this.bids.forEach((e=>{o[e.bidId]||(t.addNoBid(e),emit(EVENTS$1.NO_BID,e))})),n&&0===r&&e()}return{addBidResponse:function(){function e(e,t){addBidResponse.call({dispatch:l},e,t,(()=>{let i=!1;return r=>{i||(c(e,t,r),i=!0)}})())}return e.reject=c,e}(),adapterDone:function(){responsesReady(GreedyPromise.resolve()).finally((()=>p.call(this)))}}}function addBidToAuction(e,t){setupBidTargeting(t),useMetrics(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),emit(EVENTS$1.BID_RESPONSE,t)}function tryAddVideoBid(e,t,i,{index:r=auctionManager$1.index}={}){let n=!0;const a=dlv(r.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}),"video"),o=a&&dlv(a,"context"),s=a&&dlv(a,"useCacheKey");config.getConfig("cache.url")&&(s||o!==OUTSTREAM$1)&&(!t.videoCacheKey||config.getConfig("cache.ignoreBidderCacheKey")?(n=!1,callPrebidCache(e,t,i,a)):t.vastUrl||(logError("videoCacheKey specified but not required vastUrl for video bid"),n=!1)),n&&(addBidToAuction(e,t),i())}const _storeInCache=e=>{store(e.map((e=>e.bidResponse)),(function(t,i){i.forEach(((i,r)=>{const{auctionInstance:n,bidResponse:a,afterBidAdded:o}=e[r];t?logWarn(`Failed to save to the video cache: ${t}. Video bid must be discarded.`):""===i.uuid?logWarn("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(a.videoCacheKey=i.uuid,a.vastUrl||(a.vastUrl=getCacheUrl(a.videoCacheKey)),addBidToAuction(n,a),o())}))}))},storeInCache=_storeInCache;let batchSize,batchTimeout;config.getConfig("cache",(e=>{batchSize="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,batchTimeout="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));const batchingCache=(e=setTimeout,t=storeInCache)=>{let i=[[]],r=!1;const n=e=>e();return function(a,o,s){const d=batchTimeout>0?e:n;i[i.length-1].length>=batchSize&&i.push([]),i[i.length-1].push({auctionInstance:a,bidResponse:o,afterBidAdded:s}),r||(r=!0,d((()=>{i.forEach(t),i=[[]],r=!1}),batchTimeout))}},batchAndStore=batchingCache(),callPrebidCache=hook("async",(function(e,t,i,r){batchAndStore(e,t,i)}),"callPrebidCache");function addCommonResponseProperties(e,t,{index:i=auctionManager$1.index}={}){const r=i.getBidderRequest(e),n=i.getAdUnit(e),a=r&&r.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||timestamp(),requestTimestamp:e.requestTimestamp||a,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==n?void 0:n.ttlBuffer)&&(e.ttlBuffer=n.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}function getPreparedBidForAuction(e,{index:t=auctionManager$1.index}={}){var i;emit(EVENTS$1.BID_ADJUSTMENT,e);const r=(null==(i=t.getBidRequest(e))?void 0:i.renderer)||t.getAdUnit(e).renderer,n=e.mediaType,a=t.getMediaTypes(e),o=a&&a[n];var s=o&&o.renderer,d=null;s&&s.url&&s.render&&(!0!==s.backupOnly||!e.renderer)?d=s:r&&r.url&&r.render&&(!0!==r.backupOnly||!e.renderer)&&(d=r),d&&(e.renderer=Renderer.install({url:d.url,config:d.options}),e.renderer.setRender(d.render));const l=getMediaTypeGranularity(e.mediaType,a,config.getConfig("mediaTypePriceGranularity")),c=getPriceBucketString(e.cpm,"object"==typeof l?l:config.getConfig("customPriceBucket"),config.getConfig("currency.granularityMultiplier"));return e.pbLg=c.low,e.pbMg=c.med,e.pbHg=c.high,e.pbAg=c.auto,e.pbDg=c.dense,e.pbCg=c.custom,e}function setupBidTargeting(e){let t;const i=!0===bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(i||e.dealId)&&(t=getKeyValueTargetingPairs(e.bidderCode,e)),e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}function getMediaTypeGranularity(e,t,i){if(e&&i){if(e===VIDEO){const e=dlv(t,`${VIDEO}.context`,"instream");if(i[`${VIDEO}-${e}`])return i[`${VIDEO}-${e}`]}return i[e]}}const getPriceGranularity$1=(e,{index:t=auctionManager$1.index}={})=>{const i=getMediaTypeGranularity(e.mediaType,t.getMediaTypes(e),config.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":config.getConfig("priceGranularity")},getPriceByGranularity=e=>t=>{const i=e||getPriceGranularity$1(t);return i===GRANULARITY_OPTIONS$1.AUTO?t.pbAg:i===GRANULARITY_OPTIONS$1.DENSE?t.pbDg:i===GRANULARITY_OPTIONS$1.LOW?t.pbLg:i===GRANULARITY_OPTIONS$1.MEDIUM?t.pbMg:i===GRANULARITY_OPTIONS$1.HIGH?t.pbHg:i===GRANULARITY_OPTIONS$1.CUSTOM?t.pbCg:void 0},getCreativeId$1=()=>e=>e.creativeId?e.creativeId:"",getAdvertiserDomain$1=()=>e=>e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:"",getDSP=()=>e=>e.meta&&(e.meta.networkId||e.meta.networkName)?dlv(e,"meta.networkName")||dlv(e,"meta.networkId"):"",getPrimaryCatId=()=>e=>e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:"";function createKeyVal(e,t){return{key:e,val:"function"==typeof t?function(e,i){return t(e,i)}:function(e){return getValue(e,t)}}}function defaultAdserverTargeting(){return[createKeyVal(TARGETING_KEYS.BIDDER,"bidderCode"),createKeyVal(TARGETING_KEYS.AD_ID,"adId"),createKeyVal(TARGETING_KEYS.PRICE_BUCKET,getPriceByGranularity()),createKeyVal(TARGETING_KEYS.SIZE,"size"),createKeyVal(TARGETING_KEYS.DEAL,"dealId"),createKeyVal(TARGETING_KEYS.SOURCE,"source"),createKeyVal(TARGETING_KEYS.FORMAT,"mediaType"),createKeyVal(TARGETING_KEYS.ADOMAIN,getAdvertiserDomain$1()),createKeyVal(TARGETING_KEYS.ACAT,getPrimaryCatId()),createKeyVal(TARGETING_KEYS.DSP,getDSP()),createKeyVal(TARGETING_KEYS.CRID,getCreativeId$1())]}function getStandardBidderSettings(e,t){const i=Object.assign({},bidderSettings.settingsFor(null));if(i[JSON_MAPPING.ADSERVER_TARGETING]||(i[JSON_MAPPING.ADSERVER_TARGETING]=defaultAdserverTargeting()),"video"===e){const e=i[JSON_MAPPING.ADSERVER_TARGETING].slice();if(i[JSON_MAPPING.ADSERVER_TARGETING]=e,[TARGETING_KEYS.UUID,TARGETING_KEYS.CACHE_ID].forEach((t=>{void 0===find(e,(e=>e.key===t))&&e.push(createKeyVal(t,"videoCacheKey"))})),config.getConfig("cache.url")&&(!t||!1!==bidderSettings.get(t,"sendStandardTargeting"))){const t=parseUrl(config.getConfig("cache.url"));void 0===find(e,(e=>e.key===TARGETING_KEYS.CACHE_HOST))&&e.push(createKeyVal(TARGETING_KEYS.CACHE_HOST,(function(e){return dlv(e,`adserverTargeting.${TARGETING_KEYS.CACHE_HOST}`)?e.adserverTargeting[TARGETING_KEYS.CACHE_HOST]:t.hostname})))}}return i}function getKeyValueTargetingPairs(e,t,{index:i=auctionManager$1.index}={}){if(!t)return{};const r=i.getBidRequest(t);var n={};return setKeys(n,getStandardBidderSettings(t.mediaType,e),t,r),e&&bidderSettings.getOwn(e,JSON_MAPPING.ADSERVER_TARGETING)&&(setKeys(n,bidderSettings.ownSettingsFor(e),t,r),t.sendStandardTargeting=bidderSettings.get(e,"sendStandardTargeting")),t.native&&(n=Object.assign({},n,getNativeTargeting(t))),n}function setKeys(e,t,i,r){var n=t[JSON_MAPPING.ADSERVER_TARGETING];return i.size=i.getSize(),(n||[]).forEach((function(n){var a=n.key,o=n.val;if(e[a]&&logWarn("The key: "+a+" is being overwritten"),isFn(o))try{o=o(i,r)}catch(s){logError("bidmanager","ERROR",s)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&a!==TARGETING_KEYS.DEAL&&a!==TARGETING_KEYS.ACAT&&a!==TARGETING_KEYS.DSP&&a!==TARGETING_KEYS.CRID||!isEmptyStr(o)&&null!=o?e[a]=o:logInfo("suppressing empty key '"+a+"' from adserver targeting")})),e}function adjustBids(e){let t=adjustCpm(e.cpm,e);t>=0&&(e.cpm=t)}function groupByPlacement(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function AuctionIndex(e){Object.assign(this,{getAuction({auctionId:t}){if(null!=t)return e().find((e=>e.getAuctionId()===t))},getAdUnit({adUnitId:t}){if(null!=t)return e().flatMap((e=>e.getAdUnits())).find((e=>e.adUnitId===t))},getMediaTypes({adUnitId:e,requestId:t}){if(null!=t){const i=this.getBidRequest({requestId:t});if(null!=i&&(null==e||i.adUnitId===e))return i.mediaTypes}else if(null!=e){const t=this.getAdUnit({adUnitId:e});if(null!=t)return t.mediaTypes}},getBidderRequest({requestId:t,bidderRequestId:i}){if(null!=t||null!=i){let r=e().flatMap((e=>e.getBidRequests()));return null!=i&&(r=r.filter((e=>e.bidderRequestId===i))),null==t?r[0]:r.find((e=>e.bids&&null!=e.bids.find((e=>e.bidId===t))))}},getBidRequest({requestId:t}){if(null!=t)return e().flatMap((e=>e.getBidRequests())).flatMap((e=>e.bids)).find((e=>e&&e.bidId===t))}})}let TTL_BUFFER=1;const listeners=[];function getTTL(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:TTL_BUFFER)}function onTTLBufferChange(e){listeners.push(e)}config.getConfig("ttlBuffer",(e=>{if("number"==typeof e.ttlBuffer){const t=TTL_BUFFER;TTL_BUFFER=e.ttlBuffer,t!==TTL_BUFFER&&listeners.forEach((e=>e(TTL_BUFFER)))}else logError("Invalid value for ttlBuffer",e.ttlBuffer)}));const CACHE_TTL_SETTING="minBidCacheTTL";function newAuctionManager(){let e=null;const t=ttlCollection({startTime:e=>e.end.then((()=>e.getAuctionEnd())),ttl:t=>null==e?null:t.end.then((()=>1e3*Math.max(e,...t.getBidsReceived().map(getTTL))))});onTTLBufferChange((()=>{null!=e&&t.refresh()})),config.getConfig(CACHE_TTL_SETTING,(i=>{const r=e;e=null==i?void 0:i[CACHE_TTL_SETTING],e="number"==typeof e?e:null,r!==e&&t.refresh()}));const i={onExpiry:t.onExpiry};function r(e){for(const i of t)if(i.getAuctionId()===e)return i}function n(){return t.toArray().flatMap((e=>e.getBidsReceived()))}return i.addWinningBid=function(e){const t=useMetrics(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");const i=r(e.auctionId);i?(e.status=BID_STATUS.RENDERED,i.addWinningBid(e)):logWarn("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:e=>e.getAuctionStatus()===AUCTION_COMPLETED},getAdUnitCodes:{post:uniques}}).forEach((([e,{name:r=e,pre:n,post:a}])=>{const o=null==n?e=>e[r]():e=>n(e)?e[r]():[],s=null==a?e=>e:e=>e.filter(a);i[e]=()=>s(t.toArray().flatMap(o))})),i.getAllBidsForAdUnitCode=function(e){return n().filter((t=>t&&t.adUnitCode===e))},i.createAuction=function(e){const i=newAuction(e);return function(e){t.add(e)}(i),i},i.findBidByAdId=function(e){return n().find((t=>t.adId===e))},i.getStandardBidderAdServerTargeting=function(){return getStandardBidderSettings()[JSON_MAPPING.ADSERVER_TARGETING]},i.setStatusForBids=function(e,t){let n=i.findBidByAdId(e);if(n&&(n.status=t),n&&t===BID_STATUS.BID_TARGETING_SET){const e=r(n.auctionId);e&&e.setBidTargeting(n)}},i.getLastAuctionId=function(){const e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},i.clearAllAuctions=function(){t.clear()},i.index=new AuctionIndex((()=>t.toArray())),i}const auctionManager$1=newAuctionManager(),nativeAdapters=[],NATIVE_TARGETING_KEYS=Object.keys(NATIVE_KEYS).map((e=>NATIVE_KEYS[e])),IMAGE={ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}},SUPPORTED_TYPES={image:IMAGE},PREBID_NATIVE_DATA_KEYS_TO_ORTB_INVERSE=inverse(PREBID_NATIVE_DATA_KEYS_TO_ORTB$1),NATIVE_ASSET_TYPES_INVERSE=inverse(NATIVE_ASSET_TYPES),TRACKER_METHODS={img:1,js:2,1:"img",2:"js"},TRACKER_EVENTS={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function isNativeResponse(e){return e.native&&"object"==typeof e.native}function processNativeAdUnitParams(e){if(e&&e.type&&typeIsSupported(e.type)&&(e=SUPPORTED_TYPES[e.type]),!e||!e.ortb||isOpenRTBBidRequestValid(e.ortb))return e}function decorateAdUnitsWithNativeParams(e){e.forEach((e=>{const t=e.nativeParams||dlv(e,"mediaTypes.native");t&&(e.nativeParams=processNativeAdUnitParams(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||toOrtbNativeRequest$1(e.nativeParams))}))}function isOpenRTBBidRequestValid(e){const t=e.assets;if(!Array.isArray(t)||0===t.length)return logError("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;const i=t.map((e=>e.id));return t.length!==new Set(i).size||i.some((e=>e!==parseInt(e,10)))?(logError("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(logError("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((e=>isOpenRTBAssetValid(e)))}function isOpenRTBAssetValid(e){if(!isPlainObject(e))return logError("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!isNumber(e.img.w)&&!isNumber(e.img.wmin))return logError("for img asset there must be 'w' or 'wmin' property"),!1;if(!isNumber(e.img.h)&&!isNumber(e.img.hmin))return logError("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!isNumber(e.title.len))return logError("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!isNumber(e.data.type))return logError("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&isNumber(e.video.minduration)&&isNumber(e.video.maxduration)))return logError("video asset is not properly configured"),!1;return!0}function typeIsSupported(e){return!(!e||!includes$1(Object.keys(SUPPORTED_TYPES),e))||(logError(`${e} nativeParam is not supported`),!1)}function nativeBidIsValid(e,{index:t=auctionManager$1.index}={}){var i;const r=t.getAdUnit(e);if(!r)return!1;let n=r.nativeOrtbRequest;return isNativeOpenRTBBidValid((null==(i=e.native)?void 0:i.ortb)||toOrtbNativeResponse(e.native,n),n)}function isNativeOpenRTBBidValid(e,t){if(!dlv(e,"link.url"))return logError("native response doesn't have 'link' property. Ortb response: ",e),!1;let i=t.assets.filter((e=>1===e.required)).map((e=>e.id)),r=e.assets.map((e=>e.id));const n=i.every((e=>includes$1(r,e)));return n||logError(`didn't receive a bid with all required assets. Required ids: ${i}, but received ids in response: ${r}`),n}function fireNativeTrackers(e,t){const i=t.native.ortb||legacyPropertiesToOrtbNative(t.native);return"click"===e.action?fireClickTrackers(i,null==e?void 0:e.assetId):fireImpressionTrackers(i),e.action}function fireImpressionTrackers(e,{runMarkup:t=(e=>insertHtmlIntoIframe(e)),fetchURL:i=triggerPixel}={}){const r=(e.eventtrackers||[]).filter((e=>e.event===TRACKER_EVENTS.impression));let{img:n,js:a}=r.reduce(((e,t)=>(TRACKER_METHODS.hasOwnProperty(t.method)&&e[TRACKER_METHODS[t.method]].push(t.url),e)),{img:[],js:[]});e.imptrackers&&(n=n.concat(e.imptrackers)),n.forEach((e=>i(e))),a=a.map((e=>`<script async src="${e}"><\/script>`)),e.jstracker&&(a=a.concat([e.jstracker])),a.length&&t(a.join("\n"))}function fireClickTrackers(e,t=null,{fetchURL:i=triggerPixel}={}){var r,n;if(t){const r=(e.assets||[]).filter((e=>e.link)).reduce(((e,t)=>(e[t.id]=t.link,e)),{}),a=(null==(n=e.link)?void 0:n.clicktrackers)||[];let o=r[t],s=a;o&&(s=o.clicktrackers||[]),s.forEach((e=>i(e)))}else((null==(r=e.link)?void 0:r.clicktrackers)||[]).forEach((e=>i(e)))}function setNativeResponseProperties(e,t){var i;const r=null==t?void 0:t.nativeOrtbRequest,n=null==(i=e.native)?void 0:i.ortb;if(r&&n){const t=toLegacyResponse(n,r);Object.assign(e.native,t)}["rendererUrl","adTemplate"].forEach((i=>{var r;const n=null==(r=null==t?void 0:t.nativeParams)?void 0:r[i];n&&(e.native[i]=getAssetValue(n))}))}function getNativeTargeting(e,{index:t=auctionManager$1.index}={}){let i={};const r=t.getAdUnit(e),n=!1!==dlv(r,"nativeParams.sendTargetingKeys"),a=getNativeKeys(r),o={...e.native,...e.native.ext};return delete o.ext,Object.keys(o).forEach((t=>{const o=a[t];let s=getAssetValue(e.native[t])||getAssetValue(dlv(e,`native.ext.${t}`));if("adTemplate"===t||!o||!s)return;let d=dlv(r,`nativeParams.${t}.sendId`);"boolean"!=typeof d&&(d=dlv(r,`nativeParams.ext.${t}.sendId`)),d&&(s=`${o}:${e.adId}`);let l=dlv(r,`nativeParams.${t}.sendTargetingKeys`);"boolean"!=typeof l&&(l=dlv(r,`nativeParams.ext.${t}.sendTargetingKeys`)),("boolean"==typeof l?l:n)&&(i[o]=s)})),i}function getNativeAssets$2(e,t,i=!1){let r=[];return Object.entries(e).filter((([e,r])=>r&&(!1===i&&"ext"===e||null==t||t.includes(e)))).forEach((([e,n])=>{!1===i&&"ext"===e?r.push(...getNativeAssets$2(n,t,!0)):(i||NATIVE_KEYS.hasOwnProperty(e))&&r.push({key:e,value:getAssetValue(n)})})),r}function getNativeRenderingData(e,t,i){var r,n;const a={...getDefinedParams(e.native,["rendererUrl","adTemplate"]),assets:getNativeAssets$2(e.native,i),nativeKeys:NATIVE_KEYS};return e.native.ortb?a.ortb=e.native.ortb:(null==(n=null==(r=t.mediaTypes)?void 0:r.native)?void 0:n.ortb)&&(a.ortb=toOrtbNativeResponse(e.native,t.nativeOrtbRequest)),a}function assetsMessage(e,t,i,{index:r=auctionManager$1.index}={}){return{message:"assetResponse",adId:e.adId,...getNativeRenderingData(t,r.getAdUnit(t),i)}}const NATIVE_KEYS_INVERTED=Object.fromEntries(Object.entries(NATIVE_KEYS).map((([e,t])=>[t,e])));function getAssetMessage(e,t){const i=e.assets.map((e=>NATIVE_KEYS_INVERTED[e]));return assetsMessage(e,t,i)}function getAllAssetsMessage(e,t){return assetsMessage(e,t,null)}function getAssetValue(e){return(null==e?void 0:e.url)||e}function getNativeKeys(e){const t={};return dlv(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((e=>{t[e]=`hb_native_${e}`})),{...NATIVE_KEYS,...t}}function toOrtbNativeRequest$1(e){if(!e&&!isPlainObject(e))return void logError("Native assets object is empty or not an object: ",e);const t={ver:"1.2",assets:[]};for(let i in e){if(NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(i))continue;if(!NATIVE_KEYS.hasOwnProperty(i)){logError(`Unrecognized native asset code: ${i}. Asset will be ignored.`);continue}if("privacyLink"===i){t.privacy=1;continue}const r=e[i];let n=0;r.required&&isBoolean(r.required)&&(n=Number(r.required));const a={id:t.assets.length,required:n};if(i in PREBID_NATIVE_DATA_KEYS_TO_ORTB$1)a.data={type:NATIVE_ASSET_TYPES[PREBID_NATIVE_DATA_KEYS_TO_ORTB$1[i]]},r.len&&(a.data.len=r.len);else if("icon"===i||"image"===i){if(a.img={type:"icon"===i?NATIVE_IMAGE_TYPES.ICON:NATIVE_IMAGE_TYPES.MAIN},r.aspect_ratios)if(isArray(r.aspect_ratios))if(r.aspect_ratios.length){const{min_width:e,min_height:t}=r.aspect_ratios[0];isInteger(e)&&isInteger(t)?(a.img.wmin=e,a.img.hmin=t):logError("image.aspect_ratios min_width or min_height are invalid: ",e,t);const i=r.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));i.length>0&&(a.img.ext={aspectratios:i})}else logError("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else logError("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&isInteger(r.sizes[0])&&isInteger(r.sizes[1])?(a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):logError("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===i?a.title={len:r.len||140}:"ext"===i&&(a.ext=r,delete a.required);t.assets.push(a)}return t}function gcd(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}function fromOrtbNativeRequest(e){if(!isOpenRTBBidRequestValid(e))return;const t={};for(const i of e.assets){if(i.title){const e={required:!!i.required&&Boolean(i.required),len:i.title.len};t.title=e}else if(i.img){const e={required:!!i.required&&Boolean(i.required)};if(i.img.w&&i.img.h)e.sizes=[i.img.w,i.img.h];else if(i.img.wmin&&i.img.hmin){const t=gcd(i.img.wmin,i.img.hmin);e.aspect_ratios=[{min_width:i.img.wmin,min_height:i.img.hmin,ratio_width:i.img.wmin/t,ratio_height:i.img.hmin/t}]}i.img.type===NATIVE_IMAGE_TYPES.MAIN?t.image=e:t.icon=e}else if(i.data){let e=Object.keys(NATIVE_ASSET_TYPES).find((e=>NATIVE_ASSET_TYPES[e]===i.data.type)),r=Object.keys(PREBID_NATIVE_DATA_KEYS_TO_ORTB$1).find((t=>PREBID_NATIVE_DATA_KEYS_TO_ORTB$1[t]===e));t[r]={required:!!i.required&&Boolean(i.required)},i.data.len&&(t[r].len=i.data.len)}e.privacy&&(t.privacyLink={required:!1})}return t}function convertOrtbRequestToProprietaryNative(e){{if(!e||!isArray(e))return e;if(!e.some((e=>{var t;return null==(t=((null==e?void 0:e.mediaTypes)||{})[NATIVE$1])?void 0:t.ortb})))return e;let t=deepClone(e);for(const e of t)e.mediaTypes&&e.mediaTypes[NATIVE$1]&&e.mediaTypes[NATIVE$1].ortb&&(e.mediaTypes[NATIVE$1]=Object.assign(pick(e.mediaTypes[NATIVE$1],NATIVE_KEYS_THAT_ARE_NOT_ASSETS),fromOrtbNativeRequest(e.mediaTypes[NATIVE$1].ortb)),e.nativeParams=processNativeAdUnitParams(e.mediaTypes[NATIVE$1]));return t}}function legacyPropertiesToOrtbNative(e){const t={link:{},eventtrackers:[]};return Object.entries(e).forEach((([e,i])=>{switch(e){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach((e=>{t.eventtrackers.push({event:TRACKER_EVENTS.impression,method:TRACKER_METHODS.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}})),t}function toOrtbNativeResponse(e,t){const i={...legacyPropertiesToOrtbNative(e),assets:[]};function r(e,r){let n=t.assets.find(e);null!=n&&(n=deepClone(n),r(n),i.assets.push(n))}return Object.keys(e).filter((t=>!!e[t])).forEach((t=>{const i=getAssetValue(e[t]);switch(t){case"title":r((e=>null!=e.title),(e=>{e.title={text:i}}));break;case"image":case"icon":const e="image"===t?NATIVE_IMAGE_TYPES.MAIN:NATIVE_IMAGE_TYPES.ICON;r((t=>null!=t.img&&t.img.type===e),(e=>{e.img={url:i}}));break;default:t in PREBID_NATIVE_DATA_KEYS_TO_ORTB$1&&r((e=>null!=e.data&&e.data.type===NATIVE_ASSET_TYPES[PREBID_NATIVE_DATA_KEYS_TO_ORTB$1[t]]),(e=>{e.data={value:i}}))}})),i}function toLegacyResponse(e,t){const i={},r=(null==t?void 0:t.assets)||[];i.clickUrl=e.link.url,i.privacyLink=e.privacy;for(const a of(null==e?void 0:e.assets)||[]){const e=r.find((e=>a.id===e.id));a.title?i.title=a.title.text:a.img?i[e.img.type===NATIVE_IMAGE_TYPES.MAIN?"image":"icon"]={url:a.img.url,width:a.img.w,height:a.img.h}:a.data&&(i[PREBID_NATIVE_DATA_KEYS_TO_ORTB_INVERSE[NATIVE_ASSET_TYPES_INVERSE[e.data.type]]]=a.data.value)}i.impressionTrackers=[];let n=[];e.imptrackers&&i.impressionTrackers.push(...e.imptrackers);for(const a of(null==e?void 0:e.eventtrackers)||[])a.event===TRACKER_EVENTS.impression&&a.method===TRACKER_METHODS.img&&i.impressionTrackers.push(a.url),a.event===TRACKER_EVENTS.impression&&a.method===TRACKER_METHODS.js&&n.push(a.url);return n=n.map((e=>`<script async src="${e}"><\/script>`)),(null==e?void 0:e.jstracker)&&n.push(e.jstracker),n.length&&(i.javascriptTrackers=n.join("\n")),i}function inverse(e){var t={};for(var i in e)t[e[i]]=i;return t}function Adapter(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}function Bid(e,{src:t="client",bidder:i="",bidId:r,transactionId:n,adUnitId:a,auctionId:o}={}){var s=t,d=e||0;Object.assign(this,{bidderCode:i,width:0,height:0,statusMessage:function(){switch(d){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:getUniqueIdentifierStr(),requestId:r,transactionId:n,adUnitId:a,auctionId:o,mediaType:"banner",source:s}),this.getStatusCode=function(){return d},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}function createBid$1(e,t){return new Bid(e,t)}const COMMON_BID_RESPONSE_KEYS=["cpm","ttl","creativeId","netRevenue","currency"],TIDS=["auctionId","transactionId"];function registerBidder(e){const t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function i(e){const i=newBidder(e);adaptermanager.registerBidAdapter(i,e.code,t)}i(e),Array.isArray(e.aliases)&&e.aliases.forEach((t=>{let r,n,a=t;isPlainObject(t)&&(a=t.code,r=t.gvlid,n=t.skipPbsAliasing),adaptermanager.aliasRegistry[a]=e.code,i(Object.assign({},e,{code:a,gvlid:r,skipPbsAliasing:n}))}))}function guardTids(e){if(isActivityAllowed(ACTIVITY_TRANSMIT_TID,activityParams$2(MODULE_TYPE_BIDDER,e)))return{bidRequest:e=>e,bidderRequest:e=>e};function t(e,t,i){return TIDS.includes(t)?null:Reflect.get(e,t,i)}function i(e,t){const i=new Proxy(e,t);return Object.entries(e).filter((([e,t])=>"function"==typeof t)).forEach((([t,r])=>i[t]=r.bind(e))),i}const r=memoize((e=>i(e,{get:t})),(e=>e.bidId));return{bidRequest:r,bidderRequest:e=>i(e,{get:(i,n,a)=>"bids"===n?e.bids.map(r):t(i,n,a)})}}function newBidder(e){return Object.assign(new Adapter(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(i,r,n,a,o,s){if(!Array.isArray(i.bids))return;const d=guardTids(i.bidderCode),l=[];function c(){n(),config.runWithBidder(e.code,(()=>{emit(EVENTS$1.BIDDER_DONE,i),t(l,i.gdprConsent,i.uspConsent,i.gppConsent)}))}const p=adapterMetrics(i).measureTime("validate",(()=>i.bids.filter((t=>function(t){return!!e.isBidRequestValid(t)||(logWarn(`Invalid bid sent to bidder ${e.code}: ${JSON.stringify(t)}`),!1)}(d.bidRequest(t))))));if(0===p.length)return void c();const u={};p.forEach((e=>{u[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),processBidderRequests(e,p.map(d.bidRequest),d.bidderRequest(i),a,s,{onRequest:e=>emit(EVENTS$1.BEFORE_BIDDER_HTTP,i,e),onResponse:t=>{o(e.code),l.push(t)},onPaapi:e=>{const t=u[e.bidId];t?addComponentAuction(t,e.config):logWarn("Received fledge auction configuration for an unknown bidId",e)},onError:(t,r)=>{r.timedOut||o(e.code),adaptermanager.callBidderError(e.code,r,i),emit(EVENTS$1.BIDDER_ERROR,{error:r,bidderRequest:i}),logError(`Server call for ${e.code} failed: ${t} ${r.status}. Continuing without bids.`)},onBid:t=>{const i=u[t.requestId];if(i){if(t.adapterCode=i.bidder,function(e,t){let i=bidderSettings.get(t,"allowAlternateBidderCodes")||!1,r=bidderSettings.get(t,"allowedAlternateBidderCodes");return!!(e&&t&&t!==e&&(r=isArray(r)?r.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(uniques):r,!i||isArray(r)&&"*"!==r[0]&&!r.includes(e)))}(t.bidderCode,i.bidder))return logWarn(`${t.bidderCode} is not a registered partner or known bidder of ${i.bidder}, hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.`),void r.reject(i.adUnitCode,t,REJECTION_REASON.BIDDER_DISALLOWED);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[i.bidder]);const e=Object.assign(createBid$1(STATUS.GOOD,i),t,pick(i,TIDS));!function(e,t){const i=useMetrics(t.metrics);i.checkpoint("addBidResponse"),i.measureTime("addBidResponse.validate",(()=>isValid$1(e,t)))?r(e,t):r.reject(e,t,REJECTION_REASON.INVALID)}(i.adUnitCode,e)}else logWarn(`Bidder ${e.code} made bid for unknown request ID: ${t.requestId}. Ignoring.`),r.reject(null,t,REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:c})}});function t(t,i,r,n){registerSyncInner(e,t,i,r,n)}}const PAAPI_RESPONSE_PROPS=["paapiAuctionConfigs","fledgeAuctionConfigs"],RESPONSE_PROPS=["bids"].concat(PAAPI_RESPONSE_PROPS);function getPaapiConfigs(e){const[t,i]=PAAPI_RESPONSE_PROPS.map((t=>e[t]));if(null!=t&&null!=i)throw new Error(`Adapter response should use ${PAAPI_RESPONSE_PROPS[0]} over ${PAAPI_RESPONSE_PROPS[1]}, not both`);return t??i}const processBidderRequests=hook("sync",(function(e,t,i,r,n,{onRequest:a,onResponse:o,onPaapi:s,onError:d,onBid:l,onCompletion:c}){const p=adapterMetrics(i);c=p.startTiming("total").stopBefore(c);let u=p.measureTime("buildRequests",(()=>e.buildRequests(t,i)));if(!u||0===u.length)return void c();Array.isArray(u)||(u=[u]);const m=delayExecution(c,u.length);u.forEach((t=>{const i=p.fork();function c(e){null!=e&&(e.metrics=i.fork().renameWith()),l(e)}const u=n((function(r,n){f();try{r=JSON.parse(r)}catch(l){}r={body:r,headers:{get:n.getResponseHeader.bind(n)}},o(r);try{r=i.measureTime("interpretResponse",(()=>e.interpretResponse(r,t)))}catch(p){return logError(`Bidder ${e.code} failed to interpret the server's response. Continuing without bids`,null,p),void m()}let a,d;r&&!Object.keys(r).some((e=>!RESPONSE_PROPS.includes(e)))?(a=r.bids,d=getPaapiConfigs(r)):a=r,isArray(d)&&d.forEach(s),a&&(isArray(a)?a.forEach(c):c(a)),m()})),g=n((function(e,t){f(),d(e,t),m()}));a(t);const f=i.startTiming("net");function b(i){const r=t.options;return Object.assign(i,r,{browsingTopics:!((null==r?void 0:r.hasOwnProperty("browsingTopics"))&&!r.browsingTopics)&&(bidderSettings.get(e.code,"topicsHeader")??!0)&&isActivityAllowed(ACTIVITY_TRANSMIT_UFPD,activityParams$2(MODULE_TYPE_BIDDER,e.code))})}switch(t.method){case"GET":r(`${t.url}${function(e){return e?`?${"object"==typeof e?parseQueryStringParameters(e):e}`:""}(t.data)}`,{success:u,error:g},void 0,b({method:"GET",withCredentials:!0}));break;case"POST":r(t.url,{success:u,error:g},"string"==typeof t.data?t.data:JSON.stringify(t.data),b({method:"POST",contentType:"text/plain",withCredentials:!0}));break;default:logWarn(`Skipping invalid request from ${e.code}. Request type ${t.type} must be GET or POST`),m()}}))}),"processBidderRequests"),registerSyncInner=hook("async",(function(e,t,i,r,n){const a=config.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(a||!adaptermanager.aliasRegistry[e.code])){let a=config.getConfig("userSync.filterSettings"),o=e.getUserSyncs({iframeEnabled:!(!a||!a.iframe&&!a.all),pixelEnabled:!(!a||!a.image&&!a.all)},t,i,r,n);o&&(Array.isArray(o)||(o=[o]),o.forEach((t=>{userSync.registerSync(t.type,e.code,t.url)})),userSync.bidderDone(e.code))}}),"registerSyncs"),addComponentAuction=hook("sync",((e,t)=>{}),"addComponentAuction");function validBidSize(e,t,{index:i=auctionManager$1.index}={}){if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;const r=i.getBidRequest(t),n=i.getMediaTypes(t),a=parseSizesInput(r&&r.sizes||n&&n.banner&&n.banner.sizes);if(1===a.length){const[e,i]=a[0].split("x");return t.width=parseInt(e,10),t.height=parseInt(i,10),!0}return!1}function isValid$1(e,t,{index:i=auctionManager$1.index}={}){function r(e){return`Invalid bid from ${t.bidderCode}. Ignoring bid: ${e}`}return e?t?function(){let e=Object.keys(t);return COMMON_BID_RESPONSE_KEYS.every((i=>includes$1(e,i)&&!includes$1([void 0,null],t[i])))}()?"native"!==t.mediaType||nativeBidIsValid(t,{index:i})?"video"!==t.mediaType||isValidVideoBid(t,{index:i})?!("banner"===t.mediaType&&!validBidSize(e,t,{index:i})&&(logError(r("Banner bids require a width and height")),1)):(logError(r("Video bid does not have required vastUrl or renderer property")),!1):(logError(r("Native bid missing some required properties.")),!1):(logError(r(`Bidder ${t.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`)),!1):(logWarn(`Some adapter tried to add an undefined bid for ${e}.`),!1):(logWarn("No adUnitCode was supplied to addBidResponse."),!1)}function adapterMetrics(e){return useMetrics(e.metrics).renameWith((t=>[`adapter.client.${t}`,`adapters.client.${e.bidderCode}.${t}`]))}let adUnits={};function ensureAdUnit(e,t){let i=adUnits[e]=adUnits[e]||{bidders:{}};return t?i.bidders[t]=i.bidders[t]||{}:i}function incrementAdUnitCount(e,t,i){let r=ensureAdUnit(e,i);return r[t]=(r[t]||0)+1,r[t]}function incrementRequestsCounter(e){return incrementAdUnitCount(e,"requestsCounter")}function incrementBidderRequestsCounter(e,t){return incrementAdUnitCount(e,"requestsCounter",t)}function incrementBidderWinsCounter(e,t){return incrementAdUnitCount(e,"winsCounter",t)}function getRequestsCounter(e){return dlv(adUnits,`${e}.requestsCounter`)||0}function getBidderRequestsCounter(e,t){return dlv(adUnits,`${e}.bidders.${t}.requestsCounter`)||0}function getBidderWinsCounter(e,t){return dlv(adUnits,`${e}.bidders.${t}.winsCounter`)||0}function ensureProtocol(e,t=window){if(!e)return e;if(/\w+:\/\//.exec(e))return e;let i=t.location.protocol;try{i=t.top.location.protocol}catch(r){}return/^\/\//.exec(e)?i+e:`${i}//${e}`}function parseDomain(e,{noLeadingWww:t=!1,noPort:i=!1}={}){try{e=new URL(ensureProtocol(e))}catch(r){return}return e=i?e.hostname:e.host,t&&e.startsWith("www.")&&(e=e.substring(4)),e}function getCanonicalUrl(e){try{const t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(t){}return null}function detectReferer(e){return function(){const t=[],i=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(t){}}(e),r=config.getConfig("maxNestedIframes");let n,a,o,s,d=!1,l=0,c=!1,p=!1,u=!1;do{const r=n,s=p;let m,g=!1,f=null;p=!1,n=n?n.parent:e;try{m=n.location.href||null}catch(b){g=!0}if(g)if(s){const t=r.context;try{f=t.sourceUrl,a=f,u=!0,c=!0,n===e.top&&(d=!0),t.canonicalUrl&&(o=t.canonicalUrl)}catch(b){}}else{logWarn("Trying to access cross domain iframe. Continuing without referrer and location");try{const t=r.document.referrer;t&&(f=t,n===e.top&&(d=!0))}catch(b){}!f&&i&&i[l-1]&&(f=i[l-1],n===e.top&&(u=!0)),f&&!c&&(a=f)}else{if(m&&(f=m,a=f,c=!1,n===e.top)){d=!0;const e=getCanonicalUrl(n.document);e&&(o=e)}n.context&&n.context.sourceUrl&&(p=!0)}t.push(f),l++}while(n!==e.top&&l<r);t.reverse();try{s=e.top.document.referrer}catch(b){}const m=d||u?a:null,g=config.getConfig("pageUrl")||o||null;let f=config.getConfig("pageUrl")||m||ensureProtocol(g,e);return m&&m.indexOf("?")>-1&&-1===f.indexOf("?")&&(f=`${f}${m.substring(m.indexOf("?"))}`),{reachedTop:d,isAmp:c,numIframes:l-1,stack:t,topmostLocation:a||null,location:m,canonicalUrl:g,page:f,domain:parseDomain(f)||null,ref:s||null,legacy:{reachedTop:d,isAmp:c,numIframes:l-1,stack:t,referer:a||null,canonicalUrl:g}}}}function cacheWithLocation(e,t=window){if(t.top!==t)return e;let i,r,n;return function(){const a=getCanonicalUrl(t.document),o=t.location.href;return i===a&&o===r||(i=a,r=o,n=e()),n}}const getRefererInfo=cacheWithLocation(detectReferer(window)),VENDORLESS_GVLID=Object.freeze({}),FIRST_PARTY_GVLID=Object.freeze({});class ConsentHandler{constructor(){__privateAdd(this,_resolve),__privateAdd(this,_enabled,void 0),__privateAdd(this,_data,void 0),__privateAdd(this,_defer,void 0),__privateAdd(this,_ready,void 0),__privateAdd(this,_dirty,!0),__privateAdd(this,_hash,void 0),__publicField(this,"generatedTime"),__publicField(this,"hashFields"),this.reset()}reset(){__privateSet(this,_defer,defer()),__privateSet(this,_enabled,!1),__privateSet(this,_data,null),__privateSet(this,_ready,!1),this.generatedTime=null}enable(){__privateSet(this,_enabled,!0)}get enabled(){return __privateGet(this,_enabled)}get ready(){return __privateGet(this,_ready)}get promise(){return __privateGet(this,_ready)?GreedyPromise.resolve(__privateGet(this,_data)):(__privateGet(this,_enabled)||__privateMethod(this,_resolve,resolve_fn).call(this,null),__privateGet(this,_defer).promise)}setConsentData(e,t=timestamp()){this.generatedTime=t,__privateSet(this,_dirty,!0),__privateMethod(this,_resolve,resolve_fn).call(this,e)}getConsentData(){return __privateGet(this,_data)}get hash(){return __privateGet(this,_dirty)&&(__privateSet(this,_hash,cyrb53Hash(JSON.stringify(__privateGet(this,_data)&&this.hashFields?this.hashFields.map((e=>__privateGet(this,_data)[e])):__privateGet(this,_data)))),__privateSet(this,_dirty,!1)),__privateGet(this,_hash)}}_enabled=new WeakMap,_data=new WeakMap,_defer=new WeakMap,_ready=new WeakMap,_dirty=new WeakMap,_hash=new WeakMap,_resolve=new WeakSet,resolve_fn=function(e){__privateSet(this,_ready,!0),__privateSet(this,_data,e),__privateGet(this,_defer).resolve(e)};class UspConsentHandler extends ConsentHandler{getConsentMeta(){const e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}class GdprConsentHandler extends ConsentHandler{constructor(){super(...arguments),__publicField(this,"hashFields",["gdprApplies","consentString"])}getConsentMeta(){const e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:isStr(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}class GppConsentHandler extends ConsentHandler{constructor(){super(...arguments),__publicField(this,"hashFields",["applicableSections","gppString"])}getConsentMeta(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}function gvlidRegistry(){const e={},t={},i={};return{register(r,n,a){a&&((e[n]=e[n]||{})[r]=a,t.hasOwnProperty(n)?t[n]!==a&&(t[n]=i):t[n]=a)},get(r){const n={modules:e[r]||{}};return t.hasOwnProperty(r)&&t[r]!==i&&(n.gvlid=t[r]),n}}}const gdprDataHandler=new GdprConsentHandler,uspDataHandler=new UspConsentHandler,gppDataHandler=new GppConsentHandler,coppaDataHandler=(()=>{function e(){return!!config.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset(){},get promise(){return GreedyPromise.resolve(e())},get hash(){return e()?"1":"0"}}})(),GDPR_GVLIDS=gvlidRegistry(),ALL_HANDLERS={gdpr:gdprDataHandler,usp:uspDataHandler,gpp:gppDataHandler,coppa:coppaDataHandler};function multiHandler(e=ALL_HANDLERS){return e=Object.entries(e),Object.assign({get promise(){return GreedyPromise.all(e.map((([e,t])=>t.promise.then((t=>[e,t]))))).then((e=>Object.fromEntries(e)))},get hash(){return cyrb53Hash(e.map((([e,t])=>t.hash)).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((t=>{return[t,(i=t,function(){return Object.fromEntries(e.map((([e,t])=>[e,t[i]()])))})];var i}))))}const allConsent=multiHandler(),ORTB_UFPD_PATHS=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((e=>`user.${e}`)).concat("device.ext.cdep"),ORTB_EIDS_PATHS=["user.eids","user.ext.eids"],ORTB_GEO_PATHS=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];function redactRule(e){return Object.assign({get(){},run(e,t,i,r,n){const a=i&&i[r];if(isData(a)&&n()){const e=this.get(a);void 0===e?delete i[r]:i[r]=e}}},e)}function objectTransformer(e){return e.forEach((e=>{e.paths=e.paths.map((e=>{const t=e.split("."),i=t.pop();return[t.length>0?t.join("."):null,i]}))})),function(t,i,...r){const n=[],a=sessionedApplies(t,...r);return e.forEach((e=>{if(!1!==t[e.name])for(const[r,o]of e.paths){const s=null==r?i:dlv(i,r);if(n.push(e.run(i,r,s,o,a.bind(null,e))),!1===t[e.name])return}})),n.filter((e=>null!=e))}}function sessionedApplies(e,...t){return function(i){return e.hasOwnProperty(i.name)||(e[i.name]=!!i.applies(...t)),e[i.name]}}function isData(e){return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}function appliesWhenActivityDenied(e,t=isActivityAllowed){return function(i){return!t(e,i)}}function bidRequestTransmitRules(e=isActivityAllowed){return[{name:ACTIVITY_TRANSMIT_EIDS,paths:["userId","userIdAsEids"],applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_EIDS,e)},{name:ACTIVITY_TRANSMIT_TID,paths:["ortb2Imp.ext.tid"],applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_TID,e)}].map(redactRule)}function ortb2TransmitRules(e=isActivityAllowed){return[{name:ACTIVITY_TRANSMIT_UFPD,paths:ORTB_UFPD_PATHS,applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_UFPD,e)},{name:ACTIVITY_TRANSMIT_EIDS,paths:ORTB_EIDS_PATHS,applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_EIDS,e)},{name:ACTIVITY_TRANSMIT_PRECISE_GEO,paths:ORTB_GEO_PATHS,applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:e=>Math.round(100*(e+Number.EPSILON))/100},{name:ACTIVITY_TRANSMIT_TID,paths:["source.tid"],applies:appliesWhenActivityDenied(ACTIVITY_TRANSMIT_TID,e)}].map(redactRule)}function redactorFactory(e=isActivityAllowed){const t=objectTransformer(ortb2TransmitRules(e)),i=objectTransformer(bidRequestTransmitRules(e));return function(e){const r={};return{ortb2:i=>(t(r,i,e),i),bidRequest:t=>(i(r,t,e),t)}}}const redactor=redactorFactory();registerActivityControl(ACTIVITY_TRANSMIT_TID,"enableTIDs config",(()=>{if(!config.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}));const PBS_ADAPTER_NAME="pbsBidAdapter",PARTITIONS={CLIENT:"client",SERVER:"server"},dep$3={isAllowed:isActivityAllowed,redact:redactor};let adapterManager={},_bidderRegistry=adapterManager.bidderRegistry={},_aliasRegistry=adapterManager.aliasRegistry={},_s2sConfigs=[];config.getConfig("s2sConfig",(e=>{e&&e.s2sConfig&&(_s2sConfigs=isArray(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var _analyticsRegistry={};const activityParams$1=activityParamsBuilder((e=>adapterManager.resolveAlias(e)));function s2sActivityParams(e){return activityParams$1(MODULE_TYPE_PREBID,PBS_ADAPTER_NAME,{[ACTIVITY_PARAM_S2S_NAME]:e.configName})}function getBids$1({bidderCode:e,auctionId:t,bidderRequestId:i,adUnits:r,src:n,metrics:a}){return r.reduce(((r,o)=>{const s=o.bids.filter((t=>t.bidder===e));return null==e&&0===s.length&&null!=o.s2sBid&&s.push({bidder:null}),r.push(s.reduce(((r,s)=>{const d=null==(s=Object.assign({},s,{ortb2Imp:mergeDeep({},o.ortb2Imp,s.ortb2Imp)},getDefinedParams(o,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?o.mediaTypes:s.mediaTypes;return isValidMediaTypes(d)?s=Object.assign({},s,{mediaTypes:d}):logError(`mediaTypes is not correctly configured for adunit ${o.code}`),"client"===n&&incrementBidderRequestsCounter(o.code,e),r.push(Object.assign({},s,{adUnitCode:o.code,transactionId:o.transactionId,adUnitId:o.adUnitId,sizes:dlv(d,"banner.sizes")||dlv(d,"video.playerSize")||[],bidId:s.bid_id||getUniqueIdentifierStr(),bidderRequestId:i,auctionId:t,src:n,metrics:a,bidRequestsCount:getRequestsCounter(o.code),bidderRequestsCount:getBidderRequestsCounter(o.code,s.bidder),bidderWinsCount:getBidderWinsCounter(o.code,s.bidder)})),r}),[])),r}),[]).reduce(flatten$1,[]).filter((e=>""!==e))}const hookedGetBids=hook("sync",getBids$1,"getBids");function _filterBidsForAdUnit(e,t,{getS2SBidders:i=getS2SBidderSet}={}){if(null==t)return e;{const r=i(t);return e.filter((e=>r.has(e.bidder)))}}const filterBidsForAdUnit=hook("sync",_filterBidsForAdUnit,"filterBidsForAdUnit");function getAdUnitCopyForPrebidServer(e,t){let i=deepClone(e),r=!1;return i.forEach((e=>{const i=e.bids.filter((e=>{var i;return e.module===PBS_ADAPTER_NAME&&(null==(i=e.params)?void 0:i.configName)===t.configName}));1===i.length?(e.s2sBid=i[0],r=!0,e.ortb2Imp=mergeDeep({},e.s2sBid.ortb2Imp,e.ortb2Imp)):i.length>1&&logWarn('Multiple "module" bids for the same s2s configuration; all will be ignored',i),e.bids=filterBidsForAdUnit(e.bids,t).map((e=>(e.bid_id=getUniqueIdentifierStr(),e)))})),i=i.filter((e=>0!==e.bids.length||null!=e.s2sBid)),{adUnits:i,hasModuleBids:r}}function getAdUnitCopyForClientAdapters(e){let t=deepClone(e);return t.forEach((e=>{e.bids=filterBidsForAdUnit(e.bids,null)})),t=t.filter((e=>0!==e.bids.length)),t}const setupAdUnitMediaTypes=hook("sync",((e,t)=>e),"setupAdUnitMediaTypes");function getS2SBidderSet(e){isArray(e)||(e=[e]);const t=new Set([null]);return e.filter((e=>e&&e.enabled)).flatMap((e=>e.bidders)).forEach((e=>t.add(e))),t}function _partitionBidders(e,t,{getS2SBidders:i=getS2SBidderSet}={}){const r=i(t);return getBidderCodes(e).reduce(((e,t)=>(e[r.has(t)?PARTITIONS.SERVER:PARTITIONS.CLIENT].push(t),e)),{[PARTITIONS.CLIENT]:[],[PARTITIONS.SERVER]:[]})}const partitionBidders=hook("sync",_partitionBidders,"partitionBidders");function getSupportedMediaTypes(e){let t=[];return includes$1(adapterManager.videoAdapters,e)&&t.push("video"),includes$1(nativeAdapters,e)&&t.push("native"),t}function getBidderMethod(e,t){const i=_bidderRegistry[e],r=(null==i?void 0:i.getSpec)&&i.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function invokeBidderMethod(e,t,i,r,...n){try{logInfo(`Invoking ${e}.${t}`),config.runWithBidder(e,r.bind(i,...n))}catch(a){logWarn(`Error calling ${t} of ${e}`)}}function tryCallBidderMethod(e,t,i){if((null==i?void 0:i.src)!==S2S.SRC){const r=getBidderMethod(e,t);null!=r&&invokeBidderMethod(e,t,...r,i)}}function resolveAlias(e){const t=new Set;for(;_aliasRegistry.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=_aliasRegistry[e];return e}adapterManager.makeBidRequests=hook("sync",(function(e,t,i,r,n,a={},o){o=useMetrics(o),emit(EVENTS$1.BEFORE_REQUEST_BIDS,e),decorateAdUnitsWithNativeParams(e),e.forEach((e=>{isPlainObject(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((e=>!e.bidder||dep$3.isAllowed(ACTIVITY_FETCH_BIDS,activityParams$1(MODULE_TYPE_BIDDER,e.bidder)))),incrementRequestsCounter(e.code)})),e=setupAdUnitMediaTypes(e,n);let{[PARTITIONS.CLIENT]:s,[PARTITIONS.SERVER]:d}=partitionBidders(e,_s2sConfigs);config.getConfig("bidderSequence")===RANDOM&&(s=shuffle(s));const l=getRefererInfo();let c=[];const p=a.global||{},u=a.bidder||{};function m(e,t){const r=dep$3.redact(null!=t?t:activityParams$1(MODULE_TYPE_BIDDER,e.bidderCode)),n=Object.freeze(r.ortb2(mergeDeep({source:{tid:i}},p,u[e.bidderCode])));return e.ortb2=n,e.bids=e.bids.map((e=>(e.ortb2=n,r.bidRequest(e)))),e}_s2sConfigs.forEach((r=>{const n=s2sActivityParams(r);if(r&&r.enabled&&dep$3.isAllowed(ACTIVITY_FETCH_BIDS,n)){let{adUnits:a,hasModuleBids:s}=getAdUnitCopyForPrebidServer(e,r),p=generateUUID();(0===d.length&&s?[null]:d).forEach((e=>{const s=getUniqueIdentifierStr(),d=o.fork(),u=m({bidderCode:e,auctionId:i,bidderRequestId:s,uniquePbsTid:p,bids:hookedGetBids({bidderCode:e,auctionId:i,bidderRequestId:s,adUnits:deepClone(a),src:S2S.SRC,metrics:d}),auctionStart:t,timeout:r.timeout,src:S2S.SRC,refererInfo:l,metrics:d},n);0!==u.bids.length&&c.push(u)})),a.forEach((e=>{let t=e.bids.filter((e=>find(c,(t=>find(t.bids,(t=>t.bidId===e.bid_id))))));e.bids=t})),c.forEach((e=>{void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=a.filter((e=>e.bids.length>0||null!=e.s2sBid)))}))}}));let g=getAdUnitCopyForClientAdapters(e);return s.forEach((e=>{const a=getUniqueIdentifierStr(),s=o.fork(),d=m({bidderCode:e,auctionId:i,bidderRequestId:a,bids:hookedGetBids({bidderCode:e,auctionId:i,bidderRequestId:a,adUnits:deepClone(g),labels:n,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:l,metrics:s}),p=_bidderRegistry[e];p||logError(`Trying to make a request for bidder that does not exist: ${e}`),p&&d.bids&&0!==d.bids.length&&c.push(d)})),c.forEach((e=>{gdprDataHandler.getConsentData()&&(e.gdprConsent=gdprDataHandler.getConsentData()),uspDataHandler.getConsentData()&&(e.uspConsent=uspDataHandler.getConsentData()),gppDataHandler.getConsentData()&&(e.gppConsent=gppDataHandler.getConsentData())})),c}),"makeBidRequests"),adapterManager.callBids=(e,t,i,r,n,a,o,s={})=>{if(!t.length)return void logWarn("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");let[d,l]=t.reduce(((e,t)=>(e[Number(void 0!==t.src&&t.src===S2S.SRC)].push(t),e)),[[],[]]);var c=[];l.forEach((e=>{for(var t=-1,i=0;i<c.length;++i)if(e.uniquePbsTid===c[i].uniquePbsTid){t=i;break}t<=-1&&c.push(e)}));let p=0;_s2sConfigs.forEach((e=>{if(e&&c[p]&&getS2SBidderSet(e).has(c[p].bidderCode)){const t=ajaxBuilder(a,n?{request:n.request.bind(null,"s2s"),done:n.done}:void 0);let d=e.bidders;const u=_bidderRegistry[e.adapter];let m=c[p].uniquePbsTid,g=c[p].adUnitsS2SCopy,f=l.filter((e=>e.uniquePbsTid===m));if(u){let n={ad_units:g,s2sConfig:e,ortb2Fragments:s};if(n.ad_units.length){let e=f.map((e=>(e.start=timestamp(),function(t){t||o(e.bidderRequestId),r.apply(e,arguments)})));const a=getBidderCodes(n.ad_units).filter((e=>d.includes(e)));logMessage(`CALLING S2S HEADER BIDDERS ==== ${a.length>0?a.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only'}`),f.forEach((e=>{emit(EVENTS$1.BID_REQUESTED,{...e,tid:e.auctionId})})),u.callBids(n,l,i,(t=>e.forEach((e=>e(t)))),t)}}else logError("missing "+e.adapter);p++}})),d.forEach((e=>{e.start=timestamp();const t=_bidderRegistry[e.bidderCode];config.runWithBidder(e.bidderCode,(()=>{logMessage("CALLING BIDDER"),emit(EVENTS$1.BID_REQUESTED,e)}));let s=ajaxBuilder(a,n?{request:n.request.bind(null,e.bidderCode),done:n.done}:void 0);const d=r.bind(e);try{config.runWithBidder(e.bidderCode,t.callBids.bind(t,e,i,d,s,(()=>o(e.bidderRequestId)),config.callbackWithBidder(e.bidderCode)))}catch(l){logError(`${e.bidderCode} Bid Adapter emitted an uncaught error when parsing their bidRequest`,{e:l,bidRequest:e}),d()}}))},adapterManager.videoAdapters=[],adapterManager.registerBidAdapter=function(e,t,{supportedMediaTypes:i=[]}={}){var r;e&&t?"function"==typeof e.callBids?(_bidderRegistry[t]=e,GDPR_GVLIDS.register(MODULE_TYPE_BIDDER,t,null==(r=e.getSpec)?void 0:r.call(e).gvlid),includes$1(i,"video")&&adapterManager.videoAdapters.push(t),includes$1(i,"native")&&nativeAdapters.push(t)):logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):logError("bidAdapter or bidderCode not specified")},adapterManager.aliasBidAdapter=function(e,t,i){if(void 0===_bidderRegistry[t]){let n=_bidderRegistry[e];if(void 0===n){const i=[];_s2sConfigs.forEach((r=>{if(r.bidders&&r.bidders.length){const n=r&&r.bidders;r&&includes$1(n,t)?_aliasRegistry[t]=e:i.push(e)}})),i.forEach((e=>{logError('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{let r,a=getSupportedMediaTypes(e);if(n.constructor.prototype!=Object.prototype)r=new n.constructor,r.setBidderCode(t);else{let a=n.getSpec(),o=i&&i.gvlid;null!=a.gvlid&&null==o&&logWarn(`Alias '${t}' will NOT re-use the GVL ID of the original adapter ('${a.code}', gvlid: ${a.gvlid}). Functionality that requires TCF consent may not work as expected.`);let s=i&&i.skipPbsAliasing;r=newBidder(Object.assign({},a,{code:t,gvlid:o,skipPbsAliasing:s})),_aliasRegistry[t]=e}adapterManager.registerBidAdapter(r,t,{supportedMediaTypes:a})}catch(r){logError(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else logMessage('alias name "'+t+'" has been already specified.')},adapterManager.resolveAlias=function(e){let t,i=e;for(;_aliasRegistry[i]&&(!t||!t.has(i));)i=_aliasRegistry[i],(t=t||new Set).add(i);return i},adapterManager.registerAnalyticsAdapter=function({adapter:e,code:t,gvlid:i}){e&&t?"function"==typeof e.enableAnalytics?(e.code=t,_analyticsRegistry[t]={adapter:e,gvlid:i},GDPR_GVLIDS.register(MODULE_TYPE_ANALYTICS,t,i)):logError(`Prebid Error: Analytics adaptor error for analytics "${t}"\n        analytics adapter must implement an enableAnalytics() function`):logError("Prebid Error: analyticsAdapter or analyticsCode not specified")},adapterManager.enableAnalytics=function(e){isArray(e)||(e=[e]),e.forEach((e=>{const t=_analyticsRegistry[e.provider];t&&t.adapter?dep$3.isAllowed(ACTIVITY_REPORT_ANALYTICS,activityParams$1(MODULE_TYPE_ANALYTICS,e.provider,{[ACTIVITY_PARAM_ANL_CONFIG]:e}))&&t.adapter.enableAnalytics(e):logError(`Prebid Error: no analytics adapter found in registry for '${e.provider}'.`)}))},adapterManager.getBidAdapter=function(e){return _bidderRegistry[e]},adapterManager.getAnalyticsAdapter=function(e){return _analyticsRegistry[e]},adapterManager.callTimedOutBidders=function(e,t,i){t=groupBy(t=t.map((t=>(t.params=getUserConfiguredParams(e,t.adUnitCode,t.bidder),t.timeout=i,t))),"bidder"),Object.keys(t).forEach((e=>{tryCallBidderMethod(e,"onTimeout",t[e])}))},adapterManager.callBidWonBidder=function(e,t,i){t.params=getUserConfiguredParams(i,t.adUnitCode,t.bidder),incrementBidderWinsCounter(t.adUnitCode,t.bidder),tryCallBidderMethod(e,"onBidWon",t)},adapterManager.callBidBillableBidder=function(e){tryCallBidderMethod(e.bidder,"onBidBillable",e)},adapterManager.callSetTargetingBidder=function(e,t){tryCallBidderMethod(e,"onSetTargeting",t)},adapterManager.callBidViewableBidder=function(e,t){tryCallBidderMethod(e,"onBidViewable",t)},adapterManager.callBidderError=function(e,t,i){tryCallBidderMethod(e,"onBidderError",{error:t,bidderRequest:i})},adapterManager.callDataDeletionRequest=hook("sync",(function(...e){const t="onDataDeletionRequest";Object.keys(_bidderRegistry).filter((e=>!_aliasRegistry.hasOwnProperty(e))).forEach((i=>{const r=getBidderMethod(i,t);if(null!=r){const n=auctionManager$1.getBidsRequested().filter((e=>resolveAlias(e.bidderCode)===i));invokeBidderMethod(i,t,...r,n,...e)}})),Object.entries(_analyticsRegistry).forEach((([i,r])=>{var n;const a=null==(n=null==r?void 0:r.adapter)?void 0:n[t];if("function"==typeof a)try{a.apply(r.adapter,e)}catch(o){logError(`error calling ${t} of ${i}`,o)}}))}));const adaptermanager=adapterManager,STRICT_STORAGE_ENFORCEMENT="strictStorageEnforcement",ACTIVE_RULES={purpose:{},feature:{}},CONSENT_PATHS={purpose:"purpose.consents",feature:"specialFeatureOptins"},CONFIGURABLE_RULES={storage:{type:"purpose",default:{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]},id:1},basicAds:{type:"purpose",id:2,default:{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}},personalizedAds:{type:"purpose",id:4},measurement:{type:"purpose",id:7},transmitPreciseGeo:{type:"feature",id:1}},storageBlocked=new Set,biddersBlocked=new Set,analyticsBlocked=new Set,ufpdBlocked=new Set,eidsBlocked=new Set,geoBlocked=new Set;let hooksAdded=!1,strictStorageEnforcement=!1;const GVLID_LOOKUP_PRIORITY=[MODULE_TYPE_BIDDER,MODULE_TYPE_UID,MODULE_TYPE_ANALYTICS,MODULE_TYPE_RTD],RULE_NAME="TCF2",RULE_HANDLES=[],LI_PURPOSES=[2];function getGvlid(e,t,i){if(t){const r=config.getConfig("gvlMapping");if(r&&r[t])return r[t];if(e===MODULE_TYPE_PREBID)return"cdep"===t?FIRST_PARTY_GVLID:VENDORLESS_GVLID;{let{gvlid:r,modules:n}=GDPR_GVLIDS.get(t);if(null==r&&Object.keys(n).length>0)for(const i of GVLID_LOOKUP_PRIORITY)if(n.hasOwnProperty(i)){r=n[i],i!==e&&logWarn(`Multiple GVL IDs found for module '${t}'; using the ${i} module's ID (${r}) instead of the ${e}'s ID (${n[e]})`);break}return null==r&&i&&(r=i()),r||null}}return null}function getGvlidFromAnalyticsAdapter(e,t){var i;const r=adaptermanager.getAnalyticsAdapter(e);return(i=>{if("function"!=typeof i)return i;try{return i.call(r.adapter,t)}catch(n){logError(`Error invoking ${e} adapter.gvlid()`,n)}})(null==(i=null==r?void 0:r.adapter)?void 0:i.gvlid)}function shouldEnforce(e,t,i){return null==e&&gdprDataHandler.enabled?(logWarn(`Attempting operation that requires purpose ${t} consent while consent data is not available${i?` (module: ${i})`:""}. Assuming no consent was given.`),!0):e&&e.gdprApplies}function getConsent(e,t,i,r){let n=!!dlv(e,`vendorData.${CONSENT_PATHS[t]}.${i}`),a=!!dlv(e,`vendorData.vendor.consents.${r}`);return"purpose"===t&&LI_PURPOSES.includes(i)&&(n||(n=!!dlv(e,`vendorData.purpose.legitimateInterests.${i}`)),a||(a=!!dlv(e,`vendorData.vendor.legitimateInterests.${r}`))),{purpose:n,vendor:a}}function validateRules$1(e,t,i,r){const n=CONFIGURABLE_RULES[e.purpose];if((e.vendorExceptions||[]).includes(i))return!0;const a=e.enforceVendor&&!(r===VENDORLESS_GVLID||(e.softVendorExceptions||[]).includes(i)),{purpose:o,vendor:s}=getConsent(t,n.type,n.id,r);let d=(!e.enforcePurpose||o)&&(!a||s);return r===FIRST_PARTY_GVLID&&(d=!e.enforcePurpose||!!dlv(t,`vendorData.publisher.consents.${n.id}`)),d}function gdprRule(e,t,i=null,r=(()=>null)){return function(n){const a=gdprDataHandler.getConsentData(),o=n[ACTIVITY_PARAM_COMPONENT_NAME];if(shouldEnforce(a,e,o)){const e=getGvlid(n[ACTIVITY_PARAM_COMPONENT_TYPE],o,r(n));let s=!!t(a,o,e);if(!s)return i&&i.add(o),{allow:s}}}}function singlePurposeGdprRule(e,t=null,i=(()=>null)){return gdprRule(e,((t,i,r)=>!!validateRules$1(ACTIVE_RULES.purpose[e],t,i,r)),t,i)}function exceptPrebidModules(e){return function(t){if(t[ACTIVITY_PARAM_COMPONENT_TYPE]!==MODULE_TYPE_PREBID)return e(t)}}const accessDeviceRule=(rule=singlePurposeGdprRule(1,storageBlocked),function(e){if(e[ACTIVITY_PARAM_COMPONENT_TYPE]!==MODULE_TYPE_PREBID||strictStorageEnforcement)return rule(e)});var rule;const syncUserRule=singlePurposeGdprRule(1,storageBlocked),enrichEidsRule=singlePurposeGdprRule(1,storageBlocked),fetchBidsRule=exceptPrebidModules(singlePurposeGdprRule(2,biddersBlocked)),reportAnalyticsRule=singlePurposeGdprRule(7,analyticsBlocked,(e=>getGvlidFromAnalyticsAdapter(e[ACTIVITY_PARAM_COMPONENT_NAME],e[ACTIVITY_PARAM_ANL_CONFIG]))),ufpdRule=singlePurposeGdprRule(4,ufpdBlocked),transmitEidsRule=exceptPrebidModules((()=>{const e=gdprRule("2-10",(function(e,t,i){var r,n,a,o;for(let s=2;s<=10;s++){if(null==(n=null==(r=ACTIVE_RULES.purpose[s])?void 0:r.vendorExceptions)?void 0:n.includes(t))return!0;const{purpose:d,vendor:l}=getConsent(e,"purpose",s,i);if(d&&(l||(null==(o=null==(a=ACTIVE_RULES.purpose[s])?void 0:a.softVendorExceptions)?void 0:o.includes(t))))return!0}return!1}),eidsBlocked),t=singlePurposeGdprRule(4,eidsBlocked);return function(){var i;return((null==(i=ACTIVE_RULES.purpose[4])?void 0:i.eidsRequireP4Consent)?t:e).apply(this,arguments)}})()),transmitPreciseGeoRule=gdprRule("Special Feature 1",((e,t,i)=>validateRules$1(ACTIVE_RULES.feature[1],e,t,i)),geoBlocked);function emitTCF2FinalResults(){const e=function(e){return Array.from(e.keys()).filter((e=>null!=e))},t={storageBlocked:e(storageBlocked),biddersBlocked:e(biddersBlocked),analyticsBlocked:e(analyticsBlocked),ufpdBlocked:e(ufpdBlocked),eidsBlocked:e(eidsBlocked),geoBlocked:e(geoBlocked)};emit(EVENTS$1.TCF2_ENFORCEMENT,t),[storageBlocked,biddersBlocked,analyticsBlocked,ufpdBlocked,eidsBlocked,geoBlocked].forEach((e=>e.clear()))}function setEnforcementConfig(e){let t=dlv(e,"gdpr.rules");t||logWarn("TCF2: enforcing P1 and P2 by default"),t=Object.fromEntries((t||[]).map((e=>[e.purpose,e]))),strictStorageEnforcement=!!dlv(e,STRICT_STORAGE_ENFORCEMENT),Object.entries(CONFIGURABLE_RULES).forEach((([e,i])=>{ACTIVE_RULES[i.type][i.id]=t[e]??i.default})),hooksAdded||(null!=ACTIVE_RULES.purpose[1]&&(hooksAdded=!0,RULE_HANDLES.push(registerActivityControl(ACTIVITY_ACCESS_DEVICE,RULE_NAME,accessDeviceRule)),RULE_HANDLES.push(registerActivityControl(ACTIVITY_SYNC_USER,RULE_NAME,syncUserRule)),RULE_HANDLES.push(registerActivityControl(ACTIVITY_ENRICH_EIDS,RULE_NAME,enrichEidsRule))),null!=ACTIVE_RULES.purpose[2]&&RULE_HANDLES.push(registerActivityControl(ACTIVITY_FETCH_BIDS,RULE_NAME,fetchBidsRule)),null!=ACTIVE_RULES.purpose[4]&&RULE_HANDLES.push(registerActivityControl(ACTIVITY_TRANSMIT_UFPD,RULE_NAME,ufpdRule),registerActivityControl(ACTIVITY_ENRICH_UFPD,RULE_NAME,ufpdRule)),null!=ACTIVE_RULES.purpose[7]&&RULE_HANDLES.push(registerActivityControl(ACTIVITY_REPORT_ANALYTICS,RULE_NAME,reportAnalyticsRule)),null!=ACTIVE_RULES.feature[1]&&RULE_HANDLES.push(registerActivityControl(ACTIVITY_TRANSMIT_PRECISE_GEO,RULE_NAME,transmitPreciseGeoRule)),RULE_HANDLES.push(registerActivityControl(ACTIVITY_TRANSMIT_EIDS,RULE_NAME,transmitEidsRule)))}on(EVENTS$1.AUCTION_END,emitTCF2FinalResults),config.getConfig("consentManagement",(e=>setEnforcementConfig(e.consentManagement)));const PROCESSOR_TYPES=["request","imp","bidResponse","response"],PROCESSOR_DIALECTS=["default","pbs"],[REQUEST$1,IMP,BID_RESPONSE,RESPONSE$1]=PROCESSOR_TYPES,[DEFAULT,PBS]=PROCESSOR_DIALECTS,types=new Set(PROCESSOR_TYPES);function processorRegistry(){const e={};return{registerOrtbProcessor({type:t,name:i,fn:r,priority:n=0,dialects:a=[DEFAULT]}){if(!types.has(t))throw new Error(`ORTB processor type must be one of: ${PROCESSOR_TYPES.join(", ")}`);a.forEach((a=>{e.hasOwnProperty(a)||(e[a]={}),e[a].hasOwnProperty(t)||(e[a][t]={}),e[a][t][i]={priority:n,fn:r}}))},getProcessors:t=>e[t]||{}}}const{registerOrtbProcessor:registerOrtbProcessor,getProcessors:getProcessors}=processorRegistry(),coreStorage$1=getCoreStorageManager("fpdEnrichment"),findRootDomain=memoize((function(e=window.location.host){if(!coreStorage$1.cookiesAreEnabled())return e;const t=e.split(".");if(2===t.length)return e;let i,r,n=-2;const a=`_rdc${Date.now()}`,o="writeable";do{i=t.slice(n).join(".");let e=new Date(timestamp()+1e4).toUTCString();coreStorage$1.setCookie(a,o,e,"Lax",i,void 0),coreStorage$1.getCookie(a,void 0)===o?(r=!1,coreStorage$1.setCookie(a,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,i,void 0)):(n+=-1,r=Math.abs(n)<=t.length)}while(r);return i})),SUA_SOURCE_LOW_ENTROPY=1,SUA_SOURCE_HIGH_ENTROPY=2,HIGH_ENTROPY_HINTS=["architecture","bitness","model","platformVersion","fullVersionList"],LOW_ENTROPY_HINTS=["brands","mobile","platform"],getLowEntropySUA=lowEntropySUAAccessor(),getHighEntropySUA=highEntropySUAAccessor();function lowEntropySUAAccessor(e=(e=>null==(e=window.navigator)?void 0:e.userAgentData)()){const t=e&&LOW_ENTROPY_HINTS.some((t=>void 0!==e[t]))?Object.freeze(uaDataToSUA(SUA_SOURCE_LOW_ENTROPY,e)):null;return function(){return t}}function highEntropySUAAccessor(e=(e=>null==(e=window.navigator)?void 0:e.userAgentData)()){const t={},i=new WeakMap;return function(r=HIGH_ENTROPY_HINTS){if(!i.has(r)){const e=Array.from(r);e.sort(),i.set(r,e.join("|"))}const n=i.get(r);if(!t.hasOwnProperty(n))try{t[n]=e.getHighEntropyValues(r).then((e=>isEmpty(e)?null:Object.freeze(uaDataToSUA(SUA_SOURCE_HIGH_ENTROPY,e)))).catch((()=>null))}catch(a){t[n]=GreedyPromise.resolve(null)}return t[n]}}function uaDataToSUA(e,t){function i(e,t){const i={brand:e};return isStr(t)&&!isEmptyStr(t)&&(i.version=t.split(".")),i}const r={source:e};return t.platform&&(r.platform=i(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((({brand:e,version:t})=>i(e,t)))),void 0!==t.mobile&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((e=>{const i=t[e];isStr(i)&&(r[e]=i)})),r}const CLIENT_SECTIONS=["dooh","app","site"];function clientSectionChecker(e){return function(t){return CLIENT_SECTIONS.reduce(((i,r)=>(hasSection(t,r)&&(null!=i?(logWarn(`${e} specifies both '${i}' and '${r}'; dropping the latter.`),delete t[r]):i=r),i)),null),t}}function hasSection(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}const dep$2={getRefererInfo:getRefererInfo,findRootDomain:findRootDomain,getWindowTop:getWindowTop,getWindowSelf:getWindowSelf,getHighEntropySUA:getHighEntropySUA,getLowEntropySUA:getLowEntropySUA},oneClient=clientSectionChecker("FPD"),enrichFPD=hook("sync",(e=>{const t=[e,getSUA().catch((()=>null)),tryToGetCdepLabel().catch((()=>null))];return GreedyPromise.all(t).then((([e,t,i])=>{const r=dep$2.getRefererInfo();if(mergeLegacySetConfigs(e),Object.entries(ENRICHMENTS).forEach((([t,i])=>{const n=i(e,r);n&&Object.keys(n).length>0&&(e[t]=mergeDeep({},n,e[t]))})),t&&dset(e,"device.sua",Object.assign({},t,e.device.sua)),i){const t={cdep:i};dset(e,"device.ext",Object.assign({},t,e.device.ext))}e=oneClient(e);for(let n of CLIENT_SECTIONS)if(hasSection(e,n)){e[n]=mergeDeep({},clientEnrichment(e,r),e[n]);break}return e}))}));function mergeLegacySetConfigs(e){["app","site","device"].forEach((t=>{const i=config.getConfig(t);null!=i&&(e[t]=mergeDeep({},i,e[t]))}))}function winFallback(e){try{return e(dep$2.getWindowTop())}catch(t){return e(dep$2.getWindowSelf())}}function getSUA(){const e=config.getConfig("firstPartyData.uaHints");return Array.isArray(e)&&0!==e.length?dep$2.getHighEntropySUA(e):GreedyPromise.resolve(dep$2.getLowEntropySUA())}function removeUndef(e){return getDefinedParams(e,Object.keys(e))}function tryToGetCdepLabel(){return GreedyPromise.resolve("cookieDeprecationLabel"in navigator&&isActivityAllowed(ACTIVITY_ACCESS_DEVICE,activityParams$2(MODULE_TYPE_PREBID,"cdep"))&&navigator.cookieDeprecationLabel.getValue())}const ENRICHMENTS={site(e,t){if(!CLIENT_SECTIONS.filter((e=>"site"!==e)).some(hasSection.bind(null,e)))return removeUndef({page:t.page,ref:t.ref})},device:()=>winFallback((e=>{var t;const i={w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:getDNT()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()};return(null==(t=e.navigator)?void 0:t.webdriver)&&dset(i,"ext.webdriver",!0),i})),regs(){const e={};winFallback((e=>e.navigator.globalPrivacyControl))&&dset(e,"ext.gpc",1);const t=config.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function clientEnrichment(e,t){var i,r,n;const a=parseDomain(t.page,{noLeadingWww:!0});return removeUndef({domain:a,keywords:null==(n=null==(r=null==(i=winFallback((e=>e.document.querySelector("meta[name='keywords']"))))?void 0:i.content)?void 0:r.replace)?void 0:n.call(r,/\s/g,""),publisher:removeUndef({domain:dep$2.findRootDomain(a)})})}const MODE_MIXED=0,MODE_RETURN=1,MODE_CALLBACK=2;function cmpClient({apiName:e,apiVersion:t,apiArgs:i=["command","callback","parameter","version"],callbackArgs:r=["returnValue","success"],mode:n=MODE_MIXED},a=window){const o={},s=`${e}Call`,d=`${e}Return`;function l(e){var t;const i="string"==typeof e.data&&e.data.includes(d)?JSON.parse(e.data):e.data;if(null==(t=null==i?void 0:i[d])?void 0:t.callId){const e=i[d];o.hasOwnProperty(e.callId)&&o[e.callId](...r.map((t=>e[t])))}}const[c,p]=function(){let t,i=a,r=!1;for(;null!=i;){try{if("function"==typeof i[e]){t=i,r=!0;break}}catch(n){}try{if(i.frames[`${e}Locator`]){t=i;break}}catch(n){}if(i===a.top)break;i=i.parent}return[t,r]}();if(!c)return;function u(e){return e=Object.assign({version:t},e),i.map((t=>[t,e[t]]))}function m(e,t,i,r){const a="function"==typeof e;return function(o,s){r&&r(),n!==MODE_RETURN&&(null==s||s?t:i)(a?void 0:o),a&&e.apply(this,arguments)}}let g;return p?g=function(t={}){return new GreedyPromise(((i,r)=>{const a=c[e](...u({...t,callback:t.callback||n===MODE_CALLBACK?m(t.callback,i,r):void 0}).map((([e,t])=>t)));(n===MODE_RETURN||null==t.callback&&n===MODE_MIXED)&&i(a)}))}:(a.addEventListener("message",l,!1),g=function(e,t=!1){return new GreedyPromise(((i,r)=>{const a=Math.random().toString(),d={[s]:{...Object.fromEntries(u(e).filter((([e])=>"callback"!==e))),callId:a}};o[a]=m(null==e?void 0:e.callback,i,r,(t||null==(null==e?void 0:e.callback))&&(()=>{delete o[a]})),c.postMessage(d,"*"),n===MODE_RETURN&&i()}))}),Object.assign(g,{isDirect:p,close(){!p&&a.removeEventListener("message",l)}})}const DEFAULT_CMP="iab",DEFAULT_CONSENT_TIMEOUT=1e4,CMP_VERSION=2;let userCMP,consentTimeout,gdprScope,staticConsentData,actionTimeout,consentData,addedConsentHook=!1;const cmpCallMap={iab:lookupIabConsent,static:lookupStaticConsentData};function lookupStaticConsentData({onSuccess:e,onError:t}){processCmpData(staticConsentData,{onSuccess:e,onError:t})}function lookupIabConsent({onSuccess:e,onError:t,onEvent:i}){const r=cmpClient({apiName:"__tcfapi",apiVersion:CMP_VERSION,apiArgs:["command","version","callback","parameter"]});if(!r)return t("TCF2 CMP not found.");r.isDirect?logInfo("Detected CMP API is directly accessible, calling it now..."):logInfo("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),r({command:"addEventListener",callback:function(r,n){logInfo("Received a response from CMP",r),n?(i(r),!1!==r.gdprApplies&&"tcloaded"!==r.eventStatus&&"useractioncomplete"!==r.eventStatus||processCmpData(r,{onSuccess:e,onError:t})):t("CMP unable to register callback function.  Please check CMP setup.")}})}function loadConsentData(e){let t,i,r=!1,n=null,a=!1;function o(e){null!=n&&clearTimeout(n),r||null==e||(0===e?t():n=setTimeout(t,e))}function s(t,i,n,...a){o(null),r=!0,gdprDataHandler.setConsentData(t),"function"==typeof e&&e(i,n,...a)}if(!includes$1(Object.keys(cmpCallMap),userCMP))return void s(null,!1,`CMP framework (${userCMP}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);const d={onSuccess:e=>s(e,!1),onError:function(e,...t){s(null,!0,e,...t)},onEvent:function(e){i=e,a||(a=!0,null!=actionTimeout&&o(actionTimeout))}};t=()=>{const e=e=>{s(e,!1,(a?"Timeout waiting for user action on CMP":"CMP did not load")+", continuing auction...")};processCmpData(i,{onSuccess:e,onError:()=>e(storeConsentData(void 0))})},cmpCallMap[userCMP](d),null!=actionTimeout&&a||o(consentTimeout)}function loadIfMissing(e){consentData?(logInfo("User consent information already known.  Pulling internally stored information..."),e(!1)):loadConsentData(e)}const requestBidsHook$2=timedAuctionHook("gdpr",(function(e,t){loadIfMissing((function(i,r,...n){if(r){let e=logWarn;i&&(e=logError,r=`${r} Canceling auction as per consentManagement config.`),e(r,...n)}i?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():logError("Error executing bidsBackHandler")):e.call(this,t)}))}));function processCmpData(e,{onSuccess:t,onError:i}){!function(){const t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:gdprScope,i=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||i&&isStr(i)))}()?t(storeConsentData(e)):i("CMP returned unexpected value during lookup process.",e)}function storeConsentData(e){return consentData={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:gdprScope},e&&e.addtlConsent&&isStr(e.addtlConsent)&&(consentData.addtlConsent=e.addtlConsent),consentData.apiVersion=CMP_VERSION,consentData}function setConsentConfig(e){(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"==typeof e?(isStr(e.cmpApi)?userCMP=e.cmpApi:(userCMP=DEFAULT_CMP,logInfo(`consentManagement config did not specify cmp.  Using system default setting (${DEFAULT_CMP}).`)),isNumber(e.timeout)?consentTimeout=e.timeout:(consentTimeout=DEFAULT_CONSENT_TIMEOUT,logInfo(`consentManagement config did not specify timeout.  Using system default setting (${DEFAULT_CONSENT_TIMEOUT}).`)),actionTimeout=isNumber(e.actionTimeout)?e.actionTimeout:null,gdprScope=!0===e.defaultGdprScope,logInfo("consentManagement module has been activated..."),"static"===userCMP&&(isPlainObject(e.consentData)?(staticConsentData=e.consentData,null!=(null==staticConsentData?void 0:staticConsentData.getTCData)&&(staticConsentData=staticConsentData.getTCData),consentTimeout=0):logError("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),addedConsentHook||getGlobal().requestBids.before(requestBidsHook$2,50),addedConsentHook=!0,gdprDataHandler.enable(),loadConsentData()):logWarn("consentManagement (gdpr) config not defined, exiting consent manager")}function enrichFPDHook(e,t){return e(t.then((e=>{const t=gdprDataHandler.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&dset(e,"regs.ext.gdpr",t.gdprApplies?1:0),dset(e,"user.ext.consent",t.consentString)),e})))}function setOrtbAdditionalConsent(e,t){var i;const r=null==(i=t.gdprConsent)?void 0:i.addtlConsent;r&&"string"==typeof r&&dset(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}function isSlotMatchingAdUnitCode(e){return t=>compareCodeAndSlot(t,e)}function getGptSlotForAdUnitCode(e){let t;return isGptPubadsDefined()&&(t=find(window.googletag.pubads().getSlots(),isSlotMatchingAdUnitCode(e))),t}function getGptSlotInfoForAdUnitCode(e){const t=getGptSlotForAdUnitCode(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function simpleCompare(e,t){return e===t?0:e<t?-1:1}function keyCompare(e=(e=>e)){return(t,i)=>simpleCompare(e(t),e(i))}function reverseCompare(e=simpleCompare){return(t,i)=>-e(t,i)||0}function tiebreakCompare(...e){return function(t,i){for(const r of e){const e=r(t,i);if(0!==e)return e}return 0}}function minimum(e=simpleCompare){return(t,i)=>e(i,t)<0?i:t}function maximum(e=simpleCompare){return minimum(reverseCompare(e))}config.getConfig("consentManagement",(e=>setConsentConfig(e.consentManagement))),enrichFPD.before(enrichFPDHook),registerOrtbProcessor({type:REQUEST$1,name:"gdprAddtlConsent",fn:setOrtbAdditionalConsent});const cpmCompare=keyCompare((e=>e.cpm)),timestampCompare=keyCompare((e=>e.responseTimestamp)),getHighestCpm=maximum(tiebreakCompare(cpmCompare,reverseCompare(keyCompare((e=>e.timeToRespond))))),getOldestHighestCpmBid=maximum(tiebreakCompare(cpmCompare,reverseCompare(timestampCompare)));function convertCurrency(e,t,i,r=!0){if(t===i)return e;let n=e;try{n=getGlobal().convertCurrency(e,t,i)}catch(a){if(!r)throw a}return n}function currencyNormalizer(e=null,t=!0,i=convertCurrency){return function(r,n){return null==e&&(e=n),i(r,n,e,t)}}function currencyCompare(e=(e=>[e.cpm,e.currency]),t=currencyNormalizer()){return keyCompare((i=>t.apply(null,e(i))))}const FLOOR_SKIPPED_REASON={NOT_FOUND:"not_found",RANDOM:"random"},MODULE_NAME$7="Price Floors",ajax=ajaxBuilder(1e4),SYN_FIELD=Symbol();let allowedFields=[SYN_FIELD,"gptSlot","adUnitCode","size","domain","mediaType"],fetching=!1,addedFloorsHook=!1,_floorsConfig={},_delayedAuctions=[],_floorDataForAuction={};function roundUp(e,t){return Math.ceil((parseFloat(e)*Math.pow(10,t)).toFixed(1))/Math.pow(10,t)}const getHostname$1=(()=>{let e;return function(){return null==e&&(e=parseUrl(getRefererInfo().topmostLocation,{noDecodeWholeURL:!0}).hostname),e}})();function getGptSlotFromAdUnit(e,{index:t=auctionManager$1.index}={}){const i=t.getAdUnit({adUnitId:e});return"gam"===dlv(i,"ortb2Imp.ext.data.adserver.name")&&i.ortb2Imp.ext.data.adserver.adslot}function getAdUnitCode(e,t,{index:i=auctionManager$1.index}={}){return(null==e?void 0:e.adUnitCode)||i.getAdUnit(t).code}let fieldMatchingFunctions={[SYN_FIELD]:()=>"*",size:(e,t)=>parseGPTSingleSizeArray(t.size)||"*",mediaType:(e,t)=>t.mediaType||"banner",gptSlot:(e,t)=>getGptSlotFromAdUnit((e||t).adUnitId)||getGptSlotInfoForAdUnitCode(getAdUnitCode(e,t)).gptSlot,domain:getHostname$1,adUnitCode:(e,t)=>getAdUnitCode(e,t)};function enumeratePossibleFieldValues(e,t,i){return e.length?e.reduce(((e,r)=>{let n=fieldMatchingFunctions[r](t,i)||"*";return e.push("*"===n?["*"]:[n.toLowerCase(),"*"]),e}),[]):[]}function getFirstMatchingFloor(e,t,i={}){var r;let n=enumeratePossibleFieldValues(dlv(e,"schema.fields")||[],t,i);if(!n.length)return{matchingFloor:void 0};let a=n.map((e=>e[0])).join("-"),o=dlv(e,`matchingInputs.${a}`);if(o)return{...o};let s=generatePossibleEnumerations(n,dlv(e,"schema.delimiter")||"|"),d=find(s,(t=>e.values.hasOwnProperty(t))),l={floorMin:e.floorMin||0,floorRuleValue:e.values[d],matchingData:s[0],matchingRule:d===(null==(r=e.meta)?void 0:r.defaultRule)?void 0:d};const c=dlv(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof c&&(l.floorMin=c),l.matchingFloor=Math.max(l.floorMin,l.floorRuleValue),dset(e,`matchingInputs.${a}`,{...l}),l}function generatePossibleEnumerations(e,t){return e.reduce(((e,i)=>{let r=[];return e.map((e=>{i.map((i=>{r.push(e+t+i)}))})),r})).sort(((e,t)=>e.split("*").length-t.split("*").length))}function getBiddersCpmAdjustment(e,t,i){return parseFloat(adjustCpm(e,{...t,cpm:e},i))}function calculateAdjustedFloor(e,t){const i=Math.pow(10,10);return e*i/(t*i)*(e*i)/i}const getMediaTypesSizes={banner:e=>dlv(e,"mediaTypes.banner.sizes")||[],video:e=>dlv(e,"mediaTypes.video.playerSize")||[],native:e=>dlv(e,"mediaTypes.native.image.sizes")?[dlv(e,"mediaTypes.native.image.sizes")]:[]};function updateRequestParamsFromContext(e,t){let i=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===i.length&&(t.mediaType=i[0]),"*"===t.size&&-1!==i.indexOf(t.mediaType)&&getMediaTypesSizes[t.mediaType]&&1===getMediaTypesSizes[t.mediaType](e).length&&(t.size=getMediaTypesSizes[t.mediaType](e)[0]),t}function getFloor$3(e={currency:"USD",mediaType:"*",size:"*"}){let t=this,i=_floorDataForAuction[t.auctionId];if(!i||i.skipped)return{};e=updateRequestParamsFromContext(t,e);let r=getFirstMatchingFloor(i.data,{...t},{mediaType:e.mediaType,size:e.size}),n=e.currency||i.data.currency;if(r.matchingFloor&&n!==i.data.currency)try{r.matchingFloor=getGlobal().convertCurrency(r.matchingFloor,i.data.currency,n)}catch(a){logWarn(`${MODULE_NAME$7}: Unable to get currency conversion for getFloor for bidder ${t.bidder}. You must have currency module enabled with defaultRates in your currency config`),n=i.data.currency}if(i.enforcement.bidAdjustment&&r.matchingFloor){const e=bidderSettings.get(t.bidder,"inverseBidAdjustment");if(e)r.matchingFloor=e(r.matchingFloor,t);else{let e=getBiddersCpmAdjustment(r.matchingFloor,null,t);r.matchingFloor=e?calculateAdjustedFloor(r.matchingFloor,e):r.matchingFloor}}return r.matchingFloor?{floor:roundUp(r.matchingFloor,4),currency:n}:{}}function getFloorsDataForAuction(e,t){let i=deepClone(e);return i.schema.delimiter=e.schema.delimiter||"|",i.values=normalizeRulesForAuction(i,t),i.currency=i.currency||"USD",i}function normalizeRulesForAuction(e,t){let i=e.schema.fields,r=e.schema.delimiter,n=t&&-1===i.indexOf("adUnitCode")&&i.unshift("adUnitCode");return Object.keys(e.values).reduce(((i,a)=>(i[(n?`${t}${r}${a}`:a).toLowerCase()]=e.values[a],i)),{})}function getFloorDataFromAdUnits(e){const t=e.find((e=>{var t;return null!=(null==(t=e.floors)?void 0:t.schema)}));return e.reduce(((e,i)=>{var r,n;if(null!=(null==(r=i.floors)?void 0:r.schema)&&!deepEqual(i.floors.schema,null==(n=null==t?void 0:t.floors)?void 0:n.schema))return logError(`${MODULE_NAME$7}: adUnit '${i.code}' declares a different schema from one previously declared by adUnit '${t.code}'. Floor config for '${i.code}' will be ignored.`),e;const a=Object.assign({},null==t?void 0:t.floors,{values:void 0},i.floors);if(isFloorsDataValid(a))if(e.values){let t=getFloorsDataForAuction(a,i.code).values;Object.assign(e.values,t)}else(e=getFloorsDataForAuction(a,i.code)).location="adUnit";else null!=i.floors&&logWarn(`adUnit '${i.code}' provides an invalid \`floor\` definition, it will be ignored for floor calculations`,i);return e}),{})}function getNoFloorSignalBidersArray(e){var t,i;const{data:r,enforcement:n}=e;return(null==(t=null==r?void 0:r.noFloorSignalBidders)?void 0:t.length)>0?r.noFloorSignalBidders:(null==(i=null==n?void 0:n.noFloorSignalBidders)?void 0:i.length)>0?n.noFloorSignalBidders:[]}function updateAdUnitsForAuction(e,t,i){const r=getNoFloorSignalBidersArray(t);e.forEach((e=>{e.bids.forEach((e=>{const n=r.some((t=>t===e.bidder));t.skipped||n?(n&&logInfo(`noFloorSignal to ${e.bidder}`),delete e.getFloor):e.getFloor=getFloor$3,e.auctionId=i,e.floorData={noFloorSignaled:n,skipped:t.skipped,skipRate:dlv(t,"data.skipRate")??t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:dlv(t,"data.modelVersion"),modelWeight:dlv(t,"data.modelWeight"),modelTimestamp:dlv(t,"data.modelTimestamp"),location:dlv(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:_floorsConfig.fetchStatus}}))}))}function pickRandomModel(e,t){let i=Math.floor(Math.random()*t+1);for(let r=0;r<e.length;r++)if(i-=e[r].modelWeight,i<=0)return e[r]}function createFloorsDataForAuction(e,t){let i=deepClone(_floorsConfig);if(2===dlv(i,"data.floorsSchemaVersion")){let{modelGroups:e,...t}=i.data;i.data=Object.assign(t,pickRandomModel(e,t.modelWeightSum))}let r=0===Object.keys(dlv(i,"data.values")||{}).length;if(i.data=r?getFloorDataFromAdUnits(e):getFloorsDataForAuction(i.data),0===Object.keys(dlv(i,"data.values")||{}).length)i.skipped=!0,i.skippedReason=FLOOR_SKIPPED_REASON.NOT_FOUND;else{const e=getParameterByName("pbjs_skipRate")||(dlv(i,"data.skipRate")??i.skipRate),t=100*Math.random()<parseFloat(e);i.skipped=t,t&&(i.skippedReason=FLOOR_SKIPPED_REASON.RANDOM)}return i.hasOwnProperty("floorMin")&&(i.data.floorMin=i.floorMin),updateAdUnitsForAuction(e,i,t),i}function continueAuction(e){e.hasExited||(_delayedAuctions=_delayedAuctions.filter((t=>t.timer!==e.timer)),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||generateUUID(),_floorDataForAuction[e.reqBidsConfigObj.auctionId]=createFloorsDataForAuction(e.reqBidsConfigObj.adUnits||getGlobal().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function validateSchemaFields(e){if(Array.isArray(e)&&e.length>0){if(e.every((e=>allowedFields.includes(e))))return!0;logError(`${MODULE_NAME$7}: Fields received do not match allowed fields`)}return!1}function isValidRule(e,t,i,r){return"string"==typeof e&&e.split(r).length===i&&"number"==typeof t}function validateRules(e,t,i){return"object"==typeof e.values&&(e.values=Object.keys(e.values).reduce(((r,n)=>(isValidRule(n,e.values[n],t,i)&&(r[n]=e.values[n]),r)),{}),Object.keys(e.values).length>0)}function normalizeDefault(e){var t,i;if(isNumber(e.default)){let r="*";const n=((null==(t=e.schema)?void 0:t.fields)||[]).length;n?r=Array(n).fill("*").join((null==(i=e.schema)?void 0:i.delimiter)||"|"):dset(e,"schema.fields",[SYN_FIELD]),e.values=e.values||{},null==e.values[r]&&(e.values[r]=e.default,e.meta={defaultRule:r})}return e}function modelIsValid(e){return!!validateSchemaFields(dlv(e=normalizeDefault(e),"schema.fields"))&&validateRules(e,e.schema.fields.length,e.schema.delimiter||"|")}const floorsSchemaValidation={1:e=>modelIsValid(e),2:e=>!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((t=>!("number"!=typeof t.modelWeight||!modelIsValid(t)||(e.modelWeightSum+=t.modelWeight,0)))))};function isFloorsDataValid(e){return"object"==typeof e&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof floorsSchemaValidation[e.floorsSchemaVersion]?(logError(`${MODULE_NAME$7}: Unknown floorsSchemaVersion: `,e.floorsSchemaVersion),!1):floorsSchemaValidation[e.floorsSchemaVersion](e))}function parseFloorData(e,t){if(e&&"object"==typeof e&&isFloorsDataValid(e))return logInfo(`${MODULE_NAME$7}: A ${t} set the auction floor data set to `,e),{...e,location:t};logError(`${MODULE_NAME$7}: The floors data did not contain correct values`,e)}const requestBidsHook$1=timedAuctionHook("priceFloors",(function(e,t){const i={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};_floorsConfig.auctionDelay>0&&fetching?(i.timer=setTimeout((()=>{logWarn(`${MODULE_NAME$7}: Fetch attempt did not return in time for auction`),_floorsConfig.fetchStatus="timeout",continueAuction(i)}),_floorsConfig.auctionDelay),_delayedAuctions.push(i)):continueAuction(i)}));function resumeDelayedAuctions(){_delayedAuctions.forEach((e=>{clearTimeout(e.timer),continueAuction(e)})),_delayedAuctions=[]}function handleFetchResponse(e){let t;fetching=!1,_floorsConfig.fetchStatus="success";try{t=JSON.parse(e)}catch(r){t=e}const i=parseFloorData(t,"fetch");i&&(_floorsConfig.data=i,_floorsConfig.skipRate=isNumber(i.skipRate)?i.skipRate:_floorsConfig.skipRate,_floorsConfig.floorProvider=i.floorProvider||_floorsConfig.floorProvider),resumeDelayedAuctions()}function handleFetchError(e){fetching=!1,_floorsConfig.fetchStatus="error",logError(`${MODULE_NAME$7}: Fetch errored with: `,e),resumeDelayedAuctions()}function generateAndHandleFetch(e){e.url&&!fetching?"GET"!==(e.method||"GET")?logError(`${MODULE_NAME$7}: 'GET' is the only request method supported at this time!`):(ajax(e.url,{success:handleFetchResponse,error:handleFetchError},null,{method:"GET"}),fetching=!0):fetching&&logWarn(`${MODULE_NAME$7}: A fetch is already occuring. Skipping.`)}function addFieldOverrides(e){Object.keys(e).forEach((t=>{-1===allowedFields.indexOf(t)&&"function"==typeof e[t]&&(allowedFields.push(t),fieldMatchingFunctions[t]=e[t])}))}function handleSetFloorsConfig(e){_floorsConfig=pick(e,["floorMin","enabled",e=>!1!==e,"auctionDelay",e=>e||0,"floorProvider",t=>dlv(e,"data.floorProvider",t),"endpoint",e=>e||{},"skipRate",()=>isNaN(dlv(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate,"enforcement",e=>pick(e||{},["enforceJS",e=>!1!==e,"enforcePBS",e=>!0===e,"floorDeals",e=>!0===e,"bidAdjustment",e=>!1!==e,"noFloorSignalBidders",e=>e||[]]),"additionalSchemaFields",e=>"object"==typeof e&&Object.keys(e).length>0?addFieldOverrides(e):void 0,"data",e=>e&&parseFloorData(e,"setConfig")||void 0]),_floorsConfig.enabled?(generateAndHandleFetch(_floorsConfig.endpoint),addedFloorsHook||(on(EVENTS$1.AUCTION_END,(e=>{setTimeout((()=>delete _floorDataForAuction[e.auctionId]),3e3)})),getGlobal().requestBids.before(requestBidsHook$1,50),getHook("addBidResponse").before(addBidResponseHook$1,debugTurnedOn()?4:50),addedFloorsHook=!0)):(logInfo(`${MODULE_NAME$7}: Turning off module`),_floorsConfig={},_floorDataForAuction={},getHook("addBidResponse").getHooks({hook:addBidResponseHook$1}).remove(),getGlobal().requestBids.getHooks({hook:requestBidsHook$1}).remove(),addedFloorsHook=!1)}function addFloorDataToBid(e,t,i,r){i.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:r,enforcements:{...e.enforcement},matchedFields:{}},e.data.schema.fields.forEach(((r,n)=>{let a=t.matchingData.split(e.data.schema.delimiter)[n];i.floorData.matchedFields[r]=a}))}function shouldFloorBid(e,t,i){let r=!1!==dlv(e,"enforcement.enforceJS"),n=!0===dlv(e,"enforcement.floorDeals")||!i.dealId,a=i.floorData.cpmAfterAdjustments<t.matchingFloor;return r&&a&&n}const addBidResponseHook$1=timedBidResponseHook("priceFloors",(function(e,t,i,r){var n;let a=_floorDataForAuction[i.auctionId];if(!a||!i||a.skipped)return e.call(this,t,i,r);const o=auctionManager$1.index.getBidRequest(i);let s,d=getFirstMatchingFloor(a.data,o,{...i,size:[i.width,i.height]});if(!d.matchingFloor)return 0!==d.matchingFloor&&logWarn(`${MODULE_NAME$7}: unable to determine a matching price floor for bidResponse`,i),e.call(this,t,i,r);let l=a.data.currency.toUpperCase(),c=i.currency||"USD";if(l===c.toUpperCase())s=i.cpm;else if(i.originalCurrency&&l===i.originalCurrency.toUpperCase())s=i.originalCpm;else try{s=getGlobal().convertCurrency(i.cpm,c.toUpperCase(),l)}catch(p){return logError(`${MODULE_NAME$7}: Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ${i}`),e.call(this,t,i,r)}return s=getBiddersCpmAdjustment(s,i,o),addFloorDataToBid(a,d,i,s),shouldFloorBid(a,d,i)?(r(REJECTION_REASON.FLOOR_NOT_MET),void logWarn(`${MODULE_NAME$7}: ${i.bidderCode}'s Bid Response for ${t} was rejected due to floor not met (adjusted cpm: ${null==(n=null==i?void 0:i.floorData)?void 0:n.cpmAfterAdjustments}, floor: ${null==d?void 0:d.matchingFloor})`,i)):e.call(this,t,i,r)}));function setOrtbImpBidFloor(e,t,i){if("function"==typeof t.getFloor){let n,a;try{({currency:n,floor:a}=t.getFloor({currency:i.currency||config.getConfig("currency.adServerCurrency")||"USD",mediaType:i.mediaType||"*",size:"*"}))}catch(r){return void logWarn("Cannot compute floor for bid",t)}a=parseFloat(a),null==n||null==a||isNaN(a)||Object.assign(e,{bidfloor:a,bidfloorcur:n})}}function setImpExtPrebidFloors(e,t,i){var r,n,a,o,s,d,l,c,p,u;if(null!=e.bidfloor){let{floorMinCur:t,floorMin:m}=i.reqContext.floorMin||{};null==t&&(t=e.bidfloorcur);const g=(null==(a=null==(n=null==(r=e.ext)?void 0:r.prebid)?void 0:n.floors)?void 0:a.floorMinCur)||(null==(s=null==(o=e.ext)?void 0:o.prebid)?void 0:s.floorMinCur)||t,f=(null==(c=null==(l=null==(d=e.ext)?void 0:d.prebid)?void 0:l.floors)?void 0:c.floorMin)||(null==(u=null==(p=e.ext)?void 0:p.prebid)?void 0:u.floorMin),b=convertCurrency(e.bidfloor,e.bidfloorcur,t),h=!(!f||!g)&&convertCurrency(f,g,t),y=h&&h<b?h:b;dset(e,"ext.prebid.floors.floorMin",y),(null==m||m>y)&&(m=y),i.reqContext.floorMin={floorMin:m,floorMinCur:t}}}function setOrtbExtPrebidFloors(e,t,i){var r,n,a;addedFloorsHook&&dset(e,"ext.prebid.floors.enabled",(null==(a=null==(n=null==(r=e.ext)?void 0:r.prebid)?void 0:n.floors)?void 0:a.enabled)||!1),(null==i?void 0:i.floorMin)&&mergeDeep(e,{ext:{prebid:{floors:i.floorMin}}})}config.getConfig("floors",(e=>handleSetFloorsConfig(e.floors))),registerOrtbProcessor({type:IMP,name:"bidfloor",fn:setOrtbImpBidFloor}),registerOrtbProcessor({type:IMP,name:"extPrebidFloors",fn:setImpExtPrebidFloors,dialects:[PBS],priority:-1}),registerOrtbProcessor({type:REQUEST$1,name:"extPrebidFloors",fn:setOrtbExtPrebidFloors,dialects:[PBS]});const prebid=getGlobal();function registerVideoSupport(e,t){prebid.adServers=prebid.adServers||{},prebid.adServers[e]=prebid.adServers[e]||{},Object.keys(t).forEach((i=>{prebid.adServers[e][i]?logWarn(`Attempting to add an already registered function property ${i} for AdServer ${e}.`):prebid.adServers[e][i]=t[i]}))}var pbTargetingKeys=[];const MAX_DFP_KEYLENGTH=20,CFG_ALLOW_TARGETING_KEYS="targetingControls.allowTargetingKeys",CFG_ADD_TARGETING_KEYS="targetingControls.addTargetingKeys",TARGETING_KEY_CONFIGURATION_ERROR_MSG=`Only one of "${CFG_ALLOW_TARGETING_KEYS}" or "${CFG_ADD_TARGETING_KEYS}" can be set`,TARGETING_KEYS_ARR=Object.keys(TARGETING_KEYS).map((e=>TARGETING_KEYS[e])),isBidNotExpired=e=>e.responseTimestamp+1e3*getTTL(e)>timestamp(),isUnusedBid=e=>e&&(e.status&&!includes$1([BID_STATUS.RENDERED],e.status)||!e.status);let filters={isActualBid:e=>e.getStatusCode()===STATUS.GOOD,isBidNotExpired:isBidNotExpired,isUnusedBid:isUnusedBid};function isBidUsable(e){return!Object.values(filters).some((t=>!t(e)))}const getHighestCpmBidsFromBidPool=hook("sync",(function(e,t,i=0,r=!1){if(!r){const r=[],n=config.getConfig("sendBidsControl.dealPrioritization");let a=groupBy(e,"adUnitCode");return Object.keys(a).forEach((e=>{let o=[],s=groupBy(a[e],"bidderCode");Object.keys(s).forEach((e=>o.push(s[e].reduce(t)))),i>0?(o=n?o.sort(sortByDealAndPriceBucketOrCpm(!0)):o.sort(((e,t)=>t.cpm-e.cpm)),r.push(...o.slice(0,i))):r.push(...o)})),r}return e}));function sortByDealAndPriceBucketOrCpm(e=!1){return function(t,i){return void 0!==t.adserverTargeting.hb_deal&&void 0===i.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==i.adserverTargeting.hb_deal?1:e?i.cpm-t.cpm:i.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}function newTargeting(e){let t={},i={};function r(e,t){return e.adserverTargeting&&t&&(isArray(t)&&includes$1(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function n(t){return"string"==typeof t?[t]:isArray(t)?t:e.getAdUnitCodes()||[]}function a(){let t=e.getBidsReceived();if(config.getConfig("useBidCache")){const e=config.getConfig("bidCacheFilterFunction");"function"==typeof e&&(t=t.filter((t=>i[t.adUnitCode]===t.auctionId||!!e(t))))}else t=t.filter((e=>i[e.adUnitCode]===e.auctionId));return t=t.filter((e=>dlv(e,"video.context")!==ADPOD)).filter(isBidUsable),t.forEach((e=>(e.latestTargetedAuctionId=i[e.adUnitCode],e))),getHighestCpmBidsFromBidPool(t,getOldestHighestCpmBid)}function o(){return e.getStandardBidderAdServerTargeting().map((e=>e.key)).concat(TARGETING_KEYS_ARR).filter(uniques)}function s(e,t,i,r){return Object.keys(t.adserverTargeting).filter(d()).forEach((i=>{e.length&&e.filter(function(e){return function(i){return i.adUnitCode===t.adUnitCode&&i.adserverTargeting[e]}}(i)).forEach(function(e){return function(i){isArray(i.adserverTargeting[e])||(i.adserverTargeting[e]=[i.adserverTargeting[e]]),i.adserverTargeting[e]=i.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(uniques),delete t.adserverTargeting[e]}}(i))})),e.push(t),e}function d(){let e=o();return e=e.concat(NATIVE_TARGETING_KEYS),function(t){return-1===e.indexOf(t)}}function l(e){return{[e.adUnitCode]:Object.keys(e.adserverTargeting).filter(d()).map((t=>({[t.substring(0,MAX_DFP_KEYLENGTH)]:[e.adserverTargeting[t]]})))}}function c(e,t){return t.map((t=>({[`${t}_${e.bidderCode}`.substring(0,MAX_DFP_KEYLENGTH)]:[e.adserverTargeting[t]]})))}return t.setLatestAuctionForAdUnit=function(e,t){i[e]=t},t.resetPresetTargeting=function(t,i){if(isGptPubadsDefined()){const r=n(t),a=e.getAdUnits().filter((e=>includes$1(r,e.code)));let o=pbTargetingKeys.reduce(((e,t)=>(e[t]=null,e)),{});window.googletag.pubads().getSlots().forEach((e=>{let t=isFn(i)&&i(e);a.forEach((i=>{(i.code===e.getAdUnitPath()||i.code===e.getSlotElementId()||isFn(t)&&t(i.code))&&e.updateTargetingFromMap(o)}))}))}},t.resetPresetTargetingAST=function(e){n(e).forEach((function(e){const t=window.apntag.getTag(e);if(t&&t.keywords){const i=Object.keys(t.keywords),r={};i.forEach((e=>{includes$1(pbTargetingKeys,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(i,d=a()){const p=n(i);var u=function(e,i){let r=t.getWinningBids(e,i),n=o();return r=r.map((e=>({[e.adUnitCode]:Object.keys(e.adserverTargeting).filter((t=>void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===n.indexOf(t))).reduce(((t,i)=>{const r=[e.adserverTargeting[i]],n={[i.substring(0,MAX_DFP_KEYLENGTH)]:r};if(i===TARGETING_KEYS.DEAL){const a={[`${i}_${e.bidderCode}`.substring(0,MAX_DFP_KEYLENGTH)]:r};return[...t,n,a]}return[...t,n]}),[])}))),r}(p,d).concat(function(e,t){return t.filter((t=>includes$1(e,t.adUnitCode))).map((e=>Object.assign({},e))).reduce(s,[]).map(l).filter((e=>e))}(p,d)).concat(config.getConfig("enableSendAllBids")?function(e,t){const i=TARGETING_KEYS_ARR.concat(NATIVE_TARGETING_KEYS),n=config.getConfig("sendBidsControl.bidLimit"),a=getHighestCpmBidsFromBidPool(t,getHighestCpm,n),o=config.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=o?o.map((e=>TARGETING_KEYS[e])):i;return a.map((t=>{if(r(t,e))return{[t.adUnitCode]:c(t,i.filter((e=>void 0!==t.adserverTargeting[e]&&-1!==s.indexOf(e))))}})).filter((e=>e))}(p,d):function(e,t){if(!0===config.getConfig("targetingControls.alwaysIncludeDeals")){const i=TARGETING_KEYS_ARR.concat(NATIVE_TARGETING_KEYS);return getHighestCpmBidsFromBidPool(t,getHighestCpm).map((t=>{if(t.dealId&&r(t,e))return{[t.adUnitCode]:c(t,i.filter((e=>void 0!==t.adserverTargeting[e])))}})).filter((e=>e))}return[]}(p,d)).concat(function(t){function i(e){return dlv(e,JSON_MAPPING.ADSERVER_TARGETING)}function r(e){const t=i(e);return Object.keys(t).map((function(e){return isStr(t[e])&&(t[e]=t[e].split(",").map((e=>e.trim()))),isArray(t[e])||(t[e]=[t[e]]),{[e]:t[e]}}))}return e.getAdUnits().filter((e=>includes$1(t,e.code)&&i(e))).map((e=>({[e.code]:r(e)})))}(p));u.map((e=>{Object.keys(e).map((t=>{e[t].map((e=>{-1===pbTargetingKeys.indexOf(Object.keys(e)[0])&&(pbTargetingKeys=Object.keys(e).concat(pbTargetingKeys))}))}))}));const m=Object.keys(Object.assign({},DEFAULT_TARGETING_KEYS,NATIVE_KEYS));let g=config.getConfig(CFG_ALLOW_TARGETING_KEYS);const f=config.getConfig(CFG_ADD_TARGETING_KEYS);if(null!=f&&null!=g)throw new Error(TARGETING_KEY_CONFIGURATION_ERROR_MSG);g=null!=f?m.concat(f):g||m,Array.isArray(g)&&g.length>0&&(u=function(e,t){const i=Object.assign({},TARGETING_KEYS,NATIVE_KEYS),r=Object.keys(i),n={};return logInfo(`allowTargetingKeys - allowed keys [ ${t.map((e=>i[e])).join(", ")} ]`),e.map((e=>{const a=Object.keys(e)[0],o=e[a].filter((e=>{const a=Object.keys(e)[0],o=0===r.filter((e=>0===a.indexOf(i[e]))).length||find(t,(e=>{const t=i[e];return 0===a.indexOf(t)}));return n[a]=!o,o}));e[a]=o})),logInfo(`allowTargetingKeys - removed keys [ ${Object.keys(n).filter((e=>n[e])).join(", ")} ]`),e.filter((e=>e[Object.keys(e)[0]].length>0))}(u,g)),u=function(e){let t=e.map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].join(",")}))).reduce(((e,t)=>Object.assign(t,e)),{})}))).reduce((function(e,t){var i=Object.keys(t)[0];return e[i]=Object.assign({},e[i],t[i]),e}),{});return t}(u);const b=config.getConfig("targetingControls.auctionKeyMaxChars");return b&&(logInfo(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${b} characters.  Running checks on auction keys...`),u=function(e,t){let i=deepClone(e),r=Object.keys(i).map((e=>({adUnitCode:e,adserverTargeting:i[e]}))).sort(sortByDealAndPriceBucketOrCpm());return r.reduce((function(e,r,n,a){let o=(s=r.adserverTargeting,Object.keys(s).reduce((function(e,t){return e+`${t}%3d${encodeURIComponent(s[t])}%26`}),""));var s;n+1===a.length&&(o=o.slice(0,-3));let d=r.adUnitCode,l=o.length;return l<=t?(logInfo(`AdUnit '${d}' auction keys comprised of ${l} characters.  Deducted from running threshold; new limit is ${t-=l}`,i[d]),e[d]=i[d]):logWarn(`The following keys for adUnitCode '${d}' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ${l}, the current allotted amount was ${t}.\n`,i[d]),n+1===a.length&&0===Object.keys(e).length&&logError("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(u,b)),p.forEach((e=>{u[e]||(u[e]={})})),u},config.getConfig("targetingControls",(function(e){null!=dlv(e,CFG_ALLOW_TARGETING_KEYS)&&null!=dlv(e,CFG_ADD_TARGETING_KEYS)&&logError(TARGETING_KEY_CONFIGURATION_ERROR_MSG)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((i=>{Object.keys(e).filter(t?t(i):isAdUnitCodeMatchingSlot(i)).forEach((t=>{Object.keys(e[t]).forEach((i=>{let r=e[t][i];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][i]=r})),logMessage(`Attempting to set targeting-map for slot: ${i.getSlotElementId()} with targeting-map:`,e[t]),i.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e,t=a()){const i=n(e);return t.filter((e=>includes$1(i,e.adUnitCode))).filter((e=>!0===bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0)).map((e=>e.adUnitCode)).filter(uniques).map((e=>t.filter((t=>t.adUnitCode===e?t:null)).reduce(getHighestCpm)))},t.setTargetingForAst=function(e){let i=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(r){logError("unable to reset targeting for AST"+r)}Object.keys(i).forEach((e=>Object.keys(i[e]).forEach((t=>{if(logMessage(`Attempting to set targeting for targetId: ${e} key: ${t} value: ${i[e][t]}`),isStr(i[e][t])||isArray(i[e][t])){let r={},n=/pt[0-9]/;t.search(n)<0?r[t.toUpperCase()]=i[e][t]:r[t]=i[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))))},t.isApntagDefined=function(){if(window.apntag&&isFn(window.apntag.setKeywords))return!0},t}const targeting=newTargeting(auctionManager$1),getPPID$1=hook("sync",(()=>{})),defaultParamConstants={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},adpodUtils={},dep$1={ri:getRefererInfo};function buildDfpVideoUrl(e){var t,i,r,n,a;if(!e.params&&!e.url)return void logError("A params object or a url is required to use slmpbjs.adServers.dfp.buildVideoUrl");const o=e.adUnit,s=e.bid||targeting.getWinningBids(o.code)[0];let d={};if(e.url&&(d=parseUrl(e.url,{noDecodeWholeURL:!0}),isEmpty(e.params)))return buildUrlFromAdserverUrlComponents(d,s,e);const l={correlator:Date.now(),sz:parseSizesInput(dlv(o,"mediaTypes.video.playerSize")).join("|"),url:encodeURIComponent(location.href)},c=d.search,p=c&&c.sz;p&&(l.sz=p+"|"+l.sz);let u=getCustParams(s,e,c&&c.cust_params);const m=Object.assign({},defaultParamConstants,d.search,l,e.params,{cust_params:u}),g=getDescriptionUrl(s,e,"params");g&&(m.description_url=g);const f=gdprDataHandler.getConsentData();if(f&&("boolean"==typeof f.gdprApplies&&(m.gdpr=Number(f.gdprApplies)),f.consentString&&(m.gdpr_consent=f.consentString),f.addtlConsent&&(m.addtl_consent=f.addtlConsent)),!m.ppid){const e=getPPID$1();null!=e&&(m.ppid=e)}const b=null==(i=null==(t=e.adUnit)?void 0:t.mediaTypes)?void 0:i.video;Object.entries({plcmt:()=>null==b?void 0:b.plcmt,min_ad_duration:()=>isNumber(null==b?void 0:b.minduration)?1e3*b.minduration:null,max_ad_duration:()=>isNumber(null==b?void 0:b.maxduration)?1e3*b.maxduration:null,vpos(){const e=null==b?void 0:b.startdelay;if(isNumber(e))return-2===e?"postroll":-1===e||e>0?"midroll":"preroll"},vconp:()=>Array.isArray(null==b?void 0:b.playbackmethod)&&b.playbackmethod.every((e=>7===e))?"2":void 0,vpa(){if(Array.isArray(null==b?void 0:b.playbackmethod)){const e=b.playbackmethod.some((e=>3===e)),t=b.playbackmethod.some((e=>[1,2,4,5,6].includes(e)));if(e&&!t)return"click";if(t&&!e)return"auto"}},vpmute(){if(Array.isArray(null==b?void 0:b.playbackmethod)){const e=b.playbackmethod.some((e=>[2,6].includes(e))),t=b.playbackmethod.some((e=>[1,3,4,5].includes(e)));if(e&&!t)return"1";if(t&&!e)return"0"}}}).forEach((([e,t])=>{if(!m.hasOwnProperty(e)){const i=t();null!=i&&(m[e]=i)}}));const h=(null==(r=auctionManager$1.index.getBidRequest(e.bid||{}))?void 0:r.ortb2)??(null==(a=null==(n=auctionManager$1.index.getAuction(e.bid||{}))?void 0:n.getFPD())?void 0:a.global);function y(e,t){return e.flatMap((e=>dlv(h,e)||[])).filter((e=>{var i;return(null==(i=e.ext)?void 0:i.segtax)===t})).flatMap((e=>{var t;return null==(t=e.segment)?void 0:t.map((e=>e.id))})).filter((e=>e)).filter(uniques)}const v=Object.entries({IAB_AUDIENCE_1_1:y(["user.data"],4),IAB_CONTENT_2_2:y(CLIENT_SECTIONS.map((e=>`${e}.content.data`)),6)}).map((([e,t])=>t.length?{taxonomy:e,values:t}:null)).filter((e=>e));return v.length&&(m.ppsj=btoa(JSON.stringify({PublisherProvidedTaxonomySignals:v}))),buildUrl(Object.assign({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"},d,{search:m}))}function notifyTranslationModule(e){e.call(this,"dfp")}function buildAdpodVideoUrl({code:e,params:t,callback:i}={}){if(!t||!i)return void logError("A params object and a callback is required to use pbjs.adServers.dfp.buildAdpodVideoUrl");const r={correlator:Date.now(),sz:(n=e,parseSizesInput(dlv(auctionManager$1.getAdUnits().filter((e=>e.code===n))[0],"mediaTypes.video.playerSize")).join("|")),url:encodeURIComponent(location.href)};var n;adpodUtils.getTargeting({codes:[e],callback:function(n,a){if(n)return void i(n,null);let o={[adpodUtils.TARGETING_KEY_PB_CAT_DUR]:void 0,[adpodUtils.TARGETING_KEY_CACHE_ID]:void 0},s={};a[e]&&(s=a[e].reduce(((e,t)=>(Object.keys(t)[0]===adpodUtils.TARGETING_KEY_PB_CAT_DUR?e[adpodUtils.TARGETING_KEY_PB_CAT_DUR]=void 0!==e[adpodUtils.TARGETING_KEY_PB_CAT_DUR]?e[adpodUtils.TARGETING_KEY_PB_CAT_DUR]+","+t[adpodUtils.TARGETING_KEY_PB_CAT_DUR]:t[adpodUtils.TARGETING_KEY_PB_CAT_DUR]:Object.keys(t)[0]===adpodUtils.TARGETING_KEY_CACHE_ID&&(e[adpodUtils.TARGETING_KEY_CACHE_ID]=t[adpodUtils.TARGETING_KEY_CACHE_ID]),e)),o));let d=encodeURIComponent(formatQS(s));const l=Object.assign({},defaultParamConstants,r,t,{cust_params:d}),c=gdprDataHandler.getConsentData();c&&("boolean"==typeof c.gdprApplies&&(l.gdpr=Number(c.gdprApplies)),c.consentString&&(l.gdpr_consent=c.consentString),c.addtlConsent&&(l.addtl_consent=c.addtlConsent));const p=buildUrl({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads",search:l});i(null,p)}})}function buildUrlFromAdserverUrlComponents(e,t,i){const r=getDescriptionUrl(t,e,"search");return r&&(e.search.description_url=r),e.search.cust_params=getCustParams(t,i,e.search.cust_params),buildUrl(e)}function getDescriptionUrl(e,t,i){return dlv(t,`${i}.description_url`)||encodeURIComponent(dep$1.ri().page)}function getCustParams(e,t,i){const r=e&&e.adserverTargeting||{};let n={};const a=t&&t.adUnit;if(a){let e=targeting.getAllTargeting(a.code);n=e?e[a.code]:{}}const o=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},n,r);emit(EVENTS$1.SET_TARGETING,{[a.code]:o});const s=dlv(t,"params.cust_params"),d=Object.assign({},o,s);let l=encodeURIComponent(formatQS(d));return i&&(l=i+"%26"+l),l}config.getConfig("brandCategoryTranslation.translationFile")&&getHook("registerAdserver").before(notifyTranslationModule),registerVideoSupport("dfp",{buildVideoUrl:buildDfpVideoUrl,buildAdpodVideoUrl:buildAdpodVideoUrl,getAdpodTargeting:e=>adpodUtils.getTargeting(e)}),submodule("adpod",adpodUtils);const storage$f=getCoreStorageManager("categoryTranslation"),DEFAULT_TRANSLATION_FILE_URL="https://cdn.jsdelivr.net/gh/prebid/category-mapping-file@1/freewheel-mapping.json",DEFAULT_IAB_TO_FW_MAPPING_KEY="iabToFwMappingkey",DEFAULT_IAB_TO_FW_MAPPING_KEY_PUB="iabToFwMappingkeyPub",refreshInDays=1,registerAdserver=hook("async",(function(e){let t;"freewheel"===e&&(t=DEFAULT_TRANSLATION_FILE_URL,initTranslation(t,DEFAULT_IAB_TO_FW_MAPPING_KEY))}),"registerAdserver");ready.then((()=>registerAdserver()));const getAdserverCategoryHook=timedBidResponseHook("categoryTranslation",(function(e,t,i,r){if(!i)return e.call(this,t,i,r);if(!config.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t,i,r);let n=config.getConfig("brandCategoryTranslation.translationFile")?DEFAULT_IAB_TO_FW_MAPPING_KEY_PUB:DEFAULT_IAB_TO_FW_MAPPING_KEY;if(i.meta&&!i.meta.adServerCatId){let e=storage$f.getDataFromLocalStorage(n);if(e){try{e=JSON.parse(e)}catch(a){logError("Failed to parse translation mapping file")}i.meta.primaryCatId&&e.mapping&&e.mapping[i.meta.primaryCatId]?i.meta.adServerCatId=e.mapping[i.meta.primaryCatId].id:i.meta.adServerCatId=void 0}else logError("Translation mapping data not found in local storage")}e.call(this,t,i,r)}));function initTranslation(e,t){setupBeforeHookFnOnce(addBidResponse,getAdserverCategoryHook,50);let i=storage$f.getDataFromLocalStorage(t);try{i=i?JSON.parse(i):void 0,(!i||timestamp()>i.lastUpdated+24*refreshInDays*60*60*1e3)&&ajax$1(e,{success:e=>{try{(e=JSON.parse(e)).lastUpdated=timestamp(),storage$f.setDataInLocalStorage(t,JSON.stringify(e))}catch(i){logError("Failed to parse translation mapping file")}},error:()=>{logError("Failed to load brand category translation file.")}})}catch(r){logError("Failed to parse translation mapping file")}}function setConfig$1(e){e.translationFile&&initTranslation(e.translationFile,DEFAULT_IAB_TO_FW_MAPPING_KEY_PUB)}config.getConfig("brandCategoryTranslation",(e=>setConfig$1(e.brandCategoryTranslation)));const schainErrorPrefix="Invalid schain object found: ",shouldBeAString=" should be a string",shouldBeAnInteger=" should be an Integer",shouldBeAnObject=" should be an object",shouldBeAnArray=" should be an Array",MODE={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},MODES=[];function isSchainObjectValid(e,t){let i="Detected something wrong within an schain config:",r="";function n(e){r+="\n"+e}function a(){!0===t?logError(i,e,r):logWarn(i,e,r)}if(!isPlainObject(e)&&(n("schain.config"+shouldBeAnObject),a(),t))return!1;if(isNumber(e.complete)&&isInteger(e.complete)||n("schain.config.complete"+shouldBeAnInteger),isStr(e.ver)||n("schain.config.ver"+shouldBeAString),e.hasOwnProperty("ext")&&(isPlainObject(e.ext)||n("schain.config.ext"+shouldBeAnObject)),isArray(e.nodes))e.nodes.forEach(((e,t)=>{isStr(e.asi)||n(`schain.config.nodes[${t}].asi`+shouldBeAString),isStr(e.sid)||n(`schain.config.nodes[${t}].sid`+shouldBeAString),isNumber(e.hp)&&isInteger(e.hp)||n(`schain.config.nodes[${t}].hp`+shouldBeAnInteger),e.hasOwnProperty("rid")&&(isStr(e.rid)||n(`schain.config.nodes[${t}].rid`+shouldBeAString)),e.hasOwnProperty("name")&&(isStr(e.name)||n(`schain.config.nodes[${t}].name`+shouldBeAString)),e.hasOwnProperty("domain")&&(isStr(e.domain)||n(`schain.config.nodes[${t}].domain`+shouldBeAString)),e.hasOwnProperty("ext")&&(isPlainObject(e.ext)||n(`schain.config.nodes[${t}].ext`+shouldBeAnObject))}));else if(n("schain.config.nodes"+shouldBeAnArray),a(),t)return!1;return!(r.length>0&&(a(),t))}function isValidSchainConfig(e){return!(void 0===e||!isPlainObject(e)&&(logError(schainErrorPrefix+"the following schain config will not be used as schain is not an object.",e),1))}function resolveSchainConfig(e,t){let i=MODE.STRICT;if(isValidSchainConfig(e)){if(isStr(e.validation)&&-1!=MODES.indexOf(e.validation)&&(i=e.validation),i===MODE.OFF)return e.config;if(isSchainObjectValid(e.config,!(i!==MODE.STRICT)))return e.config;logError(schainErrorPrefix+`due to the 'strict' validation setting, this schain config will not be passed to bidder '${t}'.  See above error for details.`)}return null}function makeBidRequestsHook(e,t){const i=config.getConfig("schain"),r=config.getBidderConfig();t.forEach((e=>{let t=e.bidderCode,n=function(e){return r[e]&&r[e].schain||i}(t);e.bids.forEach((e=>{let i=resolveSchainConfig(n,t);i&&(e.schain=deepClone(i))}))})),e(t)}function init$4(){adaptermanager.makeBidRequests.after(makeBidRequestsHook)}function setOrtbSourceExtSchain(e,t,i){if(!dlv(e,"source.ext.schain")){const t=dlv(i,"bidRequests.0.schain");t&&dset(e,"source.ext.schain",t)}}_each(MODE,(e=>MODES.push(e))),init$4(),registerOrtbProcessor({type:REQUEST$1,name:"sourceExtSchain",fn:setOrtbSourceExtSchain});const MODULE_NAME$6="teadsId",GVL_ID$4=132,FP_TEADS_ID_COOKIE_NAME$1="_tfpvi",EXPIRED_COOKIE_DATE="Thu, 01 Jan 1970 00:00:01 GMT",gdprStatus$1={GDPR_DOESNT_APPLY:0,CMP_NOT_FOUND_OR_ERROR:22,GDPR_APPLIES_PUBLISHER:12},gdprReason={GDPR_DOESNT_APPLY:0,CMP_NOT_FOUND:220,GDPR_APPLIES_PUBLISHER_CLASSIC:120},storage$e=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:MODULE_NAME$6}),teadsIdSubmodule={name:MODULE_NAME$6,gvlid:GVL_ID$4,decode:e=>({teadsId:e}),getId:(e,t)=>({callback:function(i){const r=buildAnalyticsTagUrl(e,t);ajax$1(r,{success:(e,t)=>{if(t&&200===t.status)if(isStr(e)&&!isEmpty(e)){const t=getCookieExpirationDate(getTimestampFromDays(365));storage$e.setCookie(FP_TEADS_ID_COOKIE_NAME$1,e,t),i(e)}else storage$e.setCookie(FP_TEADS_ID_COOKIE_NAME$1,"",EXPIRED_COOKIE_DATE),i();else logInfo(`${MODULE_NAME$6}: Server error while fetching ID`),i()},error:e=>{logError(`${MODULE_NAME$6}: ID fetch encountered an error`,e),i()}},void 0,{method:"GET"})}})};function buildAnalyticsTagUrl(e,t){const i=getPublisherId(e),r=getTeadsViewerId(),n=getGdprStatus(t),a=getGdprConsentString(t),o=getCcpaConsentString(null==uspDataHandler?void 0:uspDataHandler.getConsentData()),s={analytics_tag_id:i,tfpvi:r,gdpr_consent:a,gdpr_status:n,gdpr_reason:getGdprReasonFromStatus(n),ccpa_consent:o,sv:"prebid-v1"},d=new URLSearchParams;for(const l in s)d.append(l,s[l]);return"https://at.teads.tv/fpc?"+d.toString()}function getPublisherId(e){var t;const i=null==(t=null==e?void 0:e.params)?void 0:t.pubId,r="PUB_";return isNumber(i)?r+i.toString():isStr(i)&&parseInt(i)?r+i:""}function getGdprStatus(e){const t=null==e?void 0:e.gdprApplies;return!0===t?gdprStatus$1.GDPR_APPLIES_PUBLISHER:!1===t?gdprStatus$1.GDPR_DOESNT_APPLY:gdprStatus$1.CMP_NOT_FOUND_OR_ERROR}function getGdprConsentString(e){const t=null==e?void 0:e.consentString;return isStr(t)?t:""}function getGdprReasonFromStatus(e){switch(e){case gdprStatus$1.GDPR_DOESNT_APPLY:return gdprReason.GDPR_DOESNT_APPLY;case gdprStatus$1.CMP_NOT_FOUND_OR_ERROR:return gdprReason.CMP_NOT_FOUND;case gdprStatus$1.GDPR_APPLIES_PUBLISHER:return gdprReason.GDPR_APPLIES_PUBLISHER_CLASSIC;default:return-1}}function getCcpaConsentString(e){return isStr(e)?e:""}function getCookieExpirationDate(e){return new Date(timestamp()+e).toUTCString()}function getTeadsViewerId(){const e=readCookie();return isStr(e)?e:""}function readCookie(){return storage$e.cookiesAreEnabled(null)?storage$e.getCookie(FP_TEADS_ID_COOKIE_NAME$1,null):null}function getTimestampFromDays(e){return 24*e*60*60*1e3}submodule("userId",teadsIdSubmodule);const EID_CONFIG=new Map;function createEidObject(e,t){const i=EID_CONFIG.get(t);if(i&&e){let t={};t.source=isFn(i.getSource)?i.getSource(e):i.source;const r=isFn(i.getValue)?i.getValue(e):e;if(isStr(r)){const n={id:r,atype:i.atype};if(isFn(i.getUidExt)){const t=i.getUidExt(e);t&&(n.ext=t)}if(t.uids=[n],isFn(i.getEidExt)){const r=i.getEidExt(e);r&&(t.ext=r)}return t}}return null}function createEidsArray(e){const t={};function i(e){var i;const r=JSON.stringify([null==(i=e.source)?void 0:i.toLowerCase(),e.ext]);t.hasOwnProperty(r)?t[r].uids.push(...e.uids):t[r]=e}return Object.entries(e).forEach((([e,t])=>{t=Array.isArray(t)?t:[t],("pubProvidedId"===e?deepClone(t):t.map((t=>createEidObject(t,e)))).filter((e=>null!=e)).forEach(i)})),Object.values(t)}function buildEidPermissions(e){let t=[];return e.filter((e=>isPlainObject(e.idObj)&&Object.keys(e.idObj).length)).forEach((e=>{Object.keys(e.idObj).forEach((i=>{const r=EID_CONFIG.get(i)||{};dlv(e,"config.bidders")&&Array.isArray(e.config.bidders)&&r.source&&t.push({source:r.source,bidders:e.config.bidders})}))})),t}const MODULE_NAME$5="User ID",COOKIE$1=STORAGE_TYPE_COOKIES$1,LOCAL_STORAGE$2=STORAGE_TYPE_LOCALSTORAGE$1,DEFAULT_SYNC_DELAY=500,NO_AUCTION_DELAY=0,PBJS_USER_ID_OPTOUT_NAME="_pbjs_id_optout",coreStorage=getCoreStorageManager("userId"),dep={isAllowed:isActivityAllowed};let addedUserIdHook=!1,submodules$1=[],initializedSubmodules,configRegistry=[],idPriority={},submoduleRegistry=[],timeoutID,syncDelay,auctionDelay,ppidSource,configListener;const uidMetrics=(()=>{let e;return()=>(null==e&&(e=newMetrics()),e)})();function submoduleMetrics(e){return uidMetrics().fork().renameWith((t=>[`userId.mod.${t}`,`userId.mods.${e}.${t}`]))}function cookieSetter(e,t){t=t||e.storageMgr;const i="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,r=e.config.storage.name;return function(e,n,a){t.setCookie(r+(e||""),n,a,"Lax",i)}}function setStoredValue(e,t){const i=e.config.storage,r=e.storageMgr;try{const n=new Date(Date.now()+864e5*i.expires).toUTCString(),a=isPlainObject(t)?JSON.stringify(t):t;if(i.type===COOKIE$1){const t=cookieSetter(e);t(null,a,n),t("_cst",getConsentHash(),n),"number"==typeof i.refreshInSeconds&&t("_last",(new Date).toUTCString(),n)}else i.type===LOCAL_STORAGE$2&&(r.setDataInLocalStorage(`${i.name}_exp`,n),r.setDataInLocalStorage(`${i.name}_cst`,getConsentHash()),r.setDataInLocalStorage(i.name,encodeURIComponent(a)),"number"==typeof i.refreshInSeconds&&r.setDataInLocalStorage(`${i.name}_last`,(new Date).toUTCString()))}catch(n){logError(n)}}function deleteStoredValue(e){var t,i;let r,n;switch(null==(i=null==(t=e.config)?void 0:t.storage)?void 0:i.type){case COOKIE$1:const t=cookieSetter(e,coreStorage),i=new Date(Date.now()-864e5).toUTCString();r=e=>t(e,"",i),n=["","_last","_cst"];break;case LOCAL_STORAGE$2:r=t=>coreStorage.removeDataFromLocalStorage(e.config.storage.name+t),n=["","_last","_exp","_cst"]}r&&n.forEach((e=>{try{r(e)}catch(t){logError(t)}}))}function setPrebidServerEidPermissions(e){let t=getPrebidInternal().setEidPermissions;"function"==typeof t&&isArray(e)&&t(buildEidPermissions(e))}function getStoredValue(e,t=void 0){const i=e.storageMgr,r=e.config.storage,n=t?`${r.name}_${t}`:r.name;let a;try{if(r.type===COOKIE$1)a=i.getCookie(n);else if(r.type===LOCAL_STORAGE$2){const e=i.getDataFromLocalStorage(`${r.name}_exp`);""===e?a=i.getDataFromLocalStorage(n):e&&new Date(e).getTime()-Date.now()>0&&(a=decodeURIComponent(i.getDataFromLocalStorage(n)))}"string"==typeof a&&"{"===a.trim().charAt(0)&&(a=JSON.parse(a))}catch(o){logError(o)}return a}function processSubmoduleCallbacks(e,t,i){t=uidMetrics().fork().startTiming("userId.callbacks.total").stopBefore(t);const r=delayExecution((()=>{clearTimeout(timeoutID),t()}),e.length);e.forEach((function(e){const t=submoduleMetrics(e.submodule.name).startTiming("callback").stopBefore(r);try{e.callback((function(r){r?(e.config.storage&&setStoredValue(e,r),e.idObj=e.submodule.decode(r,e.config),updatePPID(getCombinedSubmoduleIds(i))):logInfo(`${MODULE_NAME$5}: ${e.submodule.name} - request id responded with an empty value`),t()}),getStoredValue.bind(null,e))}catch(n){logError(`Error in userID module '${e.submodule.name}':`,n),t()}e.callback=void 0}))}function getCombinedSubmoduleIds(e){return Array.isArray(e)&&e.length?getPrioritizedCombinedSubmoduleIds(e):{}}function getSubmoduleId(e,t){if(!Array.isArray(e)||!e.length)return{};const i=getPrioritizedCombinedSubmoduleIds(e),r=Object.keys(i).find((e=>{const i=EID_CONFIG.get(e);return(null==i?void 0:i.source)===t||isFn(null==i?void 0:i.getSource)&&i.getSource()===t}));return r?{[r]:i[r]}:[]}function getCombinedSubmoduleIdsForBidder(e,t){return Array.isArray(e)&&e.length&&t?getPrioritizedCombinedSubmoduleIds(e.filter((e=>!e.config.bidders||!isArray(e.config.bidders)||includes$1(e.config.bidders,t)))):{}}function collectByPriority(e,t,i){return Object.fromEntries(Object.entries(e.reduce(((e,r)=>{const n=t(r);return n&&Object.keys(n).forEach((t=>{var a;const o=null==(a=idPriority[t])?void 0:a.indexOf(i(r)),s={priority:isNumber(o)?o:-1,value:n[t]};if(e[t]){const i=s.priority>e[t].priority?s:e[t];e[t]=i}else e[t]=s})),e}),{})).map((([e,t])=>[e,t.value])))}function getPrioritizedCombinedSubmoduleIds(e){return collectByPriority(e.filter((e=>isPlainObject(e.idObj)&&Object.keys(e.idObj).length)),(e=>e.idObj),(e=>e.submodule.name))}function addIdDataToAdUnitBids(e,t){[e].some((e=>!Array.isArray(e)||!e.length))||e.forEach((e=>{e.bids&&isArray(e.bids)&&e.bids.forEach((e=>{const i=getCombinedSubmoduleIdsForBidder(t,e.bidder);Object.keys(i).length&&(e.userId=i,e.userIdAsEids=createEidsArray(i))}))}))}const INIT_CANCELED={};function idSystemInitializer({delay:e=GreedyPromise.timeout}={}){const t=defer(),i=defer();let r,n,a=!1;function o(e){return n=uidMetrics().fork(),null!=r&&r.reject(INIT_CANCELED),r=defer(),GreedyPromise.race([e,r.promise]).finally(n.startTiming("userId.total"))}let s=initializedSubmodules,d=submodules$1;function l(e){return function(...t){if(s===initializedSubmodules&&d===submodules$1)return e(...t)}}function c(){return allConsent.promise.finally(n.startTiming("userId.init.consent"))}let p=o(GreedyPromise.all([ready,t.promise]).then(c).then(l((()=>{initSubmodules(s,d)}))).then((()=>i.promise.finally(n.startTiming("userId.callbacks.pending")))).then(l((()=>{const e=s.filter((e=>isFn(e.callback)));if(e.length)return new GreedyPromise((t=>processSubmoduleCallbacks(e,t,s)))}))));return function({refresh:r=!1,submoduleNames:n=null,ready:u=!1}={}){return u&&!a&&(a=!0,t.resolve(),auctionDelay>0?i.resolve():on(EVENTS$1.AUCTION_END,(function t(){off(EVENTS$1.AUCTION_END,t),e(syncDelay).then(i.resolve)}))),r&&a&&(p=o(p.catch((()=>null)).then(c).then(l((()=>{const e=initSubmodules(s,d.filter((e=>null==n||n.includes(e.submodule.name))),!0).filter((e=>null!=e.callback));if(e.length)return new GreedyPromise((t=>processSubmoduleCallbacks(e,t,s)))}))))),p}}let initIdSystem;function getPPID(e=getUserIdsAsEids()||[]){const t=ppidSource&&e.find((e=>e.source===ppidSource));if(t&&"string"==typeof dlv(t,"uids.0.id")){const e=t.uids[0].id.replace(/[\W_]/g,"");if(e.length>=32&&e.length<=150)return e;logWarn(`User ID - Googletag Publisher Provided ID for ${ppidSource} is not between 32 and 150 characters - ${e}`)}}const requestBidsHook=timedAuctionHook("userId",(function(e,t,{delay:i=GreedyPromise.timeout,getIds:r=getUserIdsAsync}={}){GreedyPromise.race([r().catch((()=>null)),i(auctionDelay)]).then((()=>{addIdDataToAdUnitBids(t.adUnits||getGlobal().adUnits,initializedSubmodules),uidMetrics().join(useMetrics(t.metrics),{propagate:!1,includeGroups:!0}),e.call(this,t)}))}));function getUserIds(){return getCombinedSubmoduleIds(initializedSubmodules)}function getUserIdsAsEids(){return createEidsArray(getUserIds())}function getUserIdsAsEidBySource(e){return createEidsArray(getSubmoduleId(initializedSubmodules,e))[0]}function getEncryptedEidsForSource(e,t,i){return initIdSystem().then((()=>{let r={};if(isFn(i)){logInfo(`${MODULE_NAME$5} - Getting encrypted signal from custom function : ${i.name} & source : ${e} `);const t=i(e);r[e]=t?encryptSignals(t):null}else{const i=getUserIdsAsEidBySource(e);logInfo(`${MODULE_NAME$5} - Getting encrypted signal for eids :${JSON.stringify(i)}`),isEmpty(i)||(r[i.source]=!0===t?encryptSignals(i):i.uids[0].id)}return logInfo(`${MODULE_NAME$5} - Fetching encrypted eids: ${r[e]}`),r[e]}))}function encryptSignals(e,t=1){let i="";return 1===t&&(i="object"==typeof e?window.btoa(JSON.stringify(e)):window.btoa(e)),`${t}||${i}`}function registerSignalSources(){if(!isGptPubadsDefined())return;window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];const e=config.getConfig("userSync.encryptedSignalSources");if(e){const t=e.registerDelay||0;setTimeout((()=>{e.sources&&e.sources.forEach((({source:e,encrypt:t,customFunc:i})=>{e.forEach((e=>{window.googletag.secureSignalProviders.push({id:e,collectorFunction:()=>getEncryptedEidsForSource(e,t,i)})}))}))}),t)}else logWarn(`${MODULE_NAME$5} - ESP : encryptedSignalSources config not defined under userSync Object`)}function refreshUserIds({submoduleNames:e}={},t){return initIdSystem({refresh:!0,submoduleNames:e}).then((()=>(t&&isFn(t)&&t(),getUserIds())))}function getUserIdsAsync(){return initIdSystem().then((()=>getUserIds()),(e=>e===INIT_CANCELED?Promise.resolve().then(getUserIdsAsync):(logError("Error initializing userId",e),GreedyPromise.reject(e))))}function getConsentHash(){let e=Number(allConsent.hash);const t=[];for(;e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function consentChanged(e){const t=getStoredValue(e,"cst");return!t||t!==getConsentHash()}function populateSubmoduleId(e,t,i){const r=gdprDataHandler.getConsentData();if(e.config.storage){let i,n=getStoredValue(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){const t=new Date(getStoredValue(e,"last"));a=t&&Date.now()-t.getTime()>1e3*e.config.storage.refreshInSeconds}!n||a||t||consentChanged(e)?i=e.submodule.getId(e.config,r,n):"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,r,n)),isPlainObject(i)&&(i.id&&(setStoredValue(e,i.id),n=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),n&&(e.idObj=e.submodule.decode(n,e.config))}else if(e.config.value)e.idObj=e.config.value;else{const t=e.submodule.getId(e.config,r,void 0);isPlainObject(t)&&("function"==typeof t.callback&&(e.callback=t.callback),t.id&&(e.idObj=e.submodule.decode(t.id,e.config)))}updatePPID(getCombinedSubmoduleIds(i))}function updatePPID(e=getUserIds()){if(e&&ppidSource){const t=getPPID(createEidsArray(e));t&&(isGptPubadsDefined()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(t)}))))}}function initSubmodules(e,t,i=!1){return uidMetrics().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];if(!(t=t.filter((e=>(!e.config.storage||canUseStorage(e))&&dep.isAllowed(ACTIVITY_ENRICH_EIDS,activityParams$2(MODULE_TYPE_UID,e.config.name))))).length)return logWarn(`${MODULE_NAME$5} - no ID module configured`),[];const r=t.reduce(((e,r)=>submoduleMetrics(r.submodule.name).measureTime("init",(()=>{try{populateSubmoduleId(r,i,t),e.push(r)}catch(n){logError(`Error in userID module '${r.submodule.name}':`,n)}return e}))),[]);return r.length&&setPrebidServerEidPermissions(r),r.forEach(updateInitializedSubmodules.bind(null,e)),r}))}function updateInitializedSubmodules(e,t){let i=!1;for(let r=0;r<e.length;r++)if(t.config.name.toLowerCase()===e[r].config.name.toLowerCase()){i=!0,e[r]=t;break}i||e.push(t)}function getValidSubmoduleConfigs(e){return Array.isArray(e)?e.reduce(((e,t)=>(!t||isEmptyStr(t.name)||(t.storage&&!isEmptyStr(t.storage.type)&&!isEmptyStr(t.storage.name)&&ALL_STORAGE_TYPES.has(t.storage.type)||isPlainObject(t.value)?e.push(t):t.storage||t.value||e.push(t)),e)),[]):[]}const ALL_STORAGE_TYPES=new Set([LOCAL_STORAGE$2,COOKIE$1]);function canUseStorage(e){var t,i;switch(null==(i=null==(t=e.config)?void 0:t.storage)?void 0:i.type){case LOCAL_STORAGE$2:if(e.storageMgr.localStorageIsEnabled())return!coreStorage.getDataFromLocalStorage(PBJS_USER_ID_OPTOUT_NAME)||(logInfo(`${MODULE_NAME$5} - opt-out localStorage found, storage disabled`),!1);break;case COOKIE$1:if(e.storageMgr.cookiesAreEnabled())return!coreStorage.getCookie(PBJS_USER_ID_OPTOUT_NAME)||(logInfo(`${MODULE_NAME$5} - opt-out cookie found, storage disabled`),!1)}return!1}function updateEIDConfig(e){EID_CONFIG.clear(),Object.entries(collectByPriority(e,(e=>e.eids),(e=>e.name))).forEach((([e,t])=>EID_CONFIG.set(e,t)))}function updateSubmodules(){updateEIDConfig(submoduleRegistry);const e=getValidSubmoduleConfigs(configRegistry);if(!e.length)return;const t=submoduleRegistry.filter((e=>!find(submodules$1,(t=>t.name===e.name))));submodules$1.splice(0,submodules$1.length),t.map((t=>{const i=find(e,(e=>e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())));return i&&t.name!==i.name&&(i.name=t.name),t.findRootDomain=findRootDomain,i?{submodule:t,config:i,callback:void 0,idObj:void 0,storageMgr:getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:i.name})}:null})).filter((e=>null!==e)).forEach((e=>submodules$1.push(e))),!addedUserIdHook&&submodules$1.length&&(getGlobal().requestBids.before(requestBidsHook,40),adaptermanager.callDataDeletionRequest.before(requestDataDeletion),getPPID$1.after((e=>e(getPPID()))),logInfo(`${MODULE_NAME$5} - usersync config updated for ${submodules$1.length} submodules: `,submodules$1.map((e=>e.submodule.name))),addedUserIdHook=!0)}function updateIdPriority(e,t){if(e){const i={},r=new Map(t.map((e=>e.submodule.aliasName?[e.submodule.aliasName,e.submodule.name]:[])));Object.keys(e).forEach((t=>{const n=isArray(e[t])?[...e[t]].reverse():[];i[t]=n.map((e=>r.has(e)?r.get(e):e))})),idPriority=i}else idPriority={}}function requestDataDeletion(e,...t){logInfo("UserID: received data deletion request; deleting all stored IDs..."),submodules$1.forEach((e=>{if("function"==typeof e.submodule.onDataDeletionRequest)try{e.submodule.onDataDeletionRequest(e.config,e.idObj,...t)}catch(i){logError(`Error calling onDataDeletionRequest for ID submodule ${e.submodule.name}`,i)}deleteStoredValue(e)})),e.apply(this,t)}function attachIdSystem(e){find(submoduleRegistry,(t=>t.name===e.name))||(submoduleRegistry.push(e),GDPR_GVLIDS.register(MODULE_TYPE_UID,e.name,e.gvlid),updateSubmodules(),initIdSystem({refresh:!0,submoduleNames:[e.name]}))}function normalizePromise(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function init$3(e,{delay:t=GreedyPromise.timeout}={}){ppidSource=void 0,submodules$1=[],configRegistry=[],addedUserIdHook=!1,initializedSubmodules=[],initIdSystem=idSystemInitializer({delay:t}),null!=configListener&&configListener(),submoduleRegistry=[],configListener=e.getConfig("userSync",(e=>{const t=e.userSync;t&&(ppidSource=t.ppid,t.userIds&&(configRegistry=t.userIds,syncDelay=isNumber(t.syncDelay)?t.syncDelay:DEFAULT_SYNC_DELAY,auctionDelay=isNumber(t.auctionDelay)?t.auctionDelay:NO_AUCTION_DELAY,updateSubmodules(),updateIdPriority(t.idPriority,submodules$1),initIdSystem({ready:!0})))})),getGlobal().getUserIds=getUserIds,getGlobal().getUserIdsAsEids=getUserIdsAsEids,getGlobal().getEncryptedEidsForSource=normalizePromise(getEncryptedEidsForSource),getGlobal().registerSignalSources=registerSignalSources,getGlobal().refreshUserIds=normalizePromise(refreshUserIds),getGlobal().getUserIdsAsync=normalizePromise(getUserIdsAsync),getGlobal().getUserIdsAsEidBySource=getUserIdsAsEidBySource}function setOrtbUserExtEids(e,t,i){const r=dlv(i,"bidRequests.0.userIdAsEids");r&&Object.keys(r).length>0&&dset(e,"user.ext.eids",r)}init$3(config),module("userId",attachIdSystem,{postInstallAllowed:!0}),registerOrtbProcessor({type:REQUEST$1,name:"userExtEids",fn:setOrtbUserExtEids});const MODULE_NAME$4="id5Id",GVLID$7=131,NB_EXP_DAYS=30,ID5_STORAGE_NAME="id5id",ID5_PRIVACY_STORAGE_NAME=`${ID5_STORAGE_NAME}_privacy`,LOCAL_STORAGE$1="html5",LOG_PREFIX$2="User ID - ID5 submodule: ",ID5_API_CONFIG_URL="https://id5-sync.com/api/config/prebid",ID5_DOMAIN="id5-sync.com",LEGACY_COOKIE_NAMES=["pbjs-id5id","id5id.1st","id5id"],storage$d=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:MODULE_NAME$4}),id5IdSubmodule={name:"id5Id",gvlid:GVLID$7,decode(e,t){let i,r={};if(!e||"string"!=typeof e.universal_uid)return;i=e.universal_uid,r=e.ext||r;let n={id5id:{uid:i,ext:r}};switch(isPlainObject(r.euid)&&(n.euid={uid:r.euid.uids[0].id,source:r.euid.source,ext:{provider:ID5_DOMAIN}}),dlv(e,"ab_testing.result")){case"control":logInfo(LOG_PREFIX$2+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),dset(n,"id5id.ext.abTestingControlGroup",!0);break;case"error":logError(LOG_PREFIX$2+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":logInfo(LOG_PREFIX$2+"A/B Testing - user is NOT in the Control Group"),dset(n,"id5id.ext.abTestingControlGroup",!1)}return logInfo(LOG_PREFIX$2+"Decoded ID",n),n},getId(e,t,i){if(validateConfig(e)){if(hasWriteConsentToLocalStorage(t))return{callback:function(r){new IdFetchFlow(e,t,i,uspDataHandler.getConsentData(),gppDataHandler.getConsentData()).execute().then((e=>{r(e)})).catch((e=>{logError(LOG_PREFIX$2+"getId fetch encountered an error",e),r()}))}};logInfo(LOG_PREFIX$2+"Skipping ID5 local storage write because no consent given.")}},extendId:(e,t,i)=>hasWriteConsentToLocalStorage(t)?(incrementNb(validateConfig(e)?e.params.partner:0),logInfo(LOG_PREFIX$2+"using cached ID",i),i):(logInfo(LOG_PREFIX$2+"No consent given for ID5 local storage writing, skipping nb increment."),i),eids:{id5id:{getValue:function(e){return e.uid},source:ID5_DOMAIN,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}}}};class IdFetchFlow{constructor(e,t,i,r,n){__privateAdd(this,_isExternalModule),__privateAdd(this,_externalModuleFlow),__privateAdd(this,_getExternalIntegration),__privateAdd(this,_regularFlow),__privateAdd(this,_callForConfig),__privateAdd(this,_callForExtensions),__privateAdd(this,_callId5Fetch),__privateAdd(this,_createFetchRequestData),__privateAdd(this,_processFetchCallResponse),this.submoduleConfig=e,this.gdprConsentData=t,this.cacheIdObj=i,this.usPrivacyData=r,this.gppData=n}async execute(){const e=__privateMethod(this,_callForConfig,callForConfig_fn).call(this);if(!__privateMethod(this,_isExternalModule,isExternalModule_fn).call(this))return __privateMethod(this,_regularFlow,regularFlow_fn).call(this,e);try{return await __privateMethod(this,_externalModuleFlow,externalModuleFlow_fn).call(this,e)}catch(t){return logError(LOG_PREFIX$2+"Error while performing ID5 external module flow. Continuing with regular flow.",t),__privateMethod(this,_regularFlow,regularFlow_fn).call(this,e)}}}async function loadExternalModule(e){return new GreedyPromise(((t,i)=>{if(window.id5Prebid)t();else try{loadExternalScript(e,"id5",t)}catch(r){i(r)}}))}function validateConfig(e){if(!e||!e.params||!e.params.partner)return logError(LOG_PREFIX$2+"partner required to be defined"),!1;const t=e.params.partner;if("string"==typeof t||t instanceof String){let i=parseInt(t);if(isNaN(i)||i<0)return logError(LOG_PREFIX$2+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=i}else if("number"!=typeof t)return logError(LOG_PREFIX$2+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==LOCAL_STORAGE$1&&logWarn(LOG_PREFIX$2+`storage type recommended to be '${LOCAL_STORAGE$1}'. In a future release this may become a strict requirement`),e.storage.name!==ID5_STORAGE_NAME&&logWarn(LOG_PREFIX$2+`storage name recommended to be '${ID5_STORAGE_NAME}'. In a future release this may become a strict requirement`),!0):(logError(LOG_PREFIX$2+"storage required to be set"),!1)}function expDaysStr(e){return new Date(Date.now()+864e5*e).toUTCString()}function nbCacheName(e){return`${ID5_STORAGE_NAME}_${e}_nb`}function storeNbInCache(e,t){storeInLocalStorage(nbCacheName(e),t,NB_EXP_DAYS)}function getNbFromCache(e){let t=getFromLocalStorage(nbCacheName(e));return t?parseInt(t):0}function incrementNb(e){const t=getNbFromCache(e)+1;return storeNbInCache(e,t),t}function incrementAndResetNb(e){const t=incrementNb(e);return storeNbInCache(e,0),t}function getLegacyCookieSignature(){let e;return LEGACY_COOKIE_NAMES.forEach((function(t){storage$d.getCookie(t)&&(e=safeJSONParse(storage$d.getCookie(t))||e)})),e&&e.signature||""}function getFromLocalStorage(e){const t=storage$d.getDataFromLocalStorage(`${e}_exp`);return""===t||t&&new Date(t).getTime()-Date.now()>0?storage$d.getDataFromLocalStorage(e):(storage$d.removeDataFromLocalStorage(e),null)}function storeInLocalStorage(e,t,i){storage$d.setDataInLocalStorage(`${e}_exp`,expDaysStr(i)),storage$d.setDataInLocalStorage(`${e}`,t)}function hasWriteConsentToLocalStorage(e){const t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,i=dlv(e,"vendorData.purpose.consents.1"),r=dlv(e,`vendorData.vendor.consents.${GVLID$7.toString()}`);return!!(!t||i&&r)}function domainOverrideToRootDomain(e,t){return function(){const i=document.domain.split("."),r=`_gd${Date.now()}_${t}`;for(let t,n,a=0;a<i.length;a++){const o=i.slice(a).join(".");if(e.setCookie(r,"1",void 0,void 0,o),n=e.getCookie(r),e.setCookie(r,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,o),"1"!==n)return t;t=o}}}_isExternalModule=new WeakSet,isExternalModule_fn=function(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl},_externalModuleFlow=new WeakSet,externalModuleFlow_fn=async function(e){await loadExternalModule(this.submoduleConfig.params.externalModuleUrl);const t=await e;return __privateMethod(this,_getExternalIntegration,getExternalIntegration_fn).call(this).fetchId5Id(t,this.submoduleConfig.params,getRefererInfo(),this.gdprConsentData,this.usPrivacyData,this.gppData)},_getExternalIntegration=new WeakSet,getExternalIntegration_fn=function(){return window.id5Prebid&&window.id5Prebid.integration},_regularFlow=new WeakSet,regularFlow_fn=async function(e){const t=await e,i=await __privateMethod(this,_callForExtensions,callForExtensions_fn).call(this,t.extensionsCall),r=await __privateMethod(this,_callId5Fetch,callId5Fetch_fn).call(this,t.fetchCall,i);return __privateMethod(this,_processFetchCallResponse,processFetchCallResponse_fn).call(this,r)},_callForConfig=new WeakSet,callForConfig_fn=async function(){let e=this.submoduleConfig.params.configUrl||ID5_API_CONFIG_URL;const t=await fetch$1(e,{method:"POST",body:JSON.stringify(this.submoduleConfig)});if(!t.ok)throw new Error("Error while calling config endpoint: ",t);const i=await t.json();return logInfo(LOG_PREFIX$2+"config response received from the server",i),i},_callForExtensions=new WeakSet,callForExtensions_fn=async function(e){if(void 0===e)return;const t=e.url,i=e.method||"GET",r="GET"===i?void 0:JSON.stringify(e.body||{}),n=await fetch$1(t,{method:i,body:r});if(!n.ok)throw new Error("Error while calling extensions endpoint: ",n);const a=await n.json();return logInfo(LOG_PREFIX$2+"extensions response received from the server",a),a},_callId5Fetch=new WeakSet,callId5Fetch_fn=async function(e,t){const i=e.url,r=e.overrides||{},n=JSON.stringify({...__privateMethod(this,_createFetchRequestData,createFetchRequestData_fn).call(this),...r,extensions:t}),a=await fetch$1(i,{method:"POST",body:n,credentials:"include"});if(!a.ok)throw new Error("Error while calling fetch endpoint: ",a);const o=await a.json();return logInfo(LOG_PREFIX$2+"fetch response received from the server",o),o},_createFetchRequestData=new WeakSet,createFetchRequestData_fn=function(){const e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,i=getRefererInfo(),r=this.cacheIdObj&&this.cacheIdObj.signature?this.cacheIdObj.signature:getLegacyCookieSignature(),n=incrementAndResetNb(e.partner),a={partner:e.partner,gdpr:t,nbPage:n,o:"pbjs",tml:i.topmostLocation,ref:i.ref,cu:i.canonicalUrl,top:i.reachedTop?1:0,u:i.stack[0]||window.location.href,v:"8.47.0",storage:this.submoduleConfig.storage,localStorage:storage$d.localStorageIsEnabled()?1:0};!t||void 0===this.gdprConsentData.consentString||isEmpty(this.gdprConsentData.consentString)||isEmptyStr(this.gdprConsentData.consentString)||(a.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||isEmpty(this.usPrivacyData)||isEmptyStr(this.usPrivacyData)||(a.us_privacy=this.usPrivacyData),this.gppData&&(a.gpp_string=this.gppData.gppString,a.gpp_sid=this.gppData.applicableSections),void 0===r||isEmptyStr(r)||(a.s=r),void 0===e.pd||isEmptyStr(e.pd)||(a.pd=e.pd),void 0===e.provider||isEmptyStr(e.provider)||(a.provider=e.provider);const o=e.abTesting||{enabled:!1};return o.enabled&&(a.ab_testing={enabled:!0,control_group_pct:o.controlGroupPct}),a},_processFetchCallResponse=new WeakSet,processFetchCallResponse_fn=function(e){try{e.privacy&&storeInLocalStorage(ID5_PRIVACY_STORAGE_NAME,JSON.stringify(e.privacy),NB_EXP_DAYS)}catch(t){logError(LOG_PREFIX$2+"Error while writing privacy info into local storage.",t)}return e},submodule("userId",id5IdSubmodule);const storage$c=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:"sharedId"}),COOKIE="cookie",LOCAL_STORAGE="html5",OPTOUT_NAME="_pubcid_optout",PUB_COMMON_ID="PublisherCommonId";function readValue(e,t){if(t===COOKIE)return storage$c.getCookie(e);if(t===LOCAL_STORAGE&&storage$c.hasLocalStorage()){const t=storage$c.getDataFromLocalStorage(`${e}_exp`);if(!t)return storage$c.getDataFromLocalStorage(e);if(new Date(t).getTime()-Date.now()>0)return storage$c.getDataFromLocalStorage(e)}}function getIdCallback(e,t){return function(i,r){t?queuePixelCallback(t,e,(()=>{i(r()||e)}))():i(e)}}function queuePixelCallback(e,t="",i){if(!e)return;const r=parseUrl(e);r.search.id=encodeURIComponent("pubcid:"+t);const n=buildUrl(r);return function(){triggerPixel(n,i)}}function hasOptedOut(){return!!(storage$c.cookiesAreEnabled()&&readValue(OPTOUT_NAME,COOKIE)||storage$c.hasLocalStorage()&&readValue(OPTOUT_NAME,LOCAL_STORAGE))}const sharedIdSystemSubmodule={name:"sharedId",aliasName:"pubCommonId",gvlid:VENDORLESS_GVLID,decode(e,t){if(!hasOptedOut())return logInfo(" Decoded value PubCommonId "+e),{pubcid:e};logInfo("PubCommonId decode: Has opted-out")},getId:function(e={},t,i){if(hasOptedOut())return void logInfo("PubCommonId: Has opted-out");if(coppaDataHandler.getCoppa())return void logInfo("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");const{params:{create:r=!0,pixelUrl:n}={}}=e;let a=i;if(!a){try{"object"==typeof window[PUB_COMMON_ID]&&(a=window[PUB_COMMON_ID].getId())}catch(o){}a||(a=r&&hasDeviceAccess()?generateUUID():void 0)}return{id:a,callback:getIdCallback(a,n)}},extendId:function(e={},t,i){if(hasOptedOut())return logInfo("PubCommonId: Has opted-out"),{id:void 0};if(coppaDataHandler.getCoppa())return void logInfo("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");const{params:{extend:r=!1,pixelUrl:n}={}}=e;return r?n?{callback:queuePixelCallback(n,i)}:{id:i}:void 0},domainOverride:domainOverrideToRootDomain(storage$c,"sharedId"),eids:{pubcid:{source:"pubcid.org",atype:1}}};submodule("userId",sharedIdSystemSubmodule);const gvlid=91,bidderCode="criteo",storage$b=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:bidderCode}),bididStorageKey="cto_bidid",bundleStorageKey="cto_bundle",dnaBundleStorageKey="cto_dna_bundle",cookiesMaxAge=33696e6,STORAGE_TYPE_LOCALSTORAGE="html5",STORAGE_TYPE_COOKIES="cookie",pastDateString=new Date(0).toString(),expirationString=new Date(timestamp()+cookiesMaxAge).toString();function extractProtocolHost(e,t=!1){const i=parseUrl(e,{noDecodeWholeURL:!0});return t?`${i.hostname}`:`${i.protocol}://${i.hostname}${i.port?":"+i.port:""}/`}function getFromStorage(e,t){var i,r;return(null==(i=null==e?void 0:e.storage)?void 0:i.type)===STORAGE_TYPE_LOCALSTORAGE?storage$b.getDataFromLocalStorage(t):(null==(r=null==e?void 0:e.storage)?void 0:r.type)===STORAGE_TYPE_COOKIES?storage$b.getCookie(t):storage$b.getCookie(t)||storage$b.getDataFromLocalStorage(t)}function saveOnStorage(e,t,i,r){var n,a;t&&i&&((null==(n=null==e?void 0:e.storage)?void 0:n.type)===STORAGE_TYPE_LOCALSTORAGE?storage$b.setDataInLocalStorage(t,i):((null==(a=null==e?void 0:e.storage)?void 0:a.type)===STORAGE_TYPE_COOKIES||storage$b.setDataInLocalStorage(t,i),setCookieOnAllDomains(t,i,expirationString,r,!0)))}function setCookieOnAllDomains(e,t,i,r,n){const a=r.split(".");for(let s=0;s<a.length;++s){const r=a.slice(a.length-s-1,a.length).join(".");try{if(storage$b.setCookie(e,t,i,null,"."+r),n){const i=storage$b.getCookie(e);if(i&&i===t)break}}catch(o){}}}function deleteFromAllStorages$1(e,t){setCookieOnAllDomains(e,"",pastDateString,t,!0),storage$b.removeDataFromLocalStorage(e)}function getCriteoDataFromStorage(e){return{bundle:getFromStorage(e,bundleStorageKey),dnaBundle:getFromStorage(e,dnaBundleStorageKey),bidId:getFromStorage(e,bididStorageKey)}}function buildCriteoUsersyncUrl(e,t,i,r,n,a,o){let s=`https://gum.criteo.com/sid/json?origin=prebid${e?"&topUrl="+encodeURIComponent(e):""}${t?"&domain="+encodeURIComponent(t):""}${i?"&bundle="+encodeURIComponent(i):""}${r?"&info="+encodeURIComponent(r):""}${n?"&cw=1":""}${o?"&pbt=1":""}${a?"&lsw=1":""}`;const d=uspDataHandler.getConsentData();d&&(s+=`&us_privacy=${encodeURIComponent(d)}`);const l=gdprDataHandler.getConsentData();l&&(s=s+""+(l.consentString?"&gdprString="+encodeURIComponent(l.consentString):""),s=s+"&gdpr="+(!0===l.gdprApplies?1:0));const c=gppDataHandler.getConsentData();return c&&(s=s+""+(c.gppString?"&gpp="+encodeURIComponent(c.gppString):""),s=s+""+(c.applicableSections?"&gpp_sid="+encodeURIComponent(c.applicableSections):"")),s}function callSyncPixel(e,t,i){i.writeBundleInStorage&&i.bundlePropertyName&&i.storageKeyName?ajax$1(i.pixelUrl,{success:r=>{if(r){const n=JSON.parse(r);n&&n[i.bundlePropertyName]&&saveOnStorage(e,i.storageKeyName,n[i.bundlePropertyName],t)}},error:e=>{logError("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):triggerPixel(i.pixelUrl)}function callCriteoUserSync(e,t,i){var r,n,a,o;const s=(void 0===(null==(r=null==e?void 0:e.storage)?void 0:r.type)||(null==(n=null==e?void 0:e.storage)?void 0:n.type)===STORAGE_TYPE_COOKIES)&&storage$b.cookiesAreEnabled(),d=(void 0===(null==(a=null==e?void 0:e.storage)?void 0:a.type)||(null==(o=null==e?void 0:e.storage)?void 0:o.type)===STORAGE_TYPE_LOCALSTORAGE)&&storage$b.localStorageIsEnabled(),l=extractProtocolHost(getRefererInfo().page),c=extractProtocolHost(document.location.href,!0),p="undefined"!=typeof criteo_pubtag,u=buildCriteoUsersyncUrl(l,c,t.bundle,t.dnaBundle,s,d,p);ajax$1(u,{success:t=>{const r=JSON.parse(t);if(r.pixels&&r.pixels.forEach((t=>callSyncPixel(e,c,t))),r.acwsUrl?("string"==typeof r.acwsUrl?[r.acwsUrl]:r.acwsUrl).forEach((e=>triggerPixel(e))):r.bundle&&saveOnStorage(e,bundleStorageKey,r.bundle,c),r.bidId){saveOnStorage(e,bididStorageKey,r.bidId,c);const t={criteoId:r.bidId};i(t)}else deleteFromAllStorages$1(bididStorageKey,c),i()},error:e=>{logError("criteoIdSystem: unable to sync user id",e),i()}},void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}const criteoIdSubmodule={name:bidderCode,gvlid:gvlid,decode:e=>e,getId(e){let t=getCriteoDataFromStorage(e);return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:i=>callCriteoUserSync(e,t,i)}},eids:{criteoId:{source:"criteo.com",atype:1}}};submodule("userId",criteoIdSubmodule);const MODULE_NAME$3="identityLink",storage$a=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:MODULE_NAME$3}),liverampEnvelopeName="_lr_env",identityLinkSubmodule={name:MODULE_NAME$3,gvlid:97,decode:e=>({idl_env:e}),getId(e,t){const i=e&&e.params||{};if(!i||"string"!=typeof i.pid)return void logError("identityLink: requires partner id to be defined");const r=t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies?1:0,n=r?t.consentString:"";if(r&&(!n||""===n))return void logInfo("identityLink: Consent string is required to call envelope API.");const a=gppDataHandler.getConsentData(),o=!(!a||!a.gppString)&&a.gppString,s=!!(a&&a.gppString&&a.applicableSections.length>0&&-1!==a.applicableSections[0])&&a.applicableSections[0],d=o&&s,l=`https://api.rlcdn.com/api/identity/envelope?pid=${i.pid}${r?"&ct=4&cv="+n:""}${d?"&gpp="+o+"&gpp_sid="+s:""}`;let c;return c=function(e){if(window.ats&&window.ats.retrieveEnvelope)logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope((function(t){t?(logInfo("identityLink: An envelope can be retrieved from ATS!"),setEnvelopeSource(!0),e(JSON.parse(t).envelope)):getEnvelope(l,e,i)}));else{let t=getEnvelopeFromStorage();t?(logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(t).envelope)):getEnvelope(l,e,i)}},{callback:c}},eids:{idl_env:{source:"liveramp.com",atype:3}}};function getEnvelope(e,t,i){const r={success:e=>{let i;if(e)try{i=JSON.parse(e)}catch(r){logInfo(r)}t(i&&i.envelope?i.envelope:"")},error:e=>{logInfo("identityLink: identityLink: ID fetch encountered an error",e),t()}};i.notUse3P||storage$a.getCookie("_lr_retry_request")||(setRetryCookie(),logInfo("identityLink: A 3P retrieval is attempted!"),setEnvelopeSource(!1),ajax$1(e,r,void 0,{method:"GET",withCredentials:!0}))}function setRetryCookie(){let e=new Date;e.setTime(e.getTime()+36e5),storage$a.setCookie("_lr_retry_request","true",e.toUTCString())}function setEnvelopeSource(e){let t=new Date;t.setTime(t.getTime()+2592e6),storage$a.setCookie("_lr_env_src_ats",e,t.toUTCString())}function getEnvelopeFromStorage(){let e=storage$a.getCookie(liverampEnvelopeName)||storage$a.getDataFromLocalStorage(liverampEnvelopeName);return e?window.atob(e):void 0}submodule("userId",identityLinkSubmodule);const MODULE_NAME$2="pairId",PAIR_ID_KEY="pairId",DEFAULT_LIVERAMP_PAIR_ID_KEY="_lr_pairId",storage$9=getStorageManager({moduleType:MODULE_TYPE_UID,moduleName:MODULE_NAME$2});function pairIdFromLocalStorage(e){return storage$9.localStorageIsEnabled()?storage$9.getDataFromLocalStorage(e):null}function pairIdFromCookie(e){return storage$9.cookiesAreEnabled()?storage$9.getCookie(e):null}const pairIdSubmodule={name:MODULE_NAME$2,gvlid:755,decode:e=>e&&Array.isArray(e)?{pairId:e}:void 0,getId(e){const t=pairIdFromLocalStorage(PAIR_ID_KEY)||pairIdFromCookie(PAIR_ID_KEY);let i=[];if(t&&"string"==typeof t)try{i=i.concat(JSON.parse(atob(t)))}catch(n){logInfo(n)}const r=e&&e.params||{};if(r&&r.liveramp){let e=r.liveramp.storageKey||DEFAULT_LIVERAMP_PAIR_ID_KEY;const t=pairIdFromLocalStorage(e)||pairIdFromCookie(e);try{const e=JSON.parse(atob(t));i=i.concat(e.envelope)}catch(n){logInfo(n)}}if(0!=i.length)return{id:i};logInfo("PairId not found.")},eids:{pairId:{source:"google.com",atype:571187}}};submodule("userId",pairIdSubmodule);const BIDDER_CODE$h="amx",storage$8=getStorageManager({bidderCode:BIDDER_CODE$h}),SIMPLE_TLD_TEST=/\.com?\.\w{2,4}$/,DEFAULT_ENDPOINT="https://prebid.a-mo.net/a/c",VERSION$1="pba1.3.4",VAST_RXP=/^\s*<\??(?:vast|xml)/i,TRACKING_BASE="https://1x1.a-mo.net/",TRACKING_ENDPOINT=TRACKING_BASE+"hbx/",POST_TRACKING_ENDPOINT=TRACKING_BASE+"e",AMUID_KEY="__amuidpb";function getLocation(e){var t;return parseUrl((null==(t=e.refererInfo)?void 0:t.topmostLocation)||window.location.href)}function getTimeoutSize(e){return null==e.sizes||0===e.sizes.length?[0,0]:e.sizes[0]}const largestSize=(e,t)=>e.concat(dlv(t,`${BANNER}.sizes`,[])||[]).concat(dlv(t,`${VIDEO}.sizes`,[])||[]).sort(((e,t)=>t[0]*t[1]-e[0]*e[1]))[0];function flatMap(e,t){return null==e?[]:e.map(t).reduce(((e,t)=>null!=t&&e.concat(t)),[])}const isVideoADM=e=>null!=e&&VAST_RXP.test(e);function getMediaType(e){return isVideoADM(e.adm)?VIDEO:BANNER}const nullOrType=(e,t)=>null==e||typeof e===t;function getID(e){const t=e.hostname.split("."),i=t.slice(t.length-(SIMPLE_TLD_TEST.test(e.hostname)?3:2)).join(".");return btoa(i).replace(/=+$/,"")}const enc=encodeURIComponent;function getUIDSafe(){try{return storage$8.getDataFromLocalStorage(AMUID_KEY)}catch(e){return null}}function setUIDSafe(e){try{storage$8.setDataInLocalStorage(AMUID_KEY,e)}catch(t){}}function nestedQs(e){const t=[];return Object.keys(e||{}).forEach((i=>{t.push(enc(i)+"="+enc(String(e[i])))})),enc(t.join("&"))}function createBidMap(e){const t={};return _each(e,(e=>{t[e.bidId]=convertRequest(e)})),t}const trackEvent=(e,t)=>triggerPixel(`${TRACKING_ENDPOINT}g_${e}?${formatQS({...t,ts:Date.now(),eid:getUniqueIdentifierStr()})}`),DEFAULT_MIN_FLOOR=0;function ensureFloor(e){return"number"==typeof e&&isFinite(e)&&e>0?e:DEFAULT_MIN_FLOOR}function getFloor$2(e){if(!isFn(e.getFloor))return dlv(e,"params.floor",DEFAULT_MIN_FLOOR);try{return e.getFloor({currency:"USD",mediaType:"*",size:"*",bidRequest:e}).floor}catch(t){return logError("call to getFloor failed: ",t),DEFAULT_MIN_FLOOR}}function refInfo(e,t,i){return dlv(e,"refererInfo."+t,i)}function convertRequest(e){const t=largestSize(e.sizes,e.mediaTypes)||[0,0],i=e.mediaType===VIDEO||VIDEO in e.mediaTypes,r=i||t[1]>100,n=dlv(e,"params.tagId"),a=null!=e.params&&"string"==typeof e.params.adUnitId&&""!==e.params.adUnitId?e.params.adUnitId:e.adUnitCode,o=[e.sizes,dlv(e,`mediaTypes.${BANNER}.sizes`,[])||[],dlv(e,`mediaTypes.${VIDEO}.sizes`,[])||[]],s={au:a,av:r,vd:dlv(e,`mediaTypes.${VIDEO}`,{})||{},vr:i,ms:o,aw:t[0],ah:t[1],tf:0,sc:e.schain||{},f:ensureFloor(getFloor$2(e)),rtb:e.ortb2Imp};return"string"==typeof n&&n.length>0&&(s.i=n),s}function resolveSize(e,t,i){if(null!=e.w&&e.w>1&&null!=e.h&&e.h>1)return[e.w,e.h];const r=t.m[i];return null==r?[0,0]:[r.aw,r.ah]}function isSyncEnabled(e,t){if(null==e)return!1;const i=e[t];return null!=i&&!!("*"===i.bidders||isArray(i.bidders)&&-1!==i.bidders.indexOf("amx"))&&(null==i.filter||"include"===i.filter)}const SYNC_IMAGE=1,SYNC_IFRAME=2;function getSyncSettings(){const e=config.getConfig("userSync");if(null==e)return{d:0,l:0,t:0,e:!0};const t={d:e.syncDelay,l:e.syncsPerBidder,t:0,e:e.syncEnabled};return isSyncEnabled(e.filterSettings,"all")?(t.t=SYNC_IMAGE&SYNC_IFRAME,t):(isSyncEnabled(e.filterSettings,"iframe")&&(t.t|=SYNC_IFRAME),isSyncEnabled(e.filterSettings,"image")&&(t.t|=SYNC_IMAGE),t)}function values(e){return null!=Object.values?Object.values(e):Object.keys(e).map((t=>e[t]))}function getGpp(e){var t,i;return null!=(null==e?void 0:e.gppConsent)?e.gppConsent:(null==(i=null==(t=null==e?void 0:e.ortb2)?void 0:t.regs)?void 0:i.gpp)??{gppString:"",applicableSections:""}}function buildReferrerInfo(e){if(null==e.refererInfo)return{r:"",t:!1,c:"",l:0,s:[]};const t=e.refererInfo;return{r:t.topmostLocation,t:t.reachedTop,l:t.numIframes,s:t.stack,c:t.canonicalUrl}}const isTrue=e=>!0===e||1===e||"true"===e,spec$i={code:BIDDER_CODE$h,gvlid:737,supportedMediaTypes:[BANNER,VIDEO],isBidRequestValid:e=>nullOrType(dlv(e,"params.endpoint",null),"string")&&nullOrType(dlv(e,"params.tagId",null),"string"),buildRequests(e,t){const i=getLocation(t),r=dlv(e[0],"params.tagId",null),n=dlv(e[0],"params.testMode",0),a=null!=e[0]?e[0]:{bidderRequestsCount:0,bidderWinsCount:0,bidRequestsCount:0};return{data:{a:generateUUID(),B:0,b:i.host,brc:a.bidderRequestsCount||0,bwc:a.bidderWinsCount||0,trc:a.bidRequestsCount||0,tm:isTrue(n),V:"8.47.0",vg:"slmpbjs",i:n&&null!=r?r:getID(i),l:{},f:.01,cv:VERSION$1,st:"prebid",h:screen.height,w:screen.width,gs:dlv(t,"gdprConsent.gdprApplies",""),gc:dlv(t,"gdprConsent.consentString",""),gpp:getGpp(t),u:refInfo(t,"page",i.href),do:refInfo(t,"site",i.hostname),re:refInfo(t,"ref"),am:getUIDSafe(),usp:t.uspConsent||"1---",smt:1,d:"",m:createBidMap(e),cpp:config.getConfig("coppa")?1:0,fpd2:t.ortb2,tmax:t.timeout,amp:refInfo(t,"isAmp",null),ri:buildReferrerInfo(t),sync:getSyncSettings(),eids:values(e.reduce(((e,t)=>(null==t||null==t.userIdAsEids||_each(t.userIdAsEids,(t=>{null!=t&&(e[t.source]=t)})),e)),{}))},method:"POST",browsingTopics:!0,url:dlv(e[0],"params.endpoint",DEFAULT_ENDPOINT),withCredentials:!0}},getUserSyncs(e,t,i,r,n){const a={url:`https://prebid.a-mo.net/isyn?${formatQS({gdpr_consent:enc((null==i?void 0:i.consentString)||""),gdpr:enc((null==i?void 0:i.gdprApplies)?1:0),us_privacy:enc(r||""),gpp:enc((null==n?void 0:n.gppString)||""),gpp_sid:enc((null==n?void 0:n.applicableSections)||"")})}`,type:"iframe"};if(null==t||0===t.length)return e.iframeEnabled?[a]:[];const o=[];let s=!1;return _each(t,(function({body:t}){null!=t&&null!=t.p&&t.p.hreq&&_each(t.p.hreq,(function(t){const i=-1!==t.indexOf("__st=iframe")?"iframe":"image";(e.iframeEnabled||"image"===i)&&(s=s||"iframe"===i||-1!==t.indexOf("cchain"),o.push({url:t,type:i}))}))})),!s&&o.length<2&&o.push(a),o},interpretResponse(e,t){const i=e.body;return null==i||"string"==typeof i?[]:(i.am&&"string"==typeof i.am&&setUIDSafe(i.am),flatMap(Object.keys(i.r),(e=>flatMap(i.r[e],(i=>i.b.map((i=>{const r=getMediaType(i),n=i.adm;if(null==n)return null;const a=resolveSize(i,t.data,e),o=r===BANNER?240:300;return{requestId:e,cpm:i.price,width:a[0],height:a[1],creativeId:i.crid,currency:"USD",netRevenue:!0,[r===VIDEO?"vastXml":"ad"]:n,meta:{advertiserDomains:i.adomain,mediaType:r},mediaType:r,ttl:"number"==typeof i.exp?i.exp:o}})))).filter((e=>null!=e)))))},onSetTargeting(e){null!=e&&trackEvent("pbst",{A:e.bidder,w:e.width,h:e.height,bid:e.adId,c1:e.mediaType,np:e.cpm,aud:e.requestId,a:e.adUnitCode,c2:nestedQs(e.adserverTargeting),cn3:e.timeToRespond})},onTimeout(e){if(null==e||!e.length)return;let t=null;const i=e.map((e=>{const i=e.params||{},r=getTimeoutSize(e),{domain:n,page:a,ref:o}=null!=e.ortb2&&null!=e.ortb2.site?e.ortb2.site:{};return null==t&&(t={do:n,u:a,U:getUIDSafe(),re:o,V:"8.47.0",vg:"slmpbjs"}),{A:e.bidder,mid:i.tagId,a:i.adunitId||e.adUnitCode,bid:e.bidId,n:"g_pbto",aud:e.transactionId,w:r[0],h:r[1],cn:e.timeout,cn2:e.bidderRequestsCount,cn3:e.bidderWinsCount}})),r=JSON.stringify({c:t,e:i});fetch$1(POST_TRACKING_ENDPOINT,{body:r,keepalive:!0,withCredentials:!0,method:"POST"}).catch((e=>{}))},onBidWon(e){null!=e&&trackEvent("pbwin",{A:e.bidder,w:e.width,h:e.height,bid:e.adId,C:e.mediaType===BANNER?0:1,np:e.cpm,a:e.adUnitCode})}};function hasPurpose1Consent(e){return!(null==e?void 0:e.gdprApplies)||!0===dlv(e,"vendorData.purpose.consents.1")}registerBidder(spec$i);const SORTED=new WeakMap;function compose(e,t={}){if(!SORTED.has(e)){const t=Object.entries(e);t.sort(((e,t)=>(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1)),SORTED.set(e,t.map((([e,t])=>[e,t.fn])))}const i=SORTED.get(e).filter((([e])=>!t.hasOwnProperty(e)||t[e])).map((function([e,i]){return t.hasOwnProperty(e)?t[e].bind(this,i):i}));return function(){const e=Array.from(arguments);i.forEach((t=>{t.apply(this,e)}))}}function sizesToFormat(e){return(e=parseSizesInput(e)).map((e=>{const[t,i]=e.split("x");return{w:parseInt(t,10),h:parseInt(i,10)}}))}function fillBannerImp(e,t,i){if(i.mediaType&&i.mediaType!==BANNER)return;const r=dlv(t,"mediaTypes.banner");if(r){const t={topframe:!0===inIframe()?0:1};r.sizes&&(t.format=sizesToFormat(r.sizes)),r.hasOwnProperty("pos")&&(t.pos=r.pos),e.banner=mergeDeep(t,e.banner)}}function bannerResponseProcessor({createPixel:e=(e=>createTrackPixelHtml(decodeURIComponent(e),encodeMacroURI))}={}){return function(t,i){t.mediaType===BANNER&&(i.adm&&i.nurl?(t.ad=i.adm,t.ad+=e(i.nurl)):i.adm?t.ad=i.adm:i.nurl&&(t.adUrl=i.nurl))}}const ORTB_VIDEO_PARAMS=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),PLACEMENT={instream:1};function fillVideoImp(e,t,i){if(i.mediaType&&i.mediaType!==VIDEO)return;const r=dlv(t,"mediaTypes.video");if(!isEmpty(r)){const t=Object.fromEntries(Object.entries(r).filter((([e])=>ORTB_VIDEO_PARAMS.has(e))));if(r.playerSize){const e=sizesToFormat(r.playerSize);e.length>1&&logWarn("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(t,e[0])}const i=PLACEMENT[r.context];null!=i&&(t.placement=i),e.video=mergeDeep(t,e.video)}}function fillVideoResponse(e,t,i){e.mediaType===VIDEO&&(dlv(i.imp,"video.w")&&dlv(i.imp,"video.h")&&([e.playerWidth,e.playerHeight]=[i.imp.video.w,i.imp.video.h]),t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl))}const ORTB_MTYPES={1:BANNER,2:VIDEO,4:NATIVE$1};function setResponseMediaType(e,t,i){if(e.mediaType)return;const r=i.mediaType;if(!r&&!ORTB_MTYPES.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||ORTB_MTYPES[t.mtype]}function fillNativeImp(e,t,i){var r;if(i.mediaType&&i.mediaType!==NATIVE$1)return;let n=t.nativeOrtbRequest;n&&(n=Object.assign({},i.nativeRequest,n),(null==(r=n.assets)?void 0:r.length)?e.native=mergeDeep({},{request:JSON.stringify(n),ver:n.ver},e.native):logWarn("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}function fillNativeResponse(e,t){if(e.mediaType===NATIVE$1){let i;if(i="string"==typeof t.adm?JSON.parse(t.adm):t.adm,!isPlainObject(i)||!Array.isArray(i.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:i}}}const DEFAULT_PROCESSORS={[REQUEST$1]:{fpd:{priority:99,fn(e,t){mergeDeep(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:clientSectionChecker("ORTB request")},props:{fn(e,t){Object.assign(e,{id:e.id||generateUUID(),test:e.test||0});const i=parseInt(t.timeout,10);isNaN(i)||(e.tmax=i)}}},[IMP]:{fpd:{priority:99,fn(e,t){mergeDeep(e,t.ortb2Imp)}},id:{fn(e,t){e.id=t.bidId}},banner:{fn:fillBannerImp},pbadslot:{fn(e){var t,i,r,n;const a=null==(i=null==(t=e.ext)?void 0:t.data)?void 0:i.pbadslot;a&&"string"==typeof a||null==(n=null==(r=e.ext)?void 0:r.data)||delete n.pbadslot}}},[BID_RESPONSE]:{mediaType:{priority:99,fn:setResponseMediaType},banner:{fn:bannerResponseProcessor()},props:{fn(e,t,i){var r,n;Object.entries({requestId:null==(r=i.bidRequest)?void 0:r.bidId,seatBidId:t.id,cpm:t.price,currency:i.ortbResponse.cur||i.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||i.ttl,netRevenue:i.netRevenue}).filter((([e,t])=>void 0!==t)).forEach((([t,i])=>e[t]=i)),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),(null==(n=t.ext)?void 0:n.dsa)&&(e.meta.dsa=t.ext.dsa)}}}};function mergeProcessors(...e){const t=e.shift(),i=e.length>1?mergeProcessors(...e):e[0];return Object.fromEntries(PROCESSOR_TYPES.map((e=>[e,Object.assign({},t[e],i[e])])))}function ortbConverter({context:e={},processors:t=defaultProcessors,overrides:i={},imp:r,request:n,bidResponse:a,response:o}={}){const s=new WeakMap;function d(e,r,n,a){let o;return function(){return null==o&&(o=function(){let o=n.bind(this,compose(t()[e]||{},i[e]||{}));return r&&(o=r.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){a.call(this,e,...arguments)}}}()),o.apply(this,arguments)}}const l=d(IMP,r,(function(e,t,i){const r={};return e(r,t,i),r}),(function(e,t,i){logError("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:i})})),c=d(REQUEST$1,n,(function(e,t,i,r){const n={imp:t};return e(n,i,r),n}),(function(e,t,i,r){throw logError("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:i,context:r}),e})),p=d(BID_RESPONSE,a,(function(e,t,i){const r={};return e(r,t,i),r}),(function(e,t,i){logError("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:i})})),u=d(RESPONSE$1,o,(function(e,t,i,r){const n={bids:t};return e(n,i,r),n}),(function(e,t,i,r){throw logError("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:i,context:r}),e}));return{toORTB({bidderRequest:t,bidRequests:i,context:r={}}){i=i||t.bids;const n={req:Object.assign({bidRequests:i},e,r),imp:{}};n.req.impContext=n.imp;const a=i.map((i=>{const a=Object.assign({bidderRequest:t,reqContext:n.req},e,r),o=l(i,a);if(null!=o){if(o.hasOwnProperty("id"))return Object.assign(a,{bidRequest:i,imp:o}),n.imp[o.id]=a,o;logError("Converted ORTB imp does not specify an id, ignoring bid request",i,o)}})).filter(Boolean),o=c(a,t,n.req);return n.req.bidderRequest=t,null!=o&&s.set(o,n),o},fromORTB({request:e,response:t}){const i=s.get(e);if(null==i)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function r(t,i={}){return Object.assign(t,{ortbRequest:e},i,t)}const n=Object.fromEntries((e.imp||[]).map((e=>[e.id,e]))),a=(t.seatbid||[]).flatMap((e=>(e.bid||[]).map((a=>{if(n.hasOwnProperty(a.impid)&&i.imp.hasOwnProperty(a.impid))return p(a,r(i.imp[a.impid],{imp:n[a.impid],seatbid:e,ortbResponse:t}));logError("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",a)})))).filter(Boolean);return u(a,t,r(i.req))}}}DEFAULT_PROCESSORS[IMP].native={fn:fillNativeImp},DEFAULT_PROCESSORS[BID_RESPONSE].native={fn:fillNativeResponse},DEFAULT_PROCESSORS[IMP].video={fn:fillVideoImp},DEFAULT_PROCESSORS[BID_RESPONSE].video={fn:fillVideoResponse};const defaultProcessors=memoize((()=>mergeProcessors(DEFAULT_PROCESSORS,getProcessors(DEFAULT)))),BIDDER_CODE$g="improvedigital",CREATIVE_TTL=300,AD_SERVER_BASE_URL="https://ad.360yield.com",BASIC_ADS_BASE_URL="https://ad.360yield-basic.com",PB_ENDPOINT="pb",EXTEND_URL="https://pbs.360yield.com/openrtb2/auction",IFRAME_SYNC_URL="https://hb.360yield.com/prebid-universal-creative/load-cookie.html",VIDEO_PARAMS={DEFAULT_MIMES:["video/mp4"],PLACEMENT_TYPE:{INSTREAM:1,OUTSTREAM:3}},spec$h={code:BIDDER_CODE$g,gvlid:253,aliases:["id"],supportedMediaTypes:[BANNER,NATIVE$1,VIDEO],syncStore:{extendMode:!1,placementId:null},isBidRequestValid:e=>!!(e&&e.params&&(e.params.placementId||e.params.placementKey&&e.params.publisherId)),buildRequests(e,t){return this.syncStore.placementId=this.syncStore.placementId||e[0].params.placementId,ID_REQUEST.buildServerRequests(e,t)},interpretResponse:(e,{ortbRequest:t})=>CONVERTER.fromORTB({request:t,response:e.body}).bids,getUserSyncs(e,t,i,r){if(!0===config.getConfig("coppa")||!hasPurpose1Consent(i))return[];const n=[];if(!this.syncStore.extendMode&&e.pixelEnabled||!e.iframeEnabled)e.pixelEnabled&&t.forEach((e=>{dlv(e,`body.ext.${BIDDER_CODE$g}.sync`,[]).forEach((e=>{n.some((t=>t.url===e))||n.push({type:"image",url:e})}))}));else{const{gdprApplies:e,consentString:a}=i||{},o=new Set;this.syncStore.extendMode&&t&&t.forEach((e=>{var t,i;(null==(i=null==(t=null==e?void 0:e.body)?void 0:t.ext)?void 0:i.responsetimemillis)&&Object.keys(e.body.ext.responsetimemillis).forEach((e=>o.add(e)))})),n.push({type:"iframe",url:IFRAME_SYNC_URL+`?placement_id=${this.syncStore.placementId}`+(this.syncStore.extendMode?"&pbs=1":"")+("boolean"==typeof e?`&gdpr=${Number(e)}`:"")+(a?`&gdpr_consent=${a}`:"")+(r?`&us_privacy=${encodeURIComponent(r)}`:"")+(o.size?`&bidders=${[...o].join(",")}`:"")})}return n}};registerBidder(spec$h);const CONVERTER=ortbConverter({context:{ttl:CREATIVE_TTL,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp(e,t,i){const r=e(t,i);r.secure=Number("https:"===window.location.protocol),!r.bidfloor&&t.params.bidFloor&&(r.bidfloor=t.params.bidFloor,r.bidfloorcur=getBidIdParameter("bidFloorCur",t.params).toUpperCase()||"USD");const n=i.extendMode?"ext.prebid.bidder.improvedigital":"ext.bidder",a=t.params.placementId;return a?(dset(r,`${n}.placementId`,a),i.extendMode&&dset(r,"ext.prebid.storedrequest.id",""+a)):(dset(r,`${n}.publisherId`,getBidIdParameter("publisherId",t.params)),dset(r,`${n}.placementKey`,getBidIdParameter("placementKey",t.params))),dset(r,`${n}.keyValues`,getBidIdParameter("keyValues",t.params)||void 0),r},request(e,t,i,r){const n=e(t,i,r);return mergeDeep(n,{id:getUniqueIdentifierStr(),source:{},ext:{improvedigital:{sdk:{name:"pbjs",version:"8.47.0"}}}}),n},bidResponse(e,t,i){if(!t.adm||!t.price||t.hasOwnProperty("errorCode"))return;const{bidRequest:r}=i;i.mediaType=(()=>{const e=Object.keys(r.mediaTypes);return 1===e.length?e[0]:-1!==t.adm.search(/^(<\?xml|<vast)/i)?VIDEO:"{"===t.adm[0]?NATIVE$1:BANNER})();const n=e(t,i),a=dlv(t,`ext.${BIDDER_CODE$g}`,{});return 1===a.pg&&(n.adserverTargeting={hb_deal_type_improve:"pg"}),Object.assign(n,{dealId:"string"==typeof a.buying_type&&"rtb"!==a.buying_type?a.line_item_id:void 0,netRevenue:a.is_net||!1}),n.mediaType===VIDEO&&ID_REQUEST.isOutstreamVideo(r)&&Object.assign(n,{adResponse:{content:n.vastXml},renderer:ID_OUTSTREAM.createRenderer(r)}),ID_RAZR.forwardBid({bidRequest:r,bid:n}),n},overrides:{imp:{banner(e,t,i,r){if(i.mediaTypes[BANNER]){if(!0!==config.getConfig("improvedigital.usePrebidSizes")){const e=Object.assign({},i.mediaTypes[BANNER],{sizes:null});i={...i,mediaTypes:{[BANNER]:e}}}e(t,i,r)}},video(e,t,i,r){var n;if(!i.mediaTypes[VIDEO])return;const a=Object.assign({mimes:VIDEO_PARAMS.DEFAULT_MIMES},i.mediaTypes[VIDEO],null==(n=i.params)?void 0:n.video);e(t,{...i,mediaTypes:{[VIDEO]:a}},r),dset(t,"ext.is_rewarded_inventory",1===a.rewarded||1===dlv(a,"ext.rewarded")||void 0),!t.video.placement&&ID_REQUEST.isOutstreamVideo(i)&&(t.video.placement=VIDEO_PARAMS.PLACEMENT_TYPE.OUTSTREAM)}},request:{gdprAddtlConsent(e,t,i){var r;const n=null==(r=null==i?void 0:i.gdprConsent)?void 0:r.addtlConsent;if(n)if(spec$h.syncStore.extendMode)e(t,i);else if(n&&-1!==n.indexOf("~")){const e=n.substring(n.indexOf("~")+1);e&&dset(t,"user.ext.consented_providers_settings.consented_providers",e.split(".").map((e=>parseInt(e,10))))}}}}}),ID_REQUEST={buildServerRequests(e,t){const i=!0===config.getConfig("improvedigital.extend"),r=[],n=!0===config.getConfig("improvedigital.singleRequest"),a=[],o=[];function s(e,i){if(e)return EXTEND_URL;const r=[];return r.push(hasPurpose1Consent(null==t?void 0:t.gdprConsent)?AD_SERVER_BASE_URL:BASIC_ADS_BASE_URL),i&&r.push(i),r.push(PB_ENDPOINT),r.join("/")}function d(e,i,r){const n=CONVERTER.toORTB({bidRequests:e,bidderRequest:t,context:{extendMode:r}});return{method:"POST",url:s(r,i),data:JSON.stringify(n),ortbRequest:n,bidderRequest:t}}let l=null;return e.map((e=>{const t=e.params.publisherId,s=this.isExtendModeEnabled(i,e.params);if(n){if(l){if(t&&l!==t)throw new Error("All Improve Digital placements in a single call must have the same publisherId. Please check your 'params.publisherId' or turn off the single request mode.")}else l=t;s?a.push(e):o.push(e)}else r.push(d([e],t,s))})),n?(a.length&&r.push(d(a,l,!0)),o.length&&r.push(d(o,l,!1)),r):r},isExtendModeEnabled(e,t){const i="boolean"==typeof t.extend?t.extend:e;return i&&!spec$h.syncStore.extendMode&&(spec$h.syncStore.extendMode=!0),i},isOutstreamVideo:e=>"outstream"===dlv(e,"mediaTypes.video.context")},ID_OUTSTREAM={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer(e){const t=Renderer.install({id:e.adUnitCode,url:this.RENDERER_URL,config:dlv(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(i){logWarn("Prebid Error calling setRender on renderer",i)}return t},render(e){e.renderer.push((()=>{window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},ID_OUTSTREAM.handleRendererEvents.bind(null,e))}))},handleRendererEvents(e,t,i){e.renderer.handleVideoEvent({id:t,eventName:i})}},ID_RAZR={RENDERER_URL:"https://cdn.360yield.com/razr/tag.js",forwardBid({bidRequest:e,bid:t}){if(t.mediaType!==BANNER)return;const i={prebid:{bidRequest:e,bid:t}},r=`<script>window.__razr_config = ${JSON.stringify(i).replace(/<\/script>/gi,"\\x3C/script>")};<\/script>`;t.ad=r+t.ad,this.installListener()},installListener(){this._listenerInstalled||(window.addEventListener("message",(function(e){var t,i;const r=null==(i=null==(t=e.data)?void 0:t.razr)?void 0:i.load;if(!r)return;e.source&&(r.source=e.source,r.id&&e.source.postMessage({razr:{id:r.id}},"*"));const n=window.razr=window.razr||{};n.q=n.q||[],n.q.push(r),n.loaded||loadExternalScript(ID_RAZR.RENDERER_URL,BIDDER_CODE$g)})),this._listenerInstalled=!0)}},VERSION="1.0",BIDDER_CODE$f="adyoulike",DEFAULT_DC="hb-api",CURRENCY$1="USD",GVLID$6=259,NATIVE_IMAGE={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},spec$g={code:BIDDER_CODE$f,gvlid:GVLID$6,supportedMediaTypes:[BANNER,NATIVE$1,VIDEO],aliases:["ayl"],isBidRequestValid:function(e){const t=getSize$1(getSizeArray(e)),i=t.width>0&&t.height>0;return e.params&&e.params.placement&&(i||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){e=convertOrtbRequestToProprietaryNative(e);let i,r=!1;const n={Version:VERSION,Bids:e.reduce(((e,t)=>{var n,a;let o=getMediatype(t),s=getSizeArray(t),d=getSize$1(s);if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=null==(a=null==(n=t.ortb2Imp)?void 0:n.ext)?void 0:a.tid,e[t.bidId].Width=d.width,e[t.bidId].Height=d.height,e[t.bidId].AvailableSizes=s.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=getFloor$1(t,d,o)),t.schain&&(e[t.bidId].SChain=t.schain),!i&&t.userIdAsEids&&t.userIdAsEids.length&&(i=t.userIdAsEids),o===NATIVE$1){let i=t.mediaTypes.native;"image"===i.type&&(i=Object.assign({},NATIVE_IMAGE,i)),i.clickUrl={required:!0},e[t.bidId].Native=i}if(o===VIDEO){r=!0,e[t.bidId].Video=t.mediaTypes.video;const i=t.mediaTypes.video.playerSize;Array.isArray(i)&&!Array.isArray(i[0])&&(e[t.bidId].Video.playerSize=[i])}return e}),{}),PageRefreshed:getPageRefreshed()};t.gdprConsent&&(n.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(n.uspConsent=t.uspConsent),t.ortb2&&(n.ortb2=t.ortb2),i&&(n.eids=i),n.pbjs_version="8.47.0";const a=JSON.stringify(n);return{method:"POST",url:createEndpoint(e,t,r),data:a,options:{withCredentials:!0}}},interpretResponse:function(e,t){const i=[];var r={};if(!e||!e.body)return i;try{r=JSON.parse(t.data).Bids}catch(n){}return e.body.forEach((e=>{const t=createBid(e,r);t&&i.push(t)})),i},getUserSyncs:function(e,t,i,r,n){var a,o;if(!e.iframeEnabled)return[];let s="";return i&&(s+="&gdpr="+(i.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(i.consentString||"")),!0===config.getConfig("coppa")&&(s+="&coppa=1"),r&&(s+="&us_privacy="+encodeURIComponent(r)),(null==n?void 0:n.gppString)&&(null==(a=null==n?void 0:n.applicableSections)?void 0:a.length)&&(s+="&gpp="+encodeURIComponent(n.gppString),s+="&gpp_sid="+encodeURIComponent(null==(o=null==n?void 0:n.applicableSections)?void 0:o.join(","))),[{type:"iframe",url:`https://visitor.omnitagjs.com/visitor/isync?uid=19340f4f097d16f41f34fc0274981ca4${s}`}]}};function getHostname(e){let t=find(e,(e=>e.params.DC));return t?"-"+t.params.DC:""}function getMediatype(e){return dlv(e,"mediaTypes.banner")?BANNER:dlv(e,"mediaTypes.video")?VIDEO:dlv(e,"mediaTypes.native")?NATIVE$1:void 0}function getFloor$1(e,t,i){const r=e.getFloor({currency:CURRENCY$1,mediaType:i,size:[t.width,t.height]});if(!isNaN(r.floor)&&r.currency===CURRENCY$1)return r.floor}function getPageRefreshed(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function createEndpoint(e,t,i){let r=getHostname(e);return buildUrl({protocol:"https",host:`${DEFAULT_DC}${r}.omnitagjs.com`,pathname:i?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1",search:createEndpointQS(t)})}function createEndpointQS(e){var t,i;const r={};if(e){const i=e.refererInfo;i&&(i.location&&(r.RefererUrl=encodeURIComponent(i.location),i.reachedTop||(r.SafeFrame=!0)),r.PageUrl=encodeURIComponent(i.topmostLocation),r.PageReferrer=encodeURIComponent(i.location));const n=null==(t=e.ortb2)?void 0:t.site;n&&(r.PageUrl=encodeURIComponent(n.page||(null==i?void 0:i.topmostLocation)),r.PageReferrer=encodeURIComponent(n.ref||(null==i?void 0:i.location)))}const n=null==(i=null==e?void 0:e.refererInfo)?void 0:i.canonicalUrl;return n&&(r.CanonicalUrl=encodeURIComponent(n)),r}function getSizeArray(e){let t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),parseSizesInput(t)}function getSize$1(e){const t={},i=e[0];if("string"!=typeof i)return t;const r=i.toUpperCase().split("X"),n=parseInt(r[0],10);n&&(t.width=n);const a=parseInt(r[1],10);return a&&(t.height=a),t}function getInternalImgUrl(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function getImageUrl(e,t,i,r){let n="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":n=getInternalImgUrl(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":const a=e.DynamicPrefix;let o=t.Data.External.Url;if(o=o.replace(/\[height\]/i,""+r),o=o.replace(/\[width\]/i,""+i),o.indexOf(a)>=0){const e=/.*url=([^&]*)/gm.exec(o);n=e?e[1]:"",n||(n=getInternalImgUrl(/.*key=([^&]*)/gm.exec(o)[1]))}else n=o}return n}function getTrackers(e,t){const i=[];return e?(e.map(((e,r)=>{(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&i.push(e.Url)})),i):i}function getNativeAssets$1(e,t){if("object"==typeof e.Native)return e.Native;const i={};var r={},n={};if("string"==typeof e.Ad){r=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),n=r.Content.Preview.Text;var a=r.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+r.Attempt,o=r.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+r.Attempt;r.Campaign&&(a+="&campaign="+r.Campaign,o+="&campaign="+r.Campaign),i.clickUrl=r.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+r.Attempt+"&campaign="+r.Campaign+"&url="+encodeURIComponent(r.Content.Landing.Url),r.OnEvents?(i.clickTrackers=getTrackers(r.OnEvents.CLICK),i.impressionTrackers=getTrackers(r.OnEvents.IMPRESSION),i.javascriptTrackers=getTrackers(r.OnEvents.IMPRESSION,!0)):i.impressionTrackers=[],i.impressionTrackers.push(a,o)}return Object.keys(t).map((function(a,o){switch(a){case"title":i[a]=n.TITLE;break;case"body":i[a]=n.DESCRIPTION;break;case"cta":i[a]=n.CALLTOACTION;break;case"sponsoredBy":i[a]=r.Content.Preview.Sponsor.Name;break;case"image":const o=t.image.sizes||[];o.length||(o[0]=e.Width||300,o[1]=e.Height||250);const s=getImageUrl(r,dlv(r,"Content.Preview.Thumbnail.Image"),o[0],o[1]);s&&(i[a]={url:s,width:o[0],height:o[1]});break;case"icon":const d=t.icon.sizes||[];d.length||(d[0]=50,d[1]=50);const l=getImageUrl(r,dlv(r,"Content.Preview.Sponsor.Logo.Resource"),d[0],d[1]);l&&(i[a]={url:l,width:d[0],height:d[1]});break;case"privacyIcon":i[a]=getImageUrl(r,dlv(r,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":i[a]=dlv(r,"Content.Preview.Credit.Url")}})),i}function createBid(e,t){if(!e||!e.Ad&&!e.Native&&!e.Vast)return;const i=t&&t[e.BidID];i&&(e.Width&&"0"!==e.Width||(e.Width=i.Width),e.Height&&"0"!==e.Height||(e.Height=i.Height));const r={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:CURRENCY$1,meta:e.Meta||{advertiserDomains:[]}},n=e.Vast;return n?(r.width=e.Width,r.height=e.Height,r.vastXml=window.atob(n),r.mediaType="video"):i.Native?(r.native=getNativeAssets$1(e,i.Native),r.mediaType="native"):(r.width=e.Width,r.height=e.Height,r.ad=e.Ad),r}registerBidder(spec$g);const APPNEXUS_CATEGORY_MAPPING={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"},ORTB_KEYWORDS_PATHS=["user.keywords"].concat(CLIENT_SECTIONS.flatMap((e=>["keywords","content.keywords"].map((t=>`${e}.${t}`)))));function mergeKeywords(...e){const t=new Set;return e.filter((e=>e)).flatMap((e=>Array.isArray(e)?e:e.split(","))).map((e=>e.replace(/^\s*/,"").replace(/\s*$/,""))).filter((e=>e)).forEach((e=>t.add(e))),Array.from(t.keys())}function getAllOrtbKeywords(e,...t){return mergeKeywords(...ORTB_KEYWORDS_PATHS.map((t=>dlv(e,t))),...t)}const ORTB_SEGTAX_KEY_MAP={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},ORTB_SEG_PATHS=["user.data"].concat(CLIENT_SECTIONS.map((e=>`${e}.content.data`)));function getValueString(e,t,i){return null==t?i:isStr(t)?t:isNumber(t)?t.toString():void logWarn("Unsuported type for param: "+e+" required type: String")}function transformBidderParamKeywords(e,t="keywords"){const i=[];return _each(e,((e,r)=>{if(isArray(e)){let i=[];_each(e,(e=>{((e=getValueString(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!isStr(e=getValueString(t+"."+r,e)))return;e=[e]}e=e.filter((e=>""!==e));const n={key:r};e.length>0&&(n.value=e),i.push(n)})),i}function convertKeywordStringToANMap(e){return isStr(e)&&""!==e?convertKeywordsToANMap(e.split(/\s*(?:,)\s*/)):{}}function convertKeywordsToANMap(e){const t={};return e.forEach((e=>{if(-1!==e.indexOf("=")){let i=e.split("="),r=i[0],n=i[1];t.hasOwnProperty(r)?t[r].push(n):t[r]=[n]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function getANMapFromOrtbKeywords(e){return convertKeywordsToANMap(getAllOrtbKeywords(e))}function getANKewyordParamFromMaps(...e){return transformBidderParamKeywords(mergeDeep(...e.map((e=>Object.fromEntries(Object.entries(e||{}).map((([e,t])=>[e,isNumber(t)||isStr(t)?[t]:t])))))))}function getANKeywordParam(e,...t){return getANKewyordParamFromMaps(getANMapFromOrtbKeywords(e),getANMapFromOrtbSegments(e),...t)}function getANMapFromOrtbSegments(e){let t={};return ORTB_SEG_PATHS.forEach((i=>{(dlv(e,i)||[]).forEach((e=>{const i=ORTB_SEGTAX_KEY_MAP[dlv(e,"ext.segtax")];i&&e.segment.forEach((e=>{t[i]?t[i].push(e.id):t[i]=[e.id]}))}))})),t}function convertCamelToUnderscore(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function fill(e,t){let i=[];for(let r=0;r<t;r++){let t=isPlainObject(e)?deepClone(e):e;i.push(t)}return i}function tryConvertType(e,t){return"string"===e?t&&t.toString():"number"===e?Number(t):t}function convertTypes(e,t){return Object.keys(e).forEach((i=>{t[i]&&(isFn(e[i])?t[i]=e[i](t[i]):t[i]=tryConvertType(e[i],t[i]),isNaN(t[i])&&delete t.key)})),t}function chunk(e,t){let i=[];for(let r=0;r<Math.ceil(e.length/t);r++){let n=r*t,a=n+t;i.push(e.slice(n,a))}return i}const BIDDER_CODE$e="appnexus",URL$1="https://ib.adnxs.com/ut/v3/prebid",URL_SIMPLE="https://ib.adnxs-simple.com/ut/v3/prebid",VIDEO_TARGETING=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],VIDEO_RTB_TARGETING=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],USER_PARAMS=["age","externalUid","external_uid","segments","gender","dnt","language"],APP_DEVICE_PARAMS=["geo","device_id"],DEBUG_PARAMS=["enabled","dongle","member_id","debug_timeout"],DEBUG_QUERY_PARAM_MAP={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},VIDEO_MAPPING={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},NATIVE_MAPPING={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},SOURCE="pbjs",MAX_IMPS_PER_REQUEST=15,SCRIPT_TAG_START="<script",VIEWABILITY_URL_START=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,VIEWABILITY_FILE_NAME="trk.js",GVLID$5=32,storage$7=getStorageManager({bidderCode:BIDDER_CODE$e}),spec$f={code:BIDDER_CODE$e,gvlid:GVLID$5,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"uol",gvlid:32},{code:"adzymic",gvlid:32}],supportedMediaTypes:[BANNER,VIDEO,NATIVE$1],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var i,r,n,a,o;const s=(e=convertOrtbRequestToProprietaryNative(e)).map(bidToTag),d=find(e,hasUserInfo);let l={};!0===config.getConfig("coppa")&&(l={coppa:!0}),d&&Object.keys(d.params.user).filter((e=>includes$1(USER_PARAMS,e))).forEach((e=>{let t=convertCamelToUnderscore(e);if("segments"===e&&isArray(d.params.user[e])){let i=[];d.params.user[e].forEach((e=>{isNumber(e)?i.push({id:e}):isPlainObject(e)&&i.push(e)})),l[t]=i}else"segments"!==e&&(l[t]=d.params.user[e])}));const c=find(e,hasAppDeviceInfo);let p;c&&c.params&&c.params.app&&(p={},Object.keys(c.params.app).filter((e=>includes$1(APP_DEVICE_PARAMS,e))).forEach((e=>p[e]=c.params.app[e])));const u=find(e,hasAppId);let m;u&&u.params&&c.params.app&&c.params.app.id&&(m={appid:u.params.app.id});let g={},f={};const b=storage$7.getCookie("apn_prebid_debug")||null;if(b)try{g=JSON.parse(b)}catch(_){logError("AppNexus Debug Auction Cookie Error:\n\n"+_)}else{Object.keys(DEBUG_QUERY_PARAM_MAP).forEach((e=>{let t=getParameterByName(e);isStr(t)&&""!==t&&(g[DEBUG_QUERY_PARAM_MAP[e]]=t,g.enabled=!0)})),g=convertTypes({member_id:"number",debug_timeout:"number"},g);const t=find(e,hasDebug);t&&t.debug&&(g=t.debug)}g&&g.enabled&&Object.keys(g).filter((e=>includes$1(DEBUG_PARAMS,e))).forEach((e=>{f[e]=g[e]}));const h=find(e,hasMemberId),y=h?parseInt(h.params.member,10):0,v=e[0].schain,I=find(e,hasOmidSupport),E={tags:[...s],user:l,sdk:{source:SOURCE,version:"8.47.0"},schain:v};I&&(E.iab_support={omidpn:"Appnexus",omidpv:"8.47.0"}),y>0&&(E.member_id=y),c&&(E.device=p),u&&(E.app=m);let A=getANKeywordParam(deepClone(t&&t.ortb2),deepClone(config.getConfig("appnexusAuctionKeywords"))||{});if(A.length>0&&(E.keywords=A),config.getConfig("adpod.brandCategoryExclusion")&&(E.brand_category_uniqueness=!0),f.enabled&&(E.debug=f,logInfo("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(f,null,4))),t&&t.gdprConsent&&(E.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){let e=t.gdprConsent.addtlConsent,i=e.substring(e.indexOf("~")+1);E.gdpr_consent.addtl_consent=i.split(".").map((e=>parseInt(e,10)))}if(t&&t.uspConsent&&(E.us_privacy=t.uspConsent),(null==t?void 0:t.gppConsent)?E.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:(null==(r=null==(i=null==t?void 0:t.ortb2)?void 0:i.regs)?void 0:r.gpp)&&(E.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){let e={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((e=>encodeURIComponent(e))).join(",")},i=t.refererInfo.canonicalUrl;isStr(i)&&""!==i&&(e.rd_can=i),E.referrer_detection=e}if(find(e,hasAdPod)&&e.filter(hasAdPod).forEach((e=>{const t=createAdPodRequest(s,e),i=E.tags.filter((t=>t.uuid!==e.bidId));E.tags=[...i,...t]})),e[0].userId){let t=[];e[0].userIdAsEids.forEach((e=>{!e||!e.uids||e.uids.length<1||e.uids.forEach((i=>{let r={source:e.source,id:i.id};"adserver.org"==e.source?r.rti_partner="TDID":"uidapi.com"==e.source&&(r.rti_partner="UID2"),t.push(r)}))})),t.length&&(E.eids=t)}if(null==(o=null==(a=null==(n=null==t?void 0:t.ortb2)?void 0:n.regs)?void 0:a.ext)?void 0:o.dsa){const e=t.ortb2.regs.ext.dsa,i={};if(["dsarequired","pubrender","datatopub"].forEach((t=>{isNumber(e[t])&&(i[t]=e[t])})),isArray(e.transparency)&&e.transparency.every((e=>isPlainObject(e)))){const t=[];e.transparency.forEach((e=>{isStr(e.domain)&&""!=e.domain&&isArray(e.dsaparams)&&e.dsaparams.every((e=>isNumber(e)))&&t.push(e)})),t.length>0&&(i.transparency=t)}isEmpty(i)||(E.dsa=i)}return s[0].publisher_id&&(E.publisher_id=s[0].publisher_id),formatRequest(E,t)},interpretResponse:function(e,{bidderRequest:t}){e=e.body;const i=[];if(!e||e.error){let r=`in response for ${t.bidderCode} adapter`;return e&&e.error&&(r+=`: ${e.error}`),logError(r),i}if(e.tags&&e.tags.forEach((e=>{const r=getRtbBid(e);if(r&&(!0===bidderSettings.get(t.bidderCode,"allowZeroCpmBids")?r.cpm>=0:r.cpm>0)&&includes$1(this.supportedMediaTypes,r.ad_type)){const n=newBid(e,r,t);n.mediaType=parseMediaType(r),i.push(n)}})),e.debug&&e.debug.debug_info){let t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;t=t.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),logMessage("https://console.appnexus.com/docs/understanding-the-debug-auction"),logMessage(t)}return i},getUserSyncs:function(e,t,i,r,n){if(e.iframeEnabled&&hasPurpose1Consent(i))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,i,r){let n=transformBidderParamKeywords;if(!0===t){let e=null,t=config.getConfig("s2sConfig");isPlainObject(t)?e=dlv(t,"endpoint.p1Consent"):isArray(t)&&t.forEach((t=>{includes$1(t.bidders,i.bids[0].bidder)&&(e=dlv(t,"endpoint.p1Consent"))})),e&&e.match("/openrtb2/prebid")&&(n=convertKeywordsToString)}return e=convertTypes({member:"string",invCode:"string",placementId:"number",keywords:n,publisherId:"number"},e),t&&(Object.keys(e).forEach((t=>{let i=convertCamelToUnderscore(t);i!==t&&(e[i]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function strIsAppnexusViewabilityScript(e){if(!e||""===e)return!1;let t=e.match(VIEWABILITY_URL_START),i=null!=t&&t.length>=1,r=e.match(VIEWABILITY_FILE_NAME),n=null!=r&&r.length>=1;return e.startsWith(SCRIPT_TAG_START)&&n&&i}function formatRequest(e,t){let i=[],r={withCredentials:!0},n=URL$1;if(hasPurpose1Consent(null==t?void 0:t.gdprConsent)||(n=URL_SIMPLE),"TRUE"!==getParameterByName("apn_test").toUpperCase()&&!0!==config.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>MAX_IMPS_PER_REQUEST){const a=deepClone(e);chunk(e.tags,MAX_IMPS_PER_REQUEST).forEach((e=>{a.tags=e;const o=JSON.stringify(a);i.push({method:"POST",url:n,data:o,bidderRequest:t,options:r})}))}else{const a=JSON.stringify(e);i={method:"POST",url:n,data:a,bidderRequest:t,options:r}}return i}function newRenderer(e,t,i={}){const r=Renderer.install({id:t.renderer_id,url:t.renderer_url,config:i,loaded:!1,adUnitCode:e});try{r.setRender(outstreamRender)}catch(n){logWarn("Prebid Error calling setRender on renderer",n)}return r.setEventHandlers({impression:()=>logMessage("AppNexus outstream video impression event"),loaded:()=>logMessage("AppNexus outstream video loaded event"),ended:()=>{logMessage("AppNexus outstream renderer video event"),document.querySelector(`#${e}`).style.display="none"}}),r}function newBid(e,t,i){const r=getBidRequest$1(e.uuid,[i]),n=getUniqueIdentifierStr(),a={adId:n,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};var o;if(t.adomain&&(a.meta=Object.assign({},a.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(a.meta=Object.assign({},a.meta,{advertiserId:t.advertiser_id})),t.dsa&&(a.meta=Object.assign({},a.meta,{dsa:t.dsa})),t.buyer_member_id&&(a.meta=Object.assign({},a.meta,{dchain:(o=t,{ver:"1.0",complete:0,nodes:[{bsid:o.buyer_member_id.toString()}]})})),t.brand_id&&(a.meta=Object.assign({},a.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(a,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),dlv(r,"mediaTypes.video.context")){case ADPOD:const r=APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]?APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]:null;a.meta=Object.assign({},a.meta,{primaryCatId:r});const n=t.deal_priority;a.video={context:ADPOD,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:n},a.vastUrl=t.rtb.video.asset_url;break;case OUTSTREAM$1:if(a.adResponse=e,a.adResponse.ad=a.adResponse.ads[0],a.adResponse.ad.video=a.adResponse.ad.rtb.video,a.vastXml=t.rtb.video.content,t.renderer_url){const r=find(i.bids,(t=>t.bidId===e.uuid));let n=dlv(r,"mediaTypes.video.renderer.options");n||(n=dlv(r,"renderer.options")),a.renderer=newRenderer(a.adUnitCode,t,n)}break;case INSTREAM:a.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[NATIVE$1]){const e=t.rtb[NATIVE$1];let i;if(strIsAppnexusViewabilityScript(t.viewability.config)){let e="pbjs_adid="+n+";pbjs_auc="+r.adUnitCode;i=t.viewability.config.replace("dom_id=%native_dom_id%",e)}let o=e.javascript_trackers;null==o?o=i:isStr(o)?o=[o,i]:o.push(i),a[NATIVE$1]={title:e.title,body:e.desc,body2:e.desc2,cta:e.ctatext,rating:e.rating,sponsoredBy:e.sponsored,privacyLink:e.privacy_link,address:e.address,downloads:e.downloads,likes:e.likes,phone:e.phone,price:e.price,salePrice:e.saleprice,clickUrl:e.link.url,displayUrl:e.displayurl,clickTrackers:e.link.click_trackers,impressionTrackers:e.impression_trackers,video:e.video,javascriptTrackers:o},e.main_img&&(a.native.image={url:e.main_img.url,height:e.main_img.height,width:e.main_img.width}),e.icon&&(a.native.icon={url:e.icon.url,height:e.icon.height,width:e.icon.width})}else{Object.assign(a,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(let e=0;e<t.rtb.trackers[0].impression_urls.length;e++){const i=createTrackPixelHtml(t.rtb.trackers[0].impression_urls[e]);a.ad+=i}}catch(s){logError("Error appending tracking pixel",s)}}return a}function bidToTag(e){var t;const i={};Object.keys(e.params).forEach((t=>{let i=convertCamelToUnderscore(t);i!==t&&(e.params[i]=e.params[t],delete e.params[t])})),i.sizes=transformSizes$2(e.sizes),i.primary_size=i.sizes[0],i.ad_types=[],i.uuid=e.bidId,e.params.placement_id?i.id=parseInt(e.params.placement_id,10):i.code=e.params.inv_code;const r=getParameterByName("ast_override_div");if(isStr(r)&&""!==r){const t=r.split(",").find((t=>t.startsWith(`${e.adUnitCode}:`)));if(t){const e=t.split(":")[1];e&&(i.force_creative_id=parseInt(e,10))}}i.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,i.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,i.prebid=!0,i.disable_psa=!0;let n=getBidFloor$2(e);if(n&&(i.reserve=n),e.params.position)i.position={above:1,below:2}[e.params.position]||0;else{let t=dlv(e,"mediaTypes.banner.pos")||dlv(e,"mediaTypes.video.pos");0!==t&&1!==t&&3!==t||(i.position=3===t?2:t)}e.params.traffic_source_code&&(i.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(i.private_sizes=transformSizes$2(e.params.private_sizes)),e.params.supply_type&&(i.supply_type=e.params.supply_type),e.params.pub_click&&(i.pubclick=e.params.pub_click),e.params.ext_inv_code&&(i.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(i.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(i.external_imp_id=e.params.external_imp_id);const a=getANKewyordParamFromMaps(convertKeywordStringToANMap(dlv(e,"ortb2Imp.ext.data.keywords")),null==(t=e.params)?void 0:t.keywords);a.length>0&&(i.keywords=a);let o=dlv(e,"ortb2Imp.ext.gpid")||dlv(e,"ortb2Imp.ext.data.pbadslot");if(o&&(i.gpid=o),(e.mediaType===NATIVE$1||dlv(e,`mediaTypes.${NATIVE$1}`))&&(i.ad_types.push(NATIVE$1),0===i.sizes.length&&(i.sizes=transformSizes$2([1,1])),e.nativeParams)){const t=buildNativeRequest(e.nativeParams);i[NATIVE$1]={layouts:[t]}}{const t=dlv(e,`mediaTypes.${VIDEO}`),r=dlv(e,"mediaTypes.video.context");i.hb_source=t&&"adpod"===r?7:1,(e.mediaType===VIDEO||t)&&i.ad_types.push(VIDEO),(e.mediaType===VIDEO||t&&"outstream"!==r)&&(i.require_asset_url=!0),e.params.video&&(i.video={},Object.keys(e.params.video).filter((e=>includes$1(VIDEO_TARGETING,e))).forEach((t=>{switch(t){case"context":case"playback_method":let r=e.params.video[t];r=isArray(r)?r[0]:r,i.video[t]=VIDEO_MAPPING[t][r];break;case"frameworks":break;default:i.video[t]=e.params.video[t]}})),e.params.video.frameworks&&isArray(e.params.video.frameworks)&&(i.video_frameworks=e.params.video.frameworks)),t&&(i.video=i.video||{},Object.keys(t).filter((e=>includes$1(VIDEO_RTB_TARGETING,e))).forEach((e=>{switch(e){case"minduration":case"maxduration":"number"!=typeof i.video[e]&&(i.video[e]=t[e]);break;case"skip":"boolean"!=typeof i.video.skippable&&(i.video.skippable=1===t[e]);break;case"skipafter":"number"!=typeof i.video.skipoffset&&(i.video.skippoffset=t[e]);break;case"playbackmethod":if("number"!=typeof i.video.playback_method){let r=t[e];r=isArray(r)?r[0]:r,r>=1&&r<=4&&(i.video.playback_method=r)}break;case"api":if(!i.video_frameworks&&isArray(t[e])){let r=t[e].map((e=>{let t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((e=>e));i.video_frameworks=r}break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof i.video.context){const e=t.plcmt,r=t.placement,n=t.startdelay,a=getContextFromPlcmt(e,n)||getContextFromPlacement(r)||getContextFromStartDelay(n);i.video.context=VIDEO_MAPPING.context[a]}}}))),e.renderer&&(i.video=Object.assign({},i.video,{custom_renderer_present:!0}))}return e.params.frameworks&&isArray(e.params.frameworks)&&(i.banner_frameworks=e.params.frameworks),dlv(e,`mediaTypes.${BANNER}`)&&i.ad_types.push(BANNER),0===i.ad_types.length&&delete i.ad_types,i}function transformSizes$2(e){let t=[],i={};if(isArray(e)&&2===e.length&&!isArray(e[0]))i.width=parseInt(e[0],10),i.height=parseInt(e[1],10),t.push(i);else if("object"==typeof e)for(let r=0;r<e.length;r++){let n=e[r];i={},i.width=parseInt(n[0],10),i.height=parseInt(n[1],10),t.push(i)}return t}function getContextFromPlacement(e){if(e)return 2===e?"in-banner":3===e?"outstream":4===e?"in-feed":5===e?"intersitial":void 0}function getContextFromStartDelay(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}function getContextFromPlcmt(e,t){if(e)if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else{if(3===e)return"interstitial";if(4===e)return"outstream"}}function hasUserInfo(e){return!!e.params.user}function hasMemberId(e){return!!parseInt(e.params.member,10)}function hasAppDeviceInfo(e){if(e.params)return!!e.params.app}function hasAppId(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function hasDebug(e){return!!e.debug}function hasAdPod(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===ADPOD}function hasOmidSupport(e){let t=!1;const i=e.params,r=e.params.video;return i.frameworks&&isArray(i.frameworks)&&(t=includes$1(e.params.frameworks,6)),!t&&r&&r.frameworks&&isArray(r.frameworks)&&(t=includes$1(e.params.video.frameworks,6)),t}function createAdPodRequest(e,t){const{durationRangeSec:i,requireExactDuration:r}=t.mediaTypes.video,n=getAdPodPlacementNumber(t.mediaTypes.video),a=Math.max(...i);let o=fill(...e.filter((e=>e.uuid===t.bidId)),n);if(r){const e=chunk(o,Math.ceil(n/i.length));i.forEach(((t,i)=>{e[i].map((e=>{setVideoProperty(e,"minduration",t),setVideoProperty(e,"maxduration",t)}))}))}else o.map((e=>setVideoProperty(e,"maxduration",a)));return o}function getAdPodPlacementNumber(e){const{adPodDurationSec:t,durationRangeSec:i,requireExactDuration:r}=e,n=Math.min(...i),a=Math.floor(t/n);return r?Math.max(a,i.length):a}function setVideoProperty(e,t,i){isEmpty(e.video)&&(e.video={}),e.video[t]=i}function getRtbBid(e){return e&&e.ads&&e.ads.length&&find(e.ads,(e=>e.rtb))}function buildNativeRequest(e){const t={};return Object.keys(e).forEach((i=>{const r=NATIVE_MAPPING[i]&&NATIVE_MAPPING[i].serverName||NATIVE_MAPPING[i]||i,n=NATIVE_MAPPING[i]&&NATIVE_MAPPING[i].requiredParams;if(t[r]=Object.assign({},n,e[i]),(r===NATIVE_MAPPING.image.serverName||r===NATIVE_MAPPING.icon.serverName)&&t[r].sizes){let e=t[r].sizes;(isArrayOfNums(e)||isArray(e)&&e.length>0&&e.every((e=>isArrayOfNums(e))))&&(t[r].sizes=transformSizes$2(t[r].sizes))}r===NATIVE_MAPPING.privacyLink&&(t.privacy_supported=!0)})),t}function hidedfpContainer(e){try{const t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(t){}}function hideSASIframe(e){try{const t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(t){}}function outstreamRender(e,t){hidedfpContainer(e.adUnitCode),hideSASIframe(e.adUnitCode),e.renderer.push((()=>{((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},handleOutstreamRendererEvents.bind(null,e))}))}function handleOutstreamRendererEvents(e,t,i){e.renderer.handleVideoEvent({id:t,eventName:i})}function parseMediaType(e){const t=e.ad_type;return t===VIDEO?VIDEO:t===NATIVE$1?NATIVE$1:BANNER}function getBidFloor$2(e){if(!isFn(e.getFloor))return e.params.reserve?e.params.reserve:null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return isPlainObject(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}function convertKeywordsToString(e){let t="";return Object.keys(e).forEach((i=>{isStr(e[i])?""!==e[i]?t+=`${i}=${e[i]},`:t+=`${i},`:isArray(e[i])&&(""===e[i][0]?t+=`${i},`:e[i].forEach((e=>{t+=`${i}=${e},`})))})),t=t.substring(0,t.length-1),t}registerBidder(spec$f);var verify$1={},jsbnLite={},dbits;Object.defineProperty(jsbnLite,"__esModule",{value:!0});var BigInteger=function(){function e(e){null!==e&&this.fromHexString(e)}return e.prototype.toHexString=function(){if(this.s<0)return"-"+this.negate().toHexString();var e,t=!1,i="",r=this.t,n=this.DB-r*this.DB%4;if(r-- >0)for(n<this.DB&&(e=this[r]>>n)>0&&(t=!0,i=int2char(e));r>=0;)n<4?(e=(this[r]&(1<<n)-1)<<4-n,e|=this[--r]>>(n+=this.DB-4)):(e=this[r]>>(n-=4)&15,n<=0&&(n+=this.DB,--r)),e>0&&(t=!0),t&&(i+=int2char(e));return t?i:"0"},e.prototype.fromHexString=function(t){if(null!==t){this.t=0,this.s=0;for(var i=t.length,r=!1,n=0;--i>=0;){var a=intAt(t,i);a<0?"-"==t.charAt(i)&&(r=!0):(r=!1,0==n?this[this.t++]=a:n+4>this.DB?(this[this.t-1]|=(a&(1<<this.DB-n)-1)<<n,this[this.t++]=a>>this.DB-n):this[this.t-1]|=a<<n,(n+=4)>=this.DB&&(n-=this.DB))}this.clamp(),r&&e.ZERO.subTo(this,this)}},e.prototype.negate=function(){var t=nbi();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.mod=function(t){var i=nbi();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(e.ZERO)>0&&t.subTo(i,i),i},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.lShiftTo=function(e,t){for(var i=e%this.DB,r=this.DB-i,n=(1<<r)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM,s=this.t-1;s>=0;--s)t[s+a+1]=this[s]>>r|o,o=(this[s]&n)<<i;for(s=a-1;s>=0;--s)t[s]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},e.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var r=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,r,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},e.prototype.multiplyTo=function(t,i){var r=this.abs(),n=t.abs(),a=r.t;for(i.t=a+n.t;--a>=0;)i[a]=0;for(a=0;a<n.t;++a)i[a+r.t]=r.am(0,n[a],i,a,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&e.ZERO.subTo(i,i)},e.prototype.divRemTo=function(t,i,r){var n=t.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)return null!=i&&i.fromHexString("0"),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var o=nbi(),s=this.s,d=t.s,l=this.DB-nbits(n[n.t-1]);l>0?(n.lShiftTo(l,o),a.lShiftTo(l,r)):(n.copyTo(o),a.copyTo(r));var c=o.t,p=o[c-1];if(0!=p){var u=p*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),m=this.FV/u,g=(1<<this.F1)/u,f=1<<this.F2,b=r.t,h=b-c,y=null==i?nbi():i;for(o.dlShiftTo(h,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),e.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--h>=0;){var v=r[--b]==p?this.DM:Math.floor(r[b]*m+(r[b-1]+f)*g);if((r[b]+=o.am(0,v,r,h,0,c))<v)for(o.dlShiftTo(h,y),r.subTo(y,r);r[b]<--v;)r.subTo(y,r)}null!=i&&(r.drShiftTo(c,i),s!=d&&e.ZERO.subTo(i,i)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&e.ZERO.subTo(r,r)}}},e.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var r=e%this.DB,n=this.DB-r,a=(1<<r)-1;t[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)t[o-i-1]|=(this[o]&a)<<n,t[o-i]=this[o]>>r;r>0&&(t[this.t-i-1]|=(this.s&a)<<n),t.t=this.t-i,t.clamp()}},e.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.subTo=function(e,t){for(var i=0,r=0,n=Math.min(e.t,this.t);i<n;)r+=this[i]-e[i],t[i++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;i<this.t;)r+=this[i],t[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<e.t;)r-=e[i],t[i++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[i++]=this.DV+r:r>0&&(t[i++]=r),t.t=i,t.clamp()},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.modPowInt=function(e,t){var i;return i=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,i)},e.prototype.exp=function(t,i){if(t>4294967295||t<1)return e.ONE;var r=nbi(),n=nbi(),a=i.convert(this),o=nbits(t)-1;for(a.copyTo(r);--o>=0;)if(i.sqrTo(r,n),(t&1<<o)>0)i.mulTo(n,a,r);else{var s=r;r=n,n=s}return i.revert(r)},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},e.prototype.am1=function(e,t,i,r,n,a){for(;--a>=0;){var o=t*this[e++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n},e.prototype.am2=function(e,t,i,r,n,a){for(var o=32767&t,s=t>>15;--a>=0;){var d=32767&this[e],l=this[e++]>>15,c=s*d+l*o;n=((d=o*d+((32767&c)<<15)+i[r]+(1073741823&n))>>>30)+(c>>>15)+s*l+(n>>>30),i[r++]=1073741823&d}return n},e.prototype.am3=function(e,t,i,r,n,a){for(var o=16383&t,s=t>>14;--a>=0;){var d=16383&this[e],l=this[e++]>>14,c=s*d+l*o;n=((d=o*d+((16383&c)<<14)+i[r]+n)>>28)+(c>>14)+s*l,i[r++]=268435455&d}return n},e}();function nbi(){return new BigInteger(null)}function nbits(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}jsbnLite.BigInteger=BigInteger,jsbnLite.nbi=nbi,jsbnLite.nbits=nbits;var BI_RC=[],rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function intAt(e,t){var i=BI_RC[e.charCodeAt(t)];return null==i?-1:i}jsbnLite.intAt=intAt;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";function int2char(e){return BI_RM.charAt(e)}jsbnLite.int2char=int2char;var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=";function b64toHex(e){var t,i="",r=0,n=0;for(t=0;t<e.length&&e.charAt(t)!=b64pad;++t){var a=b64map.indexOf(e.charAt(t));a<0||(0==r?(i+=int2char(a>>2),n=3&a,r=1):1==r?(i+=int2char(n<<2|a>>4),n=15&a,r=2):2==r?(i+=int2char(n),i+=int2char(a>>2),n=3&a,r=3):(i+=int2char(n<<2|a>>4),i+=int2char(15&a),r=0))}return 1==r&&(i+=int2char(n<<2)),i}function removeExtraSymbols(e){return e.replace(/^1f+00/,"").replace("3031300d060960864801650304020105000420","")}jsbnLite.b64toHex=b64toHex,jsbnLite.removeExtraSymbols=removeExtraSymbols;var Classic=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),Montgomery=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=nbi();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],r=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function nbv(e){var t=nbi();return t.fromHexString(e.toString()),t}jsbnLite.nbv=nbv,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=BigInteger.prototype.am2,dbits=30):"Netscape"!=navigator.appName?(BigInteger.prototype.am=BigInteger.prototype.am1,dbits=26):(BigInteger.prototype.am=BigInteger.prototype.am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var sha256={};Object.defineProperty(sha256,"__esModule",{value:!0});var Sha256=function(){function e(){}return e.hash=function(t){t=e.utf8Encode(t||"");for(var i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n=(t+=String.fromCharCode(128)).length/4+2,a=Math.ceil(n/16),o=new Array(a),s=0;s<a;s++){o[s]=new Array(16);for(var d=0;d<16;d++)o[s][d]=t.charCodeAt(64*s+4*d)<<24|t.charCodeAt(64*s+4*d+1)<<16|t.charCodeAt(64*s+4*d+2)<<8|t.charCodeAt(64*s+4*d+3)}var l=8*(t.length-1)/Math.pow(2,32),c=8*(t.length-1)>>>0;for(o[a-1][14]=Math.floor(l),o[a-1][15]=c,s=0;s<a;s++){for(var p=new Array(64),u=0;u<16;u++)p[u]=o[s][u];for(u=16;u<64;u++)p[u]=e.q1(p[u-2])+p[u-7]+e.q0(p[u-15])+p[u-16]>>>0;var m=r[0],g=r[1],f=r[2],b=r[3],h=r[4],y=r[5],v=r[6],I=r[7];for(u=0;u<64;u++){var E=I+e.z1(h)+e.Ch(h,y,v)+i[u]+p[u],A=e.z0(m)+e.Maj(m,g,f);I=v,v=y,y=h,h=b+E>>>0,b=f,f=g,g=m,m=E+A>>>0}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+f>>>0,r[3]=r[3]+b>>>0,r[4]=r[4]+h>>>0,r[5]=r[5]+y>>>0,r[6]=r[6]+v>>>0,r[7]=r[7]+I>>>0}var _=new Array(r.length);for(I=0;I<r.length;I++)_[I]=("00000000"+r[I].toString(16)).slice(-8);return _.join("")},e.utf8Encode=function(e){try{return(new TextEncoder).encode(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}},e.ROTR=function(e,t){return t>>>e|t<<32-e},e.z0=function(t){return e.ROTR(2,t)^e.ROTR(13,t)^e.ROTR(22,t)},e.z1=function(t){return e.ROTR(6,t)^e.ROTR(11,t)^e.ROTR(25,t)},e.q0=function(t){return e.ROTR(7,t)^e.ROTR(18,t)^t>>>3},e.q1=function(t){return e.ROTR(17,t)^e.ROTR(19,t)^t>>>10},e.Ch=function(e,t,i){return e&t^~e&i},e.Maj=function(e,t,i){return e&t^e&i^t&i},e}();sha256.Sha256=Sha256,Object.defineProperty(verify$1,"__esModule",{value:!0});var jsbnLite_1=jsbnLite,sha256_1=sha256;function verify(e,t,i,r){var n=new jsbnLite_1.BigInteger(jsbnLite_1.b64toHex(t)),a=new jsbnLite_1.BigInteger(jsbnLite_1.b64toHex(i)),o=n.modPowInt(r,a);return jsbnLite_1.removeExtraSymbols(o.toHexString())===sha256_1.Sha256.hash(e)}var verify_2=verify$1.verify=verify;const GVLID$4=91,ADAPTER_VERSION=36,BIDDER_CODE$d="criteo",CDB_ENDPOINT="https://bidder.criteo.com/cdb",PROFILE_ID_INLINE=207,PROFILE_ID_PUBLISHERTAG=185,storage$6=getStorageManager({bidderCode:BIDDER_CODE$d}),LOG_PREFIX$1="Criteo: ",FAST_BID_VERSION_PLACEHOLDER="%FAST_BID_VERSION%",FAST_BID_VERSION_CURRENT=144,FAST_BID_VERSION_LATEST="latest",FAST_BID_VERSION_NONE="none",PUBLISHER_TAG_URL_TEMPLATE="https://static.criteo.net/js/ld/publishertag.prebid"+FAST_BID_VERSION_PLACEHOLDER+".js",PUBLISHER_TAG_OUTSTREAM_SRC="https://static.criteo.net/js/ld/publishertag.renderer.js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",OPTOUT_COOKIE_NAME="cto_optout",BUNDLE_COOKIE_NAME="cto_bundle",GUID_RETENTION_TIME_HOUR=9360,OPTOUT_RETENTION_TIME_HOUR=43200,spec$e={code:BIDDER_CODE$d,gvlid:GVLID$4,supportedMediaTypes:[BANNER,VIDEO,NATIVE$1],getUserSyncs:function(e,t,i,r,n={}){let{gppString:a="",applicableSections:o=[]}=n;if(e.iframeEnabled&&hasPurpose1Consent(i)){if(canFastBid(config.getConfig("criteo.fastBidVersion")))return[];const e=getRefererInfo(),t="criteoPrebidAdapter",n=[];if(n.push(`origin=${t}`),n.push(`topUrl=${e.domain}`),i&&(i.gdprApplies&&n.push("gdpr="+(1==i.gdprApplies?1:0)),i.consentString&&n.push(`gdpr_consent=${i.consentString}`)),r&&n.push(`us_privacy=${r}`),n.push(`gpp=${a}`),Array.isArray(o))for(const i of o)n.push(`gpp_sid=${i}`);const s=Math.random().toString(),d={bundle:readFromAllStorages(BUNDLE_COOKIE_NAME),cw:storage$6.cookiesAreEnabled(),lsw:storage$6.localStorageIsEnabled(),optoutCookie:readFromAllStorages(OPTOUT_COOKIE_NAME),origin:t,requestId:s,tld:e.domain,topUrl:e.domain,version:"8.47.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(!t.data||"https://gum.criteo.com"!=t.origin)return;if(t.data.requestId!==s)return;this.removeEventListener("message",e),t.stopImmediatePropagation();const i=t.data;i.optout?(deleteFromAllStorages(BUNDLE_COOKIE_NAME),saveOnAllStorages(OPTOUT_COOKIE_NAME,!0,OPTOUT_RETENTION_TIME_HOUR)):i.bundle&&saveOnAllStorages(BUNDLE_COOKIE_NAME,i.bundle,GUID_RETENTION_TIME_HOUR)}),!0);const l=JSON.stringify(d).replace(/"/g,"%22");return[{type:"iframe",url:`https://gum.criteo.com/syncframe?${n.join("&")}#${l}`}]}if(e.pixelEnabled&&hasPurpose1Consent(i)){const e=[];if(e.push("profile=207"),i&&(!0===i.gdprApplies&&e.push("gdprapplies=true"),i.consentString&&e.push(`gdpr=${i.consentString}`)),r&&e.push(`ccpa=${r}`),e.push(`gpp=${a}`),Array.isArray(o))for(const t of o)e.push(`gpp_sid=${t}`);return[{type:"image",url:`https://ssp-sync.criteo.com/user-sync/redirect?${e.join("&")}`}]}return[]},isBidRequestValid:e=>!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||hasVideoMediaType$1(e)&&!hasValidVideoMediaType(e)),buildRequests:(e,t)=>{var i,r;let n,a,o=t.ortb2||{};Object.assign(t,{publisherExt:null==(i=o.site)?void 0:i.ext,userExt:null==(r=o.user)?void 0:r.ext,ceh:config.getConfig("criteo.ceh"),coppa:config.getConfig("coppa")});const s=config.getConfig("criteo.fastBidVersion"),d=canFastBid(s);if(!publisherTagAvailable()&&d){window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1,tryGetCriteoFastBid();const e=getFastBidUrl(s);setTimeout((()=>{loadExternalScript(e,BIDDER_CODE$d)}),t.timeout)}if(publisherTagAvailable()){const i=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,e,t,"8.47.0",{createOutstreamVideoRenderer:createOutstreamVideoRenderer});n=i.buildCdbUrl(),a=i.buildCdbRequest()}else{const i=buildContext(e,t);n=buildCdbUrl(i),a=buildCdbRequest(i,e,t)}if(a)return{method:"POST",url:n,data:a,bidRequests:e}},interpretResponse:(e,t)=>{var i;const r=e.body||e;if(publisherTagAvailable()){const e=Criteo.PubTag.Adapters.Prebid.GetAdapter(t);if(e)return e.interpretResponse(r,t)}const n=[],a=[];return r&&r.slots&&isArray(r.slots)&&r.slots.forEach((i=>{var a,o,s,d,l,c,p;const u=getAssociatedBidRequest(t.bidRequests,i);if(u){const t=u.bidId,m={requestId:t,cpm:i.cpm,currency:i.currency,netRevenue:!0,ttl:i.ttl||60,creativeId:i.creativecode,width:i.width,height:i.height,dealId:i.deal};if((null==(o=null==(a=r.ext)?void 0:a.paf)?void 0:o.transmission)&&(null==(d=null==(s=i.ext)?void 0:s.paf)?void 0:d.content_id)){const t={content_id:i.ext.paf.content_id,transmission:e.ext.paf.transmission};m.meta=Object.assign({},m.meta,{paf:t})}i.adomain&&(m.meta=Object.assign({},m.meta,{advertiserDomains:[i.adomain].flat()})),(null==(c=null==(l=i.ext)?void 0:l.meta)?void 0:c.networkName)&&(m.meta=Object.assign({},m.meta,{networkName:i.ext.meta.networkName})),(null==(p=i.ext)?void 0:p.dsa)&&(m.meta=Object.assign({},m.meta,{dsa:i.ext.dsa})),i.native?u.params.nativeCallback?m.ad=createNativeAd(t,i.native,u.params.nativeCallback):(m.native=createPrebidNativeAd(i.native),m.mediaType=NATIVE$1):i.video?(m.vastUrl=i.displayurl,m.mediaType=VIDEO,dlv(u,"mediaTypes.video.context")===OUTSTREAM$1&&(m.renderer=createOutstreamVideoRenderer(i))):m.ad=i.creative,n.push(m)}})),isArray(null==(i=r.ext)?void 0:i.igi)&&r.ext.igi.forEach((e=>{isArray(null==e?void 0:e.igs)&&e.igs.forEach((e=>{a.push(e)}))})),a.length?{bids:n,fledgeAuctionConfigs:a}:n},onTimeout:e=>{if(publisherTagAvailable()&&Array.isArray(e)){var t=[];e.forEach((e=>{-1===t.indexOf(e.auctionId)&&(t.push(e.auctionId),Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidTimeout())}))}},onBidWon:e=>{publisherTagAvailable()&&e&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidWon(e)},onSetTargeting:e=>{publisherTagAvailable()&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleSetTargeting(e)},onDataDeletionRequest:e=>{const t=readFromAllStorages(BUNDLE_COOKIE_NAME);t&&(deleteFromAllStorages(BUNDLE_COOKIE_NAME),ajax$1("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function readFromAllStorages(e){const t=storage$6.getCookie(e),i=storage$6.getDataFromLocalStorage(e);return t||i||void 0}function saveOnAllStorages(e,t,i){const r=new Date;r.setTime(r.getTime()+60*i*60*1e3);const n=`expires=${r.toUTCString()}`;storage$6.setCookie(e,t,n),storage$6.setDataInLocalStorage(e,t)}function deleteFromAllStorages(e){storage$6.setCookie(e,"",0),storage$6.removeDataFromLocalStorage(e)}function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function buildContext(e,t){var i;let r="";t&&t.refererInfo&&(r=t.refererInfo.page);const n=parseUrl(null==(i=null==t?void 0:t.refererInfo)?void 0:i.topmostLocation).search,a={url:r,debug:"1"===n.pbt_debug,noLog:"1"===n.pbt_nolog,amp:!1};return e.forEach((e=>{"amp"===e.params.integrationMode&&(a.amp=!0)})),a}function buildCdbUrl(e){let t=CDB_ENDPOINT;t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent("8.47.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),storage$6.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");const i=readFromAllStorages(BUNDLE_COOKIE_NAME);return i&&(t+=`&bundle=${i}`),readFromAllStorages(OPTOUT_COOKIE_NAME)&&(t+="&optout=1"),t}function checkNativeSendId(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}function buildCdbRequest(e,t,i){var r,n,a,o,s,d,l,c,p,u,m,g,f,b;let h,y,v,I,E=Object.assign({},{coppa:!0===i.coppa?1:!1===i.coppa?0:void 0},null==(r=i.ortb2)?void 0:r.regs);const A={id:generateUUID(),publisher:{url:e.url,ext:i.publisherExt},regs:E,slots:t.map((e=>{var t,r,n,a;I||(I=e.userIdAsEids),h=e.params.networkId||h,y=e.params.pubid||y,v=e.schain||v;const o={slotid:e.bidId,impid:e.adUnitCode,transactionid:null==(r=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:r.tid};if(e.params.zoneId&&(o.zoneid=e.params.zoneId),dlv(e,"ortb2Imp.ext")&&(o.ext=e.ortb2Imp.ext),dlv(e,"ortb2Imp.rwdd")&&(o.rwdd=e.ortb2Imp.rwdd),e.params.ext&&(o.ext=Object.assign({},o.ext,e.params.ext)),(null==(n=e.nativeOrtbRequest)?void 0:n.assets)&&(o.ext=Object.assign({},o.ext,{assets:e.nativeOrtbRequest.assets})),e.params.uid&&(o.ext=Object.assign({},o.ext,{bidder:{uid:e.params.uid}})),e.params.publisherSubId&&(o.publishersubid=e.params.publisherSubId),(e.params.nativeCallback||hasNativeMediaType(e))&&(o.native=!0,checkNativeSendId(e)||logWarn(LOG_PREFIX$1+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)")),hasBannerMediaType$1(e)?o.sizes=parseSizes$2(dlv(e,"mediaTypes.banner.sizes"),parseSize):o.sizes=[],hasVideoMediaType$1(e)){const t={context:e.mediaTypes.video.context,playersizes:parseSizes$2(dlv(e,"mediaTypes.video.playerSize"),parseSize),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay,plcmt:e.mediaTypes.video.plcmt,w:e.mediaTypes.video.w,h:e.mediaTypes.video.h,linearity:e.mediaTypes.video.linearity,skipmin:e.mediaTypes.video.skipmin,skipafter:e.mediaTypes.video.skipafter,minbitrate:e.mediaTypes.video.minbitrate,maxbitrate:e.mediaTypes.video.maxbitrate,delivery:e.mediaTypes.video.delivery,pos:e.mediaTypes.video.pos,playbackend:e.mediaTypes.video.playbackend,adPodDurationSec:e.mediaTypes.video.adPodDurationSec,durationRangeSec:e.mediaTypes.video.durationRangeSec},i=e.params.video;void 0!==i&&(t.skip=t.skip||i.skip||0,t.placement=t.placement||i.placement,t.minduration=t.minduration||i.minduration,t.playbackmethod=t.playbackmethod||i.playbackmethod,t.startdelay=t.startdelay||i.startdelay||0),o.video=t}return enrichSlotWithFloors(o,e),!i.fledgeEnabled&&(null==(a=o.ext)?void 0:a.ae)&&delete o.ext.ae,o}))};return h&&(A.publisher.networkid=h),A.source={tid:null==(a=null==(n=i.ortb2)?void 0:n.source)?void 0:a.tid},v&&(A.source.ext={schain:v}),A.user=(null==(o=i.ortb2)?void 0:o.user)||{},A.site=(null==(s=i.ortb2)?void 0:s.site)||{},A.app=(null==(d=i.ortb2)?void 0:d.app)||{},y&&(A.site.publisher={...A.site.publisher,id:y},A.app.publisher={...A.app.publisher,id:y}),A.device=(null==(l=i.ortb2)?void 0:l.device)||{},i&&i.ceh&&(A.user.ceh=i.ceh),i&&i.gdprConsent&&(A.gdprConsent={},void 0!==i.gdprConsent.gdprApplies&&(A.gdprConsent.gdprApplies=!!i.gdprConsent.gdprApplies),A.gdprConsent.version=i.gdprConsent.apiVersion,void 0!==i.gdprConsent.consentString&&(A.gdprConsent.consentData=i.gdprConsent.consentString)),i&&i.uspConsent&&(A.user.uspIab=i.uspConsent),i&&(null==(p=null==(c=i.ortb2)?void 0:c.device)?void 0:p.sua)&&(A.user.ext=A.user.ext||{},A.user.ext.sua=(null==(m=null==(u=i.ortb2)?void 0:u.device)?void 0:m.sua)||{}),I&&(A.user.ext=A.user.ext||{},A.user.ext.eids=[...I]),i&&(null==(g=i.ortb2)?void 0:g.bcat)&&(A.bcat=i.ortb2.bcat),i&&(null==(f=i.ortb2)?void 0:f.badv)&&(A.badv=i.ortb2.badv),i&&(null==(b=i.ortb2)?void 0:b.bapp)&&(A.bapp=i.ortb2.bapp),A.tmax=i.timeout,A}function parseSizes$2(e,t=(e=>e)){return null==e?[]:Array.isArray(e[0])?e.map((e=>t(e))):[t(e)]}function parseSize(e){return e[0]+"x"+e[1]}function hasVideoMediaType$1(e){return void 0!==dlv(e,"mediaTypes.video")}function hasBannerMediaType$1(e){return void 0!==dlv(e,"mediaTypes.banner")}function hasNativeMediaType(e){return void 0!==dlv(e,"mediaTypes.native")}function hasValidVideoMediaType(e){let t=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(i){void 0===dlv(e,"mediaTypes.video."+i)&&void 0===dlv(e,"params.video."+i)&&(t=!1,logError("Criteo Bid Adapter: mediaTypes.video."+i+" is required"))})),t}function createPrebidNativeAd(e){return{sendTargetingKeys:!1,title:e.products[0].title,body:e.products[0].description,sponsoredBy:e.advertiser.description,icon:e.advertiser.logo,image:e.products[0].image,clickUrl:e.products[0].click_url,privacyLink:e.privacy.optout_click_url,privacyIcon:e.privacy.optout_image_url,cta:e.products[0].call_to_action,price:e.products[0].price,impressionTrackers:e.impression_pixels.map((e=>e.url))}}function createNativeAd(e,t,i){var r="criteo_prebid_native_slots";return window[r]=window[r]||{},window[r][e]={callback:i,payload:t},`\n<script type="text/javascript">\nfor (var i = 0; i < 10; ++i) {\n var slots = window.parent.${r};\n  if(!slots){continue;}\n  var responseSlot = slots["${e}"];\n  responseSlot.callback(responseSlot.payload);\n  break;\n}\n<\/script>`}function pickAvailableGetFloorFunc(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{const t=parseFloat(e.params.bidFloor);return()=>({currency:e.params.bidFloorCur,floor:t})}catch{}}function enrichSlotWithFloors(e,t){var i,r,n;try{const a={},o=pickAvailableGetFloorFunc(t);o&&((null==(i=t.mediaTypes)?void 0:i.banner)&&(a.banner={},parseSizes$2(dlv(t,"mediaTypes.banner.sizes")).forEach((e=>a.banner[parseSize(e).toString()]=o.call(t,{size:e,mediaType:BANNER})))),(null==(r=t.mediaTypes)?void 0:r.video)&&(a.video={},parseSizes$2(dlv(t,"mediaTypes.video.playerSize")).forEach((e=>a.video[parseSize(e).toString()]=o.call(t,{size:e,mediaType:VIDEO})))),(null==(n=t.mediaTypes)?void 0:n.native)&&(a.native={},a.native["*"]=o.call(t,{size:"*",mediaType:NATIVE$1})),Object.keys(a).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:a})))}catch(a){logError("Could not parse floors from Prebid: "+a)}}function canFastBid(e){return e!==FAST_BID_VERSION_NONE}function getFastBidUrl(e){let t;return e===FAST_BID_VERSION_LATEST?t="":e?(String(e).split(".")[0]<102&&logWarn("Specifying a Fastbid version which is not supporting version selection."),t="."+e):t="."+FAST_BID_VERSION_CURRENT,PUBLISHER_TAG_URL_TEMPLATE.replace(FAST_BID_VERSION_PLACEHOLDER,t)}function createOutstreamVideoRenderer(e){if(void 0===e.ext.videoPlayerConfig||void 0===e.ext.videoPlayerType)return;const t=Renderer.install({url:PUBLISHER_TAG_OUTSTREAM_SRC,config:{documentResolver:(e,t,i)=>i??t}});return t.setRender(((t,i)=>{let r={slotid:e.impid,vastUrl:e.displayurl,vastXml:e.creative,documentContext:i},n=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(r,n)})),t}function getAssociatedBidRequest(e,t){var i,r,n;for(const a of e)if(a.adUnitCode===t.impid){if(a.params.zoneId&&parseInt(a.params.zoneId)===t.zoneid)return a;if(t.native){if((null==(i=a.mediaTypes)?void 0:i.native)||a.nativeParams)return a}else if(t.video){if(null==(r=a.mediaTypes)?void 0:r.video)return a}else if((null==(n=a.mediaTypes)?void 0:n.banner)||a.sizes)return a}}function tryGetCriteoFastBid(){try{const fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=storage$6.getDataFromLocalStorage(fastBidStorageKey);if(null!==fastBidFromStorage){const firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)logWarn("No hash found in FastBid"),storage$6.removeDataFromLocalStorage(fastBidStorageKey);else{const publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);verify_2(publisherTag,publisherTagHash,FAST_BID_PUBKEY_N,FAST_BID_PUBKEY_E)?(logInfo("Using Criteo FastBid"),eval(publisherTag)):(logWarn("Invalid Criteo FastBid found"),storage$6.removeDataFromLocalStorage(fastBidStorageKey))}}}catch(e){}}registerBidder(spec$e);const BIDDER_CODE$c="freewheel-ssp",GVL_ID$3=285,PROTOCOL=getProtocol(),FREEWHEEL_ADSSETUP=PROTOCOL+"://ads.stickyadstv.com/www/delivery/swfIndex.php",MUSTANG_URL=PROTOCOL+"://cdn.stickyadstv.com/mustang/mustang.min.js",PRIMETIME_URL=PROTOCOL+"://cdn.stickyadstv.com/prime-time/",USER_SYNC_URL=PROTOCOL+"://ads.stickyadstv.com/auto-user-sync";function getProtocol(){return"https"}function isValidUrl(e){return!!e&&/^(https?|ftp|file):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(e)}function getBiggerSize(e){for(var t=[0,0],i=0;i<e.length;i++)e[i][0]*e[i][1]>t[0]*t[1]&&(t=e[i]);return t}function getBiggerSizeWithLimit(e,t,i){for(var r=t||[0,0],n=i||[Number.MAX_VALUE,Number.MAX_VALUE],a=[],o=0;o<e.length;o++)e[o][0]*e[o][1]>=r[0]*r[1]&&e[o][0]*e[o][1]<=n[0]*n[1]&&a.push(e[o]);return getBiggerSize(a)}function getPricing(e){var t,i={},r=e.querySelectorAll("Extension");if(Array.prototype.forEach.call(r,(function(e){"StickyPricing"===e.getAttribute("type")&&(t=e)})),t){var n=t.querySelector("Price");i={currency:n.getAttribute("currency"),price:n.textContent||n.innerText}}else logWarn("PREBID - "+BIDDER_CODE$c+": No bid received or missing pricing extension.");return i}function getAdvertiserDomain(e){var t,i=[],r=e.querySelectorAll("Extension");if(Array.prototype.forEach.call(r,(function(e){"StickyBrand"===e.getAttribute("type")&&(t=e)})),t){var n=t.querySelector("Domain");i.push(n.textContent||n.innerText)}else logWarn("PREBID - "+BIDDER_CODE$c+": No bid received or missing StickyBrand extension.");return i}function hashcode(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}function getCreativeId(e){var t="",i=e.querySelectorAll("Ad");return Array.prototype.forEach.call(i,(function(e){t+="["+e.getAttribute("id")+"]"})),t}function getValueFromKeyInImpressionNode(e,t){var i="",r=e.querySelectorAll("Impression"),n=!1,a=!1;return Array.prototype.forEach.call(r,(function(e){if(n&&a)return i;n=!1,a=!1;var r=e.textContent.substring(e.textContent.indexOf("?")+1).split("&"),o="";Array.prototype.forEach.call(r,(function(e){var i=e.split("=");i[0]==t&&(o=i[1]),"reqType"==i[0]&&"AdsDisplayStarted"==i[1]&&(a=!0),"rootViewKey"==i[0]&&(n=!0)})),a&&(i=o)})),i}function getDealId(e){return getValueFromKeyInImpressionNode(e,"dealId")}function getBannerId(e){return getValueFromKeyInImpressionNode(e,"adId")}function getCampaignId(e){return getValueFromKeyInImpressionNode(e,"campaignId")}function getTopMostWindow(){var e=window;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(t){}return e}function getComponentId(e){var t="mustang";return e&&"inbanner"!==e&&(t=e),t}function getAPIName(e){return(e=e||"").replace("-","")}function getBidFloor$1(e,t){if(!isFn(e.getFloor))return dlv(e,"params.bidfloor",0);try{return e.getFloor({currency:getFloorCurrency(t),mediaType:"object"==typeof e.mediaTypes.banner?"banner":"video",size:"*"}).floor}catch(i){return-1}}function getFloorCurrency(e){return null!=e.getConfig("floors.data.currency")?e.getConfig("floors.data.currency"):"USD"}function formatAdHTML(e,t){var i=e.params.format,r='<div id="freewheelssp_prebid_target" style="width:'+t[0]+"px;height:"+t[1]+'px;"></div>',n="",a="";return i&&"inbanner"!==i?(a=PRIMETIME_URL+getComponentId(e.params.format)+".min.js",n=getOutstreamScript(e)):(a=MUSTANG_URL,n=getInBannerScript(e,t)),r+"<script type='text/javascript'>(function() {  var st = document.createElement('script'); st.type = 'text/javascript'; st.async = true;  st.src = '"+a+"';  st.onload = function(){    var vastLoader = new window.com.stickyadstv.vast.VastLoader();    var vast = vastLoader.getVast();    var topWindow = (function(){var res=window; try{while(top != res){if(res.parent.location.href.length)res=res.parent;}}catch(e){}return res;})();    vast.setXmlString(topWindow.freewheelssp_cache[\""+e.adUnitCode+'"]);    vastLoader.parseAds(vast, {      onSuccess: function() {'+n+" }    });  };  document.head.appendChild(st);})();<\/script>"}var getInBannerScript=function(e,t){return'var config = {      preloadedVast:vast,      autoPlay:true    };    var ad = new window.com.stickyadstv.vpaid.Ad(document.getElementById("freewheelssp_prebid_target"),config);    (new window.com.stickyadstv.tools.ASLoader('+e.params.zoneId+", '"+getComponentId(e.params.format)+"')).registerEvents(ad);    ad.initAd("+t[0]+","+t[1]+',"",0,"","");'},getOutstreamScript=function(e){var t=e.params;t.hasOwnProperty("domId")||t.hasOwnProperty("auto")||t.hasOwnProperty("p")||t.hasOwnProperty("article")||("intext-roll"===t.format?t.iframeMode="dfp":t.domId="freewheelssp_prebid_target");var i="var config = {  preloadedVast:vast,  ASLoader:new window.com.stickyadstv.tools.ASLoader("+e.params.zoneId+", '"+getComponentId(e.params.format)+"')";for(var r in t)t.hasOwnProperty(r)&&"format"!==r&&"zone"!==r&&"zoneId"!==r&&"vastUrlParams"!==r&&(i+=","+r+':"'+t[r]+'"');return i+"};window.com.stickyadstv."+getAPIName(e.params.format)+".start(config);"};const spec$d={code:BIDDER_CODE$c,gvlid:GVL_ID$3,supportedMediaTypes:[BANNER,VIDEO],aliases:["stickyadstv","freewheelssp"],isBidRequestValid:function(e){return!!e.params.zoneId},buildRequests:function(e,t){return e.map((function(e){return((e,t)=>{var i,r=e.params.zoneId,n=(new Date).getTime(),a=hashcode(r+""+n),o=getBidFloor$1(e,config),s=e.params.format,d={reqType:"AdsSetup",protocolVersion:"4.2",zoneId:r,componentId:"prebid",componentSubId:getComponentId(e.params.format),timestamp:n,_fw_bidfloor:o>0?o:0,_fw_bidfloorcur:o>0?getFloorCurrency(config):"",pbjs_version:"8.47.0",pKey:a};if(t&&t.gdprConsent&&(d._fw_gdpr_consent=t.gdprConsent.consentString,"boolean"==typeof t.gdprConsent.gdprApplies&&(d._fw_gdpr=t.gdprConsent.gdprApplies)),e.params.gdpr_consented_providers&&(d._fw_gdpr_consented_providers=e.params.gdpr_consented_providers),t&&t.uspConsent&&(d._fw_us_privacy=t.uspConsent),t&&t.gppConsent?(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections):t&&t.ortb2&&t.ortb2.regs&&t.ortb2.regs.gpp&&(d.gpp=t.ortb2.regs.gpp,d.gpp_sid=t.ortb2.regs.gpp_sid),t&&t.ortb2&&t.ortb2.site&&t.ortb2.site.content&&"object"==typeof t.ortb2.site.content)try{d._fw_prebid_content=JSON.stringify(t.ortb2.site.content)}catch(h){logWarn("PREBID - "+BIDDER_CODE$c+": Unable to stringify the content object: "+h)}var l=e.schain;if(l)try{d.schain=JSON.stringify(l)}catch(h){logWarn("PREBID - "+BIDDER_CODE$c+": Unable to stringify the schain: "+h)}if(e.userIdAsEids&&e.userIdAsEids.length>0)try{d._fw_prebid_3p_UID=JSON.stringify(e.userIdAsEids)}catch(h){logWarn("PREBID - "+BIDDER_CODE$c+": Unable to stringify the userIdAsEids: "+h)}var c=e.params.vastUrlParams;if("object"==typeof c)for(var p in c)c.hasOwnProperty(p)&&(d[p]=c[p]);var u=null==(i=null==t?void 0:t.refererInfo)?void 0:i.page;isValidUrl(u)&&(d.loc=u);var m;if(((m=e.mediaTypes.video&&e.mediaTypes.video.playerSize?isArray(e.mediaTypes.video.playerSize[0])?e.mediaTypes.video.playerSize[0]:e.mediaTypes.video.playerSize:e.mediaTypes.banner.sizes?getBiggerSizeWithLimit(e.mediaTypes.banner.sizes,e.mediaTypes.banner.minSizeLimit,e.mediaTypes.banner.maxSizeLimit):getBiggerSize(e.sizes))[0]>0||m[1]>0)&&(d.playerSize=m[0]+"x"+m[1]),e.mediaTypes.video){var g=e.mediaTypes.video.context?e.mediaTypes.video.context:"",f=e.mediaTypes.video.placement?e.mediaTypes.video.placement:null,b=e.mediaTypes.video.plcmt?e.mediaTypes.video.plcmt:null;"inbanner"==s&&(f=2,g="In-Banner"),d.video_context=g,d.video_placement=f,d.video_plcmt=b}return{method:"GET",url:FREEWHEEL_ADSSETUP,data:d,bidRequest:e}})(e,t)}))},interpretResponse:function(e,t){var i,n,r=t.bidRequest;n=r.mediaTypes.video&&r.mediaTypes.video.playerSize?isArray(r.mediaTypes.video.playerSize[0])?r.mediaTypes.video.playerSize[0]:r.mediaTypes.video.playerSize:r.mediaTypes.banner.sizes?getBiggerSizeWithLimit(r.mediaTypes.banner.sizes,r.mediaTypes.banner.minSizeLimit,r.mediaTypes.banner.maxSizeLimit):getBiggerSize(r.sizes),"object"==typeof e&&"string"==typeof e.body&&(e=e.body);try{i=(new DOMParser).parseFromString(e,"application/xml")}catch(m){return void logWarn("Prebid.js - "+BIDDER_CODE$c+" : "+m)}const a=getPricing(i),o=getCreativeId(i),s=getDealId(i),d=getCampaignId(i),l=getBannerId(i),c=getTopMostWindow(),p=getAdvertiserDomain(i);c.freewheelssp_cache||(c.freewheelssp_cache={}),c.freewheelssp_cache[r.adUnitCode]=e;const u=[];if(a.price){const t={requestId:r.bidId,cpm:a.price,width:n[0],height:n[1],creativeId:o,currency:a.currency,netRevenue:!0,ttl:360,meta:{advertiserDomains:p},dealId:s,campaignId:d,bannerId:l};r.mediaTypes.video&&(t.mediaType="video"),t.vastXml=e,t.ad=formatAdHTML(r,n),u.push(t)}return u},getUserSyncs:function(e,t,i,r,n){const a={};i&&("boolean"==typeof i.gdprApplies?(a.gdpr=Number(i.gdprApplies),a.gdpr_consent=i.consentString):a.gdpr_consent=i.consentString),n&&("string"==typeof n.gppString&&(a.gpp=n.gppString),n.applicableSections&&(a.gpp_sid=n.applicableSections));var o="";a&&(o=`?${formatQS(a)}`);const s=[];return e&&e.pixelEnabled?s.push({type:"image",url:USER_SYNC_URL+o}):e.iframeEnabled&&s.push({type:"iframe",url:USER_SYNC_URL+o}),s}};registerBidder(spec$d);const BIDDER_CODE$b="ix",ALIAS_BIDDER_CODE="roundel",GLOBAL_VENDOR_ID=10,SECURE_BID_URL="https://htlb.casalemedia.com/openrtb/pbjs",SUPPORTED_AD_TYPES=[BANNER,VIDEO,NATIVE$1],CENT_TO_DOLLAR_FACTOR=100,BANNER_TIME_TO_LIVE=300,VIDEO_TIME_TO_LIVE=3600,NATIVE_TIME_TO_LIVE=3600,NET_REVENUE$1=!0,MAX_REQUEST_LIMIT=4,MAX_EID_SOURCES=50,OUTSTREAM_MINIMUM_PLAYER_SIZE=[144,144],PRICE_TO_DOLLAR_FACTOR={JPY:1},IFRAME_USER_SYNC_URL="https://js-sec.indexww.com/um/ixmatch.html",FLOOR_SOURCE={PBJS:"p",IX:"x"},IMG_USER_SYNC_URL="https://dsum.casalemedia.com/pbusermatch?origin=prebid",ERROR_CODES={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},FIRST_PARTY_DATA={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},SOURCE_RTI_MAPPING={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},PROVIDERS=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],REQUIRED_VIDEO_PARAMS=["mimes","minduration","maxduration"],VIDEO_PARAMS_ALLOW_LIST=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],LOCAL_STORAGE_KEY="ixdiag",LOCAL_STORAGE_FEATURE_TOGGLES_KEY=`${BIDDER_CODE$b}_features`;let hasRegisteredHandler=!1;const storage$5=getStorageManager({bidderCode:BIDDER_CODE$b}),FEATURE_TOGGLES={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return dlv(this.featureToggles,`features.${e}.activated`,!1)},getFeatureToggles:function(){if(storage$5.localStorageIsEnabled()){const e=safeJSONParse(storage$5.getDataFromLocalStorage(LOCAL_STORAGE_FEATURE_TOGGLES_KEY));dlv(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){const t=e.body,i=new Date,r=dlv(t,"ext.features");r&&(this.featureToggles={expiry:i.setHours(i.getHours()+1),features:r},storage$5.localStorageIsEnabled()&&storage$5.setDataInLocalStorage(LOCAL_STORAGE_FEATURE_TOGGLES_KEY,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},storage$5.localStorageIsEnabled()&&storage$5.removeDataFromLocalStorage(LOCAL_STORAGE_FEATURE_TOGGLES_KEY)}};let siteID=0,gdprConsent="",usPrivacy="",defaultVideoPlacement=!1;const MEDIA_TYPES={Banner:1,Video:2,Audio:3,Native:4};function bidToBannerImp(e){const t=bidToImp(e,BANNER);t.banner={},t.adunitCode=e.adUnitCode;const i=dlv(e,"params.size");return i&&(t.banner.w=i[0],t.banner.h=i[1]),t.banner.topframe=inIframe()?0:1,_applyFloor(e,t,BANNER),t}function setDisplayManager(e,t){if(dlv(t,"mediaTypes.video.context")===OUTSTREAM$1){let i=dlv(t,"mediaTypes.video.renderer");if(i||(i=dlv(t,"renderer")),dlv(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(i&&"object"==typeof i){if(void 0!==i.url){let t="";try{t=new URL(i.url).hostname}catch{return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=i.url}}else e.displaymanager="ix"}}function bidToVideoImp(e){const t=bidToImp(e,VIDEO),i=dlv(e,"mediaTypes.video"),r=dlv(e,"params.video");if(checkVideoParams(i,r).length)return{};t.video=r?deepClone(e.params.video):{};let n=dlv(e,"ortb2Imp.ext.tid");n&&dset(t,"ext.tid",n),setDisplayManager(t,e),addAdUnitFPD(t,e);for(const o in i)-1===VIDEO_PARAMS_ALLOW_LIST.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=i[o]);if(t.video.minduration>t.video.maxduration)return logError(`IX Bid Adapter: video minduration [${t.video.minduration}] cannot be greater than video maxduration [${t.video.maxduration}]`,{bidder:BIDDER_CODE$b,code:ERROR_CODES.VIDEO_DURATION_INVALID}),{};const a=r&&r.context||i&&i.context;if(verifyVideoPlcmt(t),a&&!t.video.hasOwnProperty("placement")&&(a===INSTREAM?t.video.placement=1:a===OUTSTREAM$1?dlv(r,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,defaultVideoPlacement=!0):logWarn(`IX Bid Adapter: Video context '${a}' is not supported`)),!t.video.w||!t.video.h){const i=getFirstSize(dlv(t,"video.playerSize"))||getFirstSize(dlv(e,"params.size"));if(!i)return logWarn("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=i[0],t.video.h=i[1]}return _applyFloor(e,t,VIDEO),t}function verifyVideoPlcmt(e){e.video.hasOwnProperty("plcmt")&&(!isInteger(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(logWarn(`IX Bid Adapter: video.plcmt [${e.video.plcmt}] must be an integer between 1-4 inclusive`),delete e.video.plcmt)}function bidToNativeImp(e){const t=bidToImp(e,NATIVE$1),i=e.nativeOrtbRequest;i.eventtrackers=[{event:1,methods:[1,2]}],i.privacy=1,t.native={request:JSON.stringify(i),ver:"1.2"};let r=dlv(e,"ortb2Imp.ext.tid");return r&&dset(t,"ext.tid",r),addAdUnitFPD(t,e),_applyFloor(e,t,NATIVE$1),t}function bidToImp(e,t){const i={};if(i.id=e.bidId,isExchangeIdConfigured()&&dlv(e,"params.externalId")&&dset(i,"ext.externalID",e.params.externalId),dlv(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case BANNER:dset(i,"ext.siteID",e.params.banner.siteId.toString());break;case VIDEO:dset(i,"ext.siteID",e.params.video.siteId.toString());break;case NATIVE$1:dset(i,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&dset(i,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||dset(i,"ext.sid",String(e.params.id)),i}function _applyFloor(e,t,i){let r=null,n=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),isFn(e.getFloor)){let r="*",a="*";if(i&&contains(SUPPORTED_AD_TYPES,i)){const{w:e,h:n}=t[i];r=i,a=[e,n]}try{n=e.getFloor({mediaType:r,size:a})}catch(o){logWarn("priceFloors module call getFloor failed, error : ",o)}}let a=!1;n?(t.bidfloor=n.floor,t.bidfloorcur=n.currency,dset(t,"ext.fl",FLOOR_SOURCE.PBJS),a=!0):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,dset(t,"ext.fl",FLOOR_SOURCE.IX),a=!0),a&&(i==BANNER?(dset(t,"banner.ext.bidfloor",t.bidfloor),dset(t,"banner.ext.fl",t.ext.fl)):i==VIDEO?(dset(t,"video.ext.bidfloor",t.bidfloor),dset(t,"video.ext.fl",t.ext.fl)):(dset(t,"native.ext.bidfloor",t.bidfloor),dset(t,"native.ext.fl",t.ext.fl)))}function parseBid(e,t,i){var r;const n={},a=!(!dlv(e,"exp")||!isInteger(e.exp)),o=dlv(e,"dealid")||dlv(e,"ext.dealid");PRICE_TO_DOLLAR_FACTOR.hasOwnProperty(t)?n.cpm=e.price/PRICE_TO_DOLLAR_FACTOR[t]:n.cpm=e.price/CENT_TO_DOLLAR_FACTOR,n.requestId=e.impid,o&&(n.dealId=o),n.netRevenue=NET_REVENUE$1,n.currency=t,n.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=MEDIA_TYPES.Video||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(n.vastUrl=e.ext.vasturl):n.vastXml=e.adm;let s=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{s=JSON.parse(e.adm)}catch(d){logWarn("adm looks like JSON but failed to parse: ",d)}return e.ext&&e.ext.vasturl||e.mtype==MEDIA_TYPES.Video?(n.width=i.video.w,n.height=i.video.h,n.mediaType=VIDEO,n.mediaTypes=i.mediaTypes,n.ttl=a?e.exp:VIDEO_TIME_TO_LIVE):s&&s.native?(n.native={ortb:s.native},n.width=e.w?e.w:1,n.height=e.h?e.h:1,n.mediaType=NATIVE$1,n.ttl=a?e.exp:NATIVE_TIME_TO_LIVE):(n.ad=e.adm,n.width=e.w,n.height=e.h,n.mediaType=BANNER,n.ttl=a?e.exp:BANNER_TIME_TO_LIVE),n.meta={},n.meta.networkId=dlv(e,"ext.dspid"),n.meta.brandId=dlv(e,"ext.advbrandid"),n.meta.brandName=dlv(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(n.meta.advertiserDomains=e.adomain),(null==(r=e.ext)?void 0:r.dsa)&&(n.meta.dsa=e.ext.dsa),n}function isValidSize(e){return Array.isArray(e)&&2===e.length&&isInteger(e[0])&&isInteger(e[1])}function includesSize(e=[],t=[]){if(isValidSize(e))return e[0]===t[0]&&e[1]===t[1];for(let i=0;i<e.length;i++)if(e[i][0]===t[0]&&e[i][1]===t[1])return!0;return!1}function checkVideoParams(e,t){const i=[];e||logWarn("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(let s of REQUIRED_VIDEO_PARAMS){const r=e&&e.hasOwnProperty(s),n=t&&t.hasOwnProperty(s);r||n||i.push(`IX Bid Adapter: ${s} is not included in either the adunit or params level`)}const r=e&&e.hasOwnProperty("protocol"),n=e&&e.hasOwnProperty("protocols"),a=t&&t.hasOwnProperty("protocol"),o=t&&t.hasOwnProperty("protocols");return r||n||a||o||i.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),i}function getFirstSize(e=[]){return isValidSize(e)?e:!!isValidSize(e[0])&&e[0]}function isValidBidFloorParams(e,t){return Boolean("number"==typeof e&&"string"==typeof t&&t.match(/^[A-Z]{3}$/))}function nativeMediaTypeValid(e){return void 0===dlv(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}function getBidRequest(e,t,i){if(e)return{...find(i,(t=>t.bidId===e)),...find(t,(t=>t.id===e))}}function getEidInfo(e){let t=[],i={};if(isArray(e))for(const r of e){const e=SOURCE_RTI_MAPPING.hasOwnProperty(r.source),n=FEATURE_TOGGLES.isFeatureEnabled("pbjs_allow_all_eids"),a=dlv(r,"uids.0");if((e||n)&&a&&(i[r.source]=!0,e&&""!==SOURCE_RTI_MAPPING[r.source]&&(r.uids[0].ext={rtiPartner:SOURCE_RTI_MAPPING[r.source]}),delete r.uids[0].atype,t.push(r),t.length>=MAX_EID_SOURCES))break}return{toSend:t,seenSources:i}}function buildRequest(e,t,i,r){let n=SECURE_BID_URL,a=getEidInfo(dlv(e,"0.userIdAsEids")),o=a.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&addRTI(o,a),t&&t.bidderCode===ALIAS_BIDDER_CODE&&!a.seenSources["liveramp.com"])return[];const s=[];let d=createRequest(e);d=addRequestedFeatureToggles(d,FEATURE_TOGGLES.REQUESTED_FEATURE_TOGGLES);let l=buildIXDiag(e,dlv(t,"fledgeEnabled"));for(let u in l)d.ext.ixdiag[u]=l[u];d=enrichRequest(d,t,i,e,o),d=applyRegulations(d,t),e[0].params.siteId&&(siteID=e[0].params.siteId);const c=Object.keys(i);let p=!1;for(let u=0;u<c.length&&!(s.length>=MAX_REQUEST_LIMIT);u++){d=addImpressions(i,c,d,u);const r=dlv(t,"ortb2")||{},a={...r.site||r.context};a.page=getIxFirstPartyDataPageUrl(t);const o={...r.user};isEmpty(r)||p||(d=addFPD(t,d,r,a,o),d.site=mergeDeep({},d.site,a),d.user=mergeDeep({},d.user,o),p=!0),d=addIdentifiersInfo(i,d,c,u);const l=u===c.length-1;if(d=addDeviceInfo(d),d=deduplicateImpExtFields(d),d=removeSiteIDs(d),l){let t=`${n}?`;0!==siteID&&(t+=`s=${siteID}`),isExchangeIdConfigured()&&(t+=0!==siteID?"&":"",t+=`p=${config.getConfig("exchangeId")}`),s.push({method:"POST",url:t,data:deepClone(d),option:{contentType:"text/plain"},validBidRequests:e}),d.imp=[],p=!1}}return s}function addRTI(e,t){let i=window.headertag.getIdentityInfo();if(i&&"object"==typeof i)for(const r in i){if(e.length>=MAX_EID_SOURCES)return;if(i.hasOwnProperty(r)){let n=i[r];!n.responsePending&&n.data&&"object"==typeof n.data&&Object.keys(n.data).length&&!t.seenSources[n.data.source]&&e.push(n.data)}}}function createRequest(e){const t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=storage$5.localStorageIsEnabled(),t.imp=[],t.at=1,t}function addRequestedFeatureToggles(e,t){return t.length>0&&(e.ext.features={},t.forEach((t=>{e.ext.features[t]={activated:FEATURE_TOGGLES.isFeatureEnabled(t)}}))),e}function enrichRequest(e,t,i,r,n){var a,o;const s=dlv(t,"timeout");s&&(e.ext.ixdiag.tmax=s),config.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=config.getConfig("userSync").syncsPerBidder);const d=getCachedErrors();return isEmpty(d)||(e.ext.ixdiag.err=d),e.ext.ixdiag.imps=Object.keys(i).length,e.source={tid:null==(o=null==(a=null==t?void 0:t.ortb2)?void 0:a.source)?void 0:o.tid},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain),n.length>0&&(e.user={},e.user.eids=n),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}function applyRegulations(e,t){if(t){t.gdprConsent&&(gdprConsent=t.gdprConsent,gdprConsent.hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:gdprConsent.gdprApplies?1:0}}),gdprConsent.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:gdprConsent.consentString||""},gdprConsent.hasOwnProperty("addtlConsent")&&gdprConsent.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:gdprConsent.addtlConsent}))),t.uspConsent&&(dset(e,"regs.ext.us_privacy",t.uspConsent),usPrivacy=t.uspConsent);const i=dlv(t,"refererInfo.page");i&&(e.site.page=i),t.gppConsent&&(dset(e,"regs.gpp",t.gppConsent.gppString),dset(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return config.getConfig("coppa")&&dset(e,"regs.coppa",1),e}function addImpressions(e,t,i,r){const n=e[t[r]],{missingImps:a=[],ixImps:o=[]}=n,s={ixImps:o,missingBannerImpressions:a},d=Object.keys(s).map((e=>s[e])).filter((e=>Array.isArray(e))).reduce(((e,t)=>e.concat(...t)),[]),l=e[t[r]].gpid,c=e[t[r]].dfp_ad_unit_code,p=e[t[r]].tid,u=e[t[r]].sid,m=e[t[r]].ae,g=d.filter((e=>BANNER in e)),f=d.filter((e=>!(BANNER in e)));if(g.length>0){const n=g.reduce(((e,t)=>(e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e)),{});for(const a in n){const o=n[a],{id:s,banner:{topframe:d}}=o[0];let g=dlv(o[0],"ext.externalID");const f={id:s,banner:{topframe:d,format:o.map((({banner:{w:e,h:t},ext:i})=>({w:e,h:t,ext:i})))}};for(let e=0;e<f.banner.format.length;e++)null!=f.banner.format[e].ext&&(null!=f.banner.format[e].ext.sid&&delete f.banner.format[e].ext.sid,null!=f.banner.format[e].ext.externalID&&delete f.banner.format[e].ext.externalID),"bidfloor"in o[e]&&(f.banner.format[e].ext.bidfloor=o[e].bidfloor),"{}"===JSON.stringify(f.banner.format[e].ext)&&delete f.banner.format[e].ext;const b=e[t[r]].pos;isInteger(b)&&(f.banner.pos=b),(c||l||p||u||m||g)&&(f.ext={},f.ext.dfp_ad_unit_code=c,f.ext.gpid=l,f.ext.tid=p,f.ext.sid=u,f.ext.externalID=g,1==m&&(f.ext.ae=1)),"bidfloor"in o[0]&&(f.bidfloor=o[0].bidfloor),"bidfloorcur"in o[0]&&(f.bidfloorcur=o[0].bidfloorcur);const h=e[t[r]].adUnitFPD;h&&dset(f,"ext.data",h),i.imp.push(f)}}return f.length>0&&f.forEach((e=>{if(l&&dset(e,"ext.gpid",l),i.imp.length>0){let t=!1;i.imp.forEach(((r,n)=>{e.id===r.id&&VIDEO in e?(r.video=e.video,r.video.ext=Object.assign({},e.video.ext,e.ext),dlv(r,"video.ext.bidfloor",!1)&&dlv(r,"bidfloor",!1)&&r.video.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.video.ext.bidfloor),!dlv(r,"ext.siteID",!1)&&dlv(e,"video.ext.siteID")&&(dset(r,"ext.siteID",e.video.ext.siteID),dset(i,"ext.ixdiag.usid",!0)),t=!0):e.id===r.id&&NATIVE$1 in e&&(r.native=e.native,r.native.ext=Object.assign({},e.native.ext,e.ext),dlv(r,"native.ext.bidfloor",!1)&&dlv(r,"bidfloor",!1)&&r.native.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.native.ext.bidfloor),!dlv(r,"ext.siteID",!1)&&dlv(e,"native.ext.siteID",!1)&&(dset(r,"ext.siteID",e.native.ext.siteID),dset(i,"ext.ixdiag.usid",!0)),t=!0)})),t||i.imp.push(e)}else i.imp.push(e)})),i}function getIxFirstPartyDataPageUrl(e){const t=e&&e.bidderCode||"ix",i=config.getConfig(t);let r="";return r=dlv(e,"ortb2.site.page")?e.ortb2.site.page:dlv(e,"refererInfo.page"),i&&"object"==typeof i.firstPartyData?appendIXQueryParams(e,r,i.firstPartyData):r}function appendIXQueryParams(e,t,i){let r;try{r=new URL(t)}catch(a){logWarn(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),r=new URL(dlv(e,"refererInfo.page"))}const n=new URLSearchParams(r.search);for(const[o,s]of Object.entries(i))n.has(o)||n.append(o,s);return r.search=n.toString(),r.toString()}function addFPD(e,t,i,r,n){var a;if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((e=>{-1===FIRST_PARTY_DATA.SITE.indexOf(e)&&delete r[e]})),Object.keys(n).forEach((e=>{-1===FIRST_PARTY_DATA.USER.indexOf(e)&&delete n[e]})),i.device){const e={...i.device.sua};isEmpty(e)||dset(t,"device.sua",e)}if(i.hasOwnProperty("regs")&&!e.gppConsent&&(i.regs.hasOwnProperty("gpp")&&"string"==typeof i.regs.gpp&&dset(t,"regs.gpp",i.regs.gpp),i.regs.hasOwnProperty("gpp_sid")&&Array.isArray(i.regs.gpp_sid)&&dset(t,"regs.gpp_sid",i.regs.gpp_sid),null==(a=i.regs.ext)?void 0:a.dsa)){const e=i.regs.ext.dsa,r={};if(["dsarequired","pubrender","datatopub"].forEach((t=>{isNumber(e[t])&&(r[t]=e[t])})),isArray(e.transparency)){const t=[];e.transparency.forEach((e=>{isPlainObject(e)&&isStr(e.domain)&&""!=e.domain&&isArray(e.dsaparams)&&e.dsaparams.every((e=>isNumber(e)))&&t.push(e)})),t.length>0&&(r.transparency=t)}isEmpty(r)||dset(t,"regs.ext.dsa",r)}return t}function addAdUnitFPD(e,t){const i=dlv(t,"ortb2Imp.ext.data");i&&dset(e,"ext.data",i)}function addIdentifiersInfo(e,t,i,r,n,a){const o=e[i[r]].pbadslot,s=e[i[r]].tagId,d=e[i[r]].adUnitCode,l=e[i[r]].divId;return(o||s||d||l)&&(t.ext.ixdiag.pbadslot=o,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=l),t}function _getUserIds(e){const t=e.userId||{};return PROVIDERS.filter((e=>t[e]))}function buildIXDiag(e,t){var i=e.map((e=>e.adUnitCode)).filter(((e,t,i)=>i.indexOf(e)===t));let r=dlv(e,"0.userIdAsEids",[]),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.47.0",userIds:_getUserIds(e[0]),url:window.location.href.split("?")[0],vpd:defaultVideoPlacement,ae:t,eidLength:r.length};for(let a of i){let t=e.filter((e=>e.adUnitCode===a))[0];dlv(t,"mediaTypes")&&(Object.keys(t.mediaTypes).length>1&&n.mfu++,dlv(t,"mediaTypes.native")&&n.nu++,dlv(t,"mediaTypes.banner")&&n.bu++,"outstream"===dlv(t,"mediaTypes.video.context")&&(n.ou++,isIndexRendererPreferred(t)&&(n.ren=!0)),"instream"===dlv(t,"mediaTypes.video.context")&&n.iu++,n.allu++)}return n}function removeFromSizes(e,t){if(t)for(let i=0;i<e.length;i++){const r=e[i];if(t[0]===r[0]&&t[1]===r[1]){e.splice(i,1);break}}}function createNativeImps(e,t){const i=bidToNativeImp(e);if(0!=Object.keys(i).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(i),t[e.adUnitCode].gpid=dlv(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=dlv(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=dlv(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=dlv(e,"params.tagId");const r=e.adUnitCode,n=document.getElementById(r)?r:getGptSlotInfoForAdUnitCode(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=n}}function createVideoImps(e,t){const i=bidToVideoImp(e);if(0!=Object.keys(i).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(i),t[e.adUnitCode].gpid=dlv(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=dlv(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=dlv(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=dlv(e,"params.tagId");const r=e.adUnitCode,n=document.getElementById(r)?r:getGptSlotInfoForAdUnitCode(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=n}}function createBannerImps(e,t,i,r){let n=bidToBannerImp(e);const a=includesSize(dlv(e,"mediaTypes.banner.sizes"),dlv(e,"params.size"));if(i.hasOwnProperty(e.adUnitCode)||(i[e.adUnitCode]={}),i[e.adUnitCode].gpid=dlv(e,"ortb2Imp.ext.gpid"),i[e.adUnitCode].dfp_ad_unit_code=dlv(e,"ortb2Imp.ext.data.adserver.adslot"),i[e.adUnitCode].tid=dlv(e,"ortb2Imp.ext.tid"),i[e.adUnitCode].pbadslot=dlv(e,"ortb2Imp.ext.data.pbadslot"),i[e.adUnitCode].tagId=dlv(e,"params.tagId"),i[e.adUnitCode].pos=dlv(e,"mediaTypes.banner.pos"),dlv(r,"fledgeEnabled")){const t=dlv(e,"ortb2Imp.ext.ae");t?isInteger(t)?i[e.adUnitCode].ae=t:logWarn("error setting auction environment flag - must be an integer"):1==dlv(r,"defaultForSlots")&&(i[e.adUnitCode].ae=1)}const o=dlv(e,"ortb2Imp.ext.data");o&&(i[e.adUnitCode].adUnitFPD=o);const s=dlv(e,"params.id");!s||"string"!=typeof s&&"number"!=typeof s||(i[e.adUnitCode].sid=String(s));const d=e.adUnitCode,l=document.getElementById(d)?d:getGptSlotInfoForAdUnitCode(d).divId;i[e.adUnitCode].adUnitCode=d,i[e.adUnitCode].divId=l,a&&(i[e.adUnitCode].hasOwnProperty("ixImps")||(i[e.adUnitCode].ixImps=[]),i[e.adUnitCode].ixImps.push(n)),updateMissingSizes(e,t,n)}function updateMissingSizes(e,t,i){if(t.hasOwnProperty(e.adUnitCode)){let i=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(i=t[e.adUnitCode].missingSizes),removeFromSizes(i,e.params.size),t[e.adUnitCode].missingSizes=i}else if(dlv(e,"mediaTypes.banner.sizes")){let r=deepClone(e.mediaTypes.banner.sizes);removeFromSizes(r,e.params.size);let n={missingSizes:r,impression:i};t[e.adUnitCode]=n}}function createMissingBannerImp(e,t,i){const r=deepClone(t);return r.banner.w=i[0],r.banner.h=i[1],_applyFloor(e,r,BANNER),r}function storeErrorEventData(e){if(!storage$5.localStorageIsEnabled())return;let t;try{t=JSON.parse(storage$5.getDataFromLocalStorage(LOCAL_STORAGE_KEY)||"{}")}catch(r){logWarn("ix can not read ixdiag from localStorage.")}const i=new Date;if(Object.keys(t).map((e=>{const r=new Date(e);r.setDate(r.getDate()+7)-i<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===BIDDER_CODE$b){const r=i.toISOString().slice(0,10),n=e.arguments[1].code;n&&(t[r]=t[r]||{},Number(t[r][n])||(t[r][n]=0),t[r][n]++)}storage$5.setDataInLocalStorage(LOCAL_STORAGE_KEY,JSON.stringify(t))}function localStorageHandler(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===BIDDER_CODE$b&&storeErrorEventData(e)}function getCachedErrors(){if(!storage$5.localStorageIsEnabled())return;const e={};let t;try{t=JSON.parse(storage$5.getDataFromLocalStorage(LOCAL_STORAGE_KEY)||"{}")}catch(i){return logError("ix can not read ixdiag from localStorage."),null}return Object.keys(t).forEach((i=>{Object.keys(t[i]).forEach((r=>{"number"==typeof t[i][r]&&(e[r]=e[r]?e[r]+t[i][r]:t[i][r])}))})),e}function outstreamRenderer$1(e){e.renderer.push((function(){const t=e.adUnitCode,i=document.getElementById(t)?t:getGptSlotInfoForAdUnitCode(t).divId;i?window.createIXPlayer(i,e):logWarn(`IX Bid Adapter: adUnitCode: ${i} not found on page.`)}))}function createRenderer$2(e,t){const i=Renderer.install({id:e,url:t,loaded:!1});try{i.setRender(outstreamRenderer$1)}catch(r){return logWarn("Prebid Error calling setRender on renderer",r),null}return t?i:(logWarn("Outstream renderer URL not found"),null)}function isIndexRendererPreferred(e){if("outstream"!==dlv(e,"mediaTypes.video.context"))return!1;let t=dlv(e,"mediaTypes.video.renderer");return t||(t=dlv(e,"renderer")),!("object"==typeof t&&t.url&&t.render)||t.backupOnly}function isExchangeIdConfigured(){let e=config.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}const spec$c={code:BIDDER_CODE$b,gvlid:GLOBAL_VENDOR_ID,aliases:[{code:ALIAS_BIDDER_CODE,gvlid:GLOBAL_VENDOR_ID,skipPbsAliasing:!1}],supportedMediaTypes:SUPPORTED_AD_TYPES,isBidRequestValid:function(e){hasRegisteredHandler||(on(EVENTS$1.AUCTION_DEBUG,localStorageHandler),on(EVENTS$1.AD_RENDER_FAILED,localStorageHandler),hasRegisteredHandler=!0);const t=dlv(e,"params.video"),i=dlv(e,"params.size"),r=dlv(e,"mediaTypes.banner.sizes"),n=dlv(e,"mediaTypes.video"),a=dlv(e,"mediaTypes.video.playerSize"),o=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!contains(SUPPORTED_AD_TYPES,e.mediaType))return logWarn("IX Bid Adapter: media type is not supported."),!1;if(dlv(e,"mediaTypes.banner")&&!r)return!1;if(i){const t=getFirstSize(i);if(!t)return logError("IX Bid Adapter: size has invalid format.",{bidder:BIDDER_CODE$b,code:ERROR_CODES.BID_SIZE_INVALID_FORMAT}),!1;if(!includesSize(e.sizes,t)&&!includesSize(a,t)&&!includesSize(r,t))return logError("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:BIDDER_CODE$b,code:ERROR_CODES.BID_SIZE_NOT_INCLUDED}),!1}if(!isExchangeIdConfigured()&&null==e.params.siteId)return logError("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return logError("IX Bid Adapter: siteId must be string or number type.",{bidder:BIDDER_CODE$b,code:ERROR_CODES.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return logError("IX Bid Adapter: siteId must valid value",{bidder:BIDDER_CODE$b,code:ERROR_CODES.SITE_ID_INVALID_VALUE}),!1}if((o||s)&&!(o&&s&&isValidBidFloorParams(e.params.bidFloor,e.params.bidFloorCur)))return logError("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:BIDDER_CODE$b,code:ERROR_CODES.BID_FLOOR_INVALID_FORMAT}),!1;if(n&&t){const i=bidToVideoImp(e).video,r=checkVideoParams(n,t);if(dlv(e,"mediaTypes.video.context")===OUTSTREAM$1&&isIndexRendererPreferred(e)&&i){const e=[dlv(i,"w"),dlv(i,"h")];if(!(e[0]>=OUTSTREAM_MINIMUM_PLAYER_SIZE[0]&&e[1]>=OUTSTREAM_MINIMUM_PLAYER_SIZE[1]))return logError(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(r.length)return r.forEach((e=>{logError(e,{bidder:BIDDER_CODE$b,code:ERROR_CODES.PROPERTY_NOT_INCLUDED})})),!1}return nativeMediaTypeValid(e)},resetSiteID:function(){siteID=0},buildRequests:function(e,t){const i=[],r={},n={},a={},o={};FEATURE_TOGGLES.getFeatureToggles(),e.forEach((e=>{const i=Object.keys(dlv(e,"mediaTypes",{}));for(const s in i)switch(i[s]){case BANNER:createBannerImps(e,o,r,t);break;case VIDEO:createVideoImps(e,n);break;case NATIVE$1:createNativeImps(e,a);break;default:logWarn(`IX Bid Adapter: ad unit mediaTypes ${s} is not supported`)}}));for(let d in o)if(o.hasOwnProperty(d)){let t=o[d].missingSizes;r.hasOwnProperty(d)||(r[d]={}),r[d].hasOwnProperty("missingImps")||(r[d].missingImps=[],r[d].missingCount=0);let i=o[d].impression;for(let n=0;n<t.length;n++){let a=createMissingBannerImp(e[0],i,t[n]);r[d].missingImps.push(a),r[d].missingCount++}}let s=[];return Object.keys(r).length>0&&s.push(r),Object.keys(n).length>0&&s.push(n),Object.keys(a).length>0&&s.push(a),FEATURE_TOGGLES.isFeatureEnabled("pbjs_enable_multiformat")?i.push(...buildRequest(e,t,combineImps(s))):(Object.keys(r).length>0&&i.push(...buildRequest(e,t,r)),Object.keys(n).length>0&&i.push(...buildRequest(e,t,n)),Object.keys(a).length>0&&i.push(...buildRequest(e,t,a))),i},interpretResponse:function(e,t){const i=[];let r=null,n=dlv(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(FEATURE_TOGGLES.setFeatureToggles(e),!e.hasOwnProperty("body"))return i;const a=e.body,o=a.seatbid||[];for(let l=0;l<o.length;l++){if(!o[l].hasOwnProperty("bid"))continue;const e=o[l].bid,n=t.data;for(let o=0;o<e.length;o++){const s=getBidRequest(e[o].impid,n.imp,t.validBidRequests);if(r=parseBid(e[o],a.cur,s),r.mediaType===VIDEO&&isIndexRendererPreferred(s)){const t=dlv(a,"ext.videoplayerurl");if(r.renderer=createRenderer$2(e[o].bidId,t),!r.renderer)continue}i.push(r)}if(dlv(n,"ext.ixdiag.err")&&storage$5.localStorageIsEnabled())try{storage$5.removeDataFromLocalStorage(LOCAL_STORAGE_KEY)}catch(s){logError("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(n)&&n.length>0))return i;n=n.filter((e=>!!isValidAuctionConfig(e)||(logWarn("Malformed auction config detected:",e),!1)));try{return{bids:i,fledgeAuctionConfigs:n}}catch(d){return logWarn("Error attaching AuctionConfigs",d),i}},transformBidParams:function(e,t){return convertTypes({siteID:"number"},e)},getUserSyncs:function(e,t){const i=[];let r=null;if(t.length>0&&(r=dlv(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)i.push({type:"iframe",url:IFRAME_USER_SYNC_URL});else{let e=null;config.getConfig("userSync")&&(e=config.getConfig("userSync").syncsPerBidder),0===e&&(e=r),e=r&&(0===e||e)?r>e?e:r:1;for(let t=0;t<e;t++)i.push({type:"image",url:buildImgSyncUrl(e,t)})}return i}};function buildImgSyncUrl(e,t){let i="",r="0";gdprConsent&&gdprConsent.hasOwnProperty("gdprApplies")&&(r=gdprConsent.gdprApplies?"1":"0"),gdprConsent&&gdprConsent.hasOwnProperty("consentString")&&(i=gdprConsent.consentString||"");let n=0!==siteID?"&site_id="+siteID.toString():"";return IMG_USER_SYNC_URL+n+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+i+"&us_privacy="+(usPrivacy||"")}function combineImps(e){const t={};return e.forEach((e=>{Object.keys(e).forEach((i=>{Object.keys(t).includes(i)?t[i].hasOwnProperty("ixImps")&&e[i].hasOwnProperty("ixImps")?t[i].ixImps=[...t[i].ixImps,...e[i].ixImps]:t[i].hasOwnProperty("missingImps")&&e[i].hasOwnProperty("missingImps")?t[i].missingImps=[...t[i].missingImps,...e[i].missingImps]:e[i].hasOwnProperty("ixImps")?t[i].ixImps=e[i].ixImps:e[i].hasOwnProperty("missingImps")&&(t[i].missingImps=e[i].missingImps):t[i]=e[i]}))})),t}function deduplicateImpExtFields(e){return e.imp.forEach(((t,i)=>{const r=t.ext;if(null==r)return e;getFormatCount(t)<2||Object.keys(r).forEach((n=>{if(BANNER in t){const a=t.banner.ext;if(void 0!==a&&void 0!==a[n]&&a[n]==r[n]&&delete e.imp[i].banner.ext[n],void 0!==t.banner.format)for(let o=0;o<t.banner.format.length;o++)null!=t.banner.format[o].ext&&null!=t.banner.format[o].ext[n]&&t.banner.format[o].ext[n]==r[n]&&delete e.imp[i].banner.format[o].ext[n]}if(VIDEO in t){const a=t.video.ext;void 0!==a&&void 0!==a[n]&&a[n]==r[n]&&delete e.imp[i].video.ext[n]}if(NATIVE$1 in t){const a=t.native.ext;void 0!==a&&void 0!==a[n]&&a[n]==r[n]&&delete e.imp[i].native.ext[n]}}))})),e}function removeSiteIDs(e){return e.imp.forEach(((t,i)=>{if(null==t.ext)return e;if(!(getFormatCount(t)<2)){if(BANNER in t){const r=t.banner.ext;if(void 0!==r&&void 0!==r.siteID&&delete e.imp[i].banner.ext.siteID,void 0!==t.banner.format)for(let n=0;n<t.banner.format.length;n++)void 0!==t.banner.format[n].ext&&void 0!==t.banner.format[n].ext.siteID&&(dset(e.imp[i],"ext.siteID",t.banner.format[n].ext.siteID),dset(e,"ext.ixdiag.usid",!0),delete e.imp[i].banner.format[n].ext.siteID)}if(VIDEO in t){const r=t.video.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[i].video.ext.siteID}if(NATIVE$1 in t){const r=t.native.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[i].native.ext.siteID}}})),e}function getFormatCount(e){let t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function isValidAuctionConfig(e){return"object"==typeof e&&null!==e}function addDeviceInfo(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}registerBidder(spec$c);const BIDDER_CODE$a="medianet",TRUSTEDSTACK_CODE="trustedstack",BID_URL="https://prebid.media.net/rtb/prebid",TRUSTEDSTACK_URL="https://prebid.trustedstack.com/rtb/trustedstack",PLAYER_URL="https://prebid.media.net/video/bundle.js",SLOT_VISIBILITY={NOT_DETERMINED:0,ABOVE_THE_FOLD:1,BELOW_THE_FOLD:2},EVENTS={TIMEOUT_EVENT_NAME:"client_timeout",BID_WON_EVENT_NAME:"client_bid_won"},EVENT_PIXEL_URL="qsearch-a.akamaihd.net/log",OUTSTREAM="outstream";let refererInfo=getRefererInfo(),mnData={};window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],mnData.urlData={domain:refererInfo.domain,page:refererInfo.page,isTop:refererInfo.reachedTop};const aliases=[{code:TRUSTEDSTACK_CODE,gvlid:1288}];function getTopWindowReferrer(){try{return window.top.document.referrer}catch(e){return document.referrer}}function siteDetails(e,t){const i=t.refererInfo;let r={domain:(e=e||{}).domain||i.domain,page:e.page||i.page,ref:e.ref||getTopWindowReferrer(),topMostLocation:i.topmostLocation,isTop:e.isTop||i.reachedTop};return Object.assign(r,getPageMeta())}function getPageMeta(){if(mnData.pageMeta)return mnData.pageMeta;let e=getUrlFromSelector('link[rel="canonical"]',"href"),t=getUrlFromSelector('meta[property="og:url"]',"content"),i=getUrlFromSelector('meta[name="twitter:url"]',"content");return mnData.pageMeta=Object.assign({},e&&{canonical_url:e},t&&{og_url:t},i&&{twitter_url:i}),mnData.pageMeta}function getUrlFromSelector(e,t){let i=getAttributeFromSelector(e,t);return i&&getAbsoluteUrl(i)}function getAttributeFromSelector(e,t){try{let i=getWindowTop().document.querySelector(e);if(null!==i&&i[t])return i[t]}catch(i){}}function getAbsoluteUrl(e){let t=getWindowTop().document.createElement("a");return t.href=e,t.href}function filterUrlsByType(e,t){return e.filter((e=>e.type===t))}function transformSizes$1(e){return isArray(e)&&2===e.length&&!isArray(e[0])?[getSize(e)]:e.map((e=>getSize(e)))}function getSize(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function getWindowSize$1(){return{w:window.screen.width||-1,h:window.screen.height||-1}}function getCoordinates(e){let t=document.getElementById(e);if(!t&&-1!==e.indexOf("/")){const{divId:i}=getGptSlotInfoForAdUnitCode(e);isStr(i)&&(t=document.getElementById(i))}if(t&&t.getBoundingClientRect){const e=t.getBoundingClientRect();let i={};return i.top_left={y:e.top,x:e.left},i.bottom_right={y:e.bottom,x:e.right},i}return null}function extParams(e,t){const i=dlv(e,"params"),r=dlv(t,"gdprConsent"),n=dlv(t,"uspConsent"),a=dlv(e,"userId"),o=dlv(e,"schain")||{},s=spec$b.getWindowSize(),d=!(!r||!r.gdprApplies),l=!!n,c=!!config.getConfig("coppa");return Object.assign({},{customer_id:i.cid},{prebid_version:getGlobal().version},{gdpr_applies:d},d&&{gdpr_consent_string:r.consentString||""},{usp_applies:l},l&&{usp_consent_string:n||""},{coppa_applies:c},-1!==s.w&&-1!==s.h&&{screen:s},a&&{user_id:a},getGlobal().medianetGlobals.analyticsEnabled&&{analytics:!0},!isEmpty(o)&&{schain:o})}function slotParams(e){var t,i;let r={id:e.bidId,transactionId:null==(i=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:i.tid,ext:{dfp_id:e.adUnitCode,display_count:e.bidRequestsCount},all:e.params};e.ortb2Imp&&(r.ortb2Imp=e.ortb2Imp);let n=dlv(e,"mediaTypes.banner.sizes")||[];const a=dlv(e,"mediaTypes.video")||{},o=dlv(e,"params.video")||{},s=Object.assign({},o,a);if(isEmpty(s)||(r.video=s),n.length>0&&(r.banner=transformSizes$1(n)),e.nativeParams)try{r.native=JSON.stringify(e.nativeParams)}catch(p){logError(`${BIDDER_CODE$a} : Incorrect JSON : bidRequest.nativeParams`)}e.params.crid&&(r.tagid=e.params.crid.toString());let d=parseFloat(e.params.bidfloor||e.params.bidFloor);d&&(r.bidfloor=d);const l=getCoordinates(e.adUnitCode);if(l&&r.banner&&0!==r.banner.length){let e=normalizeCoordinates(l);r.ext.coordinates=e,r.ext.viewability=getSlotVisibility(l.top_left,getMinSize(r.banner)),getSlotVisibility(e.top_left,getMinSize(r.banner))>.5?r.ext.visibility=SLOT_VISIBILITY.ABOVE_THE_FOLD:r.ext.visibility=SLOT_VISIBILITY.BELOW_THE_FOLD}else r.ext.visibility=SLOT_VISIBILITY.NOT_DETERMINED;const c=getBidFloorByType(e);return c&&c.length>0&&(r.bidfloors=c),r}function getBidFloorByType(e){let t=[];return"function"==typeof e.getFloor&&[BANNER,VIDEO,NATIVE$1].forEach((i=>{e.mediaTypes.hasOwnProperty(i)&&(i==BANNER?e.mediaTypes.banner.sizes.forEach((r=>{setFloorInfo(e,i,r,t)})):setFloorInfo(e,i,"*",t))})),t}function setFloorInfo(e,t,i,r){let n=e.getFloor({currency:"USD",mediaType:t,size:i});i.length>1&&(n.size=i),n.mediaType=t,r.push(n)}function getMinSize(e){return e.reduce(((e,t)=>t.h*t.w<e.h*e.w?t:e))}function getSlotVisibility(e,t){let i=t.w*t.h,r=spec$b.getWindowSize(),n={x:e.x+t.w,y:e.y+t.h};return 0===i||-1===r.w||-1===r.h?0:getOverlapArea(e,n,{x:0,y:0},{x:r.w,y:r.h})/i}function getOverlapArea(e,t,i,r){return e.x>r.x||t.x<i.x||e.y>r.y||t.y<i.y?0:(Math.min(t.x,r.x)-Math.max(e.x,i.x))*(Math.min(t.y,r.y)-Math.max(e.y,i.y))}function normalizeCoordinates(e){return{top_left:{x:e.top_left.x+window.pageXOffset,y:e.top_left.y+window.pageYOffset},bottom_right:{x:e.bottom_right.x+window.pageXOffset,y:e.bottom_right.y+window.pageYOffset}}}function getBidderURL(e,t){return(e===TRUSTEDSTACK_CODE?TRUSTEDSTACK_URL:BID_URL)+"?cid="+encodeURIComponent(t)}function generatePayload(e,t){return{site:siteDetails(e[0].params.site,t),ext:extParams(e[0],t),id:e[0].auctionId,imp:e.map((e=>slotParams(e))),ortb2:t.ortb2,tmax:t.timeout}}function isValidBid(e){return!1===e.no_bid&&parseFloat(e.cpm)>0}function fetchCookieSyncUrls(e){return!isEmpty(e)&&e[0].body&&e[0].body.ext&&isArray(e[0].body.ext.csUrl)?e[0].body.ext.csUrl:[]}function getLoggingData(e,t){t=isArray(t)&&t||[];let i={logid:"kfk",evtid:"projectevents",project:"prebid"};return i.acid=dlv(t,"0.auctionId")||"",i.cid=getGlobal().medianetGlobals.cid||"",i.crid=t.map((e=>dlv(e,"params.0.crid")||e.adUnitCode)).join("|"),i.adunit_count=t.length||0,i.dn=mnData.urlData.domain||"",i.requrl=mnData.urlData.page||"",i.istop=mnData.urlData.isTop||"",i.event=e.name||"",i.value=e.value||"",i.rd=e.related_data||"",i}function logEvent(e,t){triggerPixel(buildUrl({protocol:"https",hostname:EVENT_PIXEL_URL,search:getLoggingData(e,t)}))}function clearMnData(){mnData={}}function addRenderer(e){const t=dlv(e,"context")||"",i=dlv(e,"vto");t==OUTSTREAM&&i&&(e.renderer=newVideoRenderer())}function newVideoRenderer(e){const t=Renderer.install({url:PLAYER_URL});return t.setRender((function(e){window.mnet.queue.push((function(){const t={width:e.width,height:e.height,vastTimeout:e.vto,maxAllowedVastTagRedirects:e.mavtr,allowVpaid:e.avp,autoPlay:e.ap,preload:e.pl,mute:e.mt},i=e.dfp_id,r=getGptSlotInfoForAdUnitCode(i).divId||i;window.mnet.mediaNetoutstreamPlayer(e,r,t)}))})),t}getGlobal().medianetGlobals=getGlobal().medianetGlobals||{};const spec$b={code:BIDDER_CODE$a,gvlid:142,aliases:aliases,supportedMediaTypes:[BANNER,NATIVE$1,VIDEO],isBidRequestValid:function(e){return e.params?e.params.cid&&isStr(e.params.cid)&&!isEmptyStr(e.params.cid)?(Object.assign(getGlobal().medianetGlobals,!getGlobal().medianetGlobals.cid&&{cid:e.params.cid}),!0):(logError(`${BIDDER_CODE$a} : cid should be a string`),!1):(logError(`${BIDDER_CODE$a} : Missing bid parameters`),!1)},buildRequests:function(e,t){let i=generatePayload(e=convertOrtbRequestToProprietaryNative(e),t);return{method:"POST",url:getBidderURL(t.bidderCode,i.ext.customer_id),data:JSON.stringify(i)}},interpretResponse:function(e,t){let i=[];if(!e||!e.body)return logInfo(`${BIDDER_CODE$a} : response is empty`),i;let r=e.body.bidList;return isArray(r)&&0!==r.length?(i=r.filter((e=>isValidBid(e))),i.forEach(addRenderer),i):(logInfo(`${BIDDER_CODE$a} : no bids`),i)},getUserSyncs:function(e,t){let i=fetchCookieSyncUrls(t);return e.iframeEnabled?filterUrlsByType(i,"iframe"):e.pixelEnabled?filterUrlsByType(i,"image"):void 0},onTimeout:e=>{try{logEvent({name:EVENTS.TIMEOUT_EVENT_NAME,value:e.length,related_data:e[0].timeout||config.getConfig("bidderTimeout")},e)}catch(t){}},onBidWon:e=>{try{logEvent({name:EVENTS.BID_WON_EVENT_NAME,value:e.cpm},[e])}catch(t){}},clearMnData:clearMnData,getWindowSize:getWindowSize$1};registerBidder(spec$b);const ENDPOINT$2="https://onetag-sys.com/prebid-request",USER_SYNC_ENDPOINT="https://onetag-sys.com/usync/",BIDDER_CODE$9="onetag",GVLID$3=241,storage$4=getStorageManager({bidderCode:BIDDER_CODE$9});function isBidRequestValid(e){return void 0!==e&&void 0!==e.params&&"string"==typeof e.params.pubId&&(isValid(BANNER,e)||isValid(VIDEO,e))}function hasTypeVideo(e){return void 0!==e.mediaTypes&&void 0!==e.mediaTypes.video}function isValid(e,t){if(e===BANNER)return parseSizes$1(t).length>0;if(e===VIDEO&&hasTypeVideo(t)){const e=t.mediaTypes.video.context;if("outstream"===e||"instream"===e)return parseVideoSize(t).length>0}return!1}function buildRequests(e,t){const i={bids:requestsToBids(e),...getPageInfo(t)};t&&t.gdprConsent&&(i.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:t.gdprConsent.gdprApplies,addtlConsent:t.gdprConsent.addtlConsent}),t&&t.gppConsent&&(i.gppConsent={consentString:t.gppConsent.gppString,applicableSections:t.gppConsent.applicableSections}),t&&t.uspConsent&&(i.usPrivacy=t.uspConsent),t&&t.ortb2&&(i.ortb2=t.ortb2),e&&0!==e.length&&e[0].userIdAsEids&&(i.userId=e[0].userIdAsEids),e&&0!==e.length&&e[0].schain&&isSchainValid(e[0].schain)&&(i.schain=e[0].schain);try{storage$4.hasLocalStorage()&&(i.onetagSid=storage$4.getDataFromLocalStorage("onetag_sid"))}catch(n){}const r=navigator.connection||navigator.webkitConnection;return i.networkConnectionType=r&&r.type?r.type:null,i.networkEffectiveConnectionType=r&&r.effectiveType?r.effectiveType:null,i.fledgeEnabled=Boolean(t&&t.fledgeEnabled),{method:"POST",url:ENDPOINT$2,data:JSON.stringify(i)}}function interpretResponse(e,t){const i=e.body,r=[],n=JSON.parse(t.data);if(!i||i.nobid&&!0===i.nobid)return r;if(!(i.fledgeAuctionConfigs||i.bids&&Array.isArray(i.bids)&&0!==i.bids.length))return r;if(Array.isArray(i.bids)&&i.bids.forEach((e=>{const t={requestId:e.requestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.creativeId,dealId:null==e.dealId?e.dealId:"",currency:e.currency,netRevenue:e.netRevenue||!1,mediaType:e.mediaType,meta:{mediaType:e.mediaType,advertiserDomains:e.adomain},ttl:e.ttl||300};if(e.dsa&&(t.meta.dsa=e.dsa),e.mediaType===BANNER)t.ad=e.ad;else if(e.mediaType===VIDEO){const{context:i,adUnitCode:r}=find(n.bids,(t=>t.bidId===e.requestId&&t.type===VIDEO));i===INSTREAM?(t.vastUrl=e.vastUrl,t.videoCacheKey=e.videoCacheKey):i===OUTSTREAM$1&&(t.vastXml=e.ad,t.vastUrl=e.vastUrl,e.rendererUrl&&(t.renderer=createRenderer$1({...e,adUnitCode:r})))}r.push(t)})),i.fledgeAuctionConfigs&&Array.isArray(i.fledgeAuctionConfigs)){const e=i.fledgeAuctionConfigs;return{bids:r,fledgeAuctionConfigs:e}}return r}function createRenderer$1(e,t={}){const i=Renderer.install({id:e.requestId,url:e.rendererUrl,config:t,adUnitCode:e.adUnitCode,loaded:!1});try{i.setRender((({renderer:t,width:i,height:r,vastXml:n,adUnitCode:a})=>{t.push((()=>{window.onetag.Player.init({...e,width:i,height:r,vastXml:n,nodeId:a,config:t.getConfig()})}))}))}catch(r){}return i}function getFrameNesting(){let e=window,t=window.parent;try{for(;e!==e.parent;)t=e.parent,t.location.href,e=e.parent}catch(i){}return e}function getDocumentVisibility(e){try{return void 0!==e.document.hidden?e.document.hidden:void 0!==e.document.msHidden?e.document.msHidden:void 0!==e.document.webkitHidden?e.document.webkitHidden:null}catch(t){return null}}function getPageInfo(e){const t=getFrameNesting();return{location:dlv(e,"refererInfo.page",null),referrer:dlv(e,"refererInfo.ref",null),stack:dlv(e,"refererInfo.stack",[]),numIframes:dlv(e,"refererInfo.numIframes",0),wWidth:t.innerWidth,wHeight:t.innerHeight,oWidth:t.outerWidth,oHeight:t.outerHeight,sWidth:t.screen.width,sHeight:t.screen.height,aWidth:t.screen.availWidth,aHeight:t.screen.availHeight,sLeft:"screenLeft"in t?t.screenLeft:t.screenX,sTop:"screenTop"in t?t.screenTop:t.screenY,xOffset:t.pageXOffset,yOffset:t.pageYOffset,docHidden:getDocumentVisibility(t),docHeight:t.document.body?t.document.body.scrollHeight:null,hLength:history.length,timing:getTiming(),version:{prebid:"8.47.0",adapter:"1.1.1"}}}function requestsToBids(e){const t=e.filter((e=>hasTypeVideo(e))).map((e=>{const t={};return setGeneralInfo.call(t,e),t.context=e.mediaTypes.video.context,t.playerSize=parseVideoSize(e),t.mediaTypeInfo=deepClone(e.mediaTypes.video),t.type=VIDEO,t.priceFloors=getBidFloor(e,VIDEO,t.playerSize),t})),i=e.filter((e=>isValid(BANNER,e))).map((e=>{const t={};return setGeneralInfo.call(t,e),t.sizes=parseSizes$1(e),t.type=BANNER,t.mediaTypeInfo=deepClone(e.mediaTypes.banner),t.priceFloors=getBidFloor(e,BANNER,t.sizes),t}));return t.concat(i)}function setGeneralInfo(e){const t=e.params;this.adUnitCode=e.adUnitCode,this.bidId=e.bidId,this.bidderRequestId=e.bidderRequestId,this.auctionId=dlv(e,"ortb2.source.tid"),this.transactionId=dlv(e,"ortb2Imp.ext.tid"),this.gpid=dlv(e,"ortb2Imp.ext.gpid")||dlv(e,"ortb2Imp.ext.data.pbadslot"),this.pubId=t.pubId,this.ext=t.ext,t.pubClick&&(this.click=t.pubClick),t.dealId&&(this.dealId=t.dealId);const i=getSpaceCoords(e.adUnitCode);i&&(this.coords=i)}function getSpaceCoords(e){const t=document.getElementById(e);try{const{top:e,left:i,width:r,height:n}=t.getBoundingClientRect();let a=t.ownerDocument.defaultView;const o={top:e+a.pageYOffset,left:i+a.pageXOffset,width:r,height:n};let s=a.frameElement;for(;null!=s;){const{top:e,left:t}=s.getBoundingClientRect();o.top+=e+a.pageYOffset,o.left+=t+a.pageXOffset,a=a.parent,s=a.frameElement}return o}catch(i){return null}}function getTiming(){try{if(null!=window.performance&&null!=window.performance.timing){const e={},t=window.performance.timing;return e.pageLoadTime=t.loadEventEnd-t.navigationStart,e.connectTime=t.responseEnd-t.requestStart,e.renderTime=t.domComplete-t.domLoading,e}}catch(e){return null}return null}function parseVideoSize(e){const t=e.mediaTypes.video.playerSize;return void 0!==t&&Array.isArray(t)&&t.length>0?getSizes$1(t):[]}function parseSizes$1(e){return void 0!==e.mediaTypes&&void 0!==e.mediaTypes.banner&&void 0!==e.mediaTypes.banner.sizes&&Array.isArray(e.mediaTypes.banner.sizes)&&e.mediaTypes.banner.sizes.length>0?getSizes$1(e.mediaTypes.banner.sizes):!hasTypeVideo(e)&&e.sizes&&Array.isArray(e.sizes)?getSizes$1(e.sizes):[]}function getSizes$1(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i];t.push({width:r[0],height:r[1]})}return t}function getUserSyncs(e,t,i,r,n){let a=[],o="";return i&&("boolean"==typeof i.gdprApplies&&(o+="&gdpr="+(i.gdprApplies?1:0)),"string"==typeof i.consentString&&(o+="&gdpr_consent="+i.consentString)),n&&"string"==typeof n.gppString&&(o+="&gpp_consent="+n.gppString),r&&"string"==typeof r&&(o+="&us_privacy="+r),e.iframeEnabled&&a.push({type:"iframe",url:USER_SYNC_ENDPOINT+"?cb="+(new Date).getTime()+o}),e.pixelEnabled&&a.push({type:"image",url:USER_SYNC_ENDPOINT+"?tag=img"+o}),a}function getBidFloor(e,t,i){const r=[];return"function"==typeof e.getFloor&&i.forEach((i=>{const n=e.getFloor({currency:"EUR",mediaType:t||"*",size:[i.width,i.height]});n.size=deepClone(i),n.floor||(n.floor=null),r.push(n)})),r}function isSchainValid(e){let t=!1;const i=["asi","sid","hp"];return e&&e.nodes?(t=e.nodes.reduce(((e,t)=>e?i.every((e=>t.hasOwnProperty(e))):e),!0),t||logError("OneTag: required schain params missing"),t):t}const spec$a={code:BIDDER_CODE$9,gvlid:GVLID$3,supportedMediaTypes:[BANNER,VIDEO],isBidRequestValid:isBidRequestValid,buildRequests:buildRequests,interpretResponse:interpretResponse,getUserSyncs:getUserSyncs};registerBidder(spec$a);const BIDDER_CODE$8="outbrain",GVLID$2=164,CURRENCY="USD",NATIVE_ASSET_IDS={0:"title",2:"icon",3:"image",5:"sponsoredBy",4:"body",1:"cta"},NATIVE_PARAMS={title:{id:0,name:"title"},icon:{id:2,type:1,name:"img"},image:{id:3,type:3,name:"img"},sponsoredBy:{id:5,name:"data",type:1},body:{id:4,name:"data",type:2},cta:{id:1,type:12,name:"data"}},OUTSTREAM_RENDERER_URL="https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",OB_USER_TOKEN_KEY="OB-USER-TOKEN",storage$3=getStorageManager({bidderCode:BIDDER_CODE$8}),spec$9={code:BIDDER_CODE$8,gvlid:GVLID$2,supportedMediaTypes:[NATIVE$1,BANNER,VIDEO],isBidRequestValid:e=>"object"==typeof e.params&&"string"==typeof dlv(e,"params.publisher.id")&&(!e.params.tagid||"string"==typeof e.params.tagid)&&!(e.params.bcat&&("object"!=typeof e.params.bcat||!e.params.bcat.every((e=>"string"==typeof e))))&&!(e.params.badv&&("object"!=typeof e.params.badv||!e.params.badv.every((e=>"string"==typeof e))))&&!!config.getConfig("outbrain.bidderUrl")&&(!(!e.nativeParams&&!e.sizes)||isValidVideoRequest(e)),buildRequests:(e,t)=>{e=convertOrtbRequestToProprietaryNative(e);const i=t.ortb2||{},r=t.refererInfo.page,n=navigator.userAgent,a=setOnAny(e,"params.test"),o=setOnAny(e,"params.publisher"),s=i.bcat||setOnAny(e,"params.bcat"),d=i.badv||setOnAny(e,"params.badv"),l=setOnAny(e,"userIdAsEids"),c=i.wlang,p=CURRENCY,u=config.getConfig("outbrain.bidderUrl"),m=t.timeout,g=e.map(((e,t)=>{e.netRevenue="net";const i={id:t+1+""};if(e.params.tagid&&(i.tagid=e.params.tagid),e.nativeParams?i.native={request:JSON.stringify({assets:getNativeAssets(e)})}:isVideoRequest(e)?i.video=getVideoAsset(e):i.banner={format:transformSizes(e.sizes)},"function"==typeof e.getFloor){const t=_getFloor$1(e,e.nativeParams?NATIVE$1:BANNER);t&&(i.bidfloor=t)}return i})),f={id:t.bidderRequestId,site:{page:r,publisher:o},device:{ua:n},source:{fd:1},cur:[p],tmax:m,imp:g,bcat:s,badv:d,wlang:c,ext:{prebid:{channel:{name:"pbjs",version:"8.47.0"}}}};a&&(f.is_debug=!!a,f.test=1);const b=storage$3.getDataFromLocalStorage(OB_USER_TOKEN_KEY);return b&&dset(f,"user.ext.obusertoken",b),dlv(t,"gdprConsent.gdprApplies")&&(dset(f,"user.ext.consent",t.gdprConsent.consentString),dset(f,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&dset(f,"regs.ext.us_privacy",t.uspConsent),!0===config.getConfig("coppa")&&dset(f,"regs.coppa",1&config.getConfig("coppa")),t.gppConsent?(dset(f,"regs.ext.gpp",t.gppConsent.gppString),dset(f,"regs.ext.gpp_sid",t.gppConsent.applicableSections)):dlv(t,"ortb2.regs.gpp")&&(dset(f,"regs.ext.gpp",t.ortb2.regs.gpp),dset(f,"regs.ext.gpp_sid",t.ortb2.regs.gpp_sid)),l&&dset(f,"user.ext.eids",l),{method:"POST",url:u,data:JSON.stringify(f),bids:e}},interpretResponse:(e,{bids:t})=>{if(!e.body)return[];const{seatbid:i,cur:r}=e.body,n=flatten(i.map((e=>e.bid))).reduce(((e,t)=>(e[t.impid-1]=t,e)),[]);return t.map(((e,t)=>{const i=n[t];if(i){let t=BANNER;e.nativeParams?t=NATIVE$1:isVideoRequest(e)&&(t=VIDEO);const n={requestId:e.bidId,cpm:i.price,creativeId:i.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:r,mediaType:t,nurl:i.nurl};return t===NATIVE$1?n.native=parseNative(i):t===BANNER?(n.ad=i.adm,n.width=i.w,n.height=i.h):t===VIDEO&&(n.vastXml=i.adm,dlv(e,"mediaTypes.video.context")===OUTSTREAM$1&&(n.renderer=createRenderer(e))),n.meta={},i.adomain&&i.adomain.length>0&&(n.meta.advertiserDomains=i.adomain),n}})).filter(Boolean)},getUserSyncs:(e,t,i,r,n)=>{const a=[];let o=config.getConfig("outbrain.usersyncUrl"),s=[];return e.pixelEnabled&&o&&(i&&(s.push("gdpr="+(1&i.gdprApplies)),s.push("gdpr_consent="+encodeURIComponent(i.consentString||""))),r&&s.push("us_privacy="+encodeURIComponent(r)),n&&(s.push("gpp="+encodeURIComponent(n.gppString)),s.push("gpp_sid="+encodeURIComponent(n.applicableSections.join(",")))),a.push({type:"image",url:o+(s.length?"?"+s.join("&"):"")})),a},onBidWon:e=>{e.nurl&&ajax$1(replaceAuctionPrice(e.nurl,e.originalCpm))}};function parseNative(e){const{assets:t,link:i,privacy:r,eventtrackers:n}=JSON.parse(e.adm),a={clickUrl:i.url,clickTrackers:i.clicktrackers||void 0};return t.forEach((e=>{const t=NATIVE_ASSET_IDS[e.id],i=t&&e[NATIVE_PARAMS[t].name];i&&(a[t]=i.text||i.value||{url:i.url,width:i.w,height:i.h})})),r&&(a.privacyLink=r),n&&(a.impressionTrackers=[],n.forEach((e=>{if(1===e.event)switch(e.method){case 1:a.impressionTrackers.push(e.url);break;case 2:a.javascriptTrackers=`<script src="${e.url}"><\/script>`}}))),a}function setOnAny(e,t){for(let i,r=0;r<e.length;r++)if(i=dlv(e[r],t),i)return i}function flatten(e){return[].concat(...e)}function getNativeAssets(e){return _map(e.nativeParams,((e,t)=>{const i=NATIVE_PARAMS[t],r={required:1&e.required};if(i){let t,n,a,o;r.id=i.id;let s=e.aspect_ratios;if(s&&s[0]&&(s=s[0],t=s.min_width||0,n=s.ratio_height*t/s.ratio_width|0),e.sizes){const t=flatten(e.sizes);a=parseInt(t[0],10),o=parseInt(t[1],10)}return r[i.name]={len:e.len,type:i.type,wmin:t,hmin:n,w:a,h:o},r}})).filter(Boolean)}function getVideoAsset(e){const t=flatten(e.mediaTypes.video.playerSize);return{w:parseInt(t[0],10),h:parseInt(t[1],10),protocols:e.mediaTypes.video.protocols,playbackmethod:e.mediaTypes.video.playbackmethod,mimes:e.mediaTypes.video.mimes,skip:e.mediaTypes.video.skip,delivery:e.mediaTypes.video.delivery,api:e.mediaTypes.video.api,minbitrate:e.mediaTypes.video.minbitrate,maxbitrate:e.mediaTypes.video.maxbitrate,minduration:e.mediaTypes.video.minduration,maxduration:e.mediaTypes.video.maxduration,startdelay:e.mediaTypes.video.startdelay,placement:e.mediaTypes.video.placement,linearity:e.mediaTypes.video.linearity}}function transformSizes(e){return isArray(e)?2!==e.length||isArray(e[0])?isArray(e[0])?e.map((e=>({w:parseInt(e[0],10),h:parseInt(e[1],10)}))):[]:[{w:parseInt(e[0],10),h:parseInt(e[1],10)}]:[]}function _getFloor$1(e,t){const i=e.getFloor({currency:CURRENCY,mediaType:t,size:"*"});return"object"!=typeof i||i.currency!==CURRENCY||isNaN(parseFloat(i.floor))?null:parseFloat(i.floor)}function isVideoRequest(e){return"video"===e.mediaType||!!dlv(e,"mediaTypes.video")}function createRenderer(e){let t={},i=OUTSTREAM_RENDERER_URL,r=function(e){e.renderer.push((()=>{window.ANOutstreamVideo.renderAd({sizes:e.sizes,targetId:e.adUnitCode,adResponse:{content:e.vastXml}})}))},n=dlv(e,"mediaTypes.video.renderer");n||(n=dlv(e,"renderer")),n&&(t=n.options,i=n.url,r=n.render);const a=Renderer.install({id:e.adUnitCode,url:i,config:t,adUnitCode:e.adUnitCode,loaded:!1});try{a.setRender(r)}catch(o){logWarn("Prebid Error calling setRender on renderer",o)}return a}function isValidVideoRequest(e){const t=dlv(e,"mediaTypes.video");return!!t&&!!Array.isArray(t.playerSize)&&""!=t.context}registerBidder(spec$9);const BIDDER_CODE$7="pubmatic",LOG_WARN_PREFIX="PubMatic: ",ENDPOINT$1="https://hbopenbid.pubmatic.com/translator?source=prebid-client",USER_SYNC_URL_IFRAME$1="https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p=",USER_SYNC_URL_IMAGE="https://image8.pubmatic.com/AdServer/ImgSync?p=",DEFAULT_CURRENCY="USD",AUCTION_TYPE=1,UNDEFINED=void 0,DEFAULT_WIDTH=0,DEFAULT_HEIGHT=0,PREBID_NATIVE_HELP_LINK="http://prebid.org/dev-docs/show-native-ads.html",PUBLICATION="pubmatic",RENDERER_URL="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),MSG_VIDEO_PLACEMENT_MISSING="Video.Placement param missing",CUSTOM_PARAMS={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},DATA_TYPES={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},VIDEO_CUSTOM_PARAMS={mimes:DATA_TYPES.ARRAY,minduration:DATA_TYPES.NUMBER,maxduration:DATA_TYPES.NUMBER,startdelay:DATA_TYPES.NUMBER,playbackmethod:DATA_TYPES.ARRAY,api:DATA_TYPES.ARRAY,protocols:DATA_TYPES.ARRAY,w:DATA_TYPES.NUMBER,h:DATA_TYPES.NUMBER,battr:DATA_TYPES.ARRAY,linearity:DATA_TYPES.NUMBER,placement:DATA_TYPES.NUMBER,plcmt:DATA_TYPES.NUMBER,minbitrate:DATA_TYPES.NUMBER,maxbitrate:DATA_TYPES.NUMBER,skip:DATA_TYPES.NUMBER},NATIVE_ASSET_IMAGE_TYPE={ICON:1,IMAGE:3},NET_REVENUE=!0,dealChannelValues={1:"PMP",5:"PREF",6:"PMPG"},BB_RENDERER={bootstrapPlayer:function(e){const t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),!e.vastXml&&!e.vastUrl)return void logWarn(`${LOG_WARN_PREFIX}: No vastXml or vastUrl on bid, bailing...`);const i=BB_RENDERER.getRendererId(PUBLICATION,e.rendererCode),r=document.getElementById(e.adUnitCode);let n;for(let a=0;a<window.bluebillywig.renderers.length;a++)if(window.bluebillywig.renderers[a]._id===i){n=window.bluebillywig.renderers[a];break}n?n.bootstrap(t,r):logWarn(`${LOG_WARN_PREFIX}: Couldn't find a renderer with ${i}`)},newRenderer:function(e,t){var i=RENDERER_URL.replace("$RENDERER",e);const r=Renderer.install({url:i,loaded:!1,adUnitCode:t});try{r.setRender(BB_RENDERER.outstreamRender)}catch(n){logWarn(`${LOG_WARN_PREFIX}: Error tying to setRender on renderer`,n)}return r},outstreamRender:function(e){e.renderer.push((function(){BB_RENDERER.bootstrapPlayer(e)}))},getRendererId:function(e,t){return`${e}-${t}`}},MEDIATYPE=[BANNER,VIDEO,NATIVE$1];let publisherId=0,isInvalidNativeRequest=!1,biddersList=["pubmatic"];const allBiddersList=["all"];function _getDomainFromURL(e){let t=document.createElement("a");return t.href=e,t.hostname}function _parseSlotParam(e,t){if(!isStr(t))return t&&logWarn(LOG_WARN_PREFIX+"Ignoring param key: "+e+", expects string-value, found "+typeof t),UNDEFINED;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((e=>e.trim())).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||UNDEFINED;case"yob":return parseInt(t)||UNDEFINED;default:return t}}function _cleanSlot(e){return isStr(e)?e.replace(/^\s+/g,"").replace(/\s+$/g,""):(e&&logWarn(BIDDER_CODE$7+": adSlot must be a string. Ignoring adSlot"),"")}function _parseAdSlot(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=_cleanSlot(e.params.adSlot);var t=e.params.adSlot,i=t.split(":");if(t=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),i=t.split("@"),e.params.adUnit=i[0],i.length>1){if(2!=(i=i[1].split("x")).length)return void logWarn(LOG_WARN_PREFIX+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0],10),e.params.height=parseInt(i[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(BANNER)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var r=0,n=[];r<e.mediaTypes.banner.sizes.length;r++)2===e.mediaTypes.banner.sizes[r].length&&n.push(e.mediaTypes.banner.sizes[r]);e.mediaTypes.banner.sizes=n,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function _initConf(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}function _handleCustomParams(e,t){var i,r,n;for(i in t.kadpageurl||(t.kadpageurl=t.pageURL),CUSTOM_PARAMS)CUSTOM_PARAMS.hasOwnProperty(i)&&(r=e[i])&&("object"==typeof(n=CUSTOM_PARAMS[i])&&(r=n.f(r,t)),isStr(r)?t[i]=r:logWarn(LOG_WARN_PREFIX+"Ignoring param : "+i+" with value : "+CUSTOM_PARAMS[i]+", expects string-value, found "+typeof r));return t}function getDeviceConnectionType(){let e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);switch(null==e?void 0:e.effectiveType){case"ethernet":return 1;case"wifi":return 2;case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;default:return 0}}function _createOrtbTemplate(e){return{id:""+(new Date).getTime(),at:AUCTION_TYPE,cur:[DEFAULT_CURRENCY],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language,connectiontype:getDeviceConnectionType()},user:{},ext:{}}}function _checkParamDataType(e,t,i){var r,n="Ignoring param key: "+e+", expects "+i+", found "+typeof t;switch(i){case DATA_TYPES.BOOLEAN:r=isBoolean;break;case DATA_TYPES.NUMBER:r=isNumber;break;case DATA_TYPES.STRING:r=isStr;break;case DATA_TYPES.ARRAY:r=isArray}return r(t)?t:(logWarn(LOG_WARN_PREFIX+n),UNDEFINED)}const PREBID_NATIVE_DATA_KEYS_TO_ORTB={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},PREBID_NATIVE_DATA_KEY_VALUES=Object.values(PREBID_NATIVE_DATA_KEYS_TO_ORTB);function toOrtbNativeRequest(e){if(!e&&!isPlainObject(e))return logWarn(`${LOG_WARN_PREFIX}: Native assets object is empty or not an object: ${e}`),void(isInvalidNativeRequest=!0);const t={ver:"1.2",assets:[]};for(let i in e){if(NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(i))continue;if(!NATIVE_KEYS.hasOwnProperty(i)&&!PREBID_NATIVE_DATA_KEY_VALUES.includes(i)){logWarn(`${LOG_WARN_PREFIX}: Unrecognized native asset code: ${i}. Asset will be ignored.`);continue}const r=e[i];let n=0;r.required&&isBoolean(r.required)&&(n=Number(r.required));const a={id:t.assets.length,required:n};if(i in PREBID_NATIVE_DATA_KEYS_TO_ORTB)a.data={type:NATIVE_ASSET_TYPES[PREBID_NATIVE_DATA_KEYS_TO_ORTB[i]]},(r.len||r.length)&&(a.data.len=r.len||r.length),r.ext&&(a.data.ext=r.ext);else if("icon"===i||"image"===i){if(a.img={type:"icon"===i?NATIVE_IMAGE_TYPES.ICON:NATIVE_IMAGE_TYPES.MAIN},r.aspect_ratios)if(isArray(r.aspect_ratios))if(r.aspect_ratios.length){const{min_width:e,min_height:t}=r.aspect_ratios[0];isInteger(e)&&isInteger(t)?(a.img.wmin=e,a.img.hmin=t):logWarn(`${LOG_WARN_PREFIX}: image.aspect_ratios min_width or min_height are invalid: ${e}, ${t}`);const i=r.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));i.length>0&&(a.img.ext={aspectratios:i})}else logWarn(`${LOG_WARN_PREFIX}: image.aspect_ratios was passed, but it's empty: ${r.aspect_ratios}`);else logWarn(`${LOG_WARN_PREFIX}: image.aspect_ratios was passed, but it's not a an array: ${r.aspect_ratios}`);a.img.w=r.w||r.width,a.img.h=r.h||r.height,a.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:UNDEFINED),a.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:UNDEFINED),r.sizes&&(2===r.sizes.length&&isInteger(r.sizes[0])&&isInteger(r.sizes[1])?(logInfo(`${LOG_WARN_PREFIX}: if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin`),a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):logWarn(`${LOG_WARN_PREFIX}: image.sizes was passed, but its value is not an array of integers: ${r.sizes}`)),r.ext&&(a.img.ext=r.ext),r.mimes&&(a.img.mimes=r.mimes)}else"title"===i?(a.title={len:r.len||r.length||140},r.ext&&(a.title.ext=r.ext)):"ext"===i&&(a.ext=r,delete a.required);t.assets.push(a)}return t.assets.length<1?(logWarn(`${LOG_WARN_PREFIX}: Could not find any valid asset`),void(isInvalidNativeRequest=!0)):t}function _createNativeRequest(e){var t;if(e.ortb){e=e.ortb,t={ver:"1.2",...e,assets:[]};const{assets:i}=e,r=e=>e.title||e.img||e.data||e.video;if(i.length<1||!i.some((e=>r(e))))return logWarn(`${LOG_WARN_PREFIX}: Native assets object is empty or contains some invalid object`),isInvalidNativeRequest=!0,t;i.forEach((e=>{var i=e;i.img&&(i.img.type==NATIVE_ASSET_IMAGE_TYPE.IMAGE?(i.w=i.w||i.width||(i.sizes?i.sizes[0]:UNDEFINED),i.h=i.h||i.height||(i.sizes?i.sizes[1]:UNDEFINED),i.wmin=i.wmin||i.minimumWidth||(i.minsizes?i.minsizes[0]:UNDEFINED),i.hmin=i.hmin||i.minimumHeight||(i.minsizes?i.minsizes[1]:UNDEFINED)):i.img.type==NATIVE_ASSET_IMAGE_TYPE.ICON&&(i.w=i.w||i.width||(i.sizes?i.sizes[0]:UNDEFINED),i.h=i.h||i.height||(i.sizes?i.sizes[1]:UNDEFINED))),i&&void 0!==i.id&&r(i)&&t.assets.push(i)}))}else t=toOrtbNativeRequest(e);return t}function _createBannerRequest(e){var t,i=e.mediaTypes.banner.sizes,r=[];if(i!==UNDEFINED&&isArray(i)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===i.length)return t=UNDEFINED,logWarn(LOG_WARN_PREFIX+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(i[0][0],10),t.h=parseInt(i[0][1],10),i=i.splice(1,i.length-1)}i.length>0&&(r=[],i.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=inIframe()?0:1}else logWarn(LOG_WARN_PREFIX+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=UNDEFINED;return t}function checkVideoPlacement(e,t){dlv(e,"placement")||logWarn(MSG_VIDEO_PLACEMENT_MISSING+" for "+t)}function _createVideoRequest(e){var t,i=mergeDeep(dlv(e.mediaTypes,"video"),e.params.video);if(i!==UNDEFINED){for(var r in t={},checkVideoPlacement(i,e.adUnitCode),VIDEO_CUSTOM_PARAMS)i.hasOwnProperty(r)&&(t[r]=_checkParamDataType(r,i[r],VIDEO_CUSTOM_PARAMS[r]));isArray(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):isNumber(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=UNDEFINED,logWarn(LOG_WARN_PREFIX+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function _addPMPDealsInImpression(e,t){t.params.deals&&(isArray(t.params.deals)?t.params.deals.forEach((function(t){isStr(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):logWarn(LOG_WARN_PREFIX+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):logWarn(LOG_WARN_PREFIX+"Error: bid.params.deals should be an array of strings."))}function _addDealCustomTargetings(e,t){var i,r="";if(t.params.dctr)if(isStr(r=t.params.dctr)&&r.length>0){var n=r.split("|");r="",n.forEach((e=>{r+=e.length>0?e.trim()+"|":""})),i=r.length,"|"===r.substring(i,i-1)&&(r=r.substring(0,i-1)),e.ext.key_val=r.trim()}else logWarn(LOG_WARN_PREFIX+"Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}function _addJWPlayerSegmentData(e,t){var i=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==i&&""!==i&&i.hasOwnProperty("segments")){var n,a=i.segments.length;r+="jw-id="+i.content.id;for(var o=0;o<a;o++)r+="|jw-"+i.segments[o]+"=1";(n=e.ext)&&void 0===n.key_val?n.key_val=r:n.key_val+="|"+r}}function _createImpressionObject(e,t){var i,r,n={},a={},o=e.hasOwnProperty("sizes")?e.sizes:[],s="",d=[],l=null==t?void 0:t.fledgeEnabled;if(_addPMPDealsInImpression(n={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:_parseSlotParam("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:_parseSlotParam("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?_parseSlotParam("currency",e.params.currency):DEFAULT_CURRENCY},e),_addDealCustomTargetings(n,e),_addJWPlayerSegmentData(n,e),e.hasOwnProperty("mediaTypes"))for(s in e.mediaTypes)switch(s){case BANNER:(i=_createBannerRequest(e))!==UNDEFINED&&(n.banner=i);break;case NATIVE$1:a.request=JSON.stringify(_createNativeRequest(e.nativeParams)),isInvalidNativeRequest?(logWarn(LOG_WARN_PREFIX+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to "+PREBID_NATIVE_HELP_LINK+" for more details."),isInvalidNativeRequest=!1):n.native=a;break;case VIDEO:(r=_createVideoRequest(e))!==UNDEFINED&&(n.video=r)}else i={pos:0,w:e.params.width,h:e.params.height,topframe:inIframe()?0:1},isArray(o)&&o.length>1&&((o=o.splice(1,o.length-1)).forEach((e=>{d.push({w:e[0],h:e[1]})})),i.format=d),n.banner=i;return _addImpressionFPD(n,e),_addFloorFromFloorModule(n,e),_addFledgeflag(n,e,l),n.hasOwnProperty(BANNER)||n.hasOwnProperty(NATIVE$1)||n.hasOwnProperty(VIDEO)?n:UNDEFINED}function _addFledgeflag(e,t,i){var r,n,a;i?(e.ext=e.ext||{},void 0!==(null==(n=null==(r=null==t?void 0:t.ortb2Imp)?void 0:r.ext)?void 0:n.ae)&&(e.ext.ae=t.ortb2Imp.ext.ae)):(null==(a=e.ext)?void 0:a.ae)&&delete e.ext.ae}function _addImpressionFPD(e,t){const i={...dlv(t,"ortb2Imp.ext.data")};Object.keys(i).forEach((t=>{"pbadslot"===t?"string"==typeof i[t]&&i[t]&&dset(e,"ext.data.pbadslot",i[t]):"adserver"===t?["name","adslot"].forEach((t=>{const r=dlv(i,`adserver.${t}`);"string"==typeof r&&r&&(dset(e,`ext.data.adserver.${t.toLowerCase()}`,r),"adslot"===t&&dset(e,"ext.dfp_ad_unit_code",r))})):dset(e,`ext.data.${t}`,i[t])}));const r=dlv(t,"ortb2Imp.ext.gpid");r&&dset(e,"ext.gpid",r)}function _addFloorFromFloorModule(e,t){let i=-1;"function"!=typeof t.getFloor||config.getConfig("pubmatic.disableFloors")||[BANNER,VIDEO,NATIVE$1].forEach((r=>{if(e.hasOwnProperty(r)){let n=[];"banner"===r&&(e[r].w&&e[r].h&&n.push([e[r].w,e[r].h]),isArray(e[r].format)&&e[r].format.forEach((e=>n.push([e.w,e.h])))),0===n.length&&n.push("*"),n.forEach((n=>{let a=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:n});if(logInfo(LOG_WARN_PREFIX,"floor from floor module returned for mediatype:",r," and size:",n," is: currency",a.currency,"floor",a.floor),"object"==typeof a&&a.currency===e.bidfloorcur&&!isNaN(parseInt(a.floor))){let e=parseFloat(a.floor);logInfo(LOG_WARN_PREFIX,"floor from floor module:",e,"previous floor value",i,"Min:",Math.min(e,i)),i=-1===i?e:Math.min(e,i),logInfo(LOG_WARN_PREFIX,"new floor value:",i)}}))}})),e.bidfloor&&(logInfo(LOG_WARN_PREFIX,"floor from floor module:",i,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(i,e.bidfloor)),i=Math.max(i,e.bidfloor)),e.bidfloor=!isNaN(i)&&i>0?i:UNDEFINED,logInfo(LOG_WARN_PREFIX,"new impObj.bidfloor value:",e.bidfloor)}function _handleEids(e,t){let i=dlv(t,"0.userIdAsEids");isArray(i)&&i.length>0&&dset(e,"user.eids",i)}function _checkMediaType(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=MEDIATYPE[e.ext.bidtype];else{logInfo(LOG_WARN_PREFIX+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var i=e.adm,r="",n=new RegExp(/VAST\s+version/);if(i.indexOf('span class="PubAPIAd"')>=0)t.mediaType=BANNER;else if(n.test(i))t.mediaType=VIDEO;else try{(r=JSON.parse(i.replace(/\\/g,"")))&&r.native&&(t.mediaType=NATIVE$1)}catch(a){logWarn(LOG_WARN_PREFIX+"Error: Cannot parse native reponse for ad response: "+i)}}}function _parseNativeResponse(e,t){if(e.hasOwnProperty("adm")){var i="";try{i=JSON.parse(e.adm.replace(/\\/g,""))}catch(r){return void logWarn(LOG_WARN_PREFIX+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:{...i.native}},t.mediaType=NATIVE$1,t.width||(t.width=DEFAULT_WIDTH),t.height||(t.height=DEFAULT_HEIGHT)}}function _blockedIabCategoriesValidation(e,t){(t=t.filter((function(e){return"string"==typeof e||(logWarn(LOG_WARN_PREFIX+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((e=>e.trim())).filter((function(e,t,i){if(e.length>3)return i.indexOf(e)===t;logWarn(LOG_WARN_PREFIX+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(logWarn(LOG_WARN_PREFIX+"bcat: Selected: ",t),e.bcat=t)}function _allowedIabCategoriesValidation(e,t){(t=t.filter((function(e){return"string"==typeof e||(logWarn(LOG_WARN_PREFIX+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((e=>e.trim())).filter(((e,t,i)=>i.indexOf(e)===t))).length>0&&(logWarn(LOG_WARN_PREFIX+"acat: Selected: ",t),e.ext.acat=t)}function _assignRenderer(e,t){let i,r,n;if(t.bidderRequest&&t.bidderRequest.bids){for(let a=0;a<t.bidderRequest.bids.length;a++)t.bidderRequest.bids[a].bidId===e.requestId&&(i=t.bidderRequest.bids[a].params,r=t.bidderRequest.bids[a].mediaTypes[VIDEO].context,n=t.bidderRequest.bids[a].adUnitCode);r&&"outstream"===r&&i&&i.outstreamAU&&n&&(e.rendererCode=i.outstreamAU,e.renderer=BB_RENDERER.newRenderer(e.rendererCode,n))}}function assignDealTier(e,t,i){var r,n,a;if(!(null==(r=null==t?void 0:t.ext)?void 0:r.prebiddealpriority))return;const o=dlv(getBidRequest$1(e.requestId,[i.bidderRequest]),"mediaTypes.video");if((null==o?void 0:o.context)!=ADPOD)return;const s=(null==(a=null==(n=null==t?void 0:t.ext)?void 0:n.video)?void 0:a.duration)||(null==o?void 0:o.maxduration);e.video={context:ADPOD,durationSeconds:s,dealTier:t.ext.prebiddealpriority}}function isNonEmptyArray(e){return!0===isArray(e)&&e.length>0}function prepareMetaObject(e,t,i){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);const r=i||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&isNonEmptyArray(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&isNonEmptyArray(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0]),t.ext&&t.ext.dsa&&Object.keys(t.ext.dsa).length&&(e.meta.dsa=t.ext.dsa)}const spec$8={code:BIDDER_CODE$7,gvlid:76,supportedMediaTypes:[BANNER,VIDEO,NATIVE$1],isBidRequestValid:e=>{if(e&&e.params){if(!isStr(e.params.publisherId))return logWarn(LOG_WARN_PREFIX+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(VIDEO)){let t=dlv(e.mediaTypes,"video.mimes"),i=dlv(e,"params.video.mimes");if(!1===isNonEmptyArray(t)&&!1===isNonEmptyArray(i))return logWarn(LOG_WARN_PREFIX+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[VIDEO].hasOwnProperty("context"))return logError(`${LOG_WARN_PREFIX}: no context specified in bid. Rejecting bid: `,e),!1;if("outstream"===e.mediaTypes[VIDEO].context&&!isStr(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[VIDEO].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(BANNER)||e.mediaTypes.hasOwnProperty(NATIVE$1)?(delete e.mediaTypes[VIDEO],logWarn(`${LOG_WARN_PREFIX}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: `,e),!0):(logError(`${LOG_WARN_PREFIX}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: `,e),!1)}return!0}return!1},buildRequests:(e,t)=>{var i,r,n,a,o,s,d,l,c,p,u,m,g,f,b,h;t&&t.refererInfo&&(h=t.refererInfo);var y,v=_initConf(h),I=_createOrtbTemplate(v),E="",A=[],_=[],T=[],S=generateUUID();if(e.forEach((e=>{var i,r;if(e.params.wiid=e.params.wiid||t.auctionId||S,(y=deepClone(e)).params.adSlot=y.params.adSlot||"",_parseAdSlot(y),y.mediaTypes&&y.mediaTypes.hasOwnProperty("video")||y.params.hasOwnProperty("video"));else if(!(y.hasOwnProperty("mediaTypes")&&y.mediaTypes.hasOwnProperty(NATIVE$1)||0!==y.params.width||0!==y.params.height))return void logWarn(LOG_WARN_PREFIX+"Skipping the non-standard adslot: ",y.params.adSlot,JSON.stringify(y));v.pubId=v.pubId||y.params.publisherId,(v=_handleCustomParams(y.params,v)).transactionId=null==(r=null==(i=y.ortb2Imp)?void 0:i.ext)?void 0:r.tid,""===E?E=y.params.currency||UNDEFINED:y.params.hasOwnProperty("currency")&&E!==y.params.currency&&logWarn(LOG_WARN_PREFIX+"Currency specifier ignored. Only one currency permitted."),y.params.currency=E,y.params.hasOwnProperty("dctr")&&isStr(y.params.dctr)&&A.push(y.params.dctr),y.params.hasOwnProperty("bcat")&&isArray(y.params.bcat)&&(_=_.concat(y.params.bcat)),y.params.hasOwnProperty("acat")&&isArray(y.params.acat)&&(T=T.concat(y.params.acat));var n=_createImpressionObject(y,t);n&&I.imp.push(n)})),0==I.imp.length)return;I.site.publisher.id=v.pubId.trim(),publisherId=v.pubId.trim(),I.ext.wrapper={},I.ext.wrapper.profile=parseInt(v.profId)||UNDEFINED,I.ext.wrapper.version=parseInt(v.verId)||UNDEFINED,I.ext.wrapper.wiid=v.wiid||t.auctionId,I.ext.wrapper.wv="prebid_prebid_8.47.0",I.ext.wrapper.transactionId=v.transactionId,I.ext.wrapper.wp="pbjs";const R=t?bidderSettings.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==R){if(I.ext.marketplace={},t&&1==R){let e=bidderSettings.get(t.bidderCode,"allowedAlternateBidderCodes");isArray(e)?(e=e.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(uniques),biddersList=e.includes("*")?allBiddersList:[...biddersList,...e]):biddersList=allBiddersList}I.ext.marketplace.allowedbidders=biddersList.filter(uniques)}I.user.gender=v.gender?v.gender.trim():UNDEFINED,I.user.geo={},I.user.yob=_parseSlotParam("yob",v.yob),I.site.page=v.kadpageurl.trim()||I.site.page.trim(),I.site.domain=_getDomainFromURL(I.site.page),"object"==typeof config.getConfig("content")&&(I.site.content=config.getConfig("content")),"object"==typeof config.getConfig("device")&&(I.device=Object.assign(I.device,config.getConfig("device"))),I.device.language=I.device.language&&I.device.language.split("-")[0],dset(I,"source.tid",null==(r=null==(i=null==t?void 0:t.ortb2)?void 0:i.source)?void 0:r.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(I.test=1),e[0].schain&&dset(I,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(dset(I,"user.ext.consent",t.gdprConsent.consentString),dset(I,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&dset(I,"regs.ext.us_privacy",t.uspConsent),(null==(n=null==t?void 0:t.gppConsent)?void 0:n.gppString)?(dset(I,"regs.gpp",t.gppConsent.gppString),dset(I,"regs.gpp_sid",t.gppConsent.applicableSections)):(null==(o=null==(a=null==t?void 0:t.ortb2)?void 0:a.regs)?void 0:o.gpp)&&(dset(I,"regs.gpp",t.ortb2.regs.gpp),dset(I,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===config.getConfig("coppa")&&dset(I,"regs.coppa",1),(null==(l=null==(d=null==(s=null==t?void 0:t.ortb2)?void 0:s.regs)?void 0:d.ext)?void 0:l.dsa)&&dset(I,"regs.ext.dsa",t.ortb2.regs.ext.dsa),_handleEids(I,e);const C=t&&t.ortb2||{},{user:w,device:N,site:O,bcat:D,badv:P}=C;if(O){const{page:e,domain:t,ref:i}=I.site;mergeDeep(I,{site:O}),I.site.page=e,I.site.domain=t,I.site.ref=i}if(w&&mergeDeep(I,{user:w}),P&&mergeDeep(I,{badv:P}),D&&(_=_.concat(D)),(null==N?void 0:N.sua)&&(I.device.sua=null==N?void 0:N.sua),(null==(c=null==N?void 0:N.ext)?void 0:c.cdep)&&dset(I,"device.ext.cdep",N.ext.cdep),(null==w?void 0:w.geo)&&(null==N?void 0:N.geo)?(I.device.geo={...I.device.geo,...N.geo},I.user.geo={...I.user.geo,...w.geo}):((null==w?void 0:w.geo)||(null==N?void 0:N.geo))&&(I.user.geo=I.device.geo=(null==w?void 0:w.geo)?{...I.user.geo,...w.geo}:{...I.user.geo,...N.geo}),null==(g=null==(m=null==(u=null==(p=C.ext)?void 0:p.prebid)?void 0:u.bidderparams)?void 0:m[t.bidderCode])?void 0:g.acat){const e=C.ext.prebid.bidderparams[t.bidderCode].acat;_allowedIabCategoriesValidation(I,e)}else T.length&&_allowedIabCategoriesValidation(I,T);return _blockedIabCategoriesValidation(I,_),(null==t?void 0:t.timeout)?I.tmax=t.timeout:I.tmax=null==(b=null==(f=null==window?void 0:window.PWT)?void 0:f.versionDetails)?void 0:b.timeout,I.ext.epoch=(new Date).getTime(),"object"==typeof config.getConfig("app")&&(I.app=config.getConfig("app"),I.app.publisher=I.site.publisher,I.app.ext=I.site.ext||UNDEFINED,"object"!=typeof I.app.content&&(I.app.content=I.site.content||UNDEFINED),delete I.site),{method:"POST",url:ENDPOINT$1,data:JSON.stringify(I),bidderRequest:t}},interpretResponse:(e,t)=>{const i=[];var r=DEFAULT_CURRENCY;let n=JSON.parse(t.data),a=n.site&&n.site.ref?n.site.ref:"";try{e.body&&e.body.seatbid&&isArray(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((e=>{e.bid&&isArray(e.bid)&&e.bid.forEach((o=>{let s={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:r,netRevenue:NET_REVENUE,ttl:300,referrer:a,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};n.imp&&n.imp.length>0&&n.imp.forEach((e=>{if(o.impid===e.id)switch(_checkMediaType(o,s),s.mediaType){case BANNER:break;case VIDEO:s.width=o.hasOwnProperty("w")?o.w:e.video.w,s.height=o.hasOwnProperty("h")?o.h:e.video.h,s.vastXml=o.adm,_assignRenderer(s,t),assignDealTier(s,o,t);break;case NATIVE$1:_parseNativeResponse(o,s)}})),o.ext&&o.ext.deal_channel&&(s.dealChannel=dealChannelValues[o.ext.deal_channel]||null),prepareMetaObject(s,o,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(s.bidderCode=o.ext.marketplace),i.push(s)}))})));let o=dlv(e.body,"ext.fledge_auction_configs");if(o)return o=Object.entries(o).map((([e,t])=>({bidId:e,config:Object.assign({auctionSignals:{}},t)}))),{bids:i,fledgeAuctionConfigs:o}}catch(o){logError(o)}return i},getUserSyncs:(e,t,i,r,n)=>{var a,o;let s=""+publisherId;return i&&(s+="&gdpr="+(i.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(i.consentString||"")),r&&(s+="&us_privacy="+encodeURIComponent(r)),(null==n?void 0:n.gppString)&&(null==(a=null==n?void 0:n.applicableSections)?void 0:a.length)&&(s+="&gpp="+encodeURIComponent(n.gppString),s+="&gpp_sid="+encodeURIComponent(null==(o=null==n?void 0:n.applicableSections)?void 0:o.join(","))),!0===config.getConfig("coppa")&&(s+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:USER_SYNC_URL_IFRAME$1+s}]:[{type:"image",url:USER_SYNC_URL_IMAGE+s}]}};registerBidder(spec$8);const SUPPORTED_MEDIA_TYPES={[BANNER]:"banner",[NATIVE$1]:"native",[VIDEO]:"video"};function extPrebidMediaType(e,t,i){var r,n;let a=i.mediaType;a||(a=ORTB_MTYPES.hasOwnProperty(t.mtype)?ORTB_MTYPES[t.mtype]:null==(n=null==(r=t.ext)?void 0:r.prebid)?void 0:n.type,SUPPORTED_MEDIA_TYPES.hasOwnProperty(a)||(a=BANNER)),e.mediaType=a}function setRequestExtPrebidAliases(e,t,i,{am:r=adaptermanager}={}){if(r.aliasRegistry[t.bidderCode]){const i=r.bidderRegistry[t.bidderCode];i&&i.getSpec().skipPbsAliasing||dset(e,`ext.prebid.aliases.${t.bidderCode}`,r.aliasRegistry[t.bidderCode])}}function setImpBidParams(e,t,i,{adUnit:r,bidderRequests:n,index:a=auctionManager$1.index,bidderRegistry:o=adaptermanager.bidderRegistry}={}){let s=t.params;const d=o[t.bidder];d&&d.getSpec().transformBidParams&&(r=r||a.getAdUnit(t),n=n||[i.bidderRequest],s=d.getSpec().transformBidParams(s,!0,r,n)),s&&dset(e,`ext.prebid.bidder.${t.bidder}`,s)}function setImpAdUnitCode(e,t){const i=t.adUnitCode;i&&dset(e,"ext.prebid.adunitcode",i)}function setRequestExtPrebid(e,t){var i;dset(e,"ext.prebid",mergeDeep({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null==(i=e.ext)?void 0:i.prebid)),config.getConfig("debug")&&(e.ext.prebid.debug=!0)}function setRequestExtPrebidChannel(e){var t,i;dset(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:getGlobal().version},null==(i=null==(t=e.ext)?void 0:t.prebid)?void 0:i.channel))}function setBidResponseVideoCache(e,t){if(e.mediaType===VIDEO){let{cacheId:i,url:r}=dlv(t,"ext.prebid.cache.vastXml")||{};if(!i||!r){const{hb_uuid:e,hb_cache_host:n,hb_cache_path:a}=dlv(t,"ext.prebid.targeting")||{};e&&n&&a&&(i=e,r=`https://${n}${a}?uuid=${e}`)}i&&r&&Object.assign(e,{videoCacheKey:i,vastUrl:r})}}const PBS_PROCESSORS={[REQUEST$1]:{extPrebid:{fn:setRequestExtPrebid},extPrebidChannel:{fn:setRequestExtPrebidChannel},extPrebidAliases:{fn:setRequestExtPrebidAliases}},[IMP]:{params:{fn:setImpBidParams},adUnitCode:{fn:setImpAdUnitCode}},[BID_RESPONSE]:{mediaType:{fn:extPrebidMediaType,priority:99},videoCache:{fn:setBidResponseVideoCache,priority:-10},bidderCode:{fn(e,t,i){var r;e.bidderCode=i.seatbid.seat,e.adapterCode=dlv(t,"ext.prebid.meta.adaptercode")||(null==(r=i.bidRequest)?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn(e,t){const i=dlv(t,"ext.prebid.bidid");isStr(i)&&(e.pbsBidId=i)}},adserverTargeting:{fn(e,t){const i=dlv(t,"ext.prebid.targeting");isPlainObject(i)&&(e.adserverTargeting=i)}},extPrebidMeta:{fn(e,t){e.meta=mergeDeep({},dlv(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn(e,t){const i=dlv(t,"ext.prebid.events.win");isStr(i)&&(e.pbsWurl=i)}}},[RESPONSE$1]:{serverSideStats:{fn(e,t,i){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((([e,r])=>{const n=dlv(t,`ext.${e}.${i.bidderRequest.bidderCode}`);n&&(i.bidderRequest[r]=n,i.bidRequests.forEach((e=>e[r]=n)))}))}}}},pbsExtensions=memoize((()=>mergeProcessors(defaultProcessors(),PBS_PROCESSORS,getProcessors(PBS)))),DEFAULT_INTEGRATION="pbjs_lite",DEFAULT_PBS_INTEGRATION="pbjs",DEFAULT_RENDERER_URL="https://video-outstream.rubiconproject.com/apex-2.2.1.js";let rubiConf=config.getConfig("rubicon")||{};config.getConfig("rubicon",(e=>{mergeDeep(rubiConf,e.rubicon)}));const GVLID$1=52;var sizeMap={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};_each(sizeMap,((e,t)=>sizeMap[e]=t));const converter=ortbConverter({request(e,t,i,r){var n,a;const{bidRequests:o}=r,s=e(t,i,r);s.cur=["USD"],s.test=config.getConfig("debug")?1:0,dset(s,"ext.prebid.cache",{vastxml:{returnCreative:!0===rubiConf.returnVast}}),dset(s,"ext.prebid.bidders",{rubicon:{integration:rubiConf.int_type||DEFAULT_PBS_INTEGRATION}}),dset(s,"ext.prebid.targeting.pricegranularity",getPriceGranularity(config));let d=getGlobal().installedModules;return!d||d.length&&-1===d.indexOf("rubiconAnalyticsAdapter")||dset(s,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),addOrtbFirstPartyData(s,o,i.ortb2),null==(a=null==(n=null==s?void 0:s.ext)?void 0:n.prebid)||delete a.storedrequest,!0===rubiConf.disableFloors&&delete s.ext.prebid.floors,o.filter((e=>"object"==typeof e.floorData)).length>0&&(s.ext.prebid.floors={enabled:!1}),s},imp(e,t,i){var r,n;const a=bidType(t);if(a.includes(BANNER)&&1==a.length)return;const o=e(t,i);return o.id=t.adUnitCode,delete o.banner,"atf"===t.params.position&&o.video&&(o.video.pos=1),"btf"===t.params.position&&o.video&&(o.video.pos=3),null==(n=null==(r=o.ext)?void 0:r.prebid)||delete n.storedrequest,!0===t.params.bidonmultiformat&&a.length>1&&dset(o,"ext.prebid.bidder.rubicon.formats",a),setBidFloors(t,o),o},bidResponse(e,t,i){var r;const n=e(t,i);n.meta.mediaType=dlv(t,"ext.prebid.type");const{bidRequest:a}=i;let[o,s]="outstream"===(null==(r=a.mediaTypes.video)?void 0:r.context)?parseSizes(a,VIDEO):[void 0,void 0];return n.width=t.w||o||n.playerWidth,n.height=t.h||s||n.playerHeight,n.mediaType===VIDEO&&"outstream"===a.mediaTypes.video.context&&(n.renderer=outstreamRenderer(n)),dlv(t,"ext.bidder.rp.advid")&&dset(n,"meta.advertiserId",t.ext.bidder.rp.advid),n},context:{netRevenue:!1!==rubiConf.netRevenue,ttl:360},processors:pbsExtensions}),spec$7={code:"rubicon",gvlid:GVLID$1,supportedMediaTypes:[BANNER,VIDEO,NATIVE$1],isBidRequestValid:function(e){let t=!0;if("object"!=typeof e.params)return!1;for(let n=0,a=["accountId","siteId","zoneId"];n<a.length;n++)if(e.params[a[n]]=parseInt(e.params[a[n]]),isNaN(e.params[a[n]]))return logError("Rubicon: wrong format of accountId or siteId or zoneId."),!1;let i=bidType(e,!0);if(!i.length)return!1;i.includes(VIDEO)&&(t=hasValidVideoParams(e));const r=[BANNER,NATIVE$1].filter((e=>i.includes(e))).length>0;return r?t&&r:t},buildRequests:function(e,t){let i,r=[],n=[];if(i=e.filter((e=>{const t=bidType(e)||[],{length:i}=t,{bidonmultiformat:r,video:n}=e.params||{};return 1===i&&(t.includes(VIDEO)||t.includes(NATIVE$1))||2===i&&!t.includes(BANNER)||n&&t.includes(VIDEO)||r&&(t.includes(VIDEO)||t.includes(NATIVE$1))})),i&&i.length){const e=converter.toORTB({bidRequests:i,bidderRequest:t});n.push({method:"POST",url:`https://${rubiConf.videoHost||"prebid-server"}.rubiconproject.com/openrtb2/auction`,data:e,bidRequest:i})}const a=e.filter((e=>{const t=bidType(e)||[],{bidonmultiformat:i,video:r}=e.params||{};return t.includes(BANNER)&&(1===t.length||i||!i&&!r||!i&&r&&!t.includes(VIDEO))}));if(!0!==rubiConf.singleRequest)r=n.concat(a.map((e=>{const i=spec$7.createSlotParams(e,t);return{method:"GET",url:`https://${rubiConf.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:spec$7.getOrderedParams(i).reduce(((e,t)=>{const r=i[t];return isStr(r)&&""!==r||isNumber(r)?`${e}${encodeParam(t,r)}&`:e}),"")+`slots=1&rand=${Math.random()}`,bidRequest:e}})));else{const e=a.reduce(((e,t)=>((e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e)),{}),i=10;r=n.concat(Object.keys(e).reduce(((r,n)=>(partitionArray(e[n],i).forEach((e=>{const i=spec$7.combineSlotUrlParams(e.map((e=>spec$7.createSlotParams(e,t))));r.push({method:"GET",url:`https://${rubiConf.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:spec$7.getOrderedParams(i).reduce(((e,t)=>{const r=i[t];return isStr(r)&&""!==r||isNumber(r)?`${e}${encodeParam(t,r)}&`:e}),"")+`slots=${e.length}&rand=${Math.random()}`,bidRequest:e})})),r)),[]))}return r},getOrderedParams:function(e){const t=/^tg_v/,i=/^tg_i/,r=/^eid_|^tpid_/,n=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((e=>r.test(e)))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((e=>t.test(e)))).concat(Object.keys(e).filter((e=>i.test(e)))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return n.concat(Object.keys(e).filter((e=>-1===n.indexOf(e))))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];const t=e.reduce((function(t,i,r){return Object.keys(i).forEach((function(n){t.hasOwnProperty(n)||(t[n]=new Array(e.length)),t[n].splice(r,1,i[n])})),t}),{}),i=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){const r=t[e].join(";"),n=r.match(i);t[e]=n?n[1]:r})),t},createSlotParams:function(e,t){var i,r,n,a,o,s,d,l,c,p,u,m;e.startTime=(new Date).getTime();const g=e.params,f=parseSizes(e,"banner"),[b,h]=g.latLong||[],y={account_id:g.accountId,site_id:g.siteId,zone_id:g.zoneId,size_id:f[0],alt_size_ids:f.slice(1).join(",")||void 0,rp_floor:(g.floor=parseFloat(g.floor))>=.01?g.floor:void 0,rp_secure:"1",tk_flint:`${rubiConf.int_type||DEFAULT_INTEGRATION}_v8.47.0`,"x_source.tid":null==(r=null==(i=t.ortb2)?void 0:i.source)?void 0:r.tid,"x_imp.ext.tid":null==(a=null==(n=e.ortb2Imp)?void 0:n.ext)?void 0:a.tid,l_pb_bid_id:e.bidId,o_cdep:null==(d=null==(s=null==(o=e.ortb2)?void 0:o.device)?void 0:s.ext)?void 0:d.cdep,p_screen_res:_getScreenResolution(),tk_user_key:g.userId,"p_geo.latitude":isNaN(parseFloat(b))?void 0:parseFloat(b).toFixed(4),"p_geo.longitude":isNaN(parseFloat(h))?void 0:parseFloat(h).toFixed(4),"tg_fl.eid":e.code,rf:_getPageUrl(e,t)};if("function"==typeof e.getFloor&&!rubiConf.disableFloors){let t;try{t=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(E){logError("Rubicon: getFloor threw an error: ",E)}y.rp_hard_floor="object"!=typeof t||"USD"!==t.currency||isNaN(parseInt(t.floor))?void 0:t.floor}!0===g.bidonmultiformat&&dlv(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(y.p_formats=Object.keys(e.mediaTypes).join(","));let v={1:"atf",3:"btf"}[dlv(e,"mediaTypes.banner.pos")]||"";y.p_pos="atf"===g.position||"btf"===g.position?g.position:v;const I=config.getConfig("user.id");return I&&(y.ppuid=I),(null==(c=null==(l=null==e?void 0:e.ortb2Imp)?void 0:l.ext)?void 0:c.ae)&&(y.o_ae=1),addDesiredSegtaxes(t,y),e.userIdAsEids&&e.userIdAsEids.forEach((e=>{try{if("adserver.org"===e.source)y.tpid_tdid=e.uids[0].id,y["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)y["tpid_liveintent.com"]=e.uids[0].id,y["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(y["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)y.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)y["eid_id5-sync.com"]=`${e.uids[0].id}^${e.uids[0].atype}^${e.uids[0].ext&&e.uids[0].ext.linkType||""}`;else{const t="rubiconproject.com"===e.source?e.uids[0].id:`${e.uids[0].id}^${e.uids[0].atype||""}`;y[`eid_${e.source}`]=t}if(!y.ppuid){const t=find(e.uids,(e=>e.ext&&"ppuid"===e.ext.stype));t&&t.id&&(y.ppuid=t.id)}}catch(E){logWarn("Rubicon: error reading eid:",e,E)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(y.gdpr=Number(t.gdprConsent.gdprApplies)),y.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(y.us_privacy=encodeURIComponent(t.uspConsent)),(null==(p=t.gppConsent)?void 0:p.gppString)&&(y.gpp=t.gppConsent.gppString,y.gpp_sid=null==(m=null==(u=t.gppConsent)?void 0:u.applicableSections)?void 0:m.toString()),y.rp_maxbids=t.bidLimit||1,applyFPD(e,BANNER,y),!0===config.getConfig("coppa")&&(y.coppa=1),e.schain&&hasValidSupplyChainParams(e.schain)&&(y.rp_schain=spec$7.serializeSupplyChain(e.schain)),y},serializeSupplyChain:function(e){if(!hasValidSupplyChainParams(e))return"";const{ver:t,complete:i,nodes:r}=e;return`${t},${i}!${spec$7.serializeSupplyChainNodes(r)}`},serializeSupplyChainNodes:function(e){const t=["asi","sid","hp","rid","name","domain"];return e.map((e=>t.map((t=>encodeURIComponent(e[t]||""))).join(","))).join("!")},interpretResponse:function(e,t){var i;e=e.body;const{data:r}=t;if(!e||"object"!=typeof e)return[];if(e.seatbid){const t=dlv(e,"ext.errors.rubicon");return Array.isArray(t)&&t.length>0&&logWarn("Rubicon: Error in video response"),converter.fromORTB({request:r,response:e}).bids}let n,a=e.ads,o=0;const{bidRequest:s}=t;if("object"==typeof s&&!Array.isArray(s)&&bidType(s).includes(VIDEO)&&"object"==typeof a&&(a=a[s.adUnitCode]),!Array.isArray(a)||a.length<1)return[];let d=a.reduce(((t,i,r)=>{if(i.impression_id&&n===i.impression_id?o++:n=i.impression_id,"ok"!==i.status)return t;const a=Array.isArray(s)?s[r-o]:s;if(a&&"object"==typeof a){let e={requestId:a.bidId,currency:"USD",creativeId:i.creative_id||`${i.network||""}-${i.advertiser||""}`,cpm:i.cpm||0,dealId:i.deal,ttl:360,netRevenue:!1!==rubiConf.netRevenue,rubicon:{advertiserId:i.advertiser,networkId:i.network},meta:{advertiserId:i.advertiser,networkId:i.network,mediaType:BANNER}};i.creative_type&&(e.mediaType=i.creative_type),i.dsa&&Object.keys(i.dsa).length&&(e.meta.dsa=i.dsa),i.adomain&&(e.meta.advertiserDomains=Array.isArray(i.adomain)?i.adomain:[i.adomain]),i.creative_type===VIDEO?(e.width=a.params.video.playerWidth,e.height=a.params.video.playerHeight,e.vastUrl=i.creative_depot_url,e.impression_id=i.impression_id,e.videoCacheKey=i.impression_id):(e.ad=_renderCreative(i.script,i.impression_id),[e.width,e.height]=sizeMap[i.size_id].split("x").map((e=>Number(e)))),e.rubiconTargeting=(Array.isArray(i.targeting)?i.targeting:[]).reduce(((e,t)=>(e[t.key]=t.values[0],e)),{rpfl_elemid:a.adUnitCode}),t.push(e)}else logError(`Rubicon: bidRequest undefined at index position:${r}`,s,e);return t}),[]).sort(((e,t)=>(t.cpm||0)-(e.cpm||0))),l=null==(i=e.component_auction_config)?void 0:i.map((e=>({config:e,bidId:e.bidId})));return l?{bids:d,fledgeAuctionConfigs:l}:d},getUserSyncs:function(e,t,i,r,n){var a;if(!hasSynced&&e.iframeEnabled){let e={};return i&&("boolean"==typeof i.gdprApplies&&(e.gdpr=Number(i.gdprApplies)),"string"==typeof i.consentString&&(e.gdpr_consent=i.consentString)),r&&(e.us_privacy=encodeURIComponent(r)),(null==n?void 0:n.gppString)&&(e.gpp=n.gppString,e.gpp_sid=null==(a=n.applicableSections)?void 0:a.toString()),e=Object.keys(e).length?`?${formatQS(e)}`:"",hasSynced=!0,{type:"iframe",url:`https://${rubiConf.syncHost||"eus"}.rubiconproject.com/usync.html`+e}}}};function _getScreenResolution(){return[window.screen.width,window.screen.height].join("x")}function _getPageUrl(e,t){let i;return i=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?i.replace(/^http:/i,"https:"):i}function _renderCreative(e,t){return`<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='${t}'>\n<script type='text/javascript'>${e}<\/script>\n</div>\n</body>\n</html>`}function hideGoogleAdsDiv(e){const t=e.querySelector("div[id^='google_ads']");t&&t.style.setProperty("display","none")}function hideSmartAdServerIframe(e){const t=e.querySelector("script[id^='sas_script']"),i=t&&t.nextSibling;i&&"iframe"===i.localName&&i.style.setProperty("display","none")}function renderBid(e){const t=document.getElementById(e.adUnitCode);hideGoogleAdsDiv(t),hideSmartAdServerIframe(t);const i={align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0,...e.renderer.getConfig()};e.renderer.push((()=>{window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:t,align:i.align,position:i.position},closeButton:i.closeButton,label:i.label,collapse:i.collapse})}))}function outstreamRenderer(e){const t=Renderer.install({id:e.adId,url:rubiConf.rendererUrl||DEFAULT_RENDERER_URL,config:rubiConf.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(renderBid)}catch(i){logWarn("Prebid Error calling setRender on renderer",i)}return t}function parseSizes(e,t){let i=e.params;if(t===VIDEO){let t=[];return i.video&&i.video.playerWidth&&i.video.playerHeight?t=[i.video.playerWidth,i.video.playerHeight]:Array.isArray(dlv(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(t=e.sizes[0]),t}let r=[];return Array.isArray(i.sizes)?r=i.sizes:void 0!==dlv(e,"mediaTypes.banner.sizes")?r=mapSizes(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?r=mapSizes(e.sizes):logWarn("Rubicon: no sizes are setup or found"),masSizeOrdering(r)}function applyFPD(e,t,i){const r={user:{ext:{data:{...e.params.visitor}}},site:{ext:{data:{...e.params.inventory}}}};e.params.keywords&&(r.site.keywords=isArray(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);let n=mergeDeep({},e.ortb2||{},r),a=dlv(e.ortb2Imp,"ext")||{},o=dlv(e.ortb2Imp,"ext.data")||{};const s=dlv(e,"ortb2Imp.ext.gpid"),d=dlv(n,"regs.ext.dsa"),l={user:[4],site:[1,2,5,6]},c={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},p=function(e,t,r,n=!0){let a=function(e,t,i){return"data"===t&&Array.isArray(e)?e.filter((e=>e.segment&&dlv(e,"ext.segtax")&&l[i]&&-1!==l[i].indexOf(dlv(e,"ext.segtax")))).map((e=>{let t=e.segment.filter((e=>e.id)).reduce(((e,t)=>(e.push(t.id),e)),[]);if(t.length>0)return t.toString()})).toString():"object"==typeof e&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((e=>{if("object"!=typeof e&&void 0!==e)return e.toString();logWarn("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}(e,r,t),o=c[r]&&n?`${c[r]}`:"data"===r?`${c[t]}iab`:`${c[t]}${r}`;i[o]=i[o]?i[o].concat(",",a):a};if(t===BANNER){["site","user"].forEach((e=>{Object.keys(n[e]).forEach((t=>{"site"===e&&"content"===t&&n[e][t].data?p(n[e][t].data,e,"data"):"ext"!==t?p(n[e][t],e,t):n[e][t].data&&Object.keys(n[e].ext.data).forEach((t=>{p(n[e].ext.data[t],e,t,!1)}))}))})),Object.keys(o).forEach((e=>{"adserver"!==e?p(o[e],"site",e):"gam"===o[e].name&&p(o[e].adslot,name,e)})),s&&(i.p_gpid=s),d&&Object.keys(d).length&&pick(d,["dsainfo",e=>i.dsainfo=e,"dsarequired",e=>i.dsarequired=e,"pubrender",e=>i.dsapubrender=e,"datatopub",e=>i.dsadatatopubs=e,"transparency",e=>{Array.isArray(e)&&e.length&&(i.dsatransparency=e.reduce(((e,t)=>(e&&(e+="~~"),e+`${t.domain}~${t.dsaparams.join("_")}`)),""))}]),i["tg_i.pbadslot"]&&delete i["tg_i.dfp_ad_unit_code"];const e=dlv(n,"device.sua");e&&!1!==rubiConf.chEnabled&&pick(e,["architecture",e=>i.m_ch_arch=e,"bitness",e=>i.m_ch_bitness=e,"browsers",e=>{var t,r;if(!Array.isArray(e))return;const[n,a]=e.reduce(((e,t)=>{var i,r,n;return e[0].push(`"${null==t?void 0:t.brand}"|v="${null==(i=null==t?void 0:t.version)?void 0:i[0]}"`),e[1].push(`"${null==t?void 0:t.brand}"|v="${null==(n=null==(r=null==t?void 0:t.version)?void 0:r.join)?void 0:n.call(r,".")}"`),e}),[[],[]]);i.m_ch_ua=null==(t=null==n?void 0:n.join)?void 0:t.call(n,","),i.m_ch_full_ver=null==(r=null==a?void 0:a.join)?void 0:r.call(a,",")},"mobile",e=>i.m_ch_mobile=`?${e}`,"model",e=>i.m_ch_model=e,"platform",e=>{var t,r;i.m_ch_platform=null==e?void 0:e.brand,i.m_ch_platform_ver=null==(r=null==(t=null==e?void 0:e.version)?void 0:t.join)?void 0:r.call(t,".")}])}else Object.keys(a).length&&mergeDeep(i.imp[0].ext,a),s&&(i.imp[0].ext.gpid=s),mergeDeep(i,n)}function addDesiredSegtaxes(e,t){var i,r,n,a,o,s,d;if(!1===rubiConf.readTopics)return;let l=[1,2,5,6,7,507].concat((null==(i=rubiConf.sendSiteSegtax)?void 0:i.map((e=>Number(e))))||[]),c=[4,508].concat((null==(r=rubiConf.sendUserSegtax)?void 0:r.map((e=>Number(e))))||[]),p=(null==(a=null==(n=e.ortb2)?void 0:n.user)?void 0:a.data)||[],u=(null==(d=null==(s=null==(o=e.ortb2)?void 0:o.site)?void 0:s.content)?void 0:d.data)||[];p.forEach(iterateOverSegmentData(t,"v",c)),u.forEach(iterateOverSegmentData(t,"i",l))}function iterateOverSegmentData(e,t,i){return r=>{var n,a;const o=Number(null==(n=r.ext)?void 0:n.segtax);i.includes(o)&&(e[`tg_${t}.tax${o}`]=null==(a=r.segment)?void 0:a.map((e=>e.id)).join(","))}}function mapSizes(e){return parseSizesInput(e).reduce(((e,t)=>{let i=parseInt(sizeMap[t],10);return i&&e.push(i),e}),[])}function classifiedAsVideo(e){let t=void 0!==dlv(e,`mediaTypes.${VIDEO}`),i=void 0!==dlv(e,`mediaTypes.${BANNER}`),r=void 0!==dlv(e,"params.bidonmultiformat"),n="object"!=typeof dlv(e,"params.video");return!(!t||!r)||(i&&n&&(t=!1),t&&n&&dset(e,"params.video",{}),t)}function bidType(e,t=!1){let i=[];if(classifiedAsVideo(e)){if(-1===["outstream","instream"].indexOf(dlv(e,`mediaTypes.${VIDEO}.context`)))return t&&logError("Rubicon: mediaTypes.video.context must be outstream or instream"),i;if(parseSizes(e,VIDEO).length<2)return t&&logError("Rubicon: could not determine the playerSize of the video"),i;t&&logMessage("Rubicon: making video request for adUnit",e.adUnitCode),i.push(VIDEO)}if(void 0!==dlv(e,`mediaTypes.${NATIVE$1}`)&&i.push(NATIVE$1),void 0!==dlv(e,`mediaTypes.${BANNER}`)){if(0===parseSizes(e,BANNER).length)return t&&logError("Rubicon: could not determine the sizes for banner request"),i;t&&logMessage("Rubicon: making banner request for adUnit",e.adUnitCode),i.push(BANNER)}return i}function masSizeOrdering(e){const t=[15,2,9];return e.sort(((e,i)=>{const r=t.indexOf(e),n=t.indexOf(i);return r>-1||n>-1?-1===r?1:-1===n?-1:r-n:e-i}))}function getPriceGranularity(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}function hasValidVideoParams(e){let t=!0,i=Object.prototype.toString.call([]);var r={mimes:i,protocols:i,linearity:Object.prototype.toString.call(0)};return Object.keys(r).forEach((function(i){Object.prototype.toString.call(dlv(e,"mediaTypes.video."+i))!==r[i]&&(t=!1,logError("Rubicon: mediaTypes.video."+i+" is required and must be of type: "+r[i]))})),t}function hasValidSupplyChainParams(e){let t=!1;const i=["asi","sid","hp"];return e.nodes?(t=e.nodes.reduce(((e,t)=>e?i.every((e=>t.hasOwnProperty(e))):e),!0),t||logError("Rubicon: required schain params missing"),t):t}function encodeParam(e,t){return"rp_schain"===e?`rp_schain=${t}`:`${e}=${encodeURIComponent(t)}`}function partitionArray(e,t){return e.map(((i,r)=>r%t==0?e.slice(r,r+t):null)).filter((e=>e))}var hasSynced=!1;function setBidFloors(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){let i=parseFloat(dlv(e,"params.floor"));isNaN(i)||(t.bidfloor=i,t.bidfloorcur="USD")}}function addOrtbFirstPartyData(e,t,i){var r,n;let a={};const o=getAllOrtbKeywords(i,...t.map((e=>e.params.keywords)));t.forEach((t=>{var i,r,n,o,s;const d={user:{ext:{data:{...t.params.visitor}}},site:{ext:{data:{...t.params.inventory}}}},l=e.imp.find((e=>{var t,i,r,n,a;return null==(a=null==(n=null==(r=null==(i=null==(t=e.ext)?void 0:t.prebid)?void 0:i.bidder)?void 0:r.rubicon)?void 0:n.video)?void 0:a.language}));l&&(d.site.content={language:null==(s=null==(o=null==(n=null==(r=null==(i=l.ext)?void 0:i.prebid)?void 0:r.bidder)?void 0:n.rubicon)?void 0:o.video)?void 0:s.language}),a=mergeDeep(a,t.ortb2||{},d);const c=config.getConfig("user.id");a.user.id=a.user.id||c})),mergeDeep(e,a),o&&o.length&&dset(e,"site.keywords",o.join(",")),null==(n=null==(r=null==e?void 0:e.ext)?void 0:r.prebid)||delete n.storedrequest}registerBidder(spec$7);const BIDDER_CODE$6="seedtag",SEEDTAG_ALIAS="st",SEEDTAG_SSP_ENDPOINT="https://s.seedtag.com/c/hb/bid",SEEDTAG_SSP_ONTIMEOUT_ENDPOINT="https://s.seedtag.com/se/hb/timeout",ALLOWED_DISPLAY_PLACEMENTS=["inScreen","inImage","inArticle","inBanner"],GVLID=157,mediaTypesMap={[BANNER]:"display",[VIDEO]:"video"},deviceConnection={FIXED:"fixed",MOBILE:"mobile",UNKNOWN:"unknown"},getConnectionType=()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{};switch(e.type||e.effectiveType){case"wifi":case"ethernet":return deviceConnection.FIXED;case"cellular":case"wimax":return deviceConnection.MOBILE;default:return/iPad|iPhone|iPod/.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?deviceConnection.UNKNOWN:deviceConnection.FIXED}};function mapMediaType(e){return"display"===e?BANNER:"video"===e?VIDEO:e}function hasVideoMediaType(e){return!!e.mediaTypes&&!!e.mediaTypes.video}function hasBannerMediaType(e){return!!e.mediaTypes&&!!e.mediaTypes.banner}function hasMandatoryDisplayParams(e){const t=e.params;return!!t.publisherId&&!!t.adUnitId&&ALLOWED_DISPLAY_PLACEMENTS.indexOf(t.placement)>-1}function hasMandatoryVideoParams(e){const t=getVideoParams(e);let i=!!e.params.publisherId&&!!e.params.adUnitId&&hasVideoMediaType(e)&&!!t.playerSize&&isArray(t.playerSize)&&t.playerSize.length>0;return"inStream"===e.params.placement?i&&"instream"===t.context:i&&"outstream"===t.context&&hasBannerMediaType(e)&&hasMandatoryDisplayParams(e)}function buildBidRequest(e){var t,i;const r=e.params,n=_map(Object.keys(e.mediaTypes),(function(e){return mediaTypesMap[e]})),a={id:e.bidId,transactionId:null==(i=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:i.tid,sizes:e.sizes,supplyTypes:n,adUnitId:r.adUnitId,adUnitCode:e.adUnitCode,geom:geom(e.adUnitCode),placement:r.placement,requestCount:e.bidderRequestsCount||1};return hasVideoMediaType(e)&&(a.videoParams=getVideoParams(e)),a}function getVideoParams(e){const t=e.mediaTypes.video||{};return t.playerSize&&(t.w=t.playerSize[0][0],t.h=t.playerSize[0][1]),t}function buildBidResponse(e){const t=mapMediaType(e.mediaType),i={requestId:e.bidId,cpm:e.price,width:e.width,height:e.height,creativeId:e.creativeId,currency:e.currency,netRevenue:!0,mediaType:t,ttl:e.ttl,nurl:e.nurl,meta:{advertiserDomains:e&&e.adomain&&e.adomain.length>0?e.adomain:[]}};return t===VIDEO?i.vastXml=e.content:i.ad=e.content,i}function ttfb(){const e=(()=>{try{const e=performance.getEntriesByType("navigation")[0];return Math.round(e.responseStart-e.startTime)}catch(e){try{const e=performance.timing;return Math.round(e.responseStart-e.fetchStart)}catch(t){return 0}}})();return e>=0&&e<=performance.now()?e:0}function geom(e){const t=document.getElementById(e);if(t){const e=window.scrollY,{top:i,left:r,width:n,height:a}=t.getBoundingClientRect();return{scrollY:e,top:i,left:r,width:n,height:a,viewport:{width:window.innerWidth,height:window.innerHeight}}}}function getTimeoutUrl(e){let t="";if(isArray(e)&&e[0]&&isArray(e[0].params)&&e[0].params[0]){const i=e[0].params[0],r=e[0].timeout;t="?publisherToken="+i.publisherId+"&adUnitId="+i.adUnitId+"&timeout="+r}return SEEDTAG_SSP_ONTIMEOUT_ENDPOINT+t}const spec$6={code:BIDDER_CODE$6,gvlid:GVLID,aliases:[SEEDTAG_ALIAS],supportedMediaTypes:[BANNER,VIDEO],isBidRequestValid:e=>hasVideoMediaType(e)?hasMandatoryVideoParams(e):hasMandatoryDisplayParams(e),buildRequests(e,t){var i,r,n,a;const o={url:t.refererInfo.page,publisherToken:e[0].params.publisherId,cmp:!!t.gdprConsent,timeout:t.timeout,version:"8.47.0",connectionType:getConnectionType(),auctionStart:t.auctionStart||Date.now(),ttfb:ttfb(),bidRequests:_map(e,buildBidRequest),user:{topics:[],eids:[]}};if(o.cmp){const e=t.gdprConsent.gdprApplies;void 0!==e&&(o.ga=e),o.cd=t.gdprConsent.consentString}t.uspConsent&&(o.uspConsent=t.uspConsent),e[0].schain&&(o.schain=e[0].schain);let s=config.getConfig("coppa");s&&(o.coppa=s),t.gppConsent?o.gppConsent={gppString:t.gppConsent.gppString,applicableSections:t.gppConsent.applicableSections}:(null==(r=null==(i=t.ortb2)?void 0:i.regs)?void 0:r.gpp)&&(o.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid}),(null==(a=null==(n=t.ortb2)?void 0:n.user)?void 0:a.data)&&(o.user.topics=t.ortb2.user.data),e[0]&&e[0].userIdAsEids&&(o.user.eids=e[0].userIdAsEids);const d=JSON.stringify(o);return{method:"POST",url:SEEDTAG_SSP_ENDPOINT,data:d}},interpretResponse:function(e){const t=e.body;return t&&t.bids&&isArray(t.bids)?_map(t.bids,(function(e){return buildBidResponse(e)})):[]},getUserSyncs(e,t){const i=t[0];if(e.iframeEnabled&&i){const e=i.body.cookieSync;return e?[{type:"iframe",url:e}]:[]}return[]},onTimeout(e){triggerPixel(getTimeoutUrl(e))},onBidWon:function(e){e&&e.nurl&&triggerPixel(e.nurl)}};registerBidder(spec$6);const BIDDER_CODE$5="smartadserver",GVL_ID$2=45,DEFAULT_FLOOR=0,spec$5={code:BIDDER_CODE$5,gvlid:GVL_ID$2,aliases:["smart"],supportedMediaTypes:[BANNER,VIDEO],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;const t=["asi","sid","hp","rid","name","domain"];return`${e.ver},${e.complete}!`+e.nodes.map((e=>t.map((t=>e[t]?encodeURIComponent(e[t]):"")).join(","))).join("!")},adaptBannerSizes:function(e){return e.map((e=>({w:e[0],h:e[1]})))},fillPayloadForVideoBidRequest:function(e,t,i){const r=t.playerSize[0],n={maxbitrate:"vbrmax",maxduration:"vdmax",minbitrate:"vbrmin",minduration:"vdmin",placement:"vpt",plcmt:"vplcmt",skip:"skip"};e.mediaType=VIDEO,e.isVideo="instream"===t.context,e.videoData={};for(const[a,o]of Object.entries(n))e.videoData={...e.videoData,...this.getValuableProperty(o,t[a])};e.videoData={...e.videoData,...this.getValuableProperty("playerWidth",r[0]),...this.getValuableProperty("playerHeight",r[1]),...this.getValuableProperty("adBreak",this.getStartDelayForVideoBidRequest(t,i)),...this.getValuableProperty("videoProtocol",this.getProtocolForVideoBidRequest(t,i)),...isArrayOfNums(t.api)&&t.api.length?{iabframeworks:t.api.toString()}:{},...isArrayOfNums(t.playbackmethod)&&t.playbackmethod.length?{vpmt:t.playbackmethod}:{}}},getValuableProperty:function(e,t){return"string"==typeof e&&isInteger(t)&&t?{[e]:t}:{}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(null==t?void 0:t.startDelay)return t.startDelay;if(null==e?void 0:e.startdelay){if(e.startdelay>0||-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 1},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,t){const i=config.getConfig("currency.adServerCurrency"),r=dlv(t,"ortb2.user.data",config.getAnyConfig("ortb2.user.data")),n=dlv(t,"ortb2.site.content.data",config.getAnyConfig("ortb2.site.content.data"));return e.reduce(((e,a)=>{var o,s;let d={siteid:a.params.siteId,pageid:a.params.pageId,formatid:a.params.formatId,currencyCode:i,targeting:a.params.target&&""!==a.params.target?a.params.target:void 0,buid:a.params.buId&&""!==a.params.buId?a.params.buId:void 0,appname:a.params.appName&&""!==a.params.appName?a.params.appName:void 0,ckid:a.params.ckId||0,tagId:a.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.page?t.refererInfo.page:void 0,transactionId:null==(s=null==(o=a.ortb2Imp)?void 0:o.ext)?void 0:s.tid,timeout:config.getConfig("bidderTimeout"),bidId:a.bidId,prebidVersion:"8.47.0",schain:spec$5.serializeSupplyChain(a.schain),sda:r,sdc:n};const l=dlv(a,"ortb2Imp.ext.gpid",dlv(a,"ortb2Imp.ext.data.pbadslot",""));l&&(d.gpid=l),t&&(t.gdprConsent&&(d.addtl_consent=t.gdprConsent.addtlConsent,d.gdpr_consent=t.gdprConsent.consentString,d.gdpr=t.gdprConsent.gdprApplies),t.gppConsent&&(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections),t.uspConsent&&(d.us_privacy=t.uspConsent)),a&&a.userIdAsEids&&(d.eids=a.userIdAsEids),t&&t.uspConsent&&(d.us_privacy=t.uspConsent);const c=dlv(a,"mediaTypes.banner"),p=dlv(a,"mediaTypes.video"),u=p&&("instream"===p.context||"outstream"===p.context);if(c||u){let t;if(c){if(t=BANNER,d.sizes=spec$5.adaptBannerSizes(c.sizes),u){let t=deepClone(d);spec$5.fillPayloadForVideoBidRequest(t,p,a.params.video),t.bidfloor=a.params.bidfloor||spec$5.getBidFloor(a,i,VIDEO),e.push(spec$5.createServerRequest(t,a.params.domain))}}else t=VIDEO,spec$5.fillPayloadForVideoBidRequest(d,p,a.params.video);d.bidfloor=a.params.bidfloor||spec$5.getBidFloor(a,i,t),e.push(spec$5.createServerRequest(d,a.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){const i=[];let r=e.body;try{if(r&&!r.isNoAd&&(r.ad||r.adUrl)){const e=JSON.parse(t.data);let n={requestId:e.bidId,cpm:r.cpm,width:r.width,height:r.height,creativeId:r.creativeId,dealId:r.dealId,currency:r.currency,netRevenue:r.isNetCpm,ttl:r.ttl,dspPixels:r.dspPixels,meta:{advertiserDomains:r.adomain?r.adomain:[]}};e.mediaType===VIDEO?(n.mediaType=VIDEO,n.vastUrl=r.adUrl,n.vastXml=r.ad,n.content=r.ad):(n.adUrl=r.adUrl,n.ad=r.ad),i.push(n)}}catch(n){logError("Error while parsing smart server response",n)}return i},getBidFloor:function(e,t,i){if(!isFn(e.getFloor))return DEFAULT_FLOOR;const r=e.getFloor({currency:t||"USD",mediaType:i,size:"*"});return isPlainObject(r)&&!isNaN(r.floor)?r.floor:DEFAULT_FLOOR},getUserSyncs:function(e,t){const i=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?i.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){i.push({type:"image",url:e})})),i}};registerBidder(spec$5);let autoplayEnabled=null;const isAutoplayEnabled=()=>!1!==autoplayEnabled,autoplayVideoUrl="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==";function startDetection(){const e=document.createElement("video");e.src=autoplayVideoUrl,e.setAttribute("playsinline","true"),e.muted=!0,e.play().then((()=>{autoplayEnabled=!0,e.pause()})).catch((()=>{autoplayEnabled=!1}))}startDetection();const BIDDER_CODE$4="teads",GVL_ID$1=132,ENDPOINT_URL$2="https://a.teads.tv/hb/bid-request",gdprStatus={GDPR_APPLIES_PUBLISHER:12,GDPR_APPLIES_GLOBAL:11,GDPR_DOESNT_APPLY:0,CMP_NOT_FOUND_OR_ERROR:22},FP_TEADS_ID_COOKIE_NAME="_tfpvi",storage$2=getStorageManager({bidderCode:BIDDER_CODE$4}),spec$4={code:BIDDER_CODE$4,gvlid:GVL_ID$1,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){let t=!1;if(void 0!==e.params){let i=_validateId(getValue(e.params,"placementId")),r=_validateId(getValue(e.params,"pageId"));t=i&&r}return t||logError("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var i,r,n,a,o,s;const d=e.map(buildRequestObject),l=window.top,c={referrer:getReferrerInfo(t),pageReferrer:document.referrer,pageTitle:getPageTitle().slice(0,300),pageDescription:getPageDescription().slice(0,300),networkBandwidth:getConnectionDownLink(window.navigator),timeToFirstByte:getTimeToFirstByte(window),data:d,deviceWidth:screen.width,deviceHeight:screen.height,devicePixelRatio:l.devicePixelRatio,screenOrientation:null==(i=screen.orientation)?void 0:i.type,historyLength:null==(r=l.history)?void 0:r.length,viewportHeight:null==(n=l.visualViewport)?void 0:n.height,viewportWidth:null==(a=l.visualViewport)?void 0:a.width,hardwareConcurrency:null==(o=l.navigator)?void 0:o.hardwareConcurrency,deviceMemory:null==(s=l.navigator)?void 0:s.deviceMemory,hb_version:"8.47.0",...getSharedViewerIdParameters(e),...getFirstPartyTeadsIdParameter(e)},p=e[0];p.schain&&(c.schain=p.schain);let u=t.gdprConsent;if(t&&u){let e="boolean"==typeof u.gdprApplies,t="string"==typeof u.consentString,i=e?findGdprStatus(u.gdprApplies,u.vendorData):gdprStatus.CMP_NOT_FOUND_OR_ERROR;c.gdpr_iab={consent:t?u.consentString:"",status:i,apiVersion:u.apiVersion}}t&&t.uspConsent&&(c.us_privacy=t.uspConsent);const m=dlv(p,"ortb2.device.sua");m&&(c.userAgentClientHints=m);const g=dlv(t,"ortb2.regs.ext.dsa");g&&(c.dsa=g);const f=JSON.stringify(c);return{method:"POST",url:ENDPOINT_URL$2,data:f}},interpretResponse:function(e,t){if(!(e=e.body).responses)return[];const i=isAutoplayEnabled();return e.responses.filter((e=>!e.needAutoplay||i)).map((e=>{var t;const i={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};return e.dealId&&(i.dealId=e.dealId),(null==(t=null==e?void 0:e.ext)?void 0:t.dsa)&&(i.meta.dsa=e.ext.dsa),i}))}};function getSharedViewerIdParameters(e){const t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"};let i={};for(const r in t){const n=dlv(e,`0.userId.${t[r]}`);n&&(i[r]=n)}return i}function getReferrerInfo(e){let t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}function getPageTitle(){try{const e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(e){const t=document.querySelector('meta[property="og:title"]');return document.title||t&&t.content||""}}function getPageDescription(){let e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""}function getConnectionDownLink(e){return e&&e.connection&&e.connection.downlink>=0?e.connection.downlink.toString():""}function getTimeToFirstByte(e){const t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,i=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(i)return i.toString();const r=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return r?r.toString():""}function findGdprStatus(e,t){let i=gdprStatus.GDPR_APPLIES_PUBLISHER;return e?t&&!t.isServiceSpecific&&(i=gdprStatus.GDPR_APPLIES_GLOBAL):i=gdprStatus.GDPR_DOESNT_APPLY,i}function buildRequestObject(e){var t,i;const r={};let n=getValue(e.params,"placementId"),a=getValue(e.params,"pageId");const o=dlv(e,"ortb2Imp.ext.gpid"),s=dlv(e,"mediaTypes.video.plcmt");return r.sizes=getSizes(e),r.bidId=getBidIdParameter("bidId",e),r.bidderRequestId=getBidIdParameter("bidderRequestId",e),r.placementId=parseInt(n,10),r.pageId=parseInt(a,10),r.adUnitCode=getBidIdParameter("adUnitCode",e),r.transactionId=(null==(i=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:i.tid)||"",o&&(r.gpid=o),s&&(r.videoPlcmt=s),r}function getSizes(e){return parseSizesInput(concatSizes(e))}function concatSizes(e){let t=dlv(e,"mediaTypes.video.playerSize"),i=dlv(e,"mediaTypes.video.sizes"),r=dlv(e,"mediaTypes.banner.sizes");return isArray(r)||isArray(t)||isArray(i)?[r,i,t].reduce((function(e,t){return isArray(t)&&(isArray(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}function _validateId(e){return parseInt(e)>0}function getFirstPartyTeadsIdParameter(e){const t=dlv(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(storage$2.cookiesAreEnabled(null)){const e=storage$2.getCookie(FP_TEADS_ID_COOKIE_NAME,null);if(e)return{firstPartyCookieTeadsId:e}}return{}}function objectGuard(e){const t={},i=[];e.forEach((e=>{e.wp&&i.push(e),e.get&&e.paths.forEach((i=>{let r=t;i.split(".").forEach((e=>{r.children=r.children||{},r.children[e]=r.children[e]||{},r=r.children[e]})),r.rule=e}))}));const r=objectTransformer(i);function n(e,t,i){return new Proxy(e,{get(e,r,a){const o=Reflect.get(e,r,a);if(t.hasOwnProperty(r)){const{children:e,rule:a}=t[r];if(e&&null!=o&&"object"==typeof o)return n(o,e,i);if(a&&isData(o)&&i(a))return a.get(o)}return o}})}return function(e,...i){const a={};return{obj:n(e,t.children||{},sessionedApplies(a,...i)),verify:(o=r(a,e,...i),function(){o.forEach((e=>e()))})};var o}}function writeProtectRule(e){return Object.assign({wp:!0,run(e,t,i,r,n){const a=i&&i.hasOwnProperty(r),o=a?i[r]:void 0,s=a&&null!=o&&"object"==typeof o?deepClone(o):o;return function(){const i=null==t?e:dlv(e,t),d=i&&isData(i[r]),l=d?i[r]:void 0;!a&&d&&n()?delete i[r]:a===d&&l===o&&deepEqual(l,s)||!n()||dset(e,(null==t?[]:[t]).concat(r).join("."),s)}}},e)}function ortb2EnrichRules(e=isActivityAllowed){return[{name:ACTIVITY_ENRICH_EIDS,paths:ORTB_EIDS_PATHS,applies:appliesWhenActivityDenied(ACTIVITY_ENRICH_EIDS,e)},{name:ACTIVITY_ENRICH_UFPD,paths:ORTB_UFPD_PATHS,applies:appliesWhenActivityDenied(ACTIVITY_ENRICH_UFPD,e)}].map(writeProtectRule)}function ortb2GuardFactory(e=isActivityAllowed){return objectGuard(ortb2TransmitRules(e).concat(ortb2EnrichRules(e)))}registerBidder(spec$4);const ortb2Guard=ortb2GuardFactory();function ortb2FragmentsGuardFactory(e=ortb2Guard){return function(t,i){t.global=t.global||{},t.bidder=t.bidder||{};const r=new Set(Object.keys(t.bidder)),n=[];function a(t){const r=e(t,i);return n.push(r.verify),r.obj}const o={global:a(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map((([e,t])=>[e,a(t)])))};return{obj:o,verify(){Object.entries(o.bidder).filter((([e])=>!r.has(e))).forEach((([r,n])=>{const a={},o=e(a,i);mergeDeep(o.obj,n),o.verify(),t.bidder[r]=a})),n.forEach((e=>e()))}}}}const guardOrtb2Fragments=ortb2FragmentsGuardFactory(),activityParams=activityParamsBuilder((e=>adaptermanager.resolveAlias(e))),MODULE_NAME$1="realTimeData";let registeredSubModules=[],subModules=[],_moduleConfig,_dataProviders=[],_userConsent;function attachRealTimeDataProvider(e){return registeredSubModules.push(e),GDPR_GVLIDS.register(MODULE_TYPE_RTD,e.name,e.gvlid),function(){const t=registeredSubModules.indexOf(e);t>=0&&(registeredSubModules.splice(t,1),initSubModules())}}const setEventsListeners=function(){let e=!1;return function(){e||(Object.entries({[EVENTS$1.AUCTION_INIT]:["onAuctionInitEvent"],[EVENTS$1.AUCTION_END]:["onAuctionEndEvent",getAdUnitTargeting],[EVENTS$1.BID_RESPONSE]:["onBidResponseEvent"],[EVENTS$1.BID_REQUESTED]:["onBidRequestEvent"],[EVENTS$1.BID_ACCEPTED]:["onBidAcceptedEvent"]}).forEach((([e,[t,i]])=>{on(e,(e=>{i&&i(e),subModules.forEach((i=>{try{i[t]&&i[t](e,i.config,_userConsent)}catch(r){logError(`RTD provider '${i.name}': error in '${t}':`,r)}}))}))})),e=!0)}}();function init$2(e){const t=e.getConfig(MODULE_NAME$1,(({realTimeData:e})=>{e.dataProviders?(t(),_moduleConfig=e,_dataProviders=e.dataProviders,setEventsListeners(),getHook("startAuction").before(setBidRequestsData,20),adaptermanager.callDataDeletionRequest.before(onDataDeletionRequest),initSubModules()):logError("missing parameters for real time module")}))}function getConsentData(){return{gdpr:gdprDataHandler.getConsentData(),usp:uspDataHandler.getConsentData(),gpp:gppDataHandler.getConsentData(),coppa:!!config.getConfig("coppa")}}function initSubModules(){_userConsent=getConsentData();let e=[];_dataProviders.forEach((t=>{const i=find(registeredSubModules,(e=>e.name===t.name));i&&i.init&&i.init(t,_userConsent)&&e.push(Object.assign(i,{config:t}))})),subModules=e,logInfo(`Real time data module enabled, using submodules: ${subModules.map((e=>e.name)).join(", ")}`)}const setBidRequestsData=timedAuctionHook("rtd",(function(e,t){_userConsent=getConsentData();const i=[],r=[];subModules.forEach((e=>{if("function"!=typeof e.getBidRequestData)return;i.push(e);const t=e.config;t&&t.waitForIt&&r.push(e)}));const n=r.length&&_moduleConfig.auctionDelay&&_moduleConfig.auctionDelay>0;let a,o=r.length,s=!1;const d=[];if(!i.length)return c();function l(){s||(this.config&&this.config.waitForIt&&o--,0===o&&setTimeout(c,0))}function c(){s||(s=!0,clearTimeout(a),d.forEach((e=>e())),e.call(this,t))}a=setTimeout(c,n?_moduleConfig.auctionDelay:0),i.forEach((e=>{const i=guardOrtb2Fragments(t.ortb2Fragments||{},activityParams(MODULE_TYPE_RTD,e.name));d.push(i.verify),e.getBidRequestData({...t,ortb2Fragments:i.obj},l.bind(e),e.config,_userConsent)}))}));function getAdUnitTargeting(e){const t=subModules.filter((e=>"function"==typeof e.getTargetingData));if(!t.length)return;const i=e.adUnitCodes;if(!i)return;let r=[];for(let a=t.length-1;a>=0;a--){const n=t[a].getTargetingData(i,t[a].config,_userConsent,e);n&&"object"==typeof n?r.push(n):logWarn("invalid getTargetingData response for sub module",t[a].name)}const n=deepMerge(r);return e.adUnits.forEach((e=>{const t=e.code&&n[e.code];t&&(logInfo("RTD set ad unit targeting of",t,"for",e),e[JSON_MAPPING.ADSERVER_TARGETING]=Object.assign(e[JSON_MAPPING.ADSERVER_TARGETING]||{},t))})),e.adUnits}function deepMerge(e){return Array.isArray(e)&&e.length?e.reduce(((e,t)=>{for(let i in t)if(t.hasOwnProperty(i))if(e.hasOwnProperty(i)){const r=t[i];for(let t in r)r.hasOwnProperty(t)&&(e[i][t]=r[t])}else e[i]=t[i];return e}),{}):{}}function onDataDeletionRequest(e,...t){subModules.forEach((e=>{if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){logError(`Error executing ${e.name}.onDataDeletionRequest`,t)}})),e.apply(this,t)}module("realTimeData",attachRealTimeDataProvider),init$2(config);const MODULE_NAME="realTimeData",SUBMODULE_NAME="SirdataRTDModule",ORTB2_NAME="sirdata.com",LOG_PREFIX="Sirdata RTD: ",partnerIds={criteo:27443,openx:30342,pubmatic:30345,smaato:27520,triplelift:27518,yahoossp:30339,rubicon:27452,appnexus:27446,appnexusAst:27446,brealtime:27446,emetriq:27446,emxdigital:27446,pagescience:27446,gourmetads:33394,matomy:27446,featureforward:27446,oftmedia:27446,districtm:27446,adasta:27446,beintoo:27446,gravity:27446,msq_classic:27878,msq_max:27878,"366_apx":27878,mediasquare:27878,smartadserver:27440,smart:27440,proxistore:27484,ix:27248,sdRtdForGpt:27449,smilewanted:28690,taboola:33379,ttd:33382,zeta_global:33385,teads:33388,conversant:33391,improvedigital:33397,invibes:33400,sublime:33403,rtbhouse:33406,zeta_global_ssp:33385};function getSegmentsAndCategories(e,t,i,r){logInfo(LOG_PREFIX,"init"),i.params=i.params||{};let n,a,o=r&&r.gdpr&&r.gdpr.consentString?r.gdpr.consentString:"",s=r&&r.gdpr&&r.gdpr.gdprApplies?r.gdpr.gdprApplies:"";i.params.partnerId=i.params.partnerId?i.params.partnerId:1,i.params.key=i.params.key?i.params.key:1,i.params.actualUrl=i.params.actualUrl||null,r.coppa||r.usp&&"1"===r.usp[0]&&("N"===r.usp[1]||"Y"===r.usp[2])?(n="cookieless-data.com",a=!1,s=null,o=""):config.getConfig("consentManagement.gdpr")&&(n="cookieless-data.com",a=!1),(!n||!s||dlv(r,"gdpr.vendorData.vendor.consents")&&r.gdpr.vendorData.vendor.consents[53]&&r.gdpr.vendorData.purpose.consents[1]&&r.gdpr.vendorData.purpose.consents[4])&&(n="sddan.com",a=!0);let d=i.params.actualUrl||getRefererInfo().stack.pop()||getRefererInfo().page;const l="https://kvt."+n+"/api/v1/public/p/"+i.params.partnerId+"/d/"+i.params.key+"/s?callback=&gdpr="+s+"&gdpr_consent="+o+(d?"&url="+encodeURIComponent(d):"");ajax$1(l,{success:function(r,n){if(200===n.status)try{const n=JSON.parse(r);n&&n.segments?addSegmentData(e,n,i,t):t()}catch(a){t(),logError("unable to parse Sirdata data"+a)}else 204===n.status&&t()},error:function(){t(),logError("unable to get Sirdata data")}},null,{contentType:"text/plain",method:"GET",withCredentials:a,referrerPolicy:"unsafe-url",crossOrigin:!0})}function pushToOrtb2(e,t,i,r,n){try{isEmpty(i.segments)||(r?setOrtb2Sda(e,t,"user",i.segments,r):setOrtb2(e,t,"user.ext.data",{sd_rtd:{segments:i.segments}})),isEmpty(i.categories)||(n?setOrtb2Sda(e,t,"site",i.categories,n):setOrtb2(e,t,"site.ext.data",{sd_rtd:{categories:i.categories}})),isEmpty(i.categories_score)||n||setOrtb2(e,t,"site.ext.data",{sd_rtd:{categories_score:i.categories_score}})}catch(a){logError(a)}return!0}function setOrtb2Sda(e,t,i,r,n){try{let a=[{name:ORTB2_NAME,segment:r.map((e=>({id:e})))}];n&&(a[0].ext={segtax:n});let o="site"===i?{site:{content:{data:a}}}:{user:{data:a}};t&&(o={[t]:o}),mergeDeep(e,o)}catch(a){logError(a)}return!0}function setOrtb2(e,t,i,r){try{if(isEmpty(r))return!1;let n={};dset(n,i,r||{}),t&&(n={[t]:n}),mergeDeep(e,n)}catch(n){logError(n)}return!0}function loadCustomFunction(e,t,i,r,n){try{"function"==typeof e&&e(t,i,r,n)}catch(a){logError(a)}return!0}function getSegAndCatsArray(e,t,i){let r={segments:[],categories:[],categories_score:{}};t=t&&"number"==typeof t?t:30;let n=e.cattaxid||null,a=e.segtaxid||null;try{if(e&&e.contextual_categories)for(let a in e.contextual_categories)if(e.contextual_categories.hasOwnProperty(a)&&e.contextual_categories[a]){let o=e.contextual_categories[a];o>=t&&-1===r.categories.indexOf(a)&&(i&&"27440"===i&&n?r.categories.push(i.toString()+"cc"+a.toString()):(r.categories.push(a.toString()),r.categories_score[a]=o))}}catch(o){logError(o)}try{if(e&&e.segments)for(let t in e.segments)if(e.segments.hasOwnProperty(t)&&e.segments[t]){let n=e.segments[t].toString();i&&"27440"===i&&a?r.segments.push(i.toString()+"us"+n):r.segments.push(n)}}catch(o){logError(o)}return r}function applySdaGetSpecificData(e,t,i,r,n,a,o,s,d,l){var c,p;if(!i||s){let t=getSegAndCatsArray(e,r,o.params.partnerId.toString());pushToOrtb2(null==(c=n.ortb2Fragments)?void 0:c.bidder,a.bidder,t,e.segtaxid,e.cattaxid)}let u=s&&o.params.bidders[d].hasOwnProperty("curationId")?o.params.bidders[d].curationId:partnerIds[a.bidder]?partnerIds[a.bidder]:null;if(u&&e.shared_taxonomy&&e.shared_taxonomy[u]){let t=getSegAndCatsArray(e.shared_taxonomy[u],r,u.toString());pushToOrtb2(null==(p=n.ortb2Fragments)?void 0:p.bidder,a.bidder,t,e.shared_taxonomy[u].segtaxid,e.shared_taxonomy[u].cattaxid)}if(!i||s)return s&&o.params.bidders[d].hasOwnProperty("customFunction")?loadCustomFunction(o.params.bidders[d].customFunction,l,t,e,a):t}function addSegmentData(e,t,i,r){var n;const a=e&&e.adUnits||getGlobal().adUnits;if(!a)return void r();(i=i||{}).params=i.params||{};const o=i.params.hasOwnProperty("contextualMinRelevancyScore")?i.params.contextualMinRelevancyScore:30;let s=getSegAndCatsArray(t,o,null);const d=!!(i.params&&i.params.bidders&&i.params.bidders.length>0);if(t.global_taxonomy&&!isEmpty(t.global_taxonomy)){let i={segments:[],categories:[],categories_score:[]};for(let r in t.global_taxonomy)isEmpty(t.global_taxonomy[r])||(i=getSegAndCatsArray(t.global_taxonomy[r],o,null),pushToOrtb2(null==(n=e.ortb2Fragments)?void 0:n.global,null,i,t.global_taxonomy[r].segtaxid,t.global_taxonomy[r].cattaxid))}if(void 0!==window.googletag&&(i.params.setGptKeyValues||!i.params.hasOwnProperty("setGptKeyValues")))try{let e=i.params.gptCurationId?i.params.gptCurationId:partnerIds.sdRtdForGpt?partnerIds.sdRtdForGpt:null,r=[];if(e&&t.shared_taxonomy&&t.shared_taxonomy[e]){let i=getSegAndCatsArray(t.shared_taxonomy[e],o,null);r=r.concat(i.segments).concat(i.categories)}else r=s.segments.concat(s.categories);window.googletag.cmd.push((function(){window.googletag.pubads().getSlots().forEach((function(e){void 0!==e.setTargeting&&r&&r.length>0&&e.setTargeting("sd_rtd",r)}))}))}catch(p){logError(p)}let l="",c=!1;return a.forEach((r=>{r.hasOwnProperty("bids")&&r.bids.forEach((n=>{var a,u;l=!!i.params.hasOwnProperty("bidders")&&findIndex(i.params.bidders,(function(e){return e.bidder===n.bidder})),c=!!("number"==typeof l&&l>=0);try{let p=c&&i.params.bidders[l].hasOwnProperty("contextualMinRelevancyScore")?i.params.bidders[l].contextualMinRelevancyScore:o;switch(n.bidder){case"appnexus":case"appnexusAst":case"brealtime":case"emetriq":case"emxdigital":case"pagescience":case"gourmetads":case"matomy":case"featureforward":case"oftmedia":case"districtm":case"adasta":case"beintoo":case"gravity":case"msq_classic":case"msq_max":case"366_apx":s=applySdaGetSpecificData(t,s,d,p,e,n,i,c,l,r),s.segments&&s.segments.length>0&&setOrtb2(null==(a=e.ortb2Fragments)?void 0:a.bidder,n.bidder,"user.keywords","sd_rtd="+s.segments.join(",sd_rtd=")),s.categories&&s.categories.length>0&&setOrtb2(null==(u=e.ortb2Fragments)?void 0:u.bidder,n.bidder,"site.content.keywords","sd_rtd="+s.categories.join(",sd_rtd="));break;default:d&&(!c||i.params.bidders[l].hasOwnProperty("adUnitCodes")&&-1===i.params.bidders[l].adUnitCodes.indexOf(r.code))||applySdaGetSpecificData(t,s,d,p,e,n,i,c,l,r)}}catch(p){logError(p)}}))})),r(),a}function init$1(e){return logInfo(LOG_PREFIX,e),!0}const sirdataSubmodule={name:SUBMODULE_NAME,init:init$1,getBidRequestData:getSegmentsAndCategories};submodule(MODULE_NAME,sirdataSubmodule);const BIDDER_CODE$3="missena",ENDPOINT_URL$1="https://bid.missena.io/",EVENTS_DOMAIN="events.missena.io",EVENTS_DOMAIN_DEV="events.staging.missena.xyz",storage$1=getStorageManager({bidderCode:BIDDER_CODE$3});function getFloor(e){if(!isFn(e.getFloor))return{};const t=e.getFloor({currency:"USD",mediaType:BANNER});return isNaN(t.floor)?void 0:t}window.msna_ik=window.msna_ik||generateUUID();const spec$3={aliases:["msna"],code:BIDDER_CODE$3,gvlid:687,supportedMediaTypes:[BANNER],isBidRequestValid:function(e){return"object"==typeof e&&!!e.params.apiKey},buildRequests:function(e,t){var i,r;const n=`missena.missena.capper.remove-bubble.${null==(i=e[0])?void 0:i.params.apiKey}`,a=safeJSONParse(storage$1.getDataFromLocalStorage(n)),o=null==(r=null==t?void 0:t.refererInfo)?void 0:r.topmostLocation;return"number"==typeof(null==a?void 0:a.expiry)&&(new Date).getTime()<(null==a?void 0:a.expiry)&&(!(null==a?void 0:a.referer)||(null==a?void 0:a.referer)==o)?(logInfo("Missena - Capped"),[]):e.map((e=>{var i,r,n,a,o,s;const d={adunit:e.adUnitCode,ik:window.msna_ik,request_id:e.bidId,timeout:t.timeout};t&&t.refererInfo&&(d.referer=t.refererInfo.topmostLocation,d.referer_canonical=t.refererInfo.canonicalUrl),t&&t.gdprConsent&&(d.consent_string=t.gdprConsent.consentString,d.consent_required=t.gdprConsent.gdprApplies);const l=e.params.baseUrl||ENDPOINT_URL$1;e.params.test&&(d.test=e.params.test),e.params.placement&&(d.placement=e.params.placement),e.params.formats&&(d.formats=e.params.formats),e.params.isInternal&&(d.is_internal=e.params.isInternal),(null==(n=null==(r=null==(i=e.ortb2)?void 0:i.device)?void 0:r.ext)?void 0:n.cdep)&&(d.cdep=null==(s=null==(o=null==(a=e.ortb2)?void 0:a.device)?void 0:o.ext)?void 0:s.cdep),d.userEids=e.userIdAsEids||[],d.version="8.47.0";const c=getFloor(e);return d.floor=null==c?void 0:c.floor,d.floor_currency=null==c?void 0:c.currency,d.currency=config.getConfig("currency.adServerCurrency")||"EUR",{method:"POST",url:l+"?"+formatQS({t:e.params.apiKey}),data:JSON.stringify(d)}}))},interpretResponse:function(e,t){const i=[],r=e.body;return r&&!r.timeout&&r.ad&&i.push(r),i},getUserSyncs:function(e,t,i,r){if(!e.iframeEnabled)return[];let n="";return i&&"gdprApplies"in i&&"boolean"==typeof i.gdprApplies&&(n=`?gdpr=${Number(i.gdprApplies)}&gdpr_consent=${i.consentString}`),[{type:"iframe",url:"https://sync.missena.io/iframe"+n}]},onTimeout:function(e){logInfo("Missena - Timeout from adapter",e)},onBidWon:function(e){var t;triggerPixel(buildUrl({protocol:"https",hostname:e.params[0].baseUrl?EVENTS_DOMAIN_DEV:EVENTS_DOMAIN,pathname:"/v1/bidsuccess",search:{t:e.params[0].apiKey,provider:null==(t=e.meta)?void 0:t.networkName,cpm:e.originalCpm,currency:e.originalCurrency}})),logInfo("Missena - Bid won",e)}};registerBidder(spec$3);const BIDDER_CODE$2="richaudience";let REFERER="";const spec$2={code:BIDDER_CODE$2,gvlid:108,aliases:["ra"],supportedMediaTypes:[BANNER,VIDEO],isBidRequestValid:function(e){return!!(e.params&&e.params.pid&&e.params.supplyType)},buildRequests:function(e,t){return e.map((e=>{var i,r,n,a,o={bidfloor:raiGetFloor(e,config),ifa:e.params.ifa,pid:e.params.pid,supplyType:e.params.supplyType,currencyCode:config.getConfig("currency.adServerCurrency"),auctionId:e.auctionId,bidId:e.bidId,BidRequestsCount:e.bidRequestsCount,bidder:e.bidder,bidderRequestId:e.bidderRequestId,tagId:e.adUnitCode,sizes:raiGetSizes(e),referer:void 0!==t.refererInfo.page?encodeURIComponent(t.refererInfo.page):null,numIframes:void 0!==t.refererInfo.numIframes?t.refererInfo.numIframes:null,transactionId:null==(r=null==(i=e.ortb2Imp)?void 0:i.ext)?void 0:r.tid,timeout:t.timeout||600,user:raiSetEids(e),demand:raiGetDemandType(e),videoData:raiGetVideoInfo(e),scr_rsl:raiGetResolution(),cpuc:void 0!==window.navigator?window.navigator.hardwareConcurrency:null,kws:getAllOrtbKeywords(t.ortb2,e.params.keywords).join(","),schain:e.schain,gpid:raiSetPbAdSlot(e)};return REFERER=void 0!==t.refererInfo.page?encodeURIComponent(t.refererInfo.page):null,o.gdpr_consent="",o.gdpr=!1,t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(o.gdpr=t.gdprConsent.gdprApplies),void 0!==t.gdprConsent.consentString&&(o.gdpr_consent=t.gdprConsent.consentString)),(null==t?void 0:t.gppConsent)?o.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:(null==(a=null==(n=null==t?void 0:t.ortb2)?void 0:n.regs)?void 0:a.gpp)&&(o.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),{method:"POST",url:"https://shb.richaudience.com/hb/",data:JSON.stringify(o)}}))},interpretResponse:function(e,t){const i=[];var r=e.body;if(r){var n={requestId:JSON.parse(t.data).bidId,cpm:r.cpm,width:r.width,height:r.height,creativeId:r.creative_id,mediaType:r.media_type,netRevenue:r.netRevenue,currency:r.currency,ttl:r.ttl,meta:r.adomain,dealId:r.dealId};if("video"===r.media_type){n.vastXml=r.vastXML;try{null!=n.vastXml&&("outstream"!=JSON.parse(t.data).videoData.format&&"banner"!=JSON.parse(t.data).videoData.format||(n.renderer=Renderer.install({id:t.bidId,adunitcode:t.tagId,loaded:!1,config:r.media_type,url:"https://cdn3.richaudience.com/prebidVideo/player.js"})),n.renderer.setRender(renderer))}catch(a){n.ad=r.adm}}else n.ad=r.adm;i.push(n)}return i},getUserSyncs:function(e,t,i,r,n){var a,o;const s=[];var d,l=Math.floor(9999999999*Math.random()),c="",p="",u="";return d=raiGetSyncInclude(config),i&&"string"==typeof i.consentString&&void 0!==i.consentString&&(p=`consentString=${i.consentString}`),(null==n?void 0:n.gppString)&&(null==(a=null==n?void 0:n.applicableSections)?void 0:a.length)&&(u="gpp="+encodeURIComponent(n.gppString),u+="&gpp_sid="+encodeURIComponent(null==(o=null==n?void 0:n.applicableSections)?void 0:o.join(","))),e.iframeEnabled&&"exclude"!=d.raiIframe&&(c="https://sync.richaudience.com/dcf3528a0b8aa83634892d50e91c306e/?ord="+l,""!=p&&(c+=`&${p}`),""!=u&&(c+=`&${u}`),s.push({type:"iframe",url:c})),e.pixelEnabled&&null!=REFERER&&0==s.length&&"exclude"!=d.raiImage&&(c=`https://sync.richaudience.com/bf7c142f4339da0278e83698a02b0854/?referrer=${REFERER}`,""!=p&&(c+=`&${p}`),""!=u&&(c+=`&${u}`),s.push({type:"image",url:c})),s},onTimeout:function(e){let t=raiGetTimeoutURL(e);t&&triggerPixel(t)}};function raiGetSizes(e){let t;if(e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&(t=e.mediaTypes.banner.sizes),null!=t)return t.map((e=>({w:e[0],h:e[1]})))}function raiGetDemandType(e){let t="display";return void 0!==e.sizes&&e.sizes.forEach((function(e){("1800"==e[0]&&"1000"==e[1]||"1"==e[0]&&"1"==e[1])&&(t="skin")})),null!=e.mediaTypes&&null!=e.mediaTypes.video&&(t="video"),t}function raiGetVideoInfo(e){let t;return t="video"==raiGetDemandType(e)?{format:e.mediaTypes.video.context,playerSize:e.mediaTypes.video.playerSize,mimes:e.mediaTypes.video.mimes}:{format:"banner"},t}function raiSetEids(e){let t=[];return e&&e.userId&&(raiSetUserId(e,t,"id5-sync.com",dlv(e,"userId.id5id.uid")),raiSetUserId(e,t,"pubcommon",dlv(e,"userId.pubcid")),raiSetUserId(e,t,"criteo.com",dlv(e,"userId.criteoId")),raiSetUserId(e,t,"liveramp.com",dlv(e,"userId.idl_env")),raiSetUserId(e,t,"liveintent.com",dlv(e,"userId.lipb.lipbid")),raiSetUserId(e,t,"adserver.org",dlv(e,"userId.tdid"))),t}function raiSetUserId(e,t,i,r){isStr(r)&&t.push({userId:r,source:i})}function renderer(e){e.renderer.push((()=>{renderAd(e)}))}function renderAd(e){let t=`${e.vastXml}`,i={config:null!=e.params[0].player?{end:null!=e.params[0].player.end?e.params[0].player.end:"close",init:null!=e.params[0].player.init?e.params[0].player.init:"close",skin:null!=e.params[0].player.skin?e.params[0].player.skin:"light"}:{end:"close",init:"close",skin:"light"},pid:e.params[0].pid,adUnit:e.adUnitCode};window.raParams(i,t,!0)}function raiGetResolution(){let e="";return void 0!==window.screen&&(e=window.screen.width+"x"+window.screen.height),e}function raiSetPbAdSlot(e){let t="";return null!=dlv(e,"ortb2Imp.ext.data.pbadslot")&&(t=dlv(e,"ortb2Imp.ext.data.pbadslot")),t}function raiGetSyncInclude(e){try{let t=null,i={};return null!=e.getConfig("userSync").filterSettings&&void 0!==e.getConfig("userSync").filterSettings&&(t=e.getConfig("userSync").filterSettings,null!=t.iframe&&void 0!==t.iframe&&(i.raiIframe="richaudience"==t.iframe.bidders||"*"==t.iframe.bidders?t.iframe.filter:"exclude"),null!=t.image&&void 0!==t.image&&(i.raiImage="richaudience"==t.image.bidders||"*"==t.image.bidders?t.image.filter:"exclude")),i}catch(t){return null}}function raiGetFloor(e,t){try{let i;return null!=e.params.bidfloor?i=e.params.bidfloor:"function"==typeof e.getFloor&&(i=e.getFloor({currency:null!=t.getConfig("floors.data.currency")?t.getConfig("floors.data.currency"):"USD",mediaType:"object"==typeof e.mediaTypes.banner?"banner":"video",size:"*"}).floor),i}catch(i){return 0}}function raiGetTimeoutURL(e){let{params:t,timeout:i}=e[0],r="https://s.richaudience.com/err/?ec=6&ev=[timeout_publisher]&pla=[placement_hash]&int=PREBID&pltfm=&node=&dm=[domain]";return r=r.replace("[timeout_publisher]",i),r=r.replace("[placement_hash]",t[0].pid),null!=document.location.host&&(r=r.replace("[domain]",document.location.host)),r}registerBidder(spec$2);var ejs={};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(__viteBrowserExternal$1);var utils={};!function(e){var t=/[|\\{}()[\]^$+*?.]/g,i=Object.prototype.hasOwnProperty,r=function(e,t){return i.apply(e,[t])};e.escapeRegExpChars=function(e){return e?String(e).replace(t,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},a=/[&<>'"]/g;function o(e){return n[e]||e}function s(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'}e.escapeXML=function(e){return null==e?"":String(e).replace(a,o)};try{"function"==typeof Object.defineProperty?Object.defineProperty(e.escapeXML,"toString",{value:s}):e.escapeXML.toString=s}catch(d){console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}e.shallowCopy=function(e,t){if(t=t||{},null!=e)for(var i in t)r(t,i)&&"__proto__"!==i&&"constructor"!==i&&(e[i]=t[i]);return e},e.shallowCopyFromList=function(e,t,i){if(i=i||[],t=t||{},null!=e)for(var n=0;n<i.length;n++){var a=i[n];if(void 0!==t[a]){if(!r(t,a))continue;if("__proto__"===a||"constructor"===a)continue;e[a]=t[a]}}return e},e.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},remove:function(e){delete this._data[e]},reset:function(){this._data={}}},e.hyphenToCamel=function(e){return e.replace(/-[a-z]/g,(function(e){return e[1].toUpperCase()}))},e.createNullProtoObjWherePossible="function"==typeof Object.create?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}(utils);const name$1="ejs",description="Embedded JavaScript templates",keywords=["template","engine","ejs"],version$1="3.1.9",author="Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license="Apache-2.0",bin={ejs:"./bin/cli.js"},main="./lib/ejs.js",jsdelivr="ejs.min.js",unpkg="ejs.min.js",repository={type:"git",url:"git://github.com/mde/ejs.git"},bugs="https://github.com/mde/ejs/issues",homepage="https://github.com/mde/ejs",dependencies={jake:"^10.8.5"},devDependencies={browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^4.0.2","lru-cache":"^4.0.1",mocha:"^10.2.0","uglify-js":"^3.3.16"},engines={node:">=0.10.0"},scripts={test:"mocha -u tdd"},require$$3={name:name$1,description:description,keywords:keywords,version:version$1,author:author,license:license,bin:bin,main:main,jsdelivr:jsdelivr,unpkg:unpkg,repository:repository,bugs:bugs,homepage:homepage,dependencies:dependencies,devDependencies:devDependencies,engines:engines,scripts:scripts};!function(e){var t=require$$1,i=require$$1,r=utils,n=!1,a=require$$3.version,o="locals",s=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],d=s.concat("cache"),l=/^\uFEFF/,c=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;function p(i,r){var n;if(r.some((function(r){return n=e.resolveInclude(i,r,!0),t.existsSync(n)})))return n}function u(t,i){var r,n=t.filename,a=arguments.length>1;if(t.cache){if(!n)throw new Error("cache option requires a filename");if(r=e.cache.get(n))return r;a||(i=m(n).toString().replace(l,""))}else if(!a){if(!n)throw new Error("Internal EJS error: no file name or template provided");i=m(n).toString().replace(l,"")}return r=e.compile(i,t),t.cache&&e.cache.set(n,r),r}function m(t){return e.fileLoader(t)}function g(i,n){var a=r.shallowCopy(r.createNullProtoObjWherePossible(),n);if(a.filename=function(i,r){var n,a,o=r.views,s=/^[A-Za-z]+:\\|^\//.exec(i);if(s&&s.length)i=i.replace(/^\/*/,""),n=Array.isArray(r.root)?p(i,r.root):e.resolveInclude(i,r.root||"/",!0);else if(r.filename&&(a=e.resolveInclude(i,r.filename),t.existsSync(a)&&(n=a)),!n&&Array.isArray(o)&&(n=p(i,o)),!n&&"function"!=typeof r.includer)throw new Error('Could not find the include file "'+r.escapeFunction(i)+'"');return n}(i,a),"function"==typeof n.includer){var o=n.includer(i,a.filename);if(o&&(o.filename&&(a.filename=o.filename),o.template))return u(a,o.template)}return u(a)}function f(e,t,i,r,n){var a=t.split("\n"),o=Math.max(r-3,0),s=Math.min(a.length,r+3),d=n(i),l=a.slice(o,s).map((function(e,t){var i=t+o+1;return(i==r?" >> ":"    ")+i+"| "+e})).join("\n");throw e.path=d,e.message=(d||"ejs")+":"+r+"\n"+l+"\n\n"+e.message,e}function b(e){return e.replace(/;(\s*$)/,"$1")}function h(t,i){i=i||r.createNullProtoObjWherePossible();var n=r.createNullProtoObjWherePossible();this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",n.client=i.client||!1,n.escapeFunction=i.escape||i.escapeFunction||r.escapeXML,n.compileDebug=!1!==i.compileDebug,n.debug=!!i.debug,n.filename=i.filename,n.openDelimiter=i.openDelimiter||e.openDelimiter||"<",n.closeDelimiter=i.closeDelimiter||e.closeDelimiter||">",n.delimiter=i.delimiter||e.delimiter||"%",n.strict=i.strict||!1,n.context=i.context,n.cache=i.cache||!1,n.rmWhitespace=i.rmWhitespace,n.root=i.root,n.includer=i.includer,n.outputFunctionName=i.outputFunctionName,n.localsName=i.localsName||e.localsName||o,n.views=i.views,n.async=i.async,n.destructuredLocals=i.destructuredLocals,n.legacyInclude=void 0===i.legacyInclude||!!i.legacyInclude,n.strict?n._with=!1:n._with=void 0===i._with||i._with,this.opts=n,this.regex=this.createRegex()}e.cache=r.cache,e.fileLoader=t.readFileSync,e.localsName=o,e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(e,t,r){var n=i.dirname,a=i.extname,o=(0,i.resolve)(r?t:n(t),e);return a(e)||(o+=".ejs"),o},e.compile=function(e,t){return t&&t.scope&&(n||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),n=!0),t.context||(t.context=t.scope),delete t.scope),new h(e,t).compile()},e.render=function(e,t,i){var n=t||r.createNullProtoObjWherePossible(),a=i||r.createNullProtoObjWherePossible();return 2==arguments.length&&r.shallowCopyFromList(a,n,s),u(a,e)(n)},e.renderFile=function(){var t,i,n,a=Array.prototype.slice.call(arguments),o=a.shift(),s={filename:o};return"function"==typeof arguments[arguments.length-1]&&(t=a.pop()),a.length?(i=a.shift(),a.length?r.shallowCopy(s,a.pop()):(i.settings&&(i.settings.views&&(s.views=i.settings.views),i.settings["view cache"]&&(s.cache=!0),(n=i.settings["view options"])&&r.shallowCopy(s,n)),r.shallowCopyFromList(s,i,d)),s.filename=o):i=r.createNullProtoObjWherePossible(),function(t,i,r){var n;if(!r){if("function"==typeof e.promiseImpl)return new e.promiseImpl((function(e,r){try{e(n=u(t)(i))}catch(a){r(a)}}));throw new Error("Please provide a callback function")}try{n=u(t)(i)}catch(a){return r(a)}r(null,n)}(s,i,t)},e.Template=h,e.clearCache=function(){e.cache.reset()},h.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},h.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=r.escapeRegExpChars(this.opts.delimiter),i=r.escapeRegExpChars(this.opts.openDelimiter),n=r.escapeRegExpChars(this.opts.closeDelimiter);return e=e.replace(/%/g,t).replace(/</g,i).replace(/>/g,n),new RegExp(e)},compile:function(){var e,t,n,a=this.opts,o="",s="",d=a.escapeFunction,l=a.filename?JSON.stringify(a.filename):"undefined";if(!this.source){if(this.generateSource(),o+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',a.outputFunctionName){if(!c.test(a.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");o+="  var "+a.outputFunctionName+" = __append;\n"}if(a.localsName&&!c.test(a.localsName))throw new Error("localsName is not a valid JS identifier.");if(a.destructuredLocals&&a.destructuredLocals.length){for(var p="  var __locals = ("+a.localsName+" || {}),\n",u=0;u<a.destructuredLocals.length;u++){var m=a.destructuredLocals[u];if(!c.test(m))throw new Error("destructuredLocals["+u+"] is not a valid JS identifier.");u>0&&(p+=",\n  "),p+=m+" = __locals."+m}o+=p+";\n"}!1!==a._with&&(o+="  with ("+a.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=o+this.source+s}e=a.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+l+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,a.client&&(e="escapeFn = escapeFn || "+d.toString()+";\n"+e,a.compileDebug&&(e="rethrow = rethrow || "+f.toString()+";\n"+e)),a.strict&&(e='"use strict";\n'+e),a.debug&&console.log(e),a.compileDebug&&a.filename&&(e=e+"\n//# sourceURL="+l+"\n");try{if(a.async)try{n=new Function("return (async function(){}).constructor;")()}catch(v){throw v instanceof SyntaxError?new Error("This environment does not support async/await"):v}else n=Function;t=new n(a.localsName+", escapeFn, include, rethrow",e)}catch(v){throw v instanceof SyntaxError&&(a.filename&&(v.message+=" in "+a.filename),v.message+=" while compiling ejs\n\n",v.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",v.message+="https://github.com/RyanZim/EJS-Lint",a.async||(v.message+="\n",v.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),v}var b=a.client?t:function(e){return t.apply(a.context,[e||r.createNullProtoObjWherePossible(),d,function(t,i){var n=r.shallowCopy(r.createNullProtoObjWherePossible(),e);return i&&(n=r.shallowCopy(n,i)),g(t,a)(n)},f])};if(a.filename&&"function"==typeof Object.defineProperty){var h=a.filename,y=i.basename(h,i.extname(h));try{Object.defineProperty(b,"name",{value:y,writable:!1,enumerable:!1,configurable:!0})}catch(v){}}return b},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var e=this,t=this.parseTemplateText(),i=this.opts.delimiter,r=this.opts.openDelimiter,n=this.opts.closeDelimiter;t&&t.length&&t.forEach((function(a,o){var s;if(0===a.indexOf(r+i)&&0!==a.indexOf(r+i+i)&&(s=t[o+2])!=i+n&&s!="-"+i+n&&s!="_"+i+n)throw new Error('Could not find matching close tag for "'+a+'".');e.scanLine(a)}))},parseTemplateText:function(){for(var e,t=this.templateText,i=this.regex,r=i.exec(t),n=[];r;)0!==(e=r.index)&&(n.push(t.substring(0,e)),t=t.slice(e)),n.push(r[0]),t=t.slice(r[0].length),r=i.exec(t);return t&&n.push(t),n},_addOutput:function(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var t,i=this.opts.delimiter,r=this.opts.openDelimiter,n=this.opts.closeDelimiter;switch(t=e.split("\n").length-1,e){case r+i:case r+i+"_":this.mode=h.modes.EVAL;break;case r+i+"=":this.mode=h.modes.ESCAPED;break;case r+i+"-":this.mode=h.modes.RAW;break;case r+i+"#":this.mode=h.modes.COMMENT;break;case r+i+i:this.mode=h.modes.LITERAL,this.source+='    ; __append("'+e.replace(r+i+i,r+i)+'")\n';break;case i+i+n:this.mode=h.modes.LITERAL,this.source+='    ; __append("'+e.replace(i+i+n,i+n)+'")\n';break;case i+n:case"-"+i+n:case"_"+i+n:this.mode==h.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case h.modes.EVAL:case h.modes.ESCAPED:case h.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case h.modes.EVAL:this.source+="    ; "+e+"\n";break;case h.modes.ESCAPED:this.source+="    ; __append(escapeFn("+b(e)+"))\n";break;case h.modes.RAW:this.source+="    ; __append("+b(e)+")\n";break;case h.modes.COMMENT:break;case h.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&t&&(this.currentLine+=t,this.source+="    ; __line = "+this.currentLine+"\n")}},e.escapeXML=r.escapeXML,e.__express=e.renderFile,e.VERSION=a,e.name="ejs","undefined"!=typeof window&&(window.ejs=e)}(ejs);const watermarkTemplate='<div class="akcelo-watermark" style="position:absolute;bottom:0;right:0;background:rgba(255,255,255,0.5);padding:2px 4px;z-index:2;">\n    <a href="https://akcelo.io" target="blank" rel="nofollow" style="text-decoration:none;display:flex;align-items:center;font-family:Roboto, sans-serif;font-size:6px;color:#000;">\n        <span style="line-height:10px;">Powered by</span>\n        <img rel="preload" src="https://ads.sportslocalmedia.com/akcelo_logo.svg" alt="Akcelo logo" style="height:6px;margin-left:3px;"/>\n    </a>\n</div>\n',iconTemplate='<style>\n    @keyframes fadeAnimationAkcelo {\n        0% {\n            filter: grayscale(1);\n            opacity: 0.5;\n            scale: 0.75;\n        }\n        50% {\n            filter: grayscale(0);\n            opacity: 0.75;\n            scale: 1;\n        }\n        100% {\n            filter: grayscale(1);\n            opacity: 0.5;\n            scale: 0.75;\n        }\n    }\n</style>\n<div class="akcelo-icon" style="position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1;background:#f9f9f9;border-radius:.5rem;padding:6px;">\n    <img rel="preload" src="https://ads.sportslocalmedia.com/akcelo_icon.svg" alt="Akcelo icon" style="height:32px;animation: fadeAnimationAkcelo 2s infinite;"/>\n</div>\n';class Placeholder{constructor(){hooks.after("loadConfig",((e,t)=>{var i;const r=this.getParams(null===(i=t.params)||void 0===i?void 0:i.placeholder);r.allowIcon&&this.renderIcon(),r.allowWatermark&&this.renderWatermark()})),hooks.after("renderAds",((e,t)=>{t.ids.forEach((e=>{const t=document.getElementById(e);t&&this.remove(t)}))})),hooks.after("passback",((e,t)=>{const i=document.getElementById(t.adUnit.id);i&&this.remove(i)}))}getParams(e){return Object.assign(Object.assign({},{allowIcon:!1,allowWatermark:!1}),e)}renderWatermark(){document.querySelectorAll(".akcelo-placeholder").forEach((e=>{e.dataset.disableWatermark||(e.innerHTML+=ejs.render(watermarkTemplate))}))}renderIcon(){document.querySelectorAll(".akcelo-placeholder").forEach((e=>{e.innerHTML+=ejs.render(iconTemplate)}))}remove(e){var t,i;if(null==e?void 0:e.classList.contains("akcelo-placeholder")){e.classList.add("akcelo-loaded");const t=e.querySelector(".akcelo-icon");t&&t.remove()}if(null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.classList.contains("akcelo-placeholder")){e.parentElement.classList.add("akcelo-loaded");const t=null===(i=e.parentElement)||void 0===i?void 0:i.querySelector(".akcelo-icon");t&&t.remove()}}}new Placeholder;class Timer{constructor(e,t){this.remaining=t,this.callback=e,this.delay=t,this.resume()}pause(){window.clearTimeout(this.timerId),this.remaining-=Date.now()-(this.start||0)}resume(){this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.callback,this.remaining)}reset(){this.remaining=this.delay,this.resume()}}class LogSender{constructor(e,t=200){this.items=[],this.url=e,this.timer=t}send(e){this.sendAll([e])}batchThenSend(e){return!!e&&(this.items.push(e),0===this.timer?this.flush():void(1===this.items.length&&setTimeout((()=>this.flush()),this.timer)))}flush(){0!==this.items.length&&(this.sendAll(this.items),this.reset())}sendAll(e){const t=JSON.stringify(e),i=new XMLHttpRequest;i.open("POST",this.url,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(t)}reset(){this.items=[]}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase()}const randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID:randomUUID};function v4(e,t,i){if(native.randomUUID&&!t&&!e)return native.randomUUID();const r=(e=e||{}).random||(e.rng||rng)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return unsafeStringify(r)}class UserManager{constructor(){this.sessionId=sessionStorage.getItem(SESSION_ID_STORAGE_KEY)||"",this.sessionId||(this.sessionId=v4(),sessionStorage.setItem(SESSION_ID_STORAGE_KEY,this.sessionId)),this.pageviewId=v4(),window.slmadshb=window.slmadshb||{que:[]},window.slmadshb.akceloIds={sessionId:this.sessionId,pageviewId:this.pageviewId}}}const UserManager$1=new UserManager;var __awaiter$6=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const isAdBlockDetected=()=>__awaiter$6(void 0,void 0,void 0,(function*(){return new Promise((e=>{const t=()=>{const t=document.createElement("ins");t.className="AdSense",t.style.display="block",t.style.position="absolute",t.style.top="-1px",t.style.height="1px",document.body.appendChild(t);const i=!t.clientHeight;document.body.removeChild(t),e(i)};try{t()}catch(i){document.addEventListener("DOMContentLoaded",t)}}))})),logger$m=new Logger("Analytics Engagement"),between=(e,t,i)=>Math.max(t,Math.min(i,e)),ENGAGEMENT_STATS_KEY="akcl_eng";class EngagementListener{constructor(){this.maxScrollY=0,this.startTime=Date.now(),this.isEngaged=this.isTabActive(),this.lastEngagedTime=this.startTime,this.engagementDuration=0,document.addEventListener("visibilitychange",(()=>{logger$m.debug(`Visibility changed [active=${this.isTabActive()}]`),this.isTabActive()?this.setEngaged():this.setNotEngaged()})),window.addEventListener("scroll",(()=>{window.scrollY>this.maxScrollY&&(this.maxScrollY=window.scrollY)}))}getStats(){const e=Date.now(),t=this.engagementDuration+(this.isEngaged?e-this.lastEngagedTime:0),i=this.maxScrollY/(document.body.scrollHeight-window.innerHeight)*100;return{visitDuration:(e-this.startTime)/1e3,engagementDuration:t/1e3,scrollDepth:Math.round(between(i||0,0,100))}}saveStats(){const e=this.getStats(),t=this.loadStats();return t.push(e),localStorage.setItem(ENGAGEMENT_STATS_KEY,JSON.stringify(t)),e}loadStats(){const e=localStorage.getItem(ENGAGEMENT_STATS_KEY);try{return e?JSON.parse(e):[]}catch(t){return localStorage.removeItem(ENGAGEMENT_STATS_KEY),[]}}reset(){this.maxScrollY=0,this.startTime=Date.now(),this.isEngaged=this.isTabActive(),this.lastEngagedTime=Date.now(),this.engagementDuration=0}setEngaged(){logger$m.debug("The user is engaged"),this.isEngaged=!0,this.lastEngagedTime=Date.now()}setNotEngaged(){logger$m.debug("The user is not engaged"),this.isEngaged=!1,this.engagementDuration+=Date.now()-this.lastEngagedTime}isTabActive(){return!document.hidden}}const EngagementListener$1=new EngagementListener;var __awaiter$5=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$l=new Logger("Event Analytics");class EventAnalytics{constructor(){this.eventsLogger=new LogSender("https://logs2.sportslocalmedia.com/events"),this.requestedHtmlIds=[],this.requestedMetaSlmadsIds=[],this.eventLogQueue=[],this.eventLogIsStarted=!1,logger$l.info("Module initialization");const e=getBrowser(),t=isMobile()?"mobile":"desktop";let i=null;void 0!==window.navigator&&(i=void 0===window.navigator.userAgentData?window.navigator.platform:window.navigator.userAgentData.platform),hooks.after("loadConfig",(r=>__awaiter$5(this,void 0,void 0,(function*(){var n,a,o;(null===(n=null==r?void 0:r.params)||void 0===n?void 0:n.siteId)&&(this.context={device:t,abtest:null===(a=window.slmadshb.abtest)||void 0===a?void 0:a.versionName,siteId:null===(o=null==r?void 0:r.params)||void 0===o?void 0:o.siteId,sessionId:UserManager$1.sessionId,pageviewId:UserManager$1.pageviewId,os:i,browser:e.name,path:window.location.pathname},this.processQueue(),this.setupPageView())})))),hooks.after("bidsRequest",((e,t)=>{t.ids.forEach((e=>{var t;if(!this.requestedHtmlIds.includes(e)){const i=StateManager.state.adUnits[e],r=null===(t=Config.config.adUnits)||void 0===t?void 0:t.find((e=>e.id===(null==i?void 0:i.ref)));(null==r?void 0:r.slmadsId)&&this.logEvent("adcall",{data:{slmads_id:r.slmadsId.toString()}}),this.requestedHtmlIds.push(e)}}))})),hooks.after("addMetaAdUnit",((e,t)=>{const{slmadsId:i}=t.metaAdUnit;this.requestedMetaSlmadsIds.includes(i)||(this.logEvent("adcall",{data:{meta_slmads_id:i.toString()}}),this.requestedMetaSlmadsIds.push(i))})),Math.random()<=.01&&domReady((()=>this.logTroubleshoot())),window.addEventListener("message",(e=>{if("akcelo-click"===e.data.event){const t=e.data.data||{};this.eventsLogger.send(Object.assign(Object.assign({eventType:"click"},this.context),{data:t}))}})),window.addEventListener("beforeunload",(()=>{this.logVisit()}))}logVisit(){if(this.eventLogIsStarted){if(this.context){const e=EngagementListener$1.saveStats();fetch("https://logs2.sportslocalmedia.com/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign(Object.assign({eventType:"visit"},this.context),{data:{duration:e.visitDuration.toString(),engagementDuration:e.engagementDuration.toString(),scrollDepth:e.scrollDepth.toString()}})),keepalive:!0})}}else this.eventLogQueue.push({eventType:"visit"})}logEvent(e,t={}){logger$l.info("Logging event",e,t),this.eventLogIsStarted?(t.data&&Object.keys(t.data).forEach((e=>{t.data&&(t.data[e]=t.data[e].toString())})),this.eventsLogger.batchThenSend(Object.assign(Object.assign({eventType:e},this.context),t))):this.eventLogQueue.push({eventType:e,extraContext:t})}logPerformances(){var e,t,i,r;if(!this.eventLogIsStarted)return void this.eventLogQueue.push({eventType:"performance"});if(Math.random()>.04)return;let n,a;window.navigator.connection&&(n=null===(t=null===(e=window.navigator)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.effectiveType,a=null===(r=null===(i=window.navigator)||void 0===i?void 0:i.connection)||void 0===r?void 0:r.downlink);try{const e=performance.measure("akcelo:fromStartToLoad",void 0,PERFORMANCE_EVENTS.LOAD_MODULE),t=performance.measure("akcelo:fromLoadToFirstBid",PERFORMANCE_EVENTS.LOAD_MODULE,PERFORMANCE_EVENTS.BID_REQUEST),i=performance.measure("akcelo:fromLoadToAdManagerRequest",PERFORMANCE_EVENTS.LOAD_MODULE,PERFORMANCE_EVENTS.GAM_REQUEST);void 0!==e&&(this.logEvent("performance",{data:{connection_type:n||"",connection_downlink:(null==a?void 0:a.toString())||"",from_start_to_load:Math.ceil(e.duration).toString(),from_load_to_first_bid:(Math.ceil(null==t?void 0:t.duration)||0).toString(),from_load_to_ad_manager_request:(Math.ceil(null==i?void 0:i.duration)||0).toString()}}),performance.clearMarks(PERFORMANCE_EVENTS.LOAD_MODULE),performance.clearMarks(PERFORMANCE_EVENTS.GAM_REQUEST),performance.clearMarks(PERFORMANCE_EVENTS.BID_REQUEST),performance.clearMeasures("akcelo:fromStartToLoad"),performance.clearMeasures("akcelo:fromLoadToFirstBid"),performance.clearMeasures("akcelo:fromLoadToAdManagerRequest"))}catch(o){logger$l.error("Error during performance measure",o)}}logTroubleshoot(){if(!this.eventLogIsStarted)return void this.eventLogQueue.push({eventType:"troubleshoot"});const e=document.createElement("script");e.src="https://ads.sportslocalmedia.com/slm.adtool.troubleshoot.js",e.onload=()=>__awaiter$5(this,void 0,void 0,(function*(){var e,t;if(!(null===(t=null===(e=window.slmadshb)||void 0===e?void 0:e.checkService)||void 0===t?void 0:t.check))return;const i=yield window.slmadshb.checkService.check();i&&i.filter((e=>"PASSED"!==e.status)).forEach((e=>{var t,i,r,n,a;this.logEvent("troubleshoot",{data:{slmads_id:null!==(r=null===(i=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.slmadsId)||void 0===i?void 0:i.toString())&&void 0!==r?r:"",severity:(null===(n=e.severity)||void 0===n?void 0:n.toLowerCase())||"",status:(null===(a=e.status)||void 0===a?void 0:a.toLowerCase())||"",code:e.code}})}))})),document.head.appendChild(e)}setupPageView(){return __awaiter$5(this,void 0,void 0,(function*(){return ConsentManager$1.loadConsent().then((()=>__awaiter$5(this,void 0,void 0,(function*(){if(!(yield isAdBlockDetected())){const e=ConsentManager$1.getConsentType(),t=ConsentManager$1.getCmpId();this.logEvent("pageview",{data:{consent:e,cmp_id:t.toString()}});let i=window.location.hostname+window.location.pathname;new MutationObserver((()=>{const r=window.location.hostname+window.location.pathname;r!==i&&(i=r,this.logVisit(),EngagementListener$1.reset(),this.context&&(this.context.path=window.location.pathname),this.logEvent("pageview",{data:{consent:e,cmp_id:t.toString()}}))})).observe(document,{subtree:!0,childList:!0})}}))))}))}processQueue(){this.eventLogIsStarted||(this.eventLogIsStarted=!0,this.eventLogQueue.forEach((e=>{switch(e.eventType){case"visit":this.logVisit();break;case"performance":this.logPerformances();break;case"troubleshoot":this.logTroubleshoot();break;default:this.logEvent(e.eventType,e.extraContext)}})),this.eventLogQueue=[])}}const EventAnalytics$1=new EventAnalytics,logger$k=new Logger("Auction Manager");class AuctionManager{constructor(){this.bidderModules=[],this.renderModules=[],this.readyToRequestAdUnits=[],this.requestAdUnitsDelay=100,this.requestAdUnitsTimer=null,this.isFirstAdRender=!0,logger$k.info("Module initialization")}registerBidderModule(e){this.bidderModules.push(e),this.sortByPriority(this.bidderModules)}registerRenderModule(e){this.renderModules.push(e),this.sortByPriority(this.renderModules)}addAdUnitReadyToRequest(e){var t,i,r,n,a,o;const s=StateManager.state.adUnits[e];s.isReadyToRequest=!0;const d=null!==(t=null==s?void 0:s.ref)&&void 0!==t?t:e;if(!(null===(n=null===(r=null===(i=Config.adUnits.get(d))||void 0===i?void 0:i.params)||void 0===r?void 0:r.lazyLoad)||void 0===n?void 0:n.enabled)||s.isReadyToRender)return this.readyToRequestAdUnits.push(e),(null===(a=window.slmadshb)||void 0===a?void 0:a.enableSlotsBulk)?this.requestAdUnitsTimer?this.requestAdUnitsTimer.reset():this.requestAdUnitsTimer=new Timer((()=>{this.requestBids(this.readyToRequestAdUnits),this.requestAdUnitsTimer=null}),(null===(o=window.slmadshb)||void 0===o?void 0:o.requestAdUnitsDelay)||this.requestAdUnitsDelay):this.requestBids([e]),hooks("adUnitReady",(()=>{}),{htmlId:e})}isAdUnitRenderCompatible(e){var t,i,r;const n=null!==(i=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==i?i:e;return"video"!==(null===(r=Config.adUnits.get(n))||void 0===r?void 0:r.type)}requestBids(e){return hooks("bidsRequest",(t=>{logger$k.info("Requesting bids",t.ids);const i=[];this.readyToRequestAdUnits=[],this.bidderModules.forEach((r=>{"prebid"===r.name?t.ids.forEach((e=>{i.push(r.requestBids([e]))})):i.push(r.requestBids(e))})),Promise.all(i).then((()=>{this.renderAds(t.ids)}))}),{ids:e})}renderAds(e){return logger$k.info("Rendering ads",e),hooks("adRequest",(e=>{let t=[...e.ids.filter((e=>this.isAdUnitRenderCompatible(e)))];this.renderModules.forEach((e=>{const i=t.filter((t=>e.canRender(t)));i.length>0&&(e.prepareRenderAds(i),hooks("renderAds",(()=>{e.renderAds(i),this.isFirstAdRender&&(EventAnalytics$1.logPerformances(),this.isFirstAdRender=!1)}),{ids:i})),t=t.filter((e=>!i.includes(e)))}));const i=[];t.forEach((e=>{var t,r;i.push(null!==(r=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==r?r:e)})),Config.getAdUnitsConfigById(i).forEach((e=>{var t;if(e.params&&"function"==typeof(null===(t=e.params)||void 0===t?void 0:t.passbackCallback))return hooks("passback",(e=>{logger$k.info("Passback ad unit",e.adUnit)}),{adUnit:e})}))}),{ids:e,options:{}})}sortByPriority(e){e.sort(((e,t)=>t.priority-e.priority))}}const auctionManager=new AuctionManager,RENDERER='!function(){"use strict";window.render=function({ad:d,adUrl:i,width:n,height:e},{mkFrame:o},r){if(!d&&!i)throw{reason:"noAd",message:"Missing ad markup or URL"};{const t=r.document,s={width:n,height:e};i&&!d?s.src=i:s.srcdoc=d,t.body.appendChild(o(t,s))}}}();',getCreativeRendererSource=hook("sync",(function(e){return RENDERER})),getCreativeRenderer=function(){const e={};return function(t){const i=getCreativeRendererSource(t);return e.hasOwnProperty(i)||(e[i]=new GreedyPromise((e=>{const t=createInvisibleIframe();t.srcdoc=`<script>${i}<\/script>`,t.onload=()=>e(t.contentWindow.render),document.body.appendChild(t)}))),e[i]}}(),{AD_RENDER_FAILED:AD_RENDER_FAILED,AD_RENDER_SUCCEEDED:AD_RENDER_SUCCEEDED,STALE_RENDER:STALE_RENDER,BID_WON:BID_WON$1}=EVENTS$1,{EXCEPTION:EXCEPTION}=AD_RENDER_FAILED_REASON;function emitAdRenderFail({reason:e,message:t,bid:i,id:r}){const n={reason:e,message:t};i&&(n.bid=i,n.adId=i.adId),r&&(n.adId=r),logError(`Error rendering ad (id: ${r}): ${t}`),emit(AD_RENDER_FAILED,n)}function emitAdRenderSucceeded({doc:e,bid:t,id:i}){const r={doc:e};t&&(r.bid=t),i&&(r.adId=i),emit(AD_RENDER_SUCCEEDED,r)}function handleCreativeEvent(e,t){switch(e.event){case EVENTS$1.AD_RENDER_FAILED:emitAdRenderFail({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case EVENTS$1.AD_RENDER_SUCCEEDED:emitAdRenderSucceeded({doc:null,bid:t,id:t.adId});break;default:logError(`Received event request for unsupported event: '${e.event}' (adId: '${t.adId}')`)}}function handleNativeMessage(e,t,{resizeFn:i,fireTrackers:r=fireNativeTrackers}){"resizeNativeHeight"===e.action?i(e.width,e.height):r(e,t)}const HANDLERS={[MESSAGES.EVENT]:handleCreativeEvent};function creativeMessageHandler(e){return function(t,i,r){HANDLERS.hasOwnProperty(t)&&HANDLERS[t](i,r,e)}}HANDLERS[MESSAGES.NATIVE]=handleNativeMessage;const getRenderingData=hook("sync",(function(e,t){const{ad:i,adUrl:r,cpm:n,originalCpm:a,width:o,height:s}=e,d={AUCTION_PRICE:a||n,CLICKTHROUGH:(null==t?void 0:t.clickUrl)||""};return{ad:replaceMacros(i,d),adUrl:replaceMacros(r,d),width:o,height:s}})),doRender=hook("sync",(function({renderFn:e,resizeFn:t,bidResponse:i,options:r}){if(i.mediaType===VIDEO)return void emitAdRenderFail({reason:AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:i,id:i.adId});const n=getRenderingData(i,r);e(Object.assign({adId:i.adId},n));const{width:a,height:o}=n;null!=(a??o)&&t(a,o)}));function handleRender({renderFn:e,resizeFn:t,adId:i,options:r,bidResponse:n,doc:a}){if(null!=n){if(n.status!==BID_STATUS.RENDERED||(logWarn(`Ad id ${i} has been rendered before`),emit(STALE_RENDER,n),!dlv(config.getConfig("auctionOptions"),"suppressStaleRender"))){try{doRender({renderFn:e,resizeFn:t,bidResponse:n,options:r,doc:a})}catch(o){emitAdRenderFail({reason:AD_RENDER_FAILED_REASON.EXCEPTION,message:o.message,id:i,bid:n})}auctionManager$1.addWinningBid(n),emit(BID_WON$1,n)}}else emitAdRenderFail({reason:AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:`Cannot find ad '${i}'`,id:i})}function renderAdDirect(e,t,i){let r;function n(e,i){emitAdRenderFail(Object.assign({id:t,bid:r},{reason:e,message:i}))}function a(t,i){e.defaultView&&e.defaultView.frameElement&&(t&&(e.defaultView.frameElement.width=t),i&&(e.defaultView.frameElement.height=i))}const o=creativeMessageHandler({resizeFn:a});try{t&&e?(r=auctionManager$1.findBidByAdId(t),e!==document||inIframe()?handleRender({renderFn:function(t){t.ad?(e.write(t.ad),e.close(),emitAdRenderSucceeded({doc:e,bid:r,adId:r.adId})):getCreativeRenderer(r).then((i=>i(t,{sendMessage:(e,t)=>o(e,t,r),mkFrame:createIframe},e.defaultView))).then((()=>emitAdRenderSucceeded({doc:e,bid:r,adId:r.adId})),(e=>{n((null==e?void 0:e.reason)||AD_RENDER_FAILED_REASON.EXCEPTION,null==e?void 0:e.message),(null==e?void 0:e.stack)&&logError(e)})),insertElement(document.createComment(`Creative ${r.creativeId} served by ${r.bidder} Prebid.js Header Bidding`),e,"html")},resizeFn:a,adId:t,options:{clickUrl:null==i?void 0:i.clickThrough},bidResponse:r,doc:e}):n(AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,"renderAd was prevented from writing to the main document.")):n(AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,"missing "+(t?"doc":"adId"))}catch(s){n(EXCEPTION,s.message)}}doRender.before((function(e,t){const{bidResponse:i,doc:r}=t;isRendererRequired(i.renderer)?(executeRenderer(i.renderer,i,r),emitAdRenderSucceeded({doc:r,bid:i,id:i.adId}),e.bail()):e(t)}),100);const{REQUEST:REQUEST,RESPONSE:RESPONSE,NATIVE:NATIVE,EVENT:EVENT}=MESSAGES,BID_WON=EVENTS$1.BID_WON,HANDLER_MAP={[REQUEST]:handleRenderRequest,[EVENT]:handleEventRequest};function listenMessagesFromCreative(){window.addEventListener("message",receiveMessage,!1)}function getReplier(e){return null==e.origin&&0===e.ports.length?function(){const e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw logError(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}function receiveMessage(e){var t=e.message?"message":"data",i={};try{i=JSON.parse(e[t])}catch(r){return}if(i&&i.adId&&i.message){const t=find(auctionManager$1.getBidsReceived(),(function(e){return e.adId===i.adId}));HANDLER_MAP.hasOwnProperty(i.message)&&HANDLER_MAP[i.message](getReplier(e),i,t)}}function getResizer(e){return function(t,i){resizeRemoteCreative({...e,width:t,height:i})}}function handleRenderRequest(e,t,i){handleRender({renderFn(t){e(Object.assign({message:RESPONSE,renderer:getCreativeRendererSource(i)},t))},resizeFn:getResizer(i),options:t.options,adId:t.adId,bidResponse:i})}function handleNativeRequest(e,t,i){if(null!=i)switch(i.status!==BID_STATUS.RENDERED&&(auctionManager$1.addWinningBid(i),emit(BID_WON,i)),t.action){case"assetRequest":e(getAssetMessage(t,i));break;case"allAssetRequest":e(getAllAssetsMessage(t,i));break;default:handleNativeMessage(t,i,{resizeFn:getResizer(i)})}else logError(`Cannot find ad for x-origin event request: '${t.adId}'`)}function handleEventRequest(e,t,i){if(null!=i){if(i.status===BID_STATUS.RENDERED)return handleCreativeEvent(t,i);logWarn(`Received x-origin event request without corresponding render request for ad '${i.adId}'`)}else logError(`Cannot find ad '${t.adId}' for x-origin event request`)}function resizeRemoteCreative({adId:e,adUnitCode:t,width:i,height:r}){function n(e){return e?e+"px":"100%"}["div","iframe"].forEach((a=>{let o=function(i){let r=(a=e,o=t,isGptPubadsDefined()?function(e){const t=find(window.googletag.pubads().getSlots(),(t=>find(t.getTargetingKeys(),(i=>includes$1(t.getTargeting(i),e)))));return t?t.getSlotElementId():null}(a):isApnGetTagDefined()?function(e){let t=window.apntag.getTag(e);return t&&t.targetId}(o):o),n=document.getElementById(r);var a,o;return n&&n.querySelector(i)}(a+':not([style*="display: none"])');if(o){let e=o.style;e.width=n(i),e.height=n(r)}else logWarn(`Unable to locate matching page element for adUnitCode ${t}.  Can't resize it to ad's dimensions.  Please review setup.`)}))}Object.assign(HANDLER_MAP,{[NATIVE]:handleNativeRequest});const DEBUG_KEY="__slmpbjs_debugging__";function isDebuggingInstalled(){return getGlobal().installedModules.includes("debugging")}function loadScript(e){return new GreedyPromise((t=>{loadExternalScript(e,"debugging",t)}))}function debuggingModuleLoader({alreadyInstalled:e=isDebuggingInstalled,script:t=loadScript}={}){let i=null;return function(){return null==i&&(i=new GreedyPromise(((i,r)=>{setTimeout((()=>{if(e())i();else{const e="https://cdn.jsdelivr.net/npm/prebid.js@8.47.0/dist/debugging-standalone.js";logMessage(`Debugging module not installed, loading it from "${e}"...`),getGlobal()._installDebugging=!0,t(e).then((()=>{getGlobal()._installDebugging({DEBUG_KEY:DEBUG_KEY,hook:hook,config:config,createBid:createBid$1,logger:prefixLog("DEBUG:")})})).then(i,r)}}))}))),i}}function debuggingControls({load:e=debuggingModuleLoader(),hook:t=getHook("requestBids")}={}){let i=null,r=!1;function n(e,...t){return(i||GreedyPromise.resolve()).then((()=>e.apply(this,t)))}function a(){t.getHooks({hook:n}).remove(),r=!1}return{enable:function(){r||(i=e(),t.before(n,99),r=!0)},disable:a,reset:function(){i=null,a()}}}const ctl=debuggingControls();function loadSession(){let e=null;try{e=window.sessionStorage}catch(t){}if(null!==e){let i=ctl,r=null;try{r=e.getItem(DEBUG_KEY)}catch(t){}null!==r&&i.enable()}}config.getConfig("debugging",(function({debugging:e}){(null==e?void 0:e.enabled)?ctl.enable():ctl.disable()}));const pbjsInstance=getGlobal(),{triggerUserSyncs:triggerUserSyncs}=userSync,{ADD_AD_UNITS:ADD_AD_UNITS,REQUEST_BIDS:REQUEST_BIDS,SET_TARGETING:SET_TARGETING}=EVENTS$1,eventValidators={bidWon:checkDefinedPlacement};function checkDefinedPlacement(e){if(auctionManager$1.getBidsRequested().map((e=>e.bids.map((e=>e.adUnitCode)))).reduce(flatten$1).filter(uniques).includes(e))return!0;logError('The "'+e+'" placement is not defined.')}function validateSizes(e,t){let i=[];return isArray(e)&&(t?e.length===t:e.length>0)&&(e.every((e=>isArrayOfNums(e,2)))?i=e:isArrayOfNums(e,2)&&i.push(e)),i}function validateBannerMediaType(e){const t=deepClone(e),i=t.mediaTypes.banner,r=validateSizes(i.sizes);return r.length>0?(i.sizes=r,t.sizes=r):(logError("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function validateVideoMediaType(e){const t=deepClone(e),i=t.mediaTypes.video;if(i.playerSize){let e="number"==typeof i.playerSize[0]?2:1;const r=validateSizes(i.playerSize,e);r.length>0?(2===e&&logInfo("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),i.playerSize=r,t.sizes=r):(logError("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function validateNativeMediaType(e){const t=deepClone(e),i=t.mediaTypes.native;if(i.ortb){const e=Object.keys(NATIVE_KEYS).filter((e=>NATIVE_KEYS[e].includes("hb_native_"))),r=Object.keys(i).filter((t=>e.includes(t)));r.length>0&&(logError(`when using native OpenRTB format, you cannot use legacy native properties. Deleting ${r} keys from request.`),r.forEach((e=>delete t.mediaTypes.native[e])))}return i.image&&i.image.sizes&&!Array.isArray(i.image.sizes)&&(logError("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),i.image&&i.image.aspect_ratios&&!Array.isArray(i.image.aspect_ratios)&&(logError("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),i.icon&&i.icon.sizes&&!Array.isArray(i.icon.sizes)&&(logError("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function validateAdUnitPos(e,t){let i=dlv(e,`mediaTypes.${t}.pos`);if(!isNumber(i)||isNaN(i)||!isFinite(i)){let i=`Value of property 'pos' on ad unit ${e.code} should be of type: Number`;logWarn(i),emit(EVENTS$1.AUCTION_DEBUG,{type:"WARNING",arguments:i}),delete e.mediaTypes[t].pos}return e}function validateAdUnit(e){const t=t=>`adUnit.code '${e.code}' ${t}`,i=e.mediaTypes,r=e.bids;return null==r||isArray(r)?null==r&&null==e.ortb2Imp?(logError(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):i&&0!==Object.keys(i).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],logMessage(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(logError(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(logError(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}loadSession(),pbjsInstance.bidderSettings=pbjsInstance.bidderSettings||{},pbjsInstance.libLoaded=!0,pbjsInstance.version="v8.47.0",logInfo("Prebid.js v8.47.0 loaded"),pbjsInstance.installedModules=pbjsInstance.installedModules||[],pbjsInstance.adUnits=pbjsInstance.adUnits||[],pbjsInstance.triggerUserSyncs=triggerUserSyncs;const adUnitSetupChecks={validateAdUnit:validateAdUnit,validateBannerMediaType:validateBannerMediaType,validateSizes:validateSizes};Object.assign(adUnitSetupChecks,{validateNativeMediaType:validateNativeMediaType}),Object.assign(adUnitSetupChecks,{validateVideoMediaType:validateVideoMediaType});const checkAdUnitSetup=hook("sync",(function(e){const t=[];return e.forEach((e=>{if(null==(e=validateAdUnit(e)))return;const i=e.mediaTypes;let r,n,a;i.banner&&(r=validateBannerMediaType(e),i.banner.hasOwnProperty("pos")&&(r=validateAdUnitPos(r,"banner"))),i.video&&(n=validateVideoMediaType(r||e),i.video.hasOwnProperty("pos")&&(n=validateAdUnitPos(n,"video"))),i.native&&(a=validateNativeMediaType(n||r||e));const o=Object.assign({},r,n,a);t.push(o)})),t}),"checkAdUnitSetup");function fillAdUnitDefaults(e){e.forEach((e=>fillVideoDefaults(e)))}function getBids(e){const t=auctionManager$1[e]().filter((e=>auctionManager$1.getAdUnitCodes().includes(e.adUnitCode))),i=auctionManager$1.getLastAuctionId();return t.map((e=>e.adUnitCode)).filter(uniques).map((e=>t.filter((t=>t.auctionId===i&&t.adUnitCode===e)))).filter((e=>e&&e[0]&&e[0].adUnitCode)).map((e=>({[e[0].adUnitCode]:{bids:e}}))).reduce(((e,t)=>Object.assign(e,t)),{})}pbjsInstance.getAdserverTargetingForAdUnitCodeStr=function(e){if(logInfo("Invoking slmpbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e)return transformAdServerTargetingObj(pbjsInstance.getAdserverTargetingForAdUnitCode(e));logMessage("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},pbjsInstance.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){const t=auctionManager$1.getAllBidsForAdUnitCode(e).filter(isBidUsable);return t.length?t.reduce(getHighestCpm):{}}logMessage("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},pbjsInstance.getAdserverTargetingForAdUnitCode=function(e){return pbjsInstance.getAdserverTargeting(e)[e]},pbjsInstance.getAdserverTargeting=function(e){return logInfo("Invoking slmpbjs.getAdserverTargeting",arguments),targeting.getAllTargeting(e)},pbjsInstance.getConsentMetadata=function(){return logInfo("Invoking slmpbjs.getConsentMetadata"),allConsent.getConsentMeta()},pbjsInstance.getNoBids=function(){return logInfo("Invoking slmpbjs.getNoBids",arguments),getBids("getNoBids")},pbjsInstance.getNoBidsForAdUnitCode=function(e){return{bids:auctionManager$1.getNoBids().filter((t=>t.adUnitCode===e))}},pbjsInstance.getBidResponses=function(){return logInfo("Invoking slmpbjs.getBidResponses",arguments),getBids("getBidsReceived")},pbjsInstance.getBidResponsesForAdUnitCode=function(e){return{bids:auctionManager$1.getBidsReceived().filter((t=>t.adUnitCode===e))}},pbjsInstance.setTargetingForGPTAsync=function(e,t){if(logInfo("Invoking slmpbjs.setTargetingForGPTAsync",arguments),!isGptPubadsDefined())return void logError("window.googletag is not defined on the page");let i=targeting.getAllTargeting(e);targeting.resetPresetTargeting(e,t),targeting.setTargetingForGPT(i,t),Object.keys(i).forEach((e=>{Object.keys(i[e]).forEach((t=>{"hb_adid"===t&&auctionManager$1.setStatusForBids(i[e][t],BID_STATUS.BID_TARGETING_SET)}))})),emit(SET_TARGETING,i)},pbjsInstance.setTargetingForAst=function(e){logInfo("Invoking slmpbjs.setTargetingForAn",arguments),targeting.isApntagDefined()?(targeting.setTargetingForAst(e),emit(SET_TARGETING,targeting.getAllTargeting())):logError("window.apntag is not defined on the page")},pbjsInstance.renderAd=hook("async",(function(e,t,i){logInfo("Invoking slmpbjs.renderAd",arguments),logMessage("Calling renderAd with adId :"+t),renderAdDirect(e,t,i)})),pbjsInstance.removeAdUnit=function(e){if(logInfo("Invoking slmpbjs.removeAdUnit",arguments),!e)return void(pbjsInstance.adUnits=[]);let t;t=isArray(e)?e:[e],t.forEach((e=>{for(let t=pbjsInstance.adUnits.length-1;t>=0;t--)pbjsInstance.adUnits[t].code===e&&pbjsInstance.adUnits.splice(t,1)}))},pbjsInstance.requestBids=function(){const e=hook("async",(function({bidsBackHandler:e,timeout:t,adUnits:i,adUnitCodes:r,labels:n,auctionId:a,ttlBuffer:o,ortb2:s,metrics:d,defer:l}={}){emit(REQUEST_BIDS);const c=t||config.getConfig("bidderTimeout");logInfo("Invoking slmpbjs.requestBids",arguments),r&&r.length?i=i.filter((e=>includes$1(r,e.code))):r=i&&i.map((e=>e.code));const p={global:mergeDeep({},config.getAnyConfig("ortb2")||{},s||{}),bidder:Object.fromEntries(Object.entries(config.getBidderConfig()).map((([e,t])=>[e,t.ortb2])).filter((([e,t])=>null!=t)))};return enrichFPD(GreedyPromise.resolve(p.global)).then((t=>(p.global=t,startAuction({bidsBackHandler:e,timeout:c,adUnits:i,adUnitCodes:r,labels:n,auctionId:a,ttlBuffer:o,ortb2Fragments:p,metrics:d,defer:l}))))}),"requestBids");return wrapHook(e,(function(t={}){let i=t.adUnits||pbjsInstance.adUnits;return t.adUnits=isArray(i)?i.slice():[i],t.metrics=newMetrics(),t.metrics.checkpoint("requestBids"),t.defer=defer({promiseFactory:e=>new Promise(e)}),e.call(this,t),t.defer.promise}))}();const startAuction=hook("async",(function({bidsBackHandler:e,timeout:t,adUnits:i,ttlBuffer:r,adUnitCodes:n,labels:a,auctionId:o,ortb2Fragments:s,metrics:d,defer:l}={}){const c=getS2SBidderSet(config.getConfig("s2sConfig")||[]);function p(t,i,r){if("function"==typeof e)try{e(t,i,r)}catch(n){logError("Error executing bidsBackHandler",null,n)}l.resolve({bids:t,timedOut:i,auctionId:r})}fillAdUnitDefaults(i),i=useMetrics(d).measureTime("requestBids.validate",(()=>checkAdUnitSetup(i)));const u={};if(i.forEach((e=>{var t,i;const n=Object.keys(e.mediaTypes||{banner:"banner"}),a=e.bids.map((e=>e.bidder)),o=adaptermanager.bidderRegistry,s=a.filter((e=>!c.has(e)));e.adUnitId=generateUUID();const d=null==(i=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:i.tid;d&&(u.hasOwnProperty(e.code)?logWarn(`Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '${e.code}'`):u[e.code]=d),null==r||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=r),s.forEach((t=>{const i=o[t],r=i&&i.getSpec&&i.getSpec(),a=r&&r.supportedMediaTypes||["banner"];n.some((e=>includes$1(a,e)))||(logWarn(unsupportedBidderMessage(e,t)),e.bids=e.bids.filter((e=>e.bidder!==t)))}))})),i&&0!==i.length){i.forEach((e=>{var t,i;const r=(null==(i=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:i.tid)||u[e.code]||generateUUID();u.hasOwnProperty(e.code)||(u[e.code]=r),e.transactionId=r,dset(e,"ortb2Imp.ext.tid",r)}));const e=auctionManager$1.createAuction({adUnits:i,adUnitCodes:n,callback:p,cbTimeout:t,labels:a,auctionId:o,ortb2Fragments:s,metrics:d});let r=i.length;r>15&&logInfo(`Current auction ${e.getAuctionId()} contains ${r} adUnits.`,i),n.forEach((t=>targeting.setLatestAuctionForAdUnit(t,e.getAuctionId()))),e.callBids()}else logMessage("No adUnits configured. No bids requested."),p()}),"startAuction");function executeCallbacks(e,t){function i(e){for(var t;t=e.shift();)t()}i(storageCallbacks),i(enableAnalyticsCallbacks),e.call(this,t)}pbjsInstance.requestBids.before(executeCallbacks,49),pbjsInstance.addAdUnits=function(e){logInfo("Invoking slmpbjs.addAdUnits",arguments),pbjsInstance.adUnits.push.apply(pbjsInstance.adUnits,isArray(e)?e:[e]),emit(ADD_AD_UNITS)},pbjsInstance.onEvent=function(e,t,i){logInfo("Invoking slmpbjs.onEvent",arguments),isFn(t)?!i||eventValidators[e].call(null,i)?on(e,t,i):logError('The id provided is not valid for event "'+e+'" and no handler was set.'):logError('The event handler provided is not a function and was not set on event "'+e+'".')},pbjsInstance.offEvent=function(e,t,i){logInfo("Invoking slmpbjs.offEvent",arguments),i&&!eventValidators[e].call(null,i)||off(e,t,i)},pbjsInstance.getEvents=function(){return logInfo("Invoking slmpbjs.getEvents"),getEvents()},pbjsInstance.registerBidAdapter=function(e,t){logInfo("Invoking slmpbjs.registerBidAdapter",arguments);try{adaptermanager.registerBidAdapter(e(),t)}catch(i){logError("Error registering bidder adapter : "+i.message)}},pbjsInstance.registerAnalyticsAdapter=function(e){logInfo("Invoking slmpbjs.registerAnalyticsAdapter",arguments);try{adaptermanager.registerAnalyticsAdapter(e)}catch(t){logError("Error registering analytics adapter : "+t.message)}},pbjsInstance.createBid=function(e){return logInfo("Invoking slmpbjs.createBid",arguments),createBid$1(e)};const enableAnalyticsCallbacks=[],enableAnalyticsCb=hook("async",(function(e){e&&!isEmpty(e)?(logInfo("Invoking slmpbjs.enableAnalytics for: ",e),adaptermanager.enableAnalytics(e)):logError("slmpbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");pbjsInstance.enableAnalytics=function(e){enableAnalyticsCallbacks.push(enableAnalyticsCb.bind(this,e))},pbjsInstance.aliasBidder=function(e,t,i){logInfo("Invoking slmpbjs.aliasBidder",arguments),e&&t?adaptermanager.aliasBidAdapter(e,t,i):logError("bidderCode and alias must be passed as arguments","slmpbjs.aliasBidder")},pbjsInstance.aliasRegistry=adaptermanager.aliasRegistry,config.getConfig("aliasRegistry",(e=>{"private"===e.aliasRegistry&&delete pbjsInstance.aliasRegistry})),pbjsInstance.getAllWinningBids=function(){return auctionManager$1.getAllWinningBids()},pbjsInstance.getAllPrebidWinningBids=function(){return auctionManager$1.getBidsReceived().filter((e=>e.status===BID_STATUS.BID_TARGETING_SET))},pbjsInstance.getHighestCpmBids=function(e){return targeting.getWinningBids(e)},pbjsInstance.markWinningBidAsUsed=function(e){const t=fetchReceivedBids(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&auctionManager$1.addWinningBid(t[0])};const fetchReceivedBids=(e,t)=>{let i=[];return e.adUnitCode&&e.adId?i=auctionManager$1.getBidsReceived().filter((t=>t.adId===e.adId&&t.adUnitCode===e.adUnitCode)):e.adUnitCode?i=targeting.getWinningBids(e.adUnitCode):e.adId?i=auctionManager$1.getBidsReceived().filter((t=>t.adId===e.adId)):logWarn(t),i};function processQueue(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(t){logError("Error processing command :","prebid.js",t)}}))}pbjsInstance.getConfig=config.getAnyConfig,pbjsInstance.readConfig=config.readAnyConfig,pbjsInstance.mergeConfig=config.mergeConfig,pbjsInstance.mergeBidderConfig=config.mergeBidderConfig,pbjsInstance.setConfig=config.setConfig,pbjsInstance.setBidderConfig=config.setBidderConfig,pbjsInstance.que.push((()=>listenMessagesFromCreative())),pbjsInstance.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(t){logError("Error processing command :",t.message,t.stack)}else logError("Commands written into slmpbjs.cmd.push must be wrapped in a function")},pbjsInstance.que.push=pbjsInstance.cmd.push,pbjsInstance.processQueue=function(){hook.ready(),processQueue(pbjsInstance.que),processQueue(pbjsInstance.cmd)},pbjsInstance.triggerBilling=e=>{const t=fetchReceivedBids(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),i=t.find((t=>t.requestId===e.requestId))||t[0];if(t.length>0&&i)try{adaptermanager.callBidBillableBidder(i)}catch(r){logError("Error when triggering billing :",r)}else logWarn("The bid provided to triggerBilling did not match any bids received.")};const DEFAULT_CURRENCY_RATE_URL="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",CURRENCY_RATE_PRECISION=4;let ratesURL,bidResponseQueue=[],conversionCache={},currencyRatesLoaded=!1,needToCallForCurrencyFile=!0,adServerCurrency="USD";var currencySupportEnabled=!1,currencyRates={};let bidderCurrencyDefault={},defaultRates,responseReady=defer();function setConfig(e){if(ratesURL=DEFAULT_CURRENCY_RATE_URL,"object"==typeof e.rates&&(currencyRates.conversions=e.rates,currencyRatesLoaded=!0,needToCallForCurrencyFile=!1),"object"==typeof e.defaultRates&&(defaultRates=e.defaultRates,currencyRates.conversions=defaultRates,currencyRatesLoaded=!0),"string"==typeof e.adServerCurrency){logInfo("enabling currency support",arguments),adServerCurrency=e.adServerCurrency,e.conversionRateFile&&(logInfo("currency using override conversionRateFile:",e.conversionRateFile),ratesURL=e.conversionRateFile);const t=ratesURL.indexOf("$$TODAY$$");if(-1!==t){const e=new Date;let i=`${e.getMonth()+1}`,r=`${e.getDate()}`;i.length<2&&(i=`0${i}`),r.length<2&&(r=`0${r}`);const n=`${e.getFullYear()}${i}${r}`;ratesURL=`${ratesURL.substring(0,t)}${n}${ratesURL.substring(t+9,ratesURL.length)}`}initCurrency()}else logInfo("disabling currency support"),resetCurrency();"object"==typeof e.bidderCurrencyDefault&&(bidderCurrencyDefault=e.bidderCurrencyDefault)}function errorSettingsRates(e){defaultRates?(logWarn(e),logWarn("Currency failed loading rates, falling back to currency.defaultRates")):logError(e)}function loadRates(){needToCallForCurrencyFile?(needToCallForCurrencyFile=!1,currencyRatesLoaded=!1,ajax$1(ratesURL,{success:function(e){try{currencyRates=JSON.parse(e),logInfo("currencyRates set to "+JSON.stringify(currencyRates)),conversionCache={},currencyRatesLoaded=!0,processBidResponseQueue()}catch(t){errorSettingsRates("Failed to parse currencyRates response: "+e)}},error:function(...e){errorSettingsRates(...e),currencyRatesLoaded=!0,processBidResponseQueue(),needToCallForCurrencyFile=!0}})):processBidResponseQueue()}function initCurrency(){conversionCache={},currencySupportEnabled=!0,logInfo("Installing addBidResponse decorator for currency module",arguments),getGlobal().convertCurrency=(e,t,i)=>parseFloat(e)*getCurrencyConversion(t,i),getHook("addBidResponse").before(addBidResponseHook,100),getHook("responsesReady").before(responsesReadyHook),on(EVENTS$1.AUCTION_TIMEOUT,rejectOnAuctionTimeout),on(EVENTS$1.AUCTION_INIT,loadRates),loadRates()}function resetCurrency(){logInfo("Uninstalling addBidResponse decorator for currency module",arguments),getHook("addBidResponse").getHooks({hook:addBidResponseHook}).remove(),getHook("responsesReady").getHooks({hook:responsesReadyHook}).remove(),off(EVENTS$1.AUCTION_TIMEOUT,rejectOnAuctionTimeout),off(EVENTS$1.AUCTION_INIT,loadRates),delete getGlobal().convertCurrency,adServerCurrency="USD",conversionCache={},currencySupportEnabled=!1,currencyRatesLoaded=!1,needToCallForCurrencyFile=!0,currencyRates={},bidderCurrencyDefault={},responseReady=defer()}function responsesReadyHook(e,t){e(t.then((()=>responseReady.promise)))}config.getConfig("currency",(e=>setConfig(e.currency)));const addBidResponseHook=timedBidResponseHook("currency",(function(e,t,i,r){if(!i)return e.call(this,t,i,r);let n=i.bidderCode||i.bidder;if(bidderCurrencyDefault[n]){let e=bidderCurrencyDefault[n];i.currency&&e!==i.currency?logWarn(`Currency default '${n}: ${e}' ignored. adapter specified '${i.currency}'`):i.currency=e}if(i.currency||(logWarn('Currency not specified on bid.  Defaulted to "USD"'),i.currency="USD"),i.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*getCurrencyConversion(this.currency,e)).toFixed(3)},i.currency===adServerCurrency)return e.call(this,t,i,r);bidResponseQueue.push([e,this,t,i,r]),currencySupportEnabled&&!currencyRatesLoaded||processBidResponseQueue()}));function rejectOnAuctionTimeout({auctionId:e}){bidResponseQueue=bidResponseQueue.filter((([t,i,r,n,a])=>{if(n.auctionId!==e)return!0;a(REJECTION_REASON.CANNOT_CONVERT_CURRENCY)}))}function processBidResponseQueue(){for(;bidResponseQueue.length>0;){const[t,i,r,n,a]=bidResponseQueue.shift();if(void 0!==n&&"currency"in n&&"cpm"in n){let t=n.currency;try{let e=getCurrencyConversion(t);1!==e&&(n.cpm=(parseFloat(n.cpm)*e).toFixed(4),n.currency=adServerCurrency)}catch(e){logWarn("getCurrencyConversion threw error: ",e),a(REJECTION_REASON.CANNOT_CONVERT_CURRENCY);continue}}t.call(i,r,n,a)}responseReady.resolve()}function getCurrencyConversion(e,t=adServerCurrency){var i,r=null;let n=`${e}->${t}`;if(n in conversionCache)logMessage("Using conversionCache value "+(r=conversionCache[n])+" for "+n);else if(!1===currencySupportEnabled){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");r=1}else if(e===t)r=1;else if(e in currencyRates.conversions){if(!(t in(i=currencyRates.conversions[e])))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");logInfo("getCurrencyConversion using direct "+e+" to "+t+" conversionRate "+(r=i[t]))}else if(t in currencyRates.conversions){if(!(e in(i=currencyRates.conversions[t])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");logInfo("getCurrencyConversion using reciprocal "+e+" to "+t+" conversionRate "+(r=roundFloat(1/i[e],CURRENCY_RATE_PRECISION)))}else{var a=Object.keys(currencyRates.conversions)[0];if(!(e in currencyRates.conversions[a]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var o=1/currencyRates.conversions[a][e];if(!(t in currencyRates.conversions[a]))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");logInfo("getCurrencyConversion using intermediate "+e+" thru "+a+" to "+t+" conversionRate "+(r=roundFloat(o*currencyRates.conversions[a][t],CURRENCY_RATE_PRECISION)))}return n in conversionCache||(logMessage("Adding conversionCache value "+r+" for "+n),conversionCache[n]=r),r}function roundFloat(e,t){var i=1;for(let r=0;r<t;r++)i+="0";return Math.round(e*i)/i}function setOrtbCurrency(e,t,i){currencySupportEnabled&&(e.cur=e.cur||[i.currency||adServerCurrency])}registerOrtbProcessor({type:REQUEST$1,name:"currency",fn:setOrtbCurrency});var collectionClone=clone;function clone(e){let t=e;var i={}.toString.call(e).slice(8,-1);if("Set"==i)return new Set([...e].map((e=>clone(e))));if("Map"==i)return new Map([...e].map((e=>[clone(e[0]),clone(e[1])])));if("Date"==i)return new Date(e.getTime());if("RegExp"==i)return RegExp(e.source,getRegExpFlags(e));if("Array"==i||"Object"==i)for(var r in t=Array.isArray(e)?[]:{},e)t[r]=clone(e[r]);return t}function getRegExpFlags(e){if("string"==typeof e.source.flags)return e.source.flags;var t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}class BaseModule{constructor(){this.priority=1,this.name="base_module"}}class BaseBidderModule extends BaseModule{constructor(e){super(),this.name=e,auctionManager.registerBidderModule(this)}requestBids(e){return new Promise((()=>{}))}}const pucTemplate='<!doctype html>\n<html>\n<head>\n    <script src="https://cdn.jsdelivr.net/npm/prebid-universal-creative@1.15.0/dist/<%= hb_format %>.js"><\/script>\n</head>\n<body leftMargin="0" topMargin="0" marginwidth="0" marginheight="0">\n<script>\n  var ucTagData = {};\n  ucTagData.adServerDomain = "";\n  ucTagData.pubUrl = "<%= pubUrl %>";\n  ucTagData.hbPb = "<%= hb_pb %>";\n  ucTagData.hbFormat = "<%= hb_format %>";\n  ucTagData.adId = "<%= hb_adid %>";\n  ucTagData.requestAllAssets = true;\n\n  try {\n    ucTag.renderAd(document, ucTagData);\n  } catch (e) {\n    console.log(e);\n  }\n<\/script>\n</body>\n</html>\n';class BaseRenderModule extends BaseModule{constructor(){super(),window.slmadshb=window.slmadshb||{},window.slmadshb.que=window.slmadshb.que||[],window.slmadshb.que.push((()=>{auctionManager.registerRenderModule(this)}))}renderAds(e){}prepareRenderAds(e){}canRender(e){}}const logger$j=new Logger("Prebid Renderer");class PrebidRenderer extends BaseRenderModule{constructor(){super(...arguments),this.priority=1}renderAds(e){logger$j.info("Render Ads",e),e.forEach((e=>{var t,i;const r=null!==(i=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==i?i:e,n=window.slmpbjs.getAdserverTargetingForAdUnitCode(e);if(null==n?void 0:n.hb_adid){const t=Config.adUnits.get(r);if(!t)return void logger$j.error(`Failed to find ad unit ${e} (ref: ${r})`);logger$j.debug("Rendering Prebid ad",t,n);const[i,a]=this.getBidSize(t,n),o=this.shouldUseSafeFrame(n);return this.renderAd(e,n,i,a,o),hooks("adUnitRendered",(e=>{logger$j.info("Ad unit rendered",e)}),{id:e})}}))}canRender(e){const t=window.slmpbjs.getAdserverTargetingForAdUnitCode(e);return!!(null==t?void 0:t.hb_adid)}renderAd(e,t,i,r,n){var a,o;const s=createIframe$1(i.toString(),r.toString());if(n&&(null===(a=window.top)||void 0===a?void 0:a.location.href)){let e=`//ads.sportslocalmedia.com/sf.html?pubUrl=${encodeURIComponent(window.top.location.href)}`;t&&Object.keys(t).length>0&&(e+="&",e+=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")),s.src=e}"video"===t.hb_format&&(s.style.height="0"),s.id=t.hb_adid||"",s.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation");const d=document.getElementById(e);if(d){if(1!==r?d.style.height=`${r}px`:d.style.removeProperty("height"),d.getElementsByTagName("div")[0]){const t=document.createElement("div");t.id=`${e}-iframe-container`,t.style.margin="auto",d.innerHTML="",d.appendChild(t),t.appendChild(s)}else d.innerHTML="",d.appendChild(s);if(t.pubUrl=window.location.href,null===(o=s.contentWindow)||void 0===o?void 0:o.document)if("banner"===t.hb_format&&t.hb_adid)window.slmpbjs.renderAd(s.contentWindow.document,t.hb_adid);else{const e=ejs.render(pucTemplate,t);s.contentWindow.document.write(e),s.contentWindow.document.close()}}}getBidSize(e,t){var i;let r,n;if(t.hb_format&&"video"===t.hb_format)e.type&&"bannervideo"!==e.type||!(null===(i=e.mediaTypes.video)||void 0===i?void 0:i.playerSize)?(r=0,n=0):(r=e.mediaTypes.video.playerSize[0][0],n=e.mediaTypes.video.playerSize[0][1]);else if(t.hb_format&&"native"===t.hb_format){let t=0,i=0,a=0;"object"==typeof e.sizes&&e.sizes.forEach((e=>{"fluid"!==e&&e[0]*e[1]>a&&(a=e[0]*e[1],[t,i]=e)})),r=t,n=i}else{const e=t.hb_size.split("x");r=Number(e[0]),n=Number(e[1])}return[r,n]}shouldUseSafeFrame(e){return"native"!==e.hb_format&&BIDDERS_WITH_SAFE_FRAME.includes((null==e?void 0:e.hb_bidder)||"")}}new PrebidRenderer;const roundFloor=e=>{let t=0;if(e<.1)t=.01;else if(e<.5)t=.02;else if(e<4)t=.05;else{if(!(e<6))return 6;t=.5}const i=1/t;return e<Math.round(e*i)/i?Math.round((e-t)*i)/i:Math.round(e*i)/i};function setRenderSize(e,t,i){if(e.defaultView&&e.defaultView.frameElement){const r=e.defaultView.frameElement;r.width=t,r.height=i}}const friendlyFrameRenderer={renderNow:!0,render:e=>{var t;const{height:i,width:r,ad:n,adUrl:a,adUnitCode:o}=e;if(!i||!r)return;const s=document.getElementById(o);if(s&&(n||a)){const e=createIframe$1(i.toString(),r.toString());e.style.overflow="hidden",e.src="about:blank",s.innerHTML="",s.appendChild(e);const o=null===(t=null==e?void 0:e.contentWindow)||void 0===t?void 0:t.document;if(void 0===o)return;if(n)o.write(n),o.close();else if(a){const e=createIframe$1(i.toString(),r.toString());e.style.overflow="hidden",e.src=a,o.body.append(e)}setRenderSize(o,r.toString(),i.toString())}}},getBidCpmAdjustment=e=>{const t={};return e&&e.prebidBidAdjustments&&e.prebidBidAdjustments.forEach((e=>{e.bidder&&"function"==typeof e.adjustment&&(t[e.bidder]={bidCpmAdjustment:e.adjustment})})),t},logger$i=new Logger("Prebid"),SSPS_TO_SPLIT={smartadserver:[BANNER,VIDEO],rubicon:[BANNER,VIDEO,NATIVE$1],ix:[BANNER,VIDEO,NATIVE$1],pubmatic:[BANNER,VIDEO,NATIVE$1],adyoulike:[BANNER,VIDEO,NATIVE$1],criteo:[BANNER,VIDEO,NATIVE$1],richaudience:[BANNER,VIDEO]};class Prebid extends BaseBidderModule{constructor(){super("prebid"),this.cachedFloorModel=new Map,this.cachedFloor=new Map,logger$i.info("Module initialization"),demoIsOn()&&Promise.resolve().then((()=>akceloDemoAdapter)),window.slmpbjs=window.slmpbjs||{que:[]},window.slmpbjs.que.push((()=>{window.slmpbjs.onEvent("bidRequested",(e=>{e.bids.forEach(this.getFloorDataFromBid.bind(this))})),window.slmpbjs.onEvent("bidWon",(e=>{var t,i,r,n,a;let o,s=!1;"video"===e.mediaType&&(s=!0,o=3e4);const d={teads:isMobile()?6e4:5e4,seedtag:32e3,optidigital:3e4};-1!==Object.keys(d).indexOf(e.bidder)&&(s=!0,o=d[e.bidder]);const{config:l}=Config;let c;const p=Config.getAdUnitsConfigById([e.adUnitCode]);p.length>0&&(c=p[0]),s&&o&&(null===(t=l.params)||void 0===t?void 0:t.refresh)&&l.params.refresh.enabled&&l.params.refresh.visibleTimeout&&l.params.refresh.timeout&&window.slmadshb.refresh.alterRefreshTimeoutTemporarily(e.adUnitCode,o,(null===(r=null===(i=null==c?void 0:c.params)||void 0===i?void 0:i.refresh)||void 0===r?void 0:r.visibleTimeout)?c.params.refresh.visibleTimeout:l.params.refresh.visibleTimeout,(null===(a=null===(n=null==c?void 0:c.params)||void 0===n?void 0:n.refresh)||void 0===a?void 0:a.timeout)?c.params.refresh.timeout:l.params.refresh.timeout)}));const e=()=>{performance.mark(PERFORMANCE_EVENTS.BID_REQUEST),window.slmpbjs.offEvent("bidRequested",e)};window.slmpbjs.onEvent("bidRequested",e)})),hooks.after("loadConfig",(()=>{var e,t,i,r,n,a,o,s,d,l,c,p,u,m,g,f,b,h,y,v;const I={enableSendAllBids:!1,targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","FORMAT"]},useBidCache:!0,bidderTimeout:null!==(r=null===(i=isMobile()?null===(e=Config.config.params)||void 0===e?void 0:e.mobileParams:null===(t=Config.config.params)||void 0===t?void 0:t.desktopParams)||void 0===i?void 0:i.prebidTimeout)&&void 0!==r?r:PREBID_BIDDER_TIMEOUT,priceGranularity:{buckets:[{precision:2,min:0,max:30,increment:.01}]},currency:{adServerCurrency:null!==(a=null===(n=Config.config.params)||void 0===n?void 0:n.currency)&&void 0!==a?a:"EUR",defaultRates:{USD:{EUR:.91}}},outbrain:{bidderUrl:"https://b1h-euc1.zemanta.com/api/bidder/prebid/bid/",usersyncUrl:"https://b1h-euc1.zemanta.com/usersync/prebid/"},cache:{url:"https://prebid-cache.sportslocalmedia.com/cache",ignoreBidderCacheKey:!0},maxRequestsPerOrigin:10,userSync:{userIds:this.getUserIdsConfig(),auctionDelay:50,syncDelay:3e3,syncsPerBidder:5,aliasSyncEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}},topics:{maxTopicCaller:0,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html"},{bidder:"improvedigital",iframeURL:"https://hb.360yield.com/privacy-sandbox/topics.html"},{bidder:"onetag",iframeURL:"https://onetag-sys.com/static/topicsapi.html"},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html"}]}},paapi:{enabled:!0,defaultForSlots:1,gpt:{autoconfig:!0}},enableTIDs:!0};(null===(o=Config.config.params)||void 0===o?void 0:o.gvlMapping)&&(I.gvlMapping=Config.config.params.gvlMapping),(null===(s=Config.config.params)||void 0===s?void 0:s.gdprApplies)&&(I.consentManagement=this.getConsentManagementConfig()),(null===(d=Config.config.params)||void 0===d?void 0:d.identityLinkPID)&&I.userSync.userIds.push({name:"identityLink",params:{pid:Config.config.params.identityLinkPID,notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}}),(null===(l=Config.config.params)||void 0===l?void 0:l.schain)&&(I.schain={validation:"strict",config:null===(c=Config.config.params)||void 0===c?void 0:c.schain}),!1!==window.slmadshb.enableSirdata&&(I.realTimeData=(null===(p=Config.config.params)||void 0===p?void 0:p.realTimeData)||{auctionDelay:1e3},I.realTimeData.dataProviders=I.realTimeData.dataProviders||[],I.realTimeData.dataProviders.push({name:"SirdataRTDModule",waitForIt:!0,params:{partnerId:38419,key:85}}));const E=isMobile()?null===(m=null===(u=Config.config.params)||void 0===u?void 0:u.mobileParams)||void 0===m?void 0:m.floors:null===(f=null===(g=Config.config.params)||void 0===g?void 0:g.desktopParams)||void 0===f?void 0:f.floors;E&&(I.floors=Object.assign(Object.assign({},E),{additionalSchemaFields:{id:e=>{var t;return null===(t=StateManager.getAdUnitsById([e.adUnitCode])[0])||void 0===t?void 0:t.ref},bidder:e=>e.bidder,countryGroup:()=>{var e;return(null===(e=window.slmadshb.context)||void 0===e?void 0:e.countryCode)?HIGH_CPM_COUNTRIES.includes(window.slmadshb.context.countryCode)?"HIGH":AVERAGE_CPM_COUNTRIES.includes(window.slmadshb.context.countryCode)?"AVERAGE":"LOW":"AVERAGE"}}}));const A=isMobile()?null===(h=null===(b=Config.config.params)||void 0===b?void 0:b.mobileParams)||void 0===h?void 0:h.sizeConfig:null===(v=null===(y=Config.config.params)||void 0===y?void 0:y.desktopParams)||void 0===v?void 0:v.sizeConfig;A&&(I.sizeConfig=A),window.slmpbjs.que.push((()=>{window.slmpbjs.setConfig(I),window.slmpbjs.bidderSettings=Object.assign({standard:{storageAllowed:!0}},getBidCpmAdjustment(Config.config.params))}))})),hooks.after("addAdUnit",((e,t)=>{t.isCapped||(window.slmpbjs.que.push((()=>{const{adUnit:e}=t;if(e.bids){const i=collectionClone(e);i.code=t.htmlId;const r=this.getSplittedAdUnits(i);r.length>0?window.slmpbjs.addAdUnits(r):window.slmpbjs.addAdUnits([i])}})),t.adUnit.adUnitPath||auctionManager.addAdUnitReadyToRequest(t.htmlId))})),hooks.after("coreInit",(()=>{window.slmadshb.getAdUnitFloor=e=>{var t;return(null===(t=this.cachedFloor.get(e))||void 0===t?void 0:t.toFixed(2))||null},window.slmadshb.getAdUnitFloorModel=e=>this.cachedFloorModel.get(e)||null})),hooks.before("renderAds",(({ids:e})=>this.beforeRenderAds(e))),window.slmpbjs.processQueue()}getConsentManagementConfig(){return{gdpr:{cmpApi:"iab",timeout:PREBID_CMP_TIMEOUT,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!1,enforceVendor:!1},{purpose:"basicAds",enforcePurpose:!1,enforceVendor:!1}]}}}getUserIdsConfig(){var e;const t=[];return(null===(e=Config.config.params)||void 0===e?void 0:e.userSync)&&(Config.config.params.userSync.sharedId&&t.push({name:"sharedId",storage:{name:"sharedid",type:"html5",expires:365}}),Config.config.params.userSync.teadsId&&t.push({name:"teadsId",params:{pubId:17023}}),Config.config.params.userSync.pairId&&t.push({name:"pairId",params:{liveramp:{}},storage:{name:"pairId",type:"cookie",expires:15,refreshInSeconds:1800}}),Config.config.params.userSync.criteoId&&t.push({name:"criteo"}),Config.config.params.userSync.id5Id&&t.push({name:"id5Id",params:{partner:1},storage:{name:"id5id",type:"html5",expires:365,refreshInSeconds:14400}})),t}getFloorDataFromBid(e){if("object"==typeof e.floorData&&this.cachedFloorModel.set(e.adUnitCode,e.floorData.modelVersion),e.getFloor){const t=e.getFloor({currency:"EUR"});"number"==typeof t.floor&&this.cachedFloor.set(e.adUnitCode,roundFloor(t.floor))}}requestBids(e){return new Promise((t=>{window.slmpbjs.que.push((()=>{window.slmpbjs.requestBids({adUnitCodes:e,bidsBackHandler:(e,i,r)=>{logger$i.info("BidsBackHandler",e,i,r),void 0!==e?(Object.values(e).forEach((e=>{e.bids.forEach((e=>{-1!==["teads","seedtag","gumgum"].indexOf(e.bidderCode)&&(e.renderer=friendlyFrameRenderer)}))})),t()):t()}})}))}))}getSplittedAdUnits(e){var t;const i=[];if(!e.bids)return[];function r(e,t){let i=[];if(!Object.keys(e.mediaTypes).includes(t)||!e.bids)return[];const r=Object.keys(SSPS_TO_SPLIT).filter((e=>-1!==SSPS_TO_SPLIT[e].indexOf(t)));return i=e.bids.filter((e=>{var i,n,a;const o=-1!==r.indexOf(e.bidder),s=void 0!==(null===(i=null==e?void 0:e.params)||void 0===i?void 0:i.mediaType)?t.toUpperCase()===(null===(a=null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.mediaType)||void 0===a?void 0:a.toUpperCase()):"BANNER"===t.toUpperCase();return o&&s})),i}const n=typeof e.bids.find((e=>void 0!==SSPS_TO_SPLIT[e.bidder])),a=(null===(t=Object.keys(e.mediaTypes))||void 0===t?void 0:t.length)>1;if(n&&a){const t=r(e,BANNER),n=r(e,NATIVE$1),a=r(e,VIDEO),o=collectionClone(e);if(e.bids=e.bids.filter((e=>-1===Object.keys(SSPS_TO_SPLIT).indexOf(e.bidder))),i.push(e),t.length>0){const e=collectionClone(o);delete e.mediaTypes.video,delete e.mediaTypes.native,e.bids=t,i.push(e)}if(n.length>0){const e=collectionClone(o);delete e.mediaTypes.video,delete e.mediaTypes.banner,e.bids=n,i.push(e)}if(a.length>0){const e=collectionClone(o);delete e.mediaTypes.banner,delete e.mediaTypes.native,e.bids=a,i.push(e)}}return i}beforeRenderAds(e){return new Promise((t=>{window.slmpbjs.que.push((()=>{window.slmpbjs.setTargetingForGPTAsync(e),t()}))}))}}new Prebid;var __awaiter$4=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$h=new Logger("Google Tag");window.googletag=window.googletag||{cmd:[]},window.googletag.cmd=window.googletag.cmd||[];const displayedSlots=new Map;class GoogleTag extends BaseRenderModule{constructor(){super(),this.priority=10,this.adUnitSlots={},this.adRequests={},this.isFirstGamRequest=!0,this.slotHasA9Bids=e=>{const t=e.getTargeting("amznbid")||[];return t.length>0&&!["1","2","3","50jqbk"].includes(t[0])},this.monkeyPatchGPTDisplay=()=>{var e;if(!(null===(e=Config.config.params)||void 0===e?void 0:e.loadGoogleExoticSlots))return void logger$h.info("loadGoogleExoticSlots option is disabled");const t=[];Config.adUnits.forEach((e=>{void 0!==e.adUnitPath&&t.push(e.adUnitPath)})),window.googletag.cmd.push((()=>{const e=window.googletag,i=e.display;e.display=function(...r){i.apply(e,r),(()=>{const e=window.googletag.pubads().getSlots().filter((e=>-1===t.indexOf(e.getAdUnitPath())&&(!displayedSlots.has(e.getSlotElementId())||!1===displayedSlots.get(e.getSlotElementId()))));e.length>0&&(e.forEach((e=>{displayedSlots.set(e.getSlotElementId(),!0)})),googletag.pubads().refresh(e))})()}}))},logger$h.info("Module initialization"),window.googletag.apiReady||function(){var e;const t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js";const i=document.getElementsByTagName("script")[0];null===(e=null==i?void 0:i.parentNode)||void 0===e||e.insertBefore(t,i)}(),hooks.after("loadConfig",(()=>__awaiter$4(this,void 0,void 0,(function*(){window.googletag.pubadsReady||window.googletag.cmd.push((()=>{var e;window.googletag.pubads().disableInitialLoad(),(null===(e=Config.config.params)||void 0===e?void 0:e.enableSingleRequest)&&window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices()})),this.loadExoticSlots(),this.monkeyPatchGPTDisplay()})))),hooks.after("addAdUnit",((e,t)=>{var i;t.adUnit.adUnitPath&&t.htmlId&&t.adUnit.sizes&&!t.isCapped&&("video"===t.adUnit.type?auctionManager.addAdUnitReadyToRequest(t.htmlId):"outofpage"===t.adUnit.sizes?this.createOutOfPageSlot(t.adUnit.adUnitPath,t.htmlId):this.createSlot(t.adUnit.adUnitPath,t.htmlId,t.adUnit.sizes,null===(i=t.adUnit.params)||void 0===i?void 0:i.sizeMapping))})),hooks.before("coreInit",(()=>{var e;"limited"===ConsentManager$1.consentType&&(null===(e=Config.config.params)||void 0===e?void 0:e.limitedConsentGamProtection)&&Config.adUnits.forEach((e=>{var t;e.type&&["cornervideo","instream-video","avp","standalone-video","akcelo-video"].includes(e.type)||"allowed"!==(null===(t=e.params)||void 0===t?void 0:t.gamMode)||(e.params.gamMode="a9only",logger$h.debug(`Setting ad unit ${e.id} to a9only mode`))}))})),this.setupEvents()}loadExoticSlots(){var e;if(!(null===(e=Config.config.params)||void 0===e?void 0:e.loadGoogleExoticSlots))return void logger$h.info("LoadExoticSlots call skipped (loadGoogleExoticSlots option is disabled)");const t=[];Config.adUnits.forEach((e=>{void 0!==e.adUnitPath&&t.push(e.adUnitPath)})),window.googletag.cmd.push((()=>{const e=googletag.pubads().getSlots().filter((e=>-1===t.indexOf(e.getAdUnitPath())&&(!displayedSlots.has(e.getSlotElementId())||!1===displayedSlots.get(e.getSlotElementId()))));e.length>0&&(e.forEach((e=>{displayedSlots.set(e.getSlotElementId(),!0)})),googletag.pubads().refresh(e))}))}renderAds(e){logger$h.info("Render ads",e),this.isFirstGamRequest&&(performance.mark(PERFORMANCE_EVENTS.GAM_REQUEST),this.isFirstGamRequest=!1);const t=e.filter((e=>this.adUnitSlots[e])).map((e=>this.adUnitSlots[e]));t.length>0&&window.googletag.cmd.push((()=>{try{this.getExtraTargeting().forEach(((e,t)=>{window.googletag.pubads().setTargeting(t,e)})),window.googletag.pubads().refresh(t)}catch(e){logger$h.error("Failed to set extra targeting",e),window.googletag.pubads().refresh(t)}}))}prepareRenderAds(e){e.forEach((e=>{var t,i,r,n,a,o,s,d,l,c,p,u,m,g;((null===(t=Config.config.params)||void 0===t?void 0:t.gamDelayAddService)||"outofpage"===(null===(i=Config.adUnits.get(e))||void 0===i?void 0:i.sizes))&&window.googletag.cmd.push((()=>{var t;null===(t=this.adUnitSlots[e])||void 0===t||t.addService(window.googletag.pubads())}));const f=null!==(n=null===(r=StateManager.state.adUnits[e])||void 0===r?void 0:r.ref)&&void 0!==n?n:e,b=document.getElementById(e);if(b&&b.style.removeProperty("height"),Object.keys(this.adRequests).includes(e)&&(this.adRequests[e]+=1),this.adUnitSlots[e])if(window.slmadshb.getAdUnitFloor&&window.slmadshb.getAdUnitFloor(e)&&this.adUnitSlots[e].setTargeting("slm_floor",window.slmadshb.getAdUnitFloor(e)||"0.00"),this.adUnitSlots[e].setTargeting("slmadshb_r",this.adRequests[e]>1?"true":"false"),(null===(o=null===(a=Config.config.params)||void 0===a?void 0:a.refresh)||void 0===o?void 0:o.targeting)&&this.adUnitSlots[e].setTargeting("slmadshb_r_custom",this.adRequests[e]>1?Config.config.params.refresh.targeting.true:Config.config.params.refresh.targeting.false),this.adUnitSlots[e].setTargeting("slmadshb_ob",(null===(c=null===(l=null===(d=null===(s=Config.adUnits.get(f))||void 0===s?void 0:s.params)||void 0===d?void 0:d.partners)||void 0===l?void 0:l.openBidding)||void 0===c?void 0:c.enabled)?"true":"false"),null===(g=null===(m=null===(u=null===(p=Config.adUnits.get(f))||void 0===p?void 0:p.params)||void 0===u?void 0:u.partners)||void 0===m?void 0:m.adExchange)||void 0===g?void 0:g.enabled){const t=1===this.adRequests[e]||this.isAllowedAtRefresh(e)?"true":"false";this.adUnitSlots[e].setTargeting("slmadshb_adx",t)}else this.adUnitSlots[e].setTargeting("slmadshb_adx","false")}))}canRender(e){var t,i,r;const n=null!==(i=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==i?i:e,a=Config.adUnits.get(n),o=!!this.adUnitSlots[e]&&this.slotHasA9Bids(this.adUnitSlots[e]),s=0===this.adRequests[e]||this.isAllowedAtRefresh(e);return(null===(r=null==a?void 0:a.params)||void 0===r?void 0:r.gamMode)!==GAM_MODE.FORBIDDEN&&(o||s)}isAllowedAtRefresh(e){var t,i,r,n,a,o,s,d,l;const c=null!==(i=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==i?i:e,p=Config.adUnits.get(c);return!0===(null===(a=null===(n=null===(r=null==p?void 0:p.params)||void 0===r?void 0:r.partners)||void 0===n?void 0:n.adExchange)||void 0===a?void 0:a.allowAtRefresh)||void 0!==p&&!0===(null===(d=null===(s=null===(o=null==p?void 0:p.params)||void 0===o?void 0:o.partners)||void 0===s?void 0:s.adExchange)||void 0===d?void 0:d.allowAtPassback)&&window.slmpbjs&&!(null===(l=window.slmpbjs.getAdserverTargetingForAdUnitCode(e))||void 0===l?void 0:l.hb_adid)}createSlot(e,t,i,r){logger$h.info("CreateSlot",e,t,i),window.googletag.cmd.push((()=>{var n,a,o,s,d,l,c;const p=googletag.pubads().getSlots().filter((i=>i.getAdUnitPath()===e&&i.getSlotElementId()===t)),[u]=p,m=null!=u?u:window.googletag.defineSlot(e,i,t);if(m){if(r){const e=window.googletag.sizeMapping();r.forEach((t=>{Array.isArray(t.vs)&&Array.isArray(t.ss)&&e.addSize(t.vs,t.ss)})),m.defineSizeMapping(e.build())}(null===(n=Config.config.params)||void 0===n?void 0:n.gamDelayAddService)||m.addService(window.googletag.pubads()),window.googletag.display(t),this.adUnitSlots[t]=m,this.adRequests[t]=0;const e=null!==(o=null===(a=StateManager.state.adUnits[t])||void 0===a?void 0:a.ref)&&void 0!==o?o:t;m.setTargeting("slmadshb_ob",(null===(c=null===(l=null===(d=null===(s=Config.adUnits.get(e))||void 0===s?void 0:s.params)||void 0===d?void 0:d.partners)||void 0===l?void 0:l.openBidding)||void 0===c?void 0:c.enabled)?"true":"false")}auctionManager.addAdUnitReadyToRequest(t)}))}createOutOfPageSlot(e,t){logger$h.info("Create OutOfPage Slot",e,t);const i=Config.adUnits.get(t);window.googletag.cmd.push((()=>{var r,n,a,o,s,d;let l;if(l="sticky"===(null==i?void 0:i.type)?window.googletag.defineOutOfPageSlot(e,googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR):window.googletag.defineOutOfPageSlot(e,googletag.enums.OutOfPageFormat.INTERSTITIAL),l){l.setForceSafeFrame(!0),this.adUnitSlots[t]=l,this.adRequests[t]=0;const e=null!==(n=null===(r=StateManager.state.adUnits[t])||void 0===r?void 0:r.ref)&&void 0!==n?n:t;l.setTargeting("slmadshb_ob",(null===(d=null===(s=null===(o=null===(a=Config.adUnits.get(e))||void 0===a?void 0:a.params)||void 0===o?void 0:o.partners)||void 0===s?void 0:s.openBidding)||void 0===d?void 0:d.enabled)?"true":"false")}auctionManager.addAdUnitReadyToRequest(t)}))}setupEvents(){window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{var t,i;const r=e.slot.getTargeting("amzniid");r.length>0&&-1!==e.slot.getHtml().indexOf(r[0])&&window.slmadshb.triggerEvent("apsRenderImp",r[0]);const n=e.slot.getSlotElementId();logger$h.info("event.slot.getSlotElementId()",e.slot.getSlotElementId());const a=null!==(i=null===(t=StateManager.state.adUnits[n])||void 0===t?void 0:t.ref)&&void 0!==i?i:n,o=Config.adUnits.get(a);if(o)return e.isEmpty?hooks("passback",(e=>(logger$h.info("Passback ad unit",e.adUnit),o.id)),{adUnit:o}):hooks("adUnitRendered",(e=>{logger$h.info("Ad unit rendered",e)}),{id:o.id})}))}))}getExtraTargeting(){var e,t,i,r,n,a;const o=new Map,s=ConsentManager$1.getConsentType();o.set("slmadshb_consent",s);const d=EngagementListener$1.loadStats();if(d.length>=3){const s=null===(t=null===(e=Config.config.params)||void 0===e?void 0:e.contextTargeting)||void 0===t?void 0:t.userVisitDuration;if(s){const e=d.map((e=>e.visitDuration)).reduce(((e,t)=>e+t),0)/d.length,t=this.findDurationTargeting(s,e);t&&(o.set("user_duration",t),logger$h.info(`Set user duration targeting [${t}]`))}const l=null===(r=null===(i=Config.config.params)||void 0===i?void 0:i.contextTargeting)||void 0===r?void 0:r.pageVisitDuration,c=null===(a=null===(n=window.slmadshb.setup.params)||void 0===n?void 0:n.contextTargeting)||void 0===a?void 0:a.pagesInfos;if(l&&c){const e=Object.keys(c).find((e=>new RegExp(`^${e}$`).test(window.location.pathname)));if(e){const t=this.findDurationTargeting(l,c[e]);t&&(o.set("page_duration",t),logger$h.info(`Set page duration targeting [${t}]`))}}}return o}findDurationTargeting(e,t){const i=Object.keys(e).filter((i=>t>e[i])).sort(((t,i)=>e[i]-e[t]));return i.length>0?i[0]:null}}new GoogleTag;const logger$g=new Logger("Amazon");class Amazon extends BaseBidderModule{constructor(){super("amazon"),this.DEFAULT_PUB_ID="8a83e099-851b-4737-9ca3-c7092ea4fc9f",this.DEFAULT_AD_SERVER="googletag",this.DEFAULT_TIMEOUT=2e3,this.a9Bids=new Map,logger$g.info("Module initialization"),hooks.after("loadConfig",(e=>{var t,i,r,n,a;const o=(null===(i=null===(t=e.params)||void 0===t?void 0:t.amazon)||void 0===i?void 0:i.pubID)||this.DEFAULT_PUB_ID,s=(null===(n=null===(r=e.params)||void 0===r?void 0:r.amazon)||void 0===n?void 0:n.adServer)||this.DEFAULT_AD_SERVER;return this.load(o,s,null===(a=e.params)||void 0===a?void 0:a.schain),e})),window.slmadshb=window.slmadshb||[],window.slmadshb.getA9VideoBid=e=>{var t,i,r,n,a,o;let s;const d=null!==(i=null===(t=StateManager.state.adUnits[e])||void 0===t?void 0:t.ref)&&void 0!==i?i:e,l=null===(o=null===(a=null===(n=null===(r=Config.adUnits.get(d))||void 0===r?void 0:r.params)||void 0===n?void 0:n.partners)||void 0===a?void 0:a.amazon)||void 0===o?void 0:o.videoSlot;if(l){const e=Array.from(this.a9Bids.values()).filter((e=>e.slotID===l&&!1===e.used));e.length>0&&(s=e[0])}else logger$g.error("Unable to find video slotId for adUnit",e);return s},window.slmadshb.markA9VideoBidAsUsed=e=>{const t=this.a9Bids.get(e);t&&(t.used=!0)}}requestBids(e){if(logger$g.info(`Request bids ${e}`),0===e.length)return Promise.resolve();const t=StateManager.getAdUnitsById(e),i=this.getDisplayRequest(t),r=this.fetchBids(i),n=this.getVideoRequest(t),a=this.fetchBids(n);return Promise.all([r,a]).then((()=>{}))}getDisplayRequest(e){const t=[];return e.forEach((e=>{var i,r,n,a;const o=Config.adUnits.get(e.ref);if(void 0!==o){const s=null===(r=null===(i=o.params)||void 0===i?void 0:i.partners)||void 0===r?void 0:r.amazon;(null==s?void 0:s.enabled)&&o.adUnitPath&&o.mediaTypes&&(null===(n=o.mediaTypes.banner)||void 0===n?void 0:n.sizes)&&o.mediaTypes.banner.sizes.length>0&&(void 0!==s.videoSlot&&!0===s.outstream||t.push({slotID:e.htmlId,sizes:null===(a=o.mediaTypes.banner)||void 0===a?void 0:a.sizes,slotName:o.adUnitPath}))}})),{slots:t,mediaType:"banner"}}getVideoRequest(e){const t=[];return e.forEach((e=>{var i,r,n;const a=Config.adUnits.get(e.ref);if(void 0!==a){const e=null===(r=null===(i=a.params)||void 0===i?void 0:i.partners)||void 0===r?void 0:r.amazon;if((null==e?void 0:e.enabled)&&a.mediaTypes.video&&e.videoSlot){const{videoSlot:i}=e;if(!0===e.outstream){const e=(null===(n=a.mediaTypes.banner)||void 0===n?void 0:n.sizes)||a.mediaTypes.video.sizes;t.push({slotID:i,mediaType:"multi-format",multiFormatProperties:{display:{sizes:e},video:{sizes:a.mediaTypes.video.sizes}}})}else t.push({slotID:i,mediaType:"video"})}}})),{slots:t,mediaType:"video"}}fetchBids(e){return new Promise((t=>{var i,r,n;if(e.slots.length>0){const a={slots:e.slots,timeout:(null===(r=null===(i=window.slmpbjs)||void 0===i?void 0:i.getConfig())||void 0===r?void 0:r._bidderTimeout)||this.DEFAULT_TIMEOUT},o=i=>{var r;null===(r=window.apstag)||void 0===r||r.setDisplayBids(),i.forEach((e=>{e.used=!1,""!==e.amzniid&&this.a9Bids.set(e.amzniid,e)})),logger$g.info(`Bids fetched for ${e.mediaType}`),t()};null===(n=window.apstag)||void 0===n||n.fetchBids(a,o)}else logger$g.debug(`No slots available for ${e.mediaType}`),t()}))}load(e,t,i){var r,n;this.setUpApsTag();const a={pubID:e,adServer:t,isSelfServePub:!0,videoAdServer:"DFP"};void 0!==i&&(a.schain=i),null===(r=window.apstag)||void 0===r||r.init(a),null===(n=window.slmadshb)||void 0===n||n.onEvent("apsRenderImp",(e=>{const t=this.a9Bids.get(e);t&&(window.slmadshb.triggerEvent("apsBidWon",t),this.a9Bids.delete(e))}))}setUpApsTag(){!function(e,t,i,r,n,a,o){function s(i,r){t[e]._Q.push([i,r])}t[e]||(t[e]={init(){s("i",arguments)},fetchBids(){s("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]},(a=i.createElement(r)).async=!0,a.src="//c.amazon-adsystem.com/aax2/apstag.js",(o=i.getElementsByTagName(r)[0]).parentNode.insertBefore(a,o))}("apstag",window,document,"script")}}let logger$f;new Amazon;class Refresh{constructor(e){this.adUnits=new Map,logger$f=e,logger$f.info("Module initialization"),window.slmadshb=window.slmadshb||{},window.slmadshb.refresh=this}init(e){this.initListeners(e),this.startRefresh()}initListeners(e){(null==e?void 0:e.onlyWhenTabIsActive)&&document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?this.startRefresh():this.stopRefresh()})),window.addEventListener("message",(t=>{const i=(i,r)=>{var n;"boolean"==typeof(null===(n=null==r?void 0:r.refresh)||void 0===n?void 0:n.enabled)&&(r.refresh.enabled?this.enableAdUnitRefresh(i,performance.now()):this.disableAdUnitRefresh(i)),r.refresh.timeout&&this.updateAdUnitTimeout(i,t.data.slmadshb.refresh.timeout),r.refresh.delay&&(this.updateAdUnitTimeout(i,t.data.slmadshb.refresh.delay),setTimeout((()=>{"number"==typeof e.timeout&&this.updateAdUnitTimeout(i,e.timeout)}),r.refresh.delay))};t.data&&t.data.slmadshb&&(t.data.slmadshb.adUnitPath?StateManager.getAdUnits().forEach((e=>{e.adUnitPath===t.data.slmadshb.adUnitPath&&i(e.htmlId,t.data.slmadshb)})):t.data.slmadshb.adUnitId&&i(t.data.slmadshb.adUnitId,t.data.slmadshb))}),!1)}getAdUnitCapping(e){var t,i,r,n;return"video"===(null==e?void 0:e.type)?(null===(i=null===(t=e.params)||void 0===t?void 0:t.refresh)||void 0===i?void 0:i.capping)||256:(null===(n=null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.refresh)||void 0===n?void 0:n.capping)||10}addAdUnitToState(e,t){this.adUnits.has(e)?logger$f.warn("addAdUnitToState",`adUnit with this htmlId already exists (${e})`):this.adUnits.set(e,t)}removeAdUnitFromState(e){this.adUnits.has(e)?this.adUnits.delete(e):logger$f.warn("removeAdUnitFromState",`adUnit does not exists (${e})`)}enableAdUnitRefresh(e,t){if(logger$f.info("AutoRefresh enabled",e),this.adUnits.has(e)){const i=this.adUnits.get(e);i&&!i.enabled&&i.refreshCount<=i.capping&&(i.enabled=!0,i.lastRefreshedAt=t)}}disableAdUnitRefresh(e){if(logger$f.info("AutoRefresh disabled",e),this.adUnits.has(e)){const t=this.adUnits.get(e);t&&(t.enabled=!1)}}updateAdUnitTimeout(e,t){if(logger$f.info("AdUnit timeout updated",{id:e,timeout:t}),this.adUnits.has(e)){const i=this.adUnits.get(e);i&&(i.timeout=t)}}refreshAdUnit(e,t){t||(t=performance.now());const i=this.adUnits.get(e);i?(logger$f.info(`Refreshing adUnit ${e} after ${Math.floor(t-i.lastRefreshedAt)}ms`),i.lastRefreshedAt=t,i.refreshCount+=1):logger$f.info(`Refreshing adUnit ${e}`),auctionManager.addAdUnitReadyToRequest(e)}startRefresh(){logger$f.info("Refresh started"),this.intervalId||(this.intervalId=window.setInterval((()=>{const e=performance.now(),t=this.getAdUnitIdsToRefresh(e);t.length>0&&t.forEach((t=>{this.refreshAdUnit(t,e)}))}),1e3))}stopRefresh(){logger$f.info("Refresh stopped"),clearInterval(this.intervalId),this.intervalId=void 0}alterRefreshTimeoutTemporarily(e,t,i,r){if(this.adUnits.has(e)){const n=this.adUnits.get(e);n&&(n.timeout=t,n.visibleTimeout=t,setTimeout((()=>{n.timeout=null!=r?r:i,n.visibleTimeout=i}),t),logger$f.info(`Altering refresh temporarily on ${e}`,t,i,r))}}}const getBidderFromSlotResponseInfos=e=>{var t;if(e){if(e.yieldGroupIds)return"ebda";const i=null===(t=Config.config.params)||void 0===t?void 0:t.advertisersMapping;if(i){if(i.Amazon===e.advertiserId)return"a9";if(i.Prebid===e.advertiserId)return"prebid";if(i.Google&&i.Google!==e.advertiserId&&!e.isBackfill)return"direct"}if(!e.lineItemId)return"adx"}return"unknown"},logger$e=new Logger("Viewability"),CLIENT_SUPPORTS_OBSERVER=window.IntersectionObserver&&window.IntersectionObserverEntry&&window.IntersectionObserverEntry.prototype&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;class Viewability{constructor(){this.displayDuration=1e3,this.displayThreshold=.5,this.bids=new Map,this.matchedBids=[],CLIENT_SUPPORTS_OBSERVER?(logger$e.info("Module initialization"),hooks.after("loadConfig",((e,t)=>{t.params.viewability&&(t.params.viewability.duration&&(this.displayDuration=t.params.viewability.duration),t.params.viewability.threshold&&(this.displayThreshold=t.params.viewability.threshold)),this.init()}))):logger$e.info("Module initialization skipped (IntersectionObserverAPI not available)")}init(){this.observer=new IntersectionObserver(this.observerCallback.bind(this),{threshold:this.displayThreshold}),window.slmpbjs=window.slmpbjs||{que:[]},window.slmpbjs.que.push((()=>{window.slmpbjs.onEvent("adRenderSucceeded",(({bid:e})=>{var t;this.bids.set(e.adUnitCode,e);const i=document.getElementById(e.adUnitCode);i&&(null===(t=this.observer)||void 0===t||t.observe(i))}))})),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("impressionViewable",(e=>{var t;if(e.slot.getOutOfPage())return void logger$e.info(`Skipping viewable event for outofpage ${e.slot.getAdUnitPath()}`);const i=getBidderFromSlotResponseInfos(e.slot.getResponseInformation());let r=null;const n=e.slot.getTargeting("slm_floor");n.length>0&&(r=parseFloat(n[0]));const a=document.getElementById(e.slot.getSlotElementId());a&&(null===(t=this.observer)||void 0===t||t.unobserve(a)),this.markImpressionAsViewed(e.slot.getSlotElementId(),!0,{google:{adUnitPath:e.slot.getAdUnitPath(),bidderCode:i,floor:r}})}))}))}observerCallback(e){e.forEach((e=>{e.isIntersecting?e.target.tracker||(e.target.tracker=setTimeout((()=>{var t;this.markImpressionAsViewed(e.target.id),null===(t=this.observer)||void 0===t||t.unobserve(e.target),e.target.tracker=null}),this.displayDuration)):e.target.tracker&&clearTimeout(e.target.tracker)}))}markImpressionAsViewed(e,t=!1,i={}){let r=null;if(this.bids.has(e)&&(r=this.bids.get(e),r)){if(-1!==this.matchedBids.indexOf(r.requestId))return;this.matchedBids.push(r.requestId)}document.dispatchEvent(new CustomEvent("impressionViewable",{detail:Object.assign({adUnitCode:e,isGoogle:t,bid:r},i)}))}}new Viewability;const logger$d=new Logger("SmartRefresh");class SmartRefresh extends Refresh{constructor(){super(logger$d),hooks.after("adUnitReady",((e,t)=>{var i,r,n,a,o,s;if(this.adUnits.has(t.htmlId))return;const d=StateManager.state.adUnits[t.htmlId],l=Config.adUnits.get(d.ref);if(t.htmlId&&!d.isCapped){const e={enabled:(null===(r=null===(i=null==l?void 0:l.params)||void 0===i?void 0:i.refresh)||void 0===r?void 0:r.enabled)||!1,timeout:(null===(a=null===(n=null==l?void 0:l.params)||void 0===n?void 0:n.refresh)||void 0===a?void 0:a.timeout)||3e4,visibleTimeout:(null===(s=null===(o=null==l?void 0:l.params)||void 0===o?void 0:o.refresh)||void 0===s?void 0:s.visibleTimeout)||12e3,capping:this.getAdUnitCapping(l),refreshCount:0,isVisible:!1,lastRefreshedAt:performance.now()};this.addAdUnitToState(t.htmlId,e)}})),hooks.before("destroyAdUnit",(e=>{e.htmlId&&this.removeAdUnitFromState(e.htmlId)})),hooks.after("loadConfig",((e,t)=>{var i;this.init((null===(i=null==t?void 0:t.params)||void 0===i?void 0:i.refresh)||{})}))}initListeners(e){super.initListeners(e),document.addEventListener("impressionViewable",(e=>{try{this.onViewableImpression(e)}catch(t){logger$d.error(t)}}))}onViewableImpression(e){if(e.detail&&this.adUnits.has(e.detail.adUnitCode)){const t=this.adUnits.get(e.detail.adUnitCode);t&&(t.isVisible=!0)}}getAdUnitIdsToRefresh(e){return Array.from(this.adUnits.keys()).filter((t=>{const i=this.adUnits.get(t);if(i&&i.enabled&&i.lastRefreshedAt&&i.refreshCount<i.capping){const t=e-i.lastRefreshedAt;if(i.isVisible){const e=t>i.visibleTimeout;return e&&(i.isVisible=!1),e}return t>i.timeout}return!1}))}}new SmartRefresh;const logger$c=new Logger("Sticky Renderer");class StickyRenderer{constructor(e,t){this.uniqId=Math.random().toString(36).substring(2,16),this.adUnitId=e,this.params=t,this.getElements(),this.stickyFrame||(this.stickyFrame=document.createElement("DIV"),this.stickyFrame.id=`slm_sticky_${this.uniqId}`,this.stickyFrame.classList.add("slm_sticky"),this.stickyFrame.style.position=this.params.target?"absolute":"fixed",this.stickyFrame.style.display="none");let i=document.body;if(this.params.target){const e=document.querySelector(this.params.target);e?i=e:logger$c.warn("Missing target",this.params.target)}if(i.insertBefore(this.stickyFrame,i.firstChild),this.stickyInnerFrame||(this.stickyInnerFrame=document.createElement("DIV"),this.stickyInnerFrame.id=`slm_sticky_container_${this.uniqId}`,this.stickyInnerFrame.classList.add("slm_sticky_container")),this.stickyFrame.appendChild(this.stickyInnerFrame),this.stickyParallaxFrame=document.createElement("DIV"),this.stickyParallaxFrame.id=`slm_sticky_parallax_${this.uniqId}`,this.stickyParallaxFrame.classList.add("slm_sticky_parallax"),this.stickyInnerFrame.appendChild(this.stickyParallaxFrame),this.adUnitId){const e=document.getElementById(this.adUnitId);e?this.adFrame=e:(this.adFrame=document.createElement("DIV"),this.adFrame.setAttribute("id",this.adUnitId),this.adFrame.dataset.akceloLoaded="1"),this.stickyParallaxFrame.appendChild(this.adFrame)}!1!==this.params.closeButton&&(this.closeButton=this.createCloseButton(),this.stickyInnerFrame.appendChild(this.closeButton))}getElements(){var e,t;this.stickyFrame=null!==(e=document.getElementById(this.params.useUniqId?`slm_sticky_${this.uniqId}`:"slm_sticky"))&&void 0!==e?e:void 0,this.stickyInnerFrame=null!==(t=document.getElementById(this.params.useUniqId?`slm_sticky_container_${this.uniqId}`:"slm_sticky_container"))&&void 0!==t?t:void 0}renderElements(e){var t,i,r,n,a,o;if(this.params.autoScale&&this.adFrame&&e)if(e[0]<=1&&e[1]<=1)this.adFrame.style.width="auto",this.adFrame.style.height="auto";else{const i=window.innerWidth/e[0],r=this.params.autoScale.maxHeight/e[1],n=Math.min(i,r);this.adFrame.style.width=e[0]*n+"px",this.adFrame.style.height=e[1]*n+"px",this.adFrame.style.maxHeight=`${this.params.autoScale.maxHeight}px`;const a=this.adFrame.querySelector("iframe:first-of-type");a&&(a.style.scale=n.toString(),-1!==a.id.indexOf("google_ads_iframe")||(null===(t=a.parentElement)||void 0===t?void 0:t.id)!==`${this.adUnitId}-iframe-container`?a.style.transformOrigin="top left":a.style.transformOrigin="top center")}if(this.stickyFrame&&(this.stickyFrame.style.display="block",this.stickyFrame.style.padding="0",this.stickyFrame.style.margin="0 auto",this.stickyFrame.style.overflow="visible",this.stickyFrame.style.textAlign="center",this.stickyFrame.style.whiteSpace="nowrap",this.stickyFrame.style.zIndex=`${this.params.zIndex||1e4}`,this.params.fullWidth&&(this.stickyFrame.style.width="100%"),this.params.mainBackground&&(this.stickyFrame.style.backgroundColor=this.params.mainBackground)),(null===(i=this.params.parallax)||void 0===i?void 0:i.enabled)&&this.adFrame){const{maxHeight:e}=this.params.parallax;this.stickyFrame&&(this.stickyFrame.style.maxHeight=`${e}px`),this.stickyParallaxFrame.style.overflow="hidden";let t=0,i=window.scrollY;const r=90-this.stickyParallaxFrame.clientHeight,n=(t,i)=>{this.adFrame&&(this.adFrame.clientHeight<=e?this.adFrame.style.transform="translate(0px, 0px)":this.adFrame.style.transform=`translate(${t}px, ${i}px)`)},a=()=>{t=Math.max(r,(window.scrollY-i)/window.innerHeight*r),t>0&&(t=0,i=window.scrollY),n(0,t)};this.adFrame.clientHeight>e?(window.addEventListener("scroll",a),n(0,t)):window.removeEventListener("scroll",a)}this.stickyInnerFrame&&(this.stickyInnerFrame.style.display="inline-block",this.stickyInnerFrame.style.verticalAlign="top",this.stickyInnerFrame.style.marginLeft="0px",this.stickyInnerFrame.style.position="relative",this.stickyInnerFrame.style.maxWidth="100%",this.params.adBackground&&(this.stickyInnerFrame.style.backgroundColor=this.params.adBackground)),this.adFrame&&(this.adFrame.style.margin="0 auto",this.adFrame.style.textAlign="center",this.adFrame.style.maxWidth="100%",this.adFrame.style.overflow="hidden",this.adFrame.style.lineHeight="0"),this.closeButton&&(this.closeButton.style.display="inline-block");const s=[];return this.stickyFrame&&((null===(r=this.params.position)||void 0===r?void 0:r.includes("top"))?this.stickyFrame.style.top=`${this.params.yOffset}px`:(null===(n=this.params.position)||void 0===n?void 0:n.includes("bottom"))?this.stickyFrame.style.bottom=`${this.params.yOffset}px`:(this.stickyFrame.style.top="50%",s.push("translateY(-50%)")),(null===(a=this.params.position)||void 0===a?void 0:a.includes("left"))?this.stickyFrame.style.left="0":(null===(o=this.params.position)||void 0===o?void 0:o.includes("right"))?this.stickyFrame.style.right="0":(this.stickyFrame.style.left="50%",s.push("translateX(-50%)")),this.stickyFrame.style.margin=`${this.params.margin}px`,this.params.scale&&(this.params.scale=Math.min(Math.max(.5,this.params.scale),1.5),s.push(`scale(${this.params.scale})`),this.closeButton&&(this.closeButton.style.transform=`scale(${1/this.params.scale})`),this.params.position&&(this.stickyFrame.style.transformOrigin=`${this.params.position.replace("-"," ")}`)),s.length>0&&(this.stickyFrame.style.transform=s.join(" "))),!0}createCloseButton(){var e,t;const i=getCloseButton();switch(i.style.position="absolute",this.params.closeButtonPosition){case"top-left":(null===(e=this.params.position)||void 0===e?void 0:e.includes("top"))?(i.style.top="0",i.style.left="-25px"):(i.style.top="-25px",i.style.left="0");break;case"top-right":(null===(t=this.params.position)||void 0===t?void 0:t.includes("top"))?(i.style.top="0",i.style.right="-25px"):(i.style.top="-25px",i.style.right="0");break;case"bottom-left":i.style.bottom="-25px",i.style.left="0";break;case"bottom-right":i.style.bottom="-25px",i.style.right="0";break;case"left":i.style.top="0",i.style.left="-25px";break;default:i.style.top="0",i.style.right="-25px"}return i.onclick=()=>{this.stickyFrame&&(this.stickyFrame.style.display="none",this.stickyFrame.remove()),this.params.onClose&&this.params.onClose(this.adUnitId)},i}}function onRenderAdUnitHbOrAdx(e,t){window.slmpbjs=window.slmpbjs||{},window.slmpbjs.que=window.slmpbjs.que||[],window.slmpbjs.que.push((()=>{window.slmpbjs.onEvent("bidWon",(i=>{i.adUnitCode===e&&t([i.width,i.height],null,i.bidderCode)}))})),window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotRenderEnded",(i=>i.slot.getSlotElementId()===e&&!i.isEmpty&&"string"!=typeof i.size&&t(i.size,i.creativeId)))}))}const logger$b=new Logger("Sticky");class Sticky{constructor(){this.renderers=new Map,logger$b.info("Module initialization"),hooks.before("addAdUnit",(e=>{"sticky"===e.adUnit.type&&(logger$b.debug("Creating sticky renderer",e.htmlId),this.renderers.set(e.htmlId,new StickyRenderer(e.htmlId,this.getStickyParams(e.adUnit.params))),onRenderAdUnitHbOrAdx(e.htmlId,(t=>{var i;logger$b.debug("Rendering sticky",e.htmlId),null===(i=this.renderers.get(e.htmlId))||void 0===i||i.renderElements(t)})))}))}getStickyParams(e){const t={fullWidth:!1,mainBackground:isMobile()?"#FFFFFF":"transparent",adBackground:isMobile()?"transparent":"rgba(0, 0, 0, 0.7)",position:"bottom",closeButtonPosition:"top-right",yOffset:0,margin:0,scale:1,useUniqId:!0,onClose:e=>{logger$b.info("Sticky has been closed",e)}};return(null==e?void 0:e.sticky)?Object.assign(Object.assign({},t),e.sticky):t}}new Sticky;const logger$a=new Logger("Passback");class Passback{constructor(){this.adUnitIds=new Set,logger$a.info("Module initialization"),hooks.before("passback",(e=>this.passbackProcess(e.adUnit)))}passbackProcess(e){e&&this.callPassback(e)}callPassback(e){var t,i,r,n,a;if(this.adUnitIds.has(e.id))logger$a.error("Passback already called for this adUnit, skipping",e.id);else{if((null===(r=null===(i=null===(t=e.params)||void 0===t?void 0:t.partners)||void 0===i?void 0:i.sublime)||void 0===r?void 0:r.enabled)&&(null===(n=e.params)||void 0===n?void 0:n.partners.sublime.zoneId)){logger$a.info("Sublime passback",e.params.partners.sublime.zoneId);const t=document.createElement("script");t.setAttribute("id","sublime"),t.setAttribute("type","text/javascript"),t.setAttribute("src",`https://sac.ayads.co/sublime/${e.params.partners.sublime.zoneId}`),window.top&&(window.top.document.body.appendChild(t),"function"==typeof window.top.slmadsSkinUninstall&&window.top.slmadsSkinUninstall()),this.adUnitIds.add(e.id)}void 0!==(null===(a=e.params)||void 0===a?void 0:a.passbackCallback)&&(logger$a.info("Call passbackCallback",e),e.params.passbackCallback(),this.adUnitIds.add(e.id))}}}const Passback$1=new Passback;class BaseVideoPlayer{constructor(e){this.adUnitId=e}onBidsRequested(){}callPassback(){const e=Config.getAdUnitsConfigById([this.adUnitId]);e.length>0&&Passback$1.callPassback(e[0])}destroy(e=!1){}}const logger$9=new Logger("Akcelo Video");class AkceloVideo extends BaseVideoPlayer{constructor(e,t=!1){var i,r,n,a,o,s,d;if(super(e),this.lineItemMapping={},this.bids=[],this.currentBid=null,this.isLoaded=!1,this.isReadyToRender=!1,this.isFirstBidsRequested=!1,this.isWaiting=!1,this.isPaused=!1,this.isDestroyed=!1,this.isAdPlaying=!1,this.hasWaitingBids=!1,this.videoCount=0,this.isFirstVideoContentAdRequest=!0,this.isFraudDetected=!1,this.refreshInterval=null,this.totalImpressionCallCount=0,this.totalImpressionCount=0,this.videoImpressionCount=0,logger$9.info("Module initialization"),window.slmpbjs=window.slmpbjs||{adUnits:[]},this.adUnitConfig=window.slmpbjs.adUnits.find((e=>e.id===this.adUnitId)),this.config=this.getConfig(null===(r=null===(i=this.adUnitConfig)||void 0===i?void 0:i.params)||void 0===r?void 0:r.video),this.config.provider="DAILYMOTION",this.analyticsContext={slmads_id:(null!==(a=null===(n=this.adUnitConfig)||void 0===n?void 0:n.slmadsId)&&void 0!==a?a:0).toString(),format:null!==(s=null===(o=this.config.mode)||void 0===o?void 0:o.toLowerCase())&&void 0!==s?s:"corner",player:"AKCELO"},this.config.skipVideoForPassback)return logger$9.info("Skipping video for Passback"),void this.destroy(!0);t&&this.onBidsRequested(),EventAnalytics$1.logEvent("video_init",{data:this.analyticsContext}),null===(d=window.slmadshb.refresh)||void 0===d||d.disableAdUnitRefresh(this.adUnitId),this.loadPlayer((()=>{logger$9.info("Player loaded"),this.isLoaded=!0,this.loadLineItemsMapping(),this.isReadyToRender||this.onReadyToRender()}))}getConfig(e){const t={debug:debugIsOn(),mode:"CORNER",position:"BOTTOM_RIGHT",allowNoAd:!1,disablePassbackOnClose:!1,skipVideoForPassback:!1,closeButtonMode:"AFTER_DELAY",closeButtonPosition:"TOP_RIGHT",closeButtonPositionMode:"OUTSIDE",closeButtonDelay:30,visibilityProtectionEnabled:!0,fullscreen:!0,dailymotion:{allowBids:!0,allowBidsAtFirstcall:!0,allowMultipleVideos:!0,playerId:"PIP"===(null==e?void 0:e.mode)?"xfiuc":"xdfdz",syndicationKey:"123503",refresh:{enabled:!0,capping:5}}};let i=t;return e&&(i=mergeObjectsRecursively(t,e)),i}getBids(){const e=[],t=window.slmpbjs.getBidResponsesForAdUnitCode(this.adUnitId);return t.bids&&t.bids.forEach((t=>{t.cpm&&t.adId&&t.cpm>0&&"renderer"!==t.status&&e.push(t)})),[...new Set([...this.bids,...e.sort(((e,t)=>t.cpm-e.cpm))])]}loadPlayer(e){if(void 0!==window.AkceloPlayer)e();else{const t=document.createElement("script");t.src="//ads.slmads.com/akcelo-player.js",t.onload=e,document.head.appendChild(t)}}loadLineItemsMapping(){var e,t;fetch(`//ads.sportslocalmedia.com/mapping/${(null!==(t=null===(e=this.adUnitConfig)||void 0===e?void 0:e.adUnitPath)&&void 0!==t?t:"/4490027/Akcelo_Video").split("/")[1].split(",")[0]}.json`).then((e=>{e.text().then((e=>{this.lineItemMapping=JSON.parse(e)}))})).catch((e=>{logger$9.error("Failed to fetch line items mapping",e)}))}onReadyToRender(){var e,t,i;if(!this.isLoaded||!this.isFirstBidsRequested)return;if(this.isReadyToRender=!0,logger$9.info("Rendering player"),!this.config.allowNoAd){const i=document.createElement("style");i.innerText=".v-vlite{opacity: 0;}.v-vlite.visible{opacity: 1;}",null===(t=null===(e=document.getElementById(this.adUnitId))||void 0===e?void 0:e.parentElement)||void 0===t||t.appendChild(i)}this.bids=this.getBids(),this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0;const r=null===(i=document.getElementById(this.adUnitId))||void 0===i?void 0:i.getAttribute("video-id");if(r&&(this.config.dailymotion.videoId=r),-1!==[88,103,111,180,594].indexOf(window.slmadshb.setup.params.siteId)&&this.config.dailymotion.playlistId){const e={x7dwbi:{A:"x7tp4z",B:"x7tp53"},x7dprf:{A:"x80r6q",B:"x80r6s"}},t=window.slmadshb.getAdUnitFloorModel(this.adUnitId);if(t){const i="video_multiply_2"===t?"B":"A";this.config.dailymotion.playlistId=e[this.config.dailymotion.playlistId][i]}}this.config.dailymotion.customParams=this.getDailymotionCustomParams(this.config.dailymotion.allowBids),this.player=new window.AkceloPlayer(`#${this.adUnitId}`,this.config,this.onPlayerReady.bind(this))}onPlayerReady(){var e,t,i,r,n,a,o,s,d,l,c;EventAnalytics$1.logEvent("video_ready",{data:this.analyticsContext}),EventAnalytics$1.logEvent("video_imp_req",{data:Object.assign(Object.assign({},this.analyticsContext),{refresh:this.totalImpressionCallCount.toString()})}),this.totalImpressionCallCount+=1,null===(e=this.player)||void 0===e||e.on("AdImpression",this.onAdImpression.bind(this)),null===(t=this.player)||void 0===t||t.on("AdStart",(e=>{var t,i;this.isAdPlaying=!0,null===(t=window.slmadshb.refresh)||void 0===t||t.enableAdUnitRefresh(this.adUnitId,performance.now()),this.config.allowNoAd||(document.dispatchEvent(new Event("AkceloVideoVisible")),null===(i=this.player)||void 0===i||i.playerInstance.elements.outerContainer.classList.add("visible")),!e.detail.isDM&&this.refreshInterval&&clearInterval(this.refreshInterval)})),null===(i=this.player)||void 0===i||i.on("AdEnd",(()=>{var e;this.isAdPlaying=!1,null===(e=this.player)||void 0===e||e.requestAd(this.getDailymotionCustomParams(this.config.dailymotion.allowBids),!0)})),null===(r=this.player)||void 0===r||r.on("AdError",(e=>{var t;this.isAdPlaying=!1,null===(t=window.slmadshb.refresh)||void 0===t||t.enableAdUnitRefresh(this.adUnitId,performance.now()),e.detail.errorCode&&EventAnalytics$1.logEvent("video_error",{data:Object.assign(Object.assign({},this.analyticsContext),{error_code:e.detail.errorCode.toString()})}),!e.detail.isDM&&this.isFraudDetected?this.destroy(!0):e.detail.errorType&&e.detail.errorMessage&&"NO_ADS"===e.detail.errorType&&-1!==e.detail.errorMessage.indexOf("viewing context")&&(EventAnalytics$1.logEvent("video_error",{data:Object.assign(Object.assign({},this.analyticsContext),{error_code:VIDEO_ERROR_CODE.VIEWING_CONTEXT_FRAUD})}),this.isFraudDetected=!0)})),null===(n=this.player)||void 0===n||n.on("VideoStart",(e=>{var t,i,r,n,a,o;this.videoCount=null!==(i=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.videoIndex)&&void 0!==i?i:0;const s=null!==(n=null===(r=this.config.dailymotion.refresh)||void 0===r?void 0:r.capping)&&void 0!==n?n:5;0!==this.totalImpressionCount||this.config.allowNoAd||(null===(a=this.config.dailymotion.refresh)||void 0===a?void 0:a.enabled)&&!(this.videoCount>=s)||1===(null===(o=null==e?void 0:e.detail)||void 0===o?void 0:o.videoIndex)&&this.isFraudDetected||this.destroy(!0)})),null===(a=this.player)||void 0===a||a.on("VideoEnd",(()=>{var e,t;this.isWaiting=!0,this.isFirstVideoContentAdRequest=!0,null===(e=window.slmadshb.refresh)||void 0===e||e.disableAdUnitRefresh(this.adUnitId),this.config.dailymotion.allowMultipleVideos&&(0!==this.videoImpressionCount||this.config.allowNoAd&&"CORNER"!==this.config.mode)?null===(t=this.player)||void 0===t||t.requestAd(this.getDailymotionCustomParams(this.config.dailymotion.allowBids),!0):this.destroy(!0),this.videoImpressionCount=0})),null===(o=this.player)||void 0===o||o.on("VideoPlay",(e=>{var t,i,r,n,a,o,s,d,l,c;this.isWaiting=!1,this.isPaused=!1;const p=null!==(i=null===(t=this.config.dailymotion.refresh)||void 0===t?void 0:t.capping)&&void 0!==i?i:5;(null===(r=this.config.dailymotion.refresh)||void 0===r?void 0:r.enabled)&&!((null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.videoIndex)>=p-1)||1===(null===(a=null==e?void 0:e.detail)||void 0===a?void 0:a.videoIndex)&&this.isFraudDetected||(null===(o=window.slmadshb.refresh)||void 0===o||o.enableAdUnitRefresh(this.adUnitId,performance.now()),this.isFirstVideoContentAdRequest&&(this.requestAd(),this.isFirstVideoContentAdRequest=!1),this.refreshInterval=window.setInterval((()=>{this.requestAd()}),null!==(c=null===(l=null===(d=null===(s=this.adUnitConfig)||void 0===s?void 0:s.params)||void 0===d?void 0:d.refresh)||void 0===l?void 0:l.timeout)&&void 0!==c?c:5e3))})),null===(s=this.player)||void 0===s||s.on("VideoPause",(()=>{var e;this.isPaused=!0,null===(e=window.slmadshb.refresh)||void 0===e||e.enableAdUnitRefresh(this.adUnitId,performance.now())})),null===(d=this.player)||void 0===d||d.on("VideoDestroy",(()=>{this.destroy(!0)})),null===(l=this.player)||void 0===l||l.on("HeavyAdIntervention",(()=>{logger$9.warn("Heavy Ad Intervention occurred, destroying player"),EventAnalytics$1.logEvent("video_error",{data:Object.assign(Object.assign({},this.analyticsContext),{error_code:VIDEO_ERROR_CODE.HEAVY_AD_INTERVENTION})}),this.destroy(!0)})),null===(c=this.player)||void 0===c||c.on("close",(()=>{this.destroy(!this.config.disablePassbackOnClose)})),document.addEventListener("AkceloVideoVisible",(()=>{if(!this.config.visibilityProtectionEnabled)return;const e=document.querySelector(`.v-vlite .v-container:has(#${this.adUnitId})`);if(!e)return;let t=!0;setInterval((()=>{const i=e.getBoundingClientRect(),r=[[i.left+10,i.top+10],[i.left+10,(i.top+i.bottom)/2],[i.left+10,i.bottom-10],[(i.left+i.right)/2,i.top+10],[(i.left+i.right)/2,(i.top+i.bottom)/2],[(i.left+i.right)/2,i.bottom-10],[i.right-10,i.top+10],[i.right-10,(i.top+i.bottom)/2],[i.right-10,i.bottom-10]],n=[];r.forEach((t=>{n.push(e.contains(document.elementFromPoint(t[0],t[1])))})),n.filter(Boolean).length<n.length/2?(t&&this.onPlayerVisibilityChange(!1),t=!1):(t||this.onPlayerVisibilityChange(!0),t=!0)}),500)}))}onPlayerVisibilityChange(e){var t,i;this.isDestroyed||(e?null===(t=this.player)||void 0===t||t.playerInstance.play():null===(i=this.player)||void 0===i||i.playerInstance.pause(),EventAnalytics$1.logEvent("alert",{data:{type:"hidden_video",player:"akcelo",visible:e?"true":"false"}}))}onAdImpression(e){var t,i,r,n;const a={adUnit:this.adUnitId,slmadsId:null!==(i=null===(t=this.adUnitConfig)||void 0===t?void 0:t.slmadsId)&&void 0!==i?i:0,refresh:this.totalImpressionCount>0,mediaType:"video",bidderCode:"unknown",cpm:null,floor:0,size:""};if(e)if(e.detail.isDM)if(this.lineItemMapping)if(null!==e.detail.adData.adAdvertiserName||null!==e.detail.adData.adCompanion)a.bidderCode="dm";else if(null!==e.detail.adData.adCreativeAdId&&(Number.isNaN(parseInt(e.detail.adData.adCreativeId||"",10))||e.detail.adData.adCreativeAdId.length>16))a.bidderCode="adx";else if(null!==e.detail.adData.adCreativeAdId&&null!==e.detail.adData.adCreativeId)if(-1!==Object.keys(this.lineItemMapping).indexOf(e.detail.adData.adCreativeAdId)){const t=this.lineItemMapping[e.detail.adData.adCreativeAdId].toFixed(2),i=null!==(r=this.bids.filter((e=>e.adserverTargeting.hb_pb.toString()===t.toString()))[0])&&void 0!==r?r:null;i?(a.bidderCode=i.bidderCode,a.cpm=parseFloat(i.cpm.toString()),a.size=`video-${i.size}`,i.used=!0,this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0):(a.bidderCode="a9",a.cpm=parseFloat(t))}else a.bidderCode="direct";else EventAnalytics$1.logEvent("video_error",{data:Object.assign(Object.assign({},this.analyticsContext),{error_code:VIDEO_ERROR_CODE.UNKNOWN_AD_WINNER})});else EventAnalytics$1.logEvent("video_error",{data:Object.assign(Object.assign({},this.analyticsContext),{error_code:VIDEO_ERROR_CODE.MISSING_LINE_ITEM_MAPPING})});else if(null!==e.detail.adData){const t=e.detail.adData.getAdSystem().toLowerCase(),i=e.detail.adData.getWrapperAdSystems();"amazon"===t?a.bidderCode="a9":-1!==i.indexOf("AdSense/AdX")?a.bidderCode="adx":-1!==i.indexOf("prebid.org wrapper")?null!==this.currentBid&&(a.bidderCode=null===(n=this.currentBid)||void 0===n?void 0:n.bidderCode,a.cpm=parseFloat(this.currentBid.cpm.toString()),a.size=`video-${this.currentBid.size}`,this.currentBid.used=!0,this.currentBid=null,this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0):a.bidderCode="direct"}""!==a.bidderCode&&document.dispatchEvent(new CustomEvent("videoImpression",{detail:a})),EventAnalytics$1.logEvent("video_imp",{data:Object.assign(Object.assign({},this.analyticsContext),{refresh:this.totalImpressionCallCount.toString(),previous_imps:this.totalImpressionCount.toString()})}),this.totalImpressionCount+=1,this.videoImpressionCount+=1}onBidsRequested(){this.isFirstBidsRequested=!0,this.isReadyToRender?(this.bids=this.getBids(),this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0):this.onReadyToRender()}getVastUrl(e=!0){var t,i,r,n,a,o,s,d,l,c,p,u,m,g;this.bids.length>0&&(this.currentBid=null!==(t=this.bids.filter((e=>!e.rendered&&!e.used))[0])&&void 0!==t?t:null);const f={adUnit:this.adUnitConfig,params:{iu:null!==(r=null===(i=this.adUnitConfig)||void 0===i?void 0:i.adUnitPath)&&void 0!==r?r:"/4490027/Akcelo_Video",cust_params:{player:"AKCELO",slmadsId:null===(n=this.adUnitConfig)||void 0===n?void 0:n.slmadsId,slmadshb_adx:(null!==(l=null===(d=null===(s=null===(o=null===(a=this.adUnitConfig)||void 0===a?void 0:a.params)||void 0===o?void 0:o.partners)||void 0===s?void 0:s.adExchange)||void 0===d?void 0:d.enabled)&&void 0!==l&&l).toString(),slmadshb_ob:(null!==(g=null===(m=null===(u=null===(p=null===(c=this.adUnitConfig)||void 0===c?void 0:c.params)||void 0===p?void 0:p.partners)||void 0===u?void 0:u.openBidding)||void 0===m?void 0:m.enabled)&&void 0!==g&&g).toString(),refresh_idx:this.totalImpressionCount},ltd:0,output:"vast",vpa:"auto",vpmute:1,plcmt:2,tfcd:0}};if(e&&(this.currentBid&&(window.slmpbjs.markWinningBidAsUsed({adId:this.currentBid.adId}),f.bid=this.currentBid),window.slmadshb.getA9VideoBid)){const e=window.slmadshb.getA9VideoBid(this.adUnitId);e&&e.amzniid&&window.slmadshb.markA9VideoBidAsUsed(e.amzniid),e&&e.amzniid&&e.amznp&&e.amznbid&&(f.params.cust_params.amzniid=e.amzniid,f.params.cust_params.amznp=e.amznp,f.params.cust_params.amznbid=e.amznbid)}if(window.slmadshb.getAdUnitFloor&&null!==window.slmadshb.getAdUnitFloor(this.adUnitId)&&(f.params.cust_params.slm_floor=window.slmadshb.getAdUnitFloor(this.adUnitId)),window.googletag&&window.googletag.pubads&&window.googletag.pubads().getTargetingKeys){const e=window.googletag.pubads().getTargetingKeys();e&&e.length>0&&e.forEach((e=>{const t=window.googletag.pubads().getTargeting(e);t&&1===t.length&&void 0===f.params.cust_params[e]&&(f.params.cust_params[e]=t[0])}))}return window.slmpbjs.adServers.dfp.buildVideoUrl(f)}getDailymotionCustomParams(e=!0){const t=this.getVastUrl(e),i=new URLSearchParams(t.split("?")[1]),r=i.get("cust_params"),n=getQueryStringParams(null!=r?r:"");e||Object.keys(n).forEach((e=>{e.startsWith("hb_")&&delete n[e]}));const a=new URLSearchParams(n).toString();return i.set("cust_params",a),i.set("plcmt","2"),i.toString()}requestAd(){var e;this.isDestroyed||this.isPaused||this.isWaiting||(logger$9.info("Requesting Ad"),null===(e=this.player)||void 0===e||e.requestAd(this.getVastUrl()),EventAnalytics$1.logEvent("video_imp_req",{data:Object.assign(Object.assign({},this.analyticsContext),{refresh:this.totalImpressionCallCount.toString()})}),this.totalImpressionCallCount+=1)}destroy(e=!1){var t,i;logger$9.info("Destroying player"),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null),this.isDestroyed=!0,null===(t=window.slmadshb.refresh)||void 0===t||t.disableAdUnitRefresh(this.adUnitId),removeAdUnit(this.adUnitId),null===(i=this.player)||void 0===i||i.destroy(),e&&this.callPassback()}}const logger$8=new Logger("Standalone Video");class StandaloneVideo extends BaseVideoPlayer{constructor(e){super(e),logger$8.info("Module initialization")}onBidsRequested(){logger$8.info("Bids requested",this.adUnitId);const e=Config.getAdUnitsConfigById([this.adUnitId]);if(0===e.length)return;const t=e[0];let i;const r=window.slmpbjs.getHighestCpmBids(this.adUnitId);r[0]&&r[0].adId&&"video"===r[0].mediaType&&(i=r[0]);const n=window.slmadshb.getA9VideoBid(t.id);n&&n.amzniid&&window.slmadshb.markA9VideoBidAsUsed(n.amzniid),t.params&&t.params.video&&t.params.video.renderer&&(t.params.video.renderer(this.adUnitId,i,n),logger$8.info("Calling video renderer",this.adUnitId,i,n))}}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function __awaiter$3(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var i,r,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(d){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(d){s=[6,d],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,d])}}}function __spreadArray(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var version="1.9.1",BotKind={Awesomium:"awesomium",Cef:"cef",CefSharp:"cefsharp",CoachJS:"coachjs",Electron:"electron",FMiner:"fminer",Geb:"geb",NightmareJS:"nightmarejs",Phantomas:"phantomas",PhantomJS:"phantomjs",Rhino:"rhino",Selenium:"selenium",Sequentum:"sequentum",SlimerJS:"slimerjs",WebDriverIO:"webdriverio",WebDriver:"webdriver",HeadlessChrome:"headless_chrome",Unknown:"unknown"},BotdError=function(e){function t(i,r){var n=e.call(this,r)||this;return n.state=i,n.name="BotdError",Object.setPrototypeOf(n,t.prototype),n}return __extends(t,e),t}(Error);function detect(e,t){var i={},r={bot:!1};for(var n in t){var a=(0,t[n])(e),o={bot:!1};"string"==typeof a?o={bot:!0,botKind:a}:a&&(o={bot:!0,botKind:BotKind.Unknown}),i[n]=o,o.bot&&(r=o)}return[i,r]}function collect(e){return __awaiter$3(this,void 0,void 0,(function(){var t,i,r=this;return __generator(this,(function(n){switch(n.label){case 0:return t={},i=Object.keys(e),[4,Promise.all(i.map((function(i){return __awaiter$3(r,void 0,void 0,(function(){var r,n,a,o,s;return __generator(this,(function(d){switch(d.label){case 0:r=e[i],d.label=1;case 1:return d.trys.push([1,3,,4]),n=t,a=i,s={},[4,r()];case 2:return n[a]=(s.value=d.sent(),s.state=0,s),[3,4];case 3:return o=d.sent(),t[i]=o instanceof BotdError?{state:o.state,error:"".concat(o.name,": ").concat(o.message)}:{state:-3,error:o instanceof Error?"".concat(o.name,": ").concat(o.message):String(o)},[3,4];case 4:return[2]}}))}))})))];case 1:return n.sent(),[2,t]}}))}))}function detectAppVersion(e){var t=e.appVersion;return 0===t.state&&(/headless/i.test(t.value)?BotKind.HeadlessChrome:/electron/i.test(t.value)?BotKind.Electron:/slimerjs/i.test(t.value)?BotKind.SlimerJS:void 0)}function arrayIncludes(e,t){return-1!==e.indexOf(t)}function strIncludes(e,t){return-1!==e.indexOf(t)}function arrayFind(e,t){if("find"in e)return e.find(t);for(var i=0;i<e.length;i++)if(t(e[i],i,e))return e[i]}function getObjectProps(e){return Object.getOwnPropertyNames(e)}function includes(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var r=function(t){if("string"==typeof t){if(arrayIncludes(e,t))return{value:!0}}else if(null!=arrayFind(e,(function(e){return t.test(e)})))return{value:!0}},n=0,a=t;n<a.length;n++){var o=r(a[n]);if("object"==typeof o)return o.value}return!1}function countTruthy(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function detectDocumentAttributes(e){var t=e.documentElementKeys;return 0===t.state&&(includes(t.value,"selenium","webdriver","driver")?BotKind.Selenium:void 0)}function detectErrorTrace(e){var t=e.errorTrace;return 0===t.state&&(/PhantomJS/i.test(t.value)?BotKind.PhantomJS:void 0)}function detectEvalLengthInconsistency(e){var t=e.evalLength,i=e.browserKind,r=e.browserEngineKind;if(0===t.state&&0===i.state&&0===r.state){var n=t.value;return"unknown"!==r.value&&(37===n&&!arrayIncludes(["webkit","gecko"],r.value)||39===n&&!arrayIncludes(["internet_explorer"],i.value)||33===n&&!arrayIncludes(["chromium"],r.value))}}function detectFunctionBind(e){if(-2===e.functionBind.state)return BotKind.PhantomJS}function detectLanguagesLengthInconsistency(e){var t=e.languages;if(0===t.state&&0===t.value.length)return BotKind.HeadlessChrome}function detectMimeTypesConsistent(e){var t=e.mimeTypesConsistent;if(0===t.state&&!t.value)return BotKind.Unknown}function detectNotificationPermissions(e){var t=e.notificationPermissions,i=e.browserKind;return 0===i.state&&"chrome"===i.value&&(0===t.state&&t.value?BotKind.HeadlessChrome:void 0)}function detectPluginsArray(e){var t=e.pluginsArray;if(0===t.state&&!t.value)return BotKind.HeadlessChrome}function detectPluginsLengthInconsistency(e){var t=e.pluginsLength,i=e.android,r=e.browserKind,n=e.browserEngineKind;if(0===t.state&&0===i.state&&0===r.state&&0===n.state&&"chrome"===r.value&&!i.value&&"chromium"===n.value)return 0===t.value?BotKind.HeadlessChrome:void 0}function detectProcess(e){var t,i=e.process;return 0===i.state&&("renderer"===i.value.type||null!=(null===(t=i.value.versions)||void 0===t?void 0:t.electron)?BotKind.Electron:void 0)}function detectProductSub(e){var t=e.productSub,i=e.browserKind;return 0===t.state&&0===i.state&&("chrome"!==i.value&&"safari"!==i.value&&"opera"!==i.value&&"wechat"!==i.value||"20030107"===t.value?void 0:BotKind.Unknown)}function detectUserAgent(e){var t=e.userAgent;return 0===t.state&&(/PhantomJS/i.test(t.value)?BotKind.PhantomJS:/Headless/i.test(t.value)?BotKind.HeadlessChrome:/Electron/i.test(t.value)?BotKind.Electron:/slimerjs/i.test(t.value)?BotKind.SlimerJS:void 0)}function detectWebDriver(e){var t=e.webDriver;if(0===t.state&&t.value)return BotKind.HeadlessChrome}function detectWebGL(e){var t=e.webGL;if(0===t.state){var i=t.value,r=i.vendor,n=i.renderer;if("Brian Paul"==r&&"Mesa OffScreen"==n)return BotKind.HeadlessChrome}}function detectWindowExternal(e){var t=e.windowExternal;return 0===t.state&&(/Sequentum/i.test(t.value)?BotKind.Sequentum:void 0)}function detectWindowSize(e){var t=e.windowSize,i=e.documentFocus;if(0!==t.state||0!==i.state)return!1;var r=t.value,n=r.outerWidth,a=r.outerHeight;return i.value&&0===n&&0===a?BotKind.HeadlessChrome:void 0}function detectDistinctiveProperties(e){var t=e.distinctiveProps;if(0!==t.state)return!1;var i,r=t.value;for(i in r)if(r[i])return i}var detectors={detectAppVersion:detectAppVersion,detectDocumentAttributes:detectDocumentAttributes,detectErrorTrace:detectErrorTrace,detectEvalLengthInconsistency:detectEvalLengthInconsistency,detectFunctionBind:detectFunctionBind,detectLanguagesLengthInconsistency:detectLanguagesLengthInconsistency,detectNotificationPermissions:detectNotificationPermissions,detectPluginsArray:detectPluginsArray,detectPluginsLengthInconsistency:detectPluginsLengthInconsistency,detectProcess:detectProcess,detectUserAgent:detectUserAgent,detectWebDriver:detectWebDriver,detectWebGL:detectWebGL,detectWindowExternal:detectWindowExternal,detectWindowSize:detectWindowSize,detectMimeTypesConsistent:detectMimeTypesConsistent,detectProductSub:detectProductSub,detectDistinctiveProperties:detectDistinctiveProperties};function getAppVersion(){var e=navigator.appVersion;if(null==e)throw new BotdError(-1,"navigator.appVersion is undefined");return e}function getDocumentElementKeys(){if(void 0===document.documentElement)throw new BotdError(-1,"document.documentElement is undefined");var e=document.documentElement;if("function"!=typeof e.getAttributeNames)throw new BotdError(-2,"document.documentElement.getAttributeNames is not a function");return e.getAttributeNames()}function getErrorTrace(){try{null[0]()}catch(e){if(e instanceof Error&&null!=e.stack)return e.stack.toString()}throw new BotdError(-3,"errorTrace signal unexpected behaviour")}function getEvalLength(){return eval.toString().length}function getFunctionBind(){if(void 0===Function.prototype.bind)throw new BotdError(-2,"Function.prototype.bind is undefined");return Function.prototype.bind.toString()}function getBrowserEngineKind(){var e,t,i=window,r=navigator;return countTruthy(["webkitPersistentStorage"in r,"webkitTemporaryStorage"in r,0===r.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in i,"BatteryManager"in i,"webkitMediaStream"in i,"webkitSpeechGrammar"in i])>=5?"chromium":countTruthy(["ApplePayError"in i,"CSSPrimitiveValue"in i,"Counter"in i,0===r.vendor.indexOf("Apple"),"getStorageUpdates"in r,"WebKitMediaKeys"in i])>=4?"webkit":countTruthy(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in i,"mozInnerScreenX"in i,"CSSMozDocumentRule"in i,"CanvasCaptureMediaStream"in i])>=4?"gecko":"unknown"}function getBrowserKind(){var e,t=null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase();return strIncludes(t,"edg/")?"edge":strIncludes(t,"trident")||strIncludes(t,"msie")?"internet_explorer":strIncludes(t,"wechat")?"wechat":strIncludes(t,"firefox")?"firefox":strIncludes(t,"opera")||strIncludes(t,"opr")?"opera":strIncludes(t,"chrome")?"chrome":strIncludes(t,"safari")?"safari":"unknown"}function isAndroid(){var e=getBrowserEngineKind(),t="chromium"===e,i="gecko"===e;if(!t&&!i)return!1;var r=window;return countTruthy(["onorientationchange"in r,"orientation"in r,t&&!("SharedWorker"in r),i&&/android/i.test(navigator.appVersion)])>=2}function getDocumentFocus(){return void 0!==document.hasFocus&&document.hasFocus()}function isChromium86OrNewer(){var e=window;return countTruthy([!("MediaSettingsRange"in e),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3}function getLanguages(){var e=navigator,t=[],i=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==i&&t.push([i]),Array.isArray(e.languages))"chromium"===getBrowserEngineKind()&&isChromium86OrNewer()||t.push(e.languages);else if("string"==typeof e.languages){var r=e.languages;r&&t.push(r.split(","))}return t}function areMimeTypesConsistent(){if(void 0===navigator.mimeTypes)throw new BotdError(-1,"navigator.mimeTypes is undefined");for(var e=navigator.mimeTypes,t=Object.getPrototypeOf(e)===MimeTypeArray.prototype,i=0;i<e.length;i++)t&&(t=Object.getPrototypeOf(e[i])===MimeType.prototype);return t}function getNotificationPermissions(){return __awaiter$3(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(i){switch(i.label){case 0:if(void 0===window.Notification)throw new BotdError(-1,"window.Notification is undefined");if(void 0===navigator.permissions)throw new BotdError(-1,"navigator.permissions is undefined");if("function"!=typeof(e=navigator.permissions).query)throw new BotdError(-2,"navigator.permissions.query is not a function");i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.query({name:"notifications"})];case 2:return t=i.sent(),[2,"denied"===window.Notification.permission&&"prompt"===t.state];case 3:throw i.sent(),new BotdError(-3,"notificationPermissions signal unexpected behaviour");case 4:return[2]}}))}))}function getPluginsArray(){if(void 0===navigator.plugins)throw new BotdError(-1,"navigator.plugins is undefined");if(void 0===window.PluginArray)throw new BotdError(-1,"window.PluginArray is undefined");return navigator.plugins instanceof PluginArray}function getPluginsLength(){if(void 0===navigator.plugins)throw new BotdError(-1,"navigator.plugins is undefined");if(void 0===navigator.plugins.length)throw new BotdError(-3,"navigator.plugins.length is undefined");return navigator.plugins.length}function getProcess(){var e=window.process,t="window.process is";if(void 0===e)throw new BotdError(-1,"".concat(t," undefined"));if(e&&"object"!=typeof e)throw new BotdError(-3,"".concat(t," not an object"));return e}function getProductSub(){var e=navigator.productSub;if(void 0===e)throw new BotdError(-1,"navigator.productSub is undefined");return e}function getRTT(){if(void 0===navigator.connection)throw new BotdError(-1,"navigator.connection is undefined");if(void 0===navigator.connection.rtt)throw new BotdError(-1,"navigator.connection.rtt is undefined");return navigator.connection.rtt}function getUserAgent(){return navigator.userAgent}function getWebDriver(){if(null==navigator.webdriver)throw new BotdError(-1,"navigator.webdriver is undefined");return navigator.webdriver}function getWebGL(){var e=document.createElement("canvas");if("function"!=typeof e.getContext)throw new BotdError(-2,"HTMLCanvasElement.getContext is not a function");var t=e.getContext("webgl");if(null===t)throw new BotdError(-4,"WebGLRenderingContext is null");if("function"!=typeof t.getParameter)throw new BotdError(-2,"WebGLRenderingContext.getParameter is not a function");return{vendor:t.getParameter(t.VENDOR),renderer:t.getParameter(t.RENDERER)}}function getWindowExternal(){if(void 0===window.external)throw new BotdError(-1,"window.external is undefined");var e=window.external;if("function"!=typeof e.toString)throw new BotdError(-2,"window.external.toString is not a function");return e.toString()}function getWindowSize(){return{outerWidth:window.outerWidth,outerHeight:window.outerHeight,innerWidth:window.innerWidth,innerHeight:window.innerHeight}}function checkDistinctiveProperties(){var e,t,i=((e={})[BotKind.Awesomium]={window:["awesomium"]},e[BotKind.Cef]={window:["RunPerfTest"]},e[BotKind.CefSharp]={window:["CefSharp"]},e[BotKind.CoachJS]={window:["emit"]},e[BotKind.FMiner]={window:["fmget_targets"]},e[BotKind.Geb]={window:["geb"]},e[BotKind.NightmareJS]={window:["__nightmare","nightmare"]},e[BotKind.Phantomas]={window:["__phantomas"]},e[BotKind.PhantomJS]={window:["callPhantom","_phantom"]},e[BotKind.Rhino]={window:["spawn"]},e[BotKind.Selenium]={window:["_Selenium_IDE_Recorder","_selenium","calledSelenium",/^([a-z]){3}_.*_(Array|Promise|Symbol)$/],document:["__selenium_evaluate","selenium-evaluate","__selenium_unwrapped"]},e[BotKind.WebDriverIO]={window:["wdioElectron"]},e[BotKind.WebDriver]={window:["webdriver","__webdriverFunc","__lastWatirAlert","__lastWatirConfirm","__lastWatirPrompt","_WEBDRIVER_ELEM_CACHE","ChromeDriverw"],document:["__webdriver_script_fn","__driver_evaluate","__webdriver_evaluate","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__fxdriver_unwrapped","__webdriver_script_fn","__webdriver_script_func","__webdriver_script_function","$cdc_asdjflasutopfhvcZLmcf","$cdc_asdjflasutopfhvcZLmcfl_","$chrome_asyncScriptInfo","__$webdriverAsyncExecutor"]},e[BotKind.HeadlessChrome]={window:["domAutomation","domAutomationController"]},e),r={},n=getObjectProps(window),a=[];for(t in void 0!==window.document&&(a=getObjectProps(window.document)),i){var o=i[t];if(void 0!==o){var s=void 0!==o.window&&includes.apply(void 0,__spreadArray([n],o.window,!1)),d=!(void 0===o.document||!a.length)&&includes.apply(void 0,__spreadArray([a],o.document,!1));r[t]=s||d}}return r}var sources={android:isAndroid,browserKind:getBrowserKind,browserEngineKind:getBrowserEngineKind,documentFocus:getDocumentFocus,userAgent:getUserAgent,appVersion:getAppVersion,rtt:getRTT,windowSize:getWindowSize,pluginsLength:getPluginsLength,pluginsArray:getPluginsArray,errorTrace:getErrorTrace,productSub:getProductSub,windowExternal:getWindowExternal,mimeTypesConsistent:areMimeTypesConsistent,evalLength:getEvalLength,webGL:getWebGL,webDriver:getWebDriver,languages:getLanguages,notificationPermissions:getNotificationPermissions,documentElementKeys:getDocumentElementKeys,functionBind:getFunctionBind,process:getProcess,distinctiveProps:checkDistinctiveProperties},BotDetector$2=function(){function e(){this.components=void 0,this.detections=void 0}return e.prototype.getComponents=function(){return this.components},e.prototype.getDetections=function(){return this.detections},e.prototype.detect=function(){if(void 0===this.components)throw new Error("BotDetector.detect can't be called before BotDetector.collect");var e=detect(this.components,detectors),t=e[0],i=e[1];return this.detections=t,i},e.prototype.collect=function(){return __awaiter$3(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return e=this,[4,collect(sources)];case 1:return e.components=t.sent(),[2,this.components]}}))}))},e}();function monitor(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/botd/v".concat(version,"/npm-monitoring"),!0),e.send()}catch(t){console.error(t)}}function load(e){var t=(void 0===e?{}:e).monitoring,i=void 0===t||t;return __awaiter$3(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return i&&monitor(),[4,(e=new BotDetector$2).collect()];case 1:return t.sent(),[2,e]}}))}))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$7=new Logger("Bot Detector");class BotDetector{constructor(){this.isBot=null,logger$7.info("Module initialization")}getIsBot(){return __awaiter$2(this,void 0,void 0,(function*(){return null!==this.isBot||load({monitoring:!1}).then((e=>e.detect())).then((e=>{this.isBot=e.bot,e.bot&&"coachjs"===e.botKind&&(this.isBot=!1,logger$7.info("Detection returned bot but kind is 'coachjs', letting it pass")),logger$7.info("Detection completed",e),EventAnalytics$1.logEvent("alert",{data:{type:"bot_detection",isBot:this.isBot.toString()}})})).catch((e=>{logger$7.info("Failed to detect bot status",e),this.isBot=!1,EventAnalytics$1.logEvent("alert",{data:{type:"bot_detection",isBot:"unknown",error:e}})})),this.isBot}))}}const BotDetector$1=new BotDetector,logger$6=new Logger("Akcelo Light Video");class AkceloLightVideo extends BaseVideoPlayer{constructor(e){var t,i,r;super(e),this.isLoaded=!1,this.isReadyToRender=!1,this.isFirstBidsRequested=!1,this.hasWaitingBids=!1,this.bids=[],this.currentBid=null,this.totalImpressionCallCount=0,this.totalImpressionCount=0,logger$6.info("Module initialization"),window.slmpbjs=window.slmpbjs||{adUnits:[]},this.adUnitConfig=window.slmpbjs.adUnits.find((e=>e.id===this.adUnitId)),this.config=this.getConfig(null===(i=null===(t=this.adUnitConfig)||void 0===t?void 0:t.params)||void 0===i?void 0:i.video),this.config.provider="HTML",null===(r=window.slmadshb.refresh)||void 0===r||r.disableAdUnitRefresh(this.adUnitId),this.loadPlayer((()=>{logger$6.info("Player loaded"),this.isLoaded=!0,this.isReadyToRender||this.onReadyToRender()}))}getConfig(e){const t={debug:debugIsOn(),mode:"CORNER",position:"BOTTOM_RIGHT",closeButtonMode:"ONLY_CONTENT",closeButtonPosition:"TOP_RIGHT",closeButtonPositionMode:"OUTSIDE",closeButtonDelay:30,fullscreen:!0,dailymotion:{},lightParams:{allowBids:!0,fallbackToDM:!0,refresh:{enabled:!0,capping:3,skipOnEmpty:!0}}};let i=t;return e&&(i=mergeObjectsRecursively(t,e)),i}getBids(){const e=[],t=window.slmpbjs.getBidResponsesForAdUnitCode(this.adUnitId);return t.bids&&t.bids.forEach((t=>{t.cpm&&t.adId&&t.cpm>0&&"renderer"!==t.status&&e.push(t)})),[...new Set([...this.bids,...e.sort(((e,t)=>t.cpm-e.cpm))])]}getVastUrl(e=!0){var t,i,r,n,a,o,s,d,l,c,p,u,m,g;this.bids.length>0&&(this.currentBid=null!==(t=this.bids.filter((e=>!e.rendered&&!e.used))[0])&&void 0!==t?t:null);const f={adUnit:this.adUnitConfig,params:{iu:null!==(r=null===(i=this.adUnitConfig)||void 0===i?void 0:i.adUnitPath)&&void 0!==r?r:"/4490027/Akcelo_Video",cust_params:{player:"AKCELO LIGHT",slmadsId:null===(n=this.adUnitConfig)||void 0===n?void 0:n.slmadsId,slmadshb_adx:(null!==(l=null===(d=null===(s=null===(o=null===(a=this.adUnitConfig)||void 0===a?void 0:a.params)||void 0===o?void 0:o.partners)||void 0===s?void 0:s.adExchange)||void 0===d?void 0:d.enabled)&&void 0!==l&&l).toString(),slmadshb_ob:(null!==(g=null===(m=null===(u=null===(p=null===(c=this.adUnitConfig)||void 0===c?void 0:c.params)||void 0===p?void 0:p.partners)||void 0===u?void 0:u.openBidding)||void 0===m?void 0:m.enabled)&&void 0!==g&&g).toString()},ltd:0,output:"vast",vpa:"auto",vpmute:1}};if(e&&(this.currentBid&&(window.slmpbjs.markWinningBidAsUsed({adId:this.currentBid.adId}),f.bid=this.currentBid),window.slmadshb.getA9VideoBid)){const e=window.slmadshb.getA9VideoBid(this.adUnitId);e&&e.amzniid&&window.slmadshb.markA9VideoBidAsUsed(e.amzniid),e&&e.amzniid&&e.amznp&&e.amznbid&&(f.params.cust_params.amzniid=e.amzniid,f.params.cust_params.amznp=e.amznp,f.params.cust_params.amznbid=e.amznbid)}if(window.slmadshb.getAdUnitFloor&&null!==window.slmadshb.getAdUnitFloor(this.adUnitId)&&(f.params.cust_params.slm_floor=window.slmadshb.getAdUnitFloor(this.adUnitId)),window.googletag&&window.googletag.pubads&&window.googletag.pubads().getTargetingKeys){const e=window.googletag.pubads().getTargetingKeys();e&&e.length>0&&e.forEach((e=>{const t=window.googletag.pubads().getTargeting(e);t&&1===t.length&&void 0===f.params.cust_params[e]&&(f.params.cust_params[e]=t[0])}))}return window.slmpbjs.adServers.dfp.buildVideoUrl(f)}loadPlayer(e){if(void 0!==window.AkceloPlayer)e();else{const t=document.createElement("script");t.src="//ads.slmads.com/akcelo-player.js",t.onload=e,document.head.appendChild(t)}}onBidsRequested(){var e;this.isFirstBidsRequested=!0,this.isReadyToRender?(this.bids=this.getBids(),this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0,null===(e=window.slmadshb.refresh)||void 0===e||e.disableAdUnitRefresh(this.adUnitId)):this.onReadyToRender()}onReadyToRender(){var e,t,i;if(!this.isLoaded||!this.isFirstBidsRequested)return;this.isReadyToRender=!0,logger$6.info("Rendering player");const r=document.createElement("style");r.innerText=".v-vlite{opacity: 0;}.v-vlite.visible{opacity: 1;}",null===(t=null===(e=document.getElementById(this.adUnitId))||void 0===e?void 0:e.parentElement)||void 0===t||t.appendChild(r);const n=document.createElement("video");n.classList.add("akcelo-media"),n.muted=!0,null===(i=document.getElementById(this.adUnitId))||void 0===i||i.appendChild(n),this.bids=this.getBids(),this.hasWaitingBids=this.bids.filter((e=>!e.rendered&&!e.used)).length>0,new window.AkceloPlayer(`#${this.adUnitId} video.akcelo-media`,this.config,this.onPlayerReady.bind(this))}onPlayerReady(e){var t,i,r,n;this.player=e,null===(t=this.player)||void 0===t||t.on("AdSdkReady",(()=>{this.requestAd()})),null===(i=this.player)||void 0===i||i.on("AdStart",(()=>{var e,t;this.totalImpressionCount+=1,null===(e=this.player)||void 0===e||e.playerInstance.elements.outerContainer.classList.add("visible"),null===(t=window.slmadshb.refresh)||void 0===t||t.enableAdUnitRefresh(this.adUnitId,performance.now())})),null===(r=this.player)||void 0===r||r.on("AdEnd",(()=>{var e,t,i;null===(e=window.slmadshb.refresh)||void 0===e||e.disableAdUnitRefresh(this.adUnitId),(null===(i=null===(t=this.config.lightParams)||void 0===t?void 0:t.refresh)||void 0===i?void 0:i.enabled)&&this.config.lightParams.refresh.capping&&this.config.lightParams.refresh.capping>this.totalImpressionCallCount&&(!this.config.lightParams.refresh.skipOnEmpty||this.totalImpressionCallCount===this.totalImpressionCount)?this.requestAd():this.destroy(!0)})),null===(n=this.player)||void 0===n||n.on("AdError",(()=>{var e,t,i;null===(e=window.slmadshb.refresh)||void 0===e||e.disableAdUnitRefresh(this.adUnitId),(null===(i=null===(t=this.config.lightParams)||void 0===t?void 0:t.refresh)||void 0===i?void 0:i.enabled)&&this.config.lightParams.refresh.capping&&this.config.lightParams.refresh.capping>this.totalImpressionCallCount&&(!this.config.lightParams.refresh.skipOnEmpty||this.totalImpressionCallCount===this.totalImpressionCount)?this.requestAd():this.destroy(!0)}))}requestAd(){var e;logger$6.info("Requesting Ad"),this.totalImpressionCallCount+=1,null===(e=this.player)||void 0===e||e.requestAd(this.getVastUrl())}destroy(e=!1){var t,i,r;logger$6.info("Destroying player"),document.dispatchEvent(new Event("AkceloLightVideoDestroy")),null===(t=window.slmadshb.refresh)||void 0===t||t.disableAdUnitRefresh(this.adUnitId),null===(i=this.player)||void 0===i||i.destroy(),(null===(r=this.config.lightParams)||void 0===r?void 0:r.fallbackToDM)&&this.adUnitConfig?hooks("videoFallback",(()=>{}),{htmlId:this.adUnitId,adUnit:this.adUnitConfig}):(removeAdUnit(this.adUnitId),e&&this.callPassback())}}var __awaiter$1=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$5=new Logger("Video");class Video{constructor(){this.players=new Map,logger$5.info("Module initialization"),window.slmadshb.videoInstances=this.players,hooks.after("addAdUnit",((e,t)=>__awaiter$1(this,void 0,void 0,(function*(){var e,i,r,n;if("video"===t.adUnit.type)if("STANDALONE"===(null===(i=null===(e=t.adUnit.params)||void 0===e?void 0:e.video)||void 0===i?void 0:i.type))this.players.set(t.htmlId,new StandaloneVideo(t.htmlId));else if("AKCELO_LIGHT"===(null===(n=null===(r=t.adUnit.params)||void 0===r?void 0:r.video)||void 0===n?void 0:n.type))this.players.set(t.htmlId,new AkceloLightVideo(t.htmlId));else{const e=ConsentManager$1.getConsentType(),i=yield BotDetector$1.getIsBot();"accepted"!==e&&"notrequired"!==e||i?(logger$5.info("Skipping video call because of consent or bot, calling passback if it's available"),Passback$1.callPassback(t.adUnit)):this.players.set(t.htmlId,new AkceloVideo(t.htmlId))}})))),hooks.after("adRequest",((e,t)=>{t.ids.forEach((e=>{var t;return null===(t=this.players.get(e))||void 0===t?void 0:t.onBidsRequested()}))})),hooks.after("videoFallback",((e,t)=>{var i,r,n;logger$5.info("Video Fallback"),this.players.delete(t.htmlId),"AKCELO_LIGHT"===(null===(r=null===(i=t.adUnit.params)||void 0===i?void 0:i.video)||void 0===r?void 0:r.type)&&(null===(n=t.adUnit.params.video.lightParams)||void 0===n?void 0:n.fallbackToDM)&&this.players.set(t.htmlId,new AkceloVideo(t.htmlId,!0))}))}}new Video;const logger$4=new Logger("Skin");class Skin{constructor(){this.configs=new Map,this.resetSublimeSkin=()=>{var e;"function"==typeof(null===(e=null===window||void 0===window?void 0:window.sublime)||void 0===e?void 0:e.cleanUp)&&window.sublime.cleanUp()},logger$4.info("Module initialization"),window.slmpbjs=window.slmpbjs||{},window.slmpbjs.que=window.slmpbjs.que||[],hooks.after("addAdUnit",((e,t)=>{"skin"===t.adUnit.type&&(logger$4.debug("Creating skin renderer",t.htmlId),this.configs.set(t.htmlId,this.getSkinParams(t.adUnit)))})),hooks.before("adRequest",(e=>{e.ids.forEach((e=>{this.configs.has(e)&&onRenderAdUnitHbOrAdx(e,(t=>{if(this.canDecorateAdUnitToSkin(e)&&this.configs.has(e)&&null!==t){const i=this.configs.get(e);this.decorateAdUnitToSkin(e,t,null==i?void 0:i.position),"function"==typeof(null==i?void 0:i.renderCallback)&&(null==i||i.renderCallback.call(null,t,[1e3,780]))}}))}))}))}getSkinParams(e){var t,i;const r={position:"fixed",renderCallback:()=>{console.warn("[Akcelo] Skin renderCallback is not defined")}};return(null===(t=e.params)||void 0===t?void 0:t.skin)?Object.assign(Object.assign({},r),null===(i=e.params)||void 0===i?void 0:i.skin):r}canDecorateAdUnitToSkin(e,t=document){const i=t.querySelector(`#${e}`),r=t.querySelector(`#${e}>div`),n=t.querySelector(`#${e} iframe`);return null!==i&&null!==r&&null!==n}decorateAdUnitToSkin(e,t,i="fixed",r=document){const n=r.querySelector(`#${e}`),a=r.querySelector(`#${e}>div`),o=r.querySelector(`#${e} iframe`);return this.resetSublimeSkin(),!!(o&&n&&a)&&(a.style.display="inline-block",a.style.width=`${t[0]}px`,a.style.height=`${t[1]}px`,a.style.position="relative",n.style.position=i,n.style.overflow="visible",n.style.height=`${t[1]}px`,n.style.width=`${t[0]}px`,n.style.left="50%",n.style.transform="translate(-50%, 0)",o.style.position="absolute",o.style.left="0",o.style.width=`${t[0]}px`,o.style.height=`${t[1]}px`,!0)}}new Skin;class AdsLogState{constructor(e=[]){this.storeAuctions=new Map,this.storeAuctionsDone=new Set,this.storeBids=new Map,this.mappingAdUnitIdAuctionIds=new Map,this.mappingAuctionIdBids=new Map,this.mappingSlmadsIdByAdUnitCode=new Map,e.forEach((e=>{void 0!==e.slmadsId&&void 0!==e.id&&this.mappingSlmadsIdByAdUnitCode.set(e.id,e.slmadsId)}))}setAuction(e){var t,i;this.storeAuctions.set(e.auctionId,e);let r=this.mappingAdUnitIdAuctionIds.get(null===(t=e.adUnit)||void 0===t?void 0:t.id);void 0===r&&(r=[]),void 0===r.find((t=>t===e.auctionId))&&(r.push(e.auctionId),this.mappingAdUnitIdAuctionIds.set(null===(i=e.adUnit)||void 0===i?void 0:i.id,r))}setBid(e){this.storeBids.set(e.bidId,e);const t=this.storeAuctions.get(e.auctionId);if(!t)throw new Error(`auction not found : auctionId=${e.auctionId}`);let i=this.mappingAuctionIdBids.get(t.auctionId);void 0===i&&(i=[]),void 0===i.find((t=>t===e.bidId))&&i.push(e.bidId),this.mappingAuctionIdBids.set(t.auctionId,i)}getAuction(e){const t=this.storeAuctions.get(e);if(void 0===t)throw new Error(`auction not found : auctionId=${e}`);return t}getBid(e){const t=this.storeBids.get(e);if(!t)throw new Error(`bid not found : bidId=${e}`);return t}updateStatusAuctionDone(e){const t=this.getAuction(e);this.storeAuctionsDone.add(t.auctionId)}findAuctionsByAdUnitId(e){const t=[];if(this.mappingAdUnitIdAuctionIds.has(e)){const i=this.mappingAdUnitIdAuctionIds.get(e);null==i||i.forEach((e=>{const i=this.getAuction(e);t.push(i)}))}return t}findBidsByAuctionId(e){return this.mappingAuctionIdBids.has(e)?this.mappingAuctionIdBids.get(e).map((e=>this.getBid(e))):[]}isAuctionNew(e){return!this.storeAuctions.has(e)}isAuctionDone(e){return this.storeAuctions.has(e)&&this.storeAuctionsDone.has(e)}isAuctionRunning(e){return this.storeAuctions.has(e)&&!this.storeAuctionsDone.has(e)}}var __awaiter=globalThis&&globalThis.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function s(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}d((r=r.apply(e,t||[])).next())}))};const logger$3=new Logger("AdsLog Analytics"),SERVER_ADAPTER_CODE="akcelo-ss";class AdsLogAnalytics{constructor(){this.siteId=0,this.consentType="unknown",this.bidIdByAdUnitId=new Map,this.adUnitIdByAdUnitPath=new Map,this.auctionsLogger=new LogSender("https://logs2.sportslocalmedia.com/auctions"),this.impressionsLogger=new LogSender("https://logs2.sportslocalmedia.com/impressions"),this.bidderCpmAdjustment=getBidCpmAdjustment$1(),Math.random()<.5?logger$3.info("Module initialization skipped (Sampling)"):hooks.after("coreInit",(()=>__awaiter(this,void 0,void 0,(function*(){var e;void 0!==(null===(e=Config.config.params)||void 0===e?void 0:e.siteId)&&(this.siteId=Config.config.params.siteId),(yield isAdBlockDetected())?logger$3.info("Module initialization skipped (AdBlock detected)"):(logger$3.info("Module initialization"),this.consentType=ConsentManager$1.getConsentType(),window.slmadshb.que.push((()=>{this.state=new AdsLogState(Array.from(Config.adUnits.values())),this.initEventListeners()})))}))))}formatAuction(e){var t,i,r;const n=null===(t=this.state)||void 0===t?void 0:t.findBidsByAuctionId(e);if(0===n.length)return!1;const a=null===(i=this.state)||void 0===i?void 0:i.getAuction(e);if(!a)return!1;const o={abtest:(null===(r=window.slmadshb.abtest)||void 0===r?void 0:r.versionName)||void 0,device:isMobile()?"mobile":"desktop",slmadsId:a.adUnit.slmadsId,bidRequests:[],consent:this.consentType,siteId:this.siteId,sizes:a.sizes,refresh:a.refresh,refreshCount:a.refreshCount,floor:a.floor,floorVersion:a.floorVersion,path:window.location.pathname};return n.forEach((e=>{var t;null===(t=o.bidRequests)||void 0===t||t.push({bidderCode:e.bidderCode,state:e.state,cpm:e.state===ANALYTICS_STATE_TYPES.BID_RESPONSE||ANALYTICS_STATE_TYPES.BID_REJECTED?e.cpm:void 0,size:e.size,floor:e.floor,floorVersion:e.floorVersion})})),o}formatImpression(e,t,i,r,n){var a,o,s,d;let l;(null===(a=window.slmadshb.abtest)||void 0===a?void 0:a.versionName)&&(l=window.slmadshb.abtest.versionName);const c=null===(o=this.state)||void 0===o?void 0:o.findAuctionsByAdUnitId((null===(s=e.adUnit)||void 0===s?void 0:s.id)||"");if(void 0===c||0===c.length)return logger$3.warn(`auctions not found, adUnitId=${null===(d=e.adUnit)||void 0===d?void 0:d.id}`),!1;let p=0;return t.cpm&&(p=parseFloat(t.cpm.toString())),{abtest:l,bidderCode:t.bidderCode,consent:r,cpm:p,device:isMobile()?"mobile":"desktop",eventType:n||"impression",floor:e.floor,floorVersion:e.floorVersion,mediaType:t.mediaType,refresh:c.length>1,refreshCount:Math.max(0,c.length-1),siteId:i,size:t.size,slmadsId:c[0].adUnit.slmadsId,path:window.location.pathname}}bidTimeout(e){var t,i;const r=null===(t=this.state)||void 0===t?void 0:t.getBid(e);r&&(null===(i=this.state)||void 0===i?void 0:i.isAuctionRunning(r.auctionId))&&(r.state=ANALYTICS_STATE_TYPES.TIMEOUT,this.state.setBid(r))}auctionTimeout(e){var t;if(null===(t=this.state)||void 0===t?void 0:t.isAuctionRunning(e)){const t=this.state.findBidsByAuctionId(e);t.length>0&&t.forEach((e=>{e.state===ANALYTICS_STATE_TYPES.RUNNING&&this.bidTimeout(e.bidId||"")})),this.state.updateStatusAuctionDone(e)}else logger$3.error("Cannot set auction as timeout because the auction is not running")}auctionDone(e,t=null){var i;if(logger$3.info("auctionDone",e),null===(i=this.state)||void 0===i?void 0:i.isAuctionRunning(e)){const i=()=>{var t,i,r;const n=null===(t=this.state)||void 0===t?void 0:t.getAuction(e);n&&!(null===(i=this.state)||void 0===i?void 0:i.isAuctionDone(n.auctionId))?(this.auctionTimeout(e),null===(r=this.state)||void 0===r||r.updateStatusAuctionDone(e),this.auctionsLogger.batchThenSend(this.formatAuction(e)),logger$3.info("Logging auction",e)):logger$3.warn("Auction already done",e)};"number"==typeof t?setTimeout(i,t):i()}else logger$3.warn("Auction is not running")}impression(e,t,i){var r,n;const a=null===(r=this.state)||void 0===r?void 0:r.getBid(e);if(a){this.auctionDone(a.auctionId),a.size=t,a.mediaType=i;const e=null===(n=this.state)||void 0===n?void 0:n.getAuction(a.auctionId);if(e){const t=this.formatImpression(e,a,this.siteId,this.consentType);t&&t.bidderCode!==SERVER_ADAPTER_CODE&&(this.impressionsLogger.batchThenSend(t),logger$3.info("Logging impression",a))}}else logger$3.warn("Impression was not logged",a)}getFloorFromAuction(e){var t,i,r,n;let a;logger$3.debug(`Finding floor version for auction [adunit=${e.adUnitCodes}, auction=${e}]`);for(const o of e.bidderRequests)for(const s of o.bids)if(s.getFloor){const o=_floorDataForAuction[e.auctionId];if((null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.floorProvider)&&(null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.modelVersion)&&(a=`${o.data.floorProvider}_${o.data.modelVersion}`),a)return{floor:null!==(n=null===(r=s.getFloor({currency:"EUR"}))||void 0===r?void 0:r.floor)&&void 0!==n?n:0,version:a}}return{floor:void 0,version:void 0}}onAuctionInit(e){var t;if(!(null===(t=this.state)||void 0===t?void 0:t.isAuctionNew(e.auctionId)))return void logger$3.error(`Auction already running ${e.auctionId}`);if(0===e.adUnits.length)return void logger$3.error("Auction without adunit");const i=this.getFloorFromAuction(e);e.adUnitCodes.forEach((t=>{e.adUnits.forEach((r=>{var n,a;if(r.code===t){const o=null===(n=this.state)||void 0===n?void 0:n.findAuctionsByAdUnitId(t).filter((t=>t.prebidAuctionId!==e.auctionId));null===(a=this.state)||void 0===a||a.setAuction({auctionId:e.auctionId+t,prebidAuctionId:e.auctionId,adUnit:{code:r.id,id:r.code,slmadsId:r.slmadsId},sizes:[...getStringsFromAdUnitSizes(r.sizes)],refresh:void 0!==o&&o.length>0,refreshCount:void 0!==o?o.length:0,floor:i.floor,floorVersion:i.version})}}))}))}onBidRequest(e){e.bids.forEach((t=>{var i,r;const n=new Set;let a;Object.keys(t.mediaTypes).forEach((e=>{const i=t.mediaTypes[e].sizes;i&&[...getStringsFromAdUnitSizes(i,e)].forEach(n.add,n)})),"function"==typeof t.getFloor&&(a=(null===(i=t.getFloor({currency:"EUR"}))||void 0===i?void 0:i.floor)||void 0,a&&-1!==Object.keys(this.bidderCpmAdjustment).indexOf(t.bidder)&&(a=Math.round(this.bidderCpmAdjustment[t.bidder].bidCpmAdjustment(a))));const o={auctionId:e.auctionId+t.adUnitCode,bidId:t.bidId,bidderCode:t.bidder,size:[...n],floor:a,floorVersion:t.floorData&&t.floorData.floorProvider&&t.floorData.modelVersion?`${t.floorData.floorProvider}_${t.floorData.modelVersion}`:void 0};(null===(r=this.state)||void 0===r?void 0:r.isAuctionRunning(o.auctionId||""))&&(o.state=ANALYTICS_STATE_TYPES.RUNNING,this.state.setBid(o))}))}onBidResponse(e){var t,i,r,n,a,o;this.bidIdByAdUnitId.set(e.adId,e.requestId);const s=null===(t=this.state)||void 0===t?void 0:t.getBid(e.requestId);s&&(null===(i=this.state)||void 0===i?void 0:i.isAuctionRunning(s.auctionId))&&(s.state=e.status===ANALYTICS_STATE_TYPES.BID_REJECTED?ANALYTICS_STATE_TYPES.BID_REJECTED:ANALYTICS_STATE_TYPES.BID_RESPONSE,s.cpm=e.status===ANALYTICS_STATE_TYPES.BID_REJECTED&&(null===(r=e.floorData)||void 0===r?void 0:r.cpmAfterAdjustments)||e.cpm,s.size=getStringsFromAdUnitSizes(e.size,e.mediaType),s.floor=(null===(n=e.floorData)||void 0===n?void 0:n.floorRuleValue)||void 0,this.state.setBid(s)),s&&(null===(a=this.state)||void 0===a?void 0:a.isAuctionDone(e.auctionId))&&(s.state===ANALYTICS_STATE_TYPES.TIMEOUT?(s.cpm=e.cpm,s.size=getStringsFromAdUnitSizes(e.size,e.mediaType),s.floor=(null===(o=e.floorData)||void 0===o?void 0:o.floorRuleValue)||void 0,this.state.setBid(s)):(logger$3.warn(`Expected bid state to be equal to ${ANALYTICS_STATE_TYPES.TIMEOUT}`,e),logger$3.error("Cannot store bid response because the bid was not considered timeout")))}onBidTimeout(e){e.length>0&&e.forEach((e=>{this.bidTimeout(e.bidId)}))}onNoBid(e){var t,i,r;const n=null===(t=this.state)||void 0===t?void 0:t.getBid(e.bidId);if(!n)return;const a=null===(i=this.state)||void 0===i?void 0:i.getAuction(n.auctionId);if(a&&(null===(r=this.state)||void 0===r?void 0:r.isAuctionRunning(a.auctionId))){if(n.state===ANALYTICS_STATE_TYPES.BID_RESPONSE)return void logger$3.warn("Cannot store no bid because bid is already bid response");n.state===ANALYTICS_STATE_TYPES.RUNNING&&(n.state=ANALYTICS_STATE_TYPES.NO_BID,this.state.setBid(n))}}onAuctionEnd(e){e.adUnitCodes.forEach((t=>{this.auctionDone(e.auctionId+t,400)}))}onBidWon(e){if(this.bidIdByAdUnitId.has(e.adId)){const t=this.bidIdByAdUnitId.get(e.adId),i=getStringsFromAdUnitSizes(e.size,e.mediaType);this.impression(t||"",i,e.mediaType)}}onImpressionViewable(e){var t;const i=null===(t=this.state)||void 0===t?void 0:t.findAuctionsByAdUnitId(e.adUnitCode);if(void 0===i||0===i.length)return;const r=i[i.length-1],n={auctionId:"",bidId:"",size:"",bidderCode:""};e.bid?(n.bidderCode=e.bid.bidderCode,n.cpm=parseFloat((e.bid.cpm||0).toString()),n.size=Array.isArray(e.bid.size)?e.bid.size[0]:e.bid.size,n.floor=e.bid.floor,n.floorVersion=e.bid.floorVersion,n.mediaType=e.bid.mediaType):e.isGoogle&&(n.bidderCode=e.google.bidderCode,n.floor=e.google.floor);const a=this.formatImpression(r,n,this.siteId,this.consentType,"viewable_impression");a&&a.bidderCode&&a.bidderCode!==SERVER_ADAPTER_CODE?this.impressionsLogger.batchThenSend(a):logger$3.error("Can't send viewable impression event, couldn't find a matching bidderCode")}onVideoImpression(e){var t,i;const r=null===(t=this.state)||void 0===t?void 0:t.findAuctionsByAdUnitId(null!==(i=e.adUnit)&&void 0!==i?i:"");if(r&&r.length>0){const t=r[r.length-1],i=this.formatImpression(t,e,this.siteId,this.consentType);i&&i.bidderCode!==SERVER_ADAPTER_CODE&&this.impressionsLogger.batchThenSend(i)}}onEvent(e,t){switch(e){case ANALYTICS_PREBID_EVENTS.AUCTION_INIT:this.onAuctionInit(t);break;case ANALYTICS_PREBID_EVENTS.BID_REQUESTED:this.onBidRequest(t);break;case ANALYTICS_PREBID_EVENTS.BID_RESPONSE:this.onBidResponse(t);break;case ANALYTICS_PREBID_EVENTS.BID_TIMEOUT:this.onBidTimeout(t);break;case ANALYTICS_PREBID_EVENTS.NO_BID:this.onNoBid(t);break;case ANALYTICS_PREBID_EVENTS.AUCTION_END:this.onAuctionEnd(t);break;case ANALYTICS_PREBID_EVENTS.BID_WON:this.onBidWon(t);break;case"impressionViewable":this.onImpressionViewable(t);break;case"videoImpression":this.onVideoImpression(t)}}initEventListeners(){document.addEventListener("impressionViewable",(e=>{try{this.onEvent("impressionViewable",e.detail)}catch(t){logger$3.error(t)}})),document.addEventListener("videoImpression",(e=>{try{this.onEvent("videoImpression",e.detail)}catch(t){logger$3.error(t)}})),window.slmpbjs=window.slmpbjs||{},window.slmpbjs.que=window.slmpbjs.que||[],window.slmpbjs.que.push((()=>{window.slmpbjs.getEvents().forEach((e=>{try{this.onEvent(e.eventType,e.args)}catch(t){logger$3.error(t)}})),Object.values(ANALYTICS_PREBID_EVENTS).forEach((e=>{window.slmpbjs.onEvent(e,(t=>{try{this.onEvent(e,t)}catch(i){logger$3.error(i)}}))}))})),window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{var t;let i,r;const n=e.slot.getTargeting("slm_floor");if(n.length>0&&(r=parseFloat(n[0])),!e.isEmpty){const n=getBidderFromSlotResponseInfos(e.slot.getResponseInformation()),a=e.slot.getSlotElementId(),o=null===(t=this.state)||void 0===t?void 0:t.findAuctionsByAdUnitId(a);if(n&&o&&o.length>0&&(i={bidderCode:n,adUnit:e.slot.getAdUnitPath(),size:"",floor:r,auctionId:"",bidId:""},i.bidderCode&&-1===["prebid","unknown"].indexOf(i.bidderCode)&&o&&o.length>0)){const e=o[o.length-1],t=this.formatImpression(e,i,this.siteId,this.consentType);t&&t.bidderCode&&t.bidderCode!==SERVER_ADAPTER_CODE&&(logger$3.info("Logging impression",i),this.impressionsLogger.batchThenSend(t))}}}))}))}}new AdsLogAnalytics;const logger$2=new Logger("LazyLoad");class LazyLoad{constructor(){this.margin=800,logger$2.info("Mode initialization"),hooks.before("loadConfig",(e=>{var t,i,r,n,a,o,s,d;isMobile()?(null===(i=null===(t=e.params)||void 0===t?void 0:t.mobileParams)||void 0===i?void 0:i.lazyLoadMargin)&&(this.margin=null===(n=null===(r=e.params)||void 0===r?void 0:r.mobileParams)||void 0===n?void 0:n.lazyLoadMargin):(null===(o=null===(a=e.params)||void 0===a?void 0:a.desktopParams)||void 0===o?void 0:o.lazyLoadMargin)&&(this.margin=null===(d=null===(s=e.params)||void 0===s?void 0:s.desktopParams)||void 0===d?void 0:d.lazyLoadMargin),this.initializeObserver()})),hooks.after("addAdUnit",((e,t)=>{var i,r,n;if(null===(r=null===(i=t.adUnit.params)||void 0===i?void 0:i.lazyLoad)||void 0===r?void 0:r.enabled){const e=document.getElementById(t.htmlId);e?null===(n=this.observer)||void 0===n||n.observe(e):logger$2.error("Couldn't observe adUnit, htmlId wasn't found in DOM",t.htmlId)}}))}initializeObserver(){this.observer||(logger$2.info("Observer initialization"),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{var t;if(e.isIntersecting){logger$2.info("AdUnit is intersecting, allowing to display it",e.target.id),null===(t=this.observer)||void 0===t||t.unobserve(e.target);const i=StateManager.state.adUnits[e.target.id];i&&(i.isReadyToRender=!0,i.isReadyToRequest&&auctionManager.addAdUnitReadyToRequest(e.target.id))}}))}),{rootMargin:`${this.margin}px 0px ${this.margin}px 0px`,threshold:0}))}}new LazyLoad;const MODULE$1="PAAPI",submodules=[],USED=new WeakSet;function registerSubmodule(e){submodules.push(e),e.init&&e.init({getPAAPIConfig:getPAAPIConfig$1})}function auctionConfigs(){const e=new WeakMap;return function(t,i={}){const r=auctionManager$1.index.getAuction({auctionId:t});if(null!=r)return e.has(r)||e.set(r,i),e.get(r)}}module("paapi",registerSubmodule);const pendingForAuction=auctionConfigs(),configsForAuction=auctionConfigs();let latestAuctionForAdUnit={},moduleConfig={};function init(e,t){"paapi"!==t&&logWarn(`'${t}' configuration options will be renamed to 'paapi'; consider using setConfig({paapi: [...]}) instead`),e&&!0===e.enabled?(moduleConfig=e,logInfo(`${MODULE$1} enabled (browser ${isFledgeSupported()?"supports":"does NOT support"} runAdAuction)`,e)):(moduleConfig={},logInfo(`${MODULE$1} disabled`,e))}function getSlotSignals(e=[],t=[]){let i,r;if(e.length>0){const t=e.reduce(maximum(currencyCompare((e=>[e.cpm,e.currency]))));i=t.cpm,r=t.currency}else{const e=t.map((e=>"function"==typeof e.getFloor&&e.getFloor())).filter((e=>e)),n=e.length&&e.reduce(minimum(currencyCompare((e=>[e.floor,e.currency]))));i=null==n?void 0:n.floor,r=null==n?void 0:n.currency}const n={};return i&&(dset(n,"auctionSignals.prebid.bidfloor",i),r&&dset(n,"auctionSignals.prebid.bidfloorcur",r)),n}function onAuctionEnd({auctionId:e,bidsReceived:t,bidderRequests:i,adUnitCodes:r,adUnits:n}){const a=Object.fromEntries((null==n?void 0:n.map((e=>[e.code,e])))||[]),o=null==i?void 0:i.flatMap((e=>e.bids)),s={};(r||[]).forEach((e=>{s[e]=null,!latestAuctionForAdUnit.hasOwnProperty(e)&&(latestAuctionForAdUnit[e]=null)})),Object.entries(pendingForAuction(e)||{}).forEach((([i,r])=>{var n,d,l,c,p;const u=e=>e.adUnitCode===i,m=getSlotSignals(null==t?void 0:t.filter(u),null==o?void 0:o.filter(u));s[i]={...m,componentAuctions:r.map((e=>mergeDeep({},m,e)))};const g=null==(p=null==(c=parseSizesInput(null==(l=null==(d=null==(n=a[i])?void 0:n.mediaTypes)?void 0:d.banner)?void 0:l.sizes))?void 0:c[0])?void 0:p.split("x");g&&(s[i].requestedSize={width:g[0],height:g[1]}),latestAuctionForAdUnit[i]=e})),configsForAuction(e,s),submodules.forEach((t=>{var i;return null==(i=t.onAuctionConfig)?void 0:i.call(t,e,s,(e=>null!=s[e]&&USED.add(s[e])))}))}function setFPDSignals(e,t){e.auctionSignals=mergeDeep({},{prebid:t},e.auctionSignals)}function addComponentAuctionHook(e,t,i){if(getFledgeConfig().enabled){const{adUnitCode:e,auctionId:r,ortb2:n,ortb2Imp:a}=t,o=pendingForAuction(r);null!=o?(setFPDSignals(i,{ortb2:n,ortb2Imp:a}),!o.hasOwnProperty(e)&&(o[e]=[]),o[e].push(i)):logWarn(MODULE$1,`Received component auction config for auction that has closed (auction '${r}', adUnit '${e}')`,i)}e(t,i)}function getPAAPIConfig$1({auctionId:e,adUnitCode:t}={},i=!1){const r={},n=e&&configsForAuction(e);return Object.keys((null!=e?n:latestAuctionForAdUnit)??[]).forEach((a=>{const o=latestAuctionForAdUnit[a],s=n??(o&&configsForAuction(o));if((t??a)===a){let t;(null==n?void 0:n.hasOwnProperty(a))?t=n[a]:null==e&&(null==s?void 0:s.hasOwnProperty(a))&&(t=s[a]),t&&!USED.has(t)?(r[a]=t,USED.add(t)):i&&(r[a]=null)}})),r}function isFledgeSupported(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function getFledgeConfig(){var e,t;const i=config.getCurrentBidder(),r=moduleConfig.enabled&&(null==i||!(null==(e=moduleConfig.bidders)?void 0:e.length)||(null==(t=moduleConfig.bidders)?void 0:t.includes(i)));return{enabled:config.getConfig("fledgeEnabled")??r,ae:config.getConfig("defaultForSlots")??(r?moduleConfig.defaultForSlots:void 0)}}function markForFledge(e,t){isFledgeSupported()&&t.forEach((e=>{config.runWithBidder(e.bidderCode,(()=>{const{enabled:t,ae:i}=getFledgeConfig();Object.assign(e,{fledgeEnabled:t}),e.bids.forEach((e=>{var t,r;dset(e,"ortb2Imp.ext.ae",(null==(r=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:r.ae)??i)}))}))})),e(t)}function setImpExtAe(e,t,i){var r,n;(null==(r=e.ext)?void 0:r.ae)&&!i.bidderRequest.fledgeEnabled&&(null==(n=e.ext)||delete n.ae)}function parseExtPrebidFledge(e,t,i){var r,n,a;((null==(a=null==(n=null==(r=t.ext)?void 0:r.prebid)?void 0:n.fledge)?void 0:a.auctionconfigs)||[]).forEach((e=>{var t,r;const n=i.impContext[e.impid];(null==(r=null==(t=null==n?void 0:n.imp)?void 0:t.ext)?void 0:r.ae)?(n.fledgeConfigs=n.fledgeConfigs||[],n.fledgeConfigs.push(e)):logWarn("Received fledge auction configuration for an impression that was not in the request or did not ask for it",e,null==n?void 0:n.imp)}))}function setResponseFledgeConfigs(e,t,i){const r=Object.values(i.impContext).flatMap((e=>(e.fledgeConfigs||[]).map((t=>({bidId:e.bidRequest.bidId,config:t.config})))));r.length>0&&(e.fledgeAuctionConfigs=r)}["paapi","fledgeForGpt"].forEach((e=>{config.getConfig(e,(t=>{init(t[e],e)}))})),getHook("addComponentAuction").before(addComponentAuctionHook),getHook("makeBidRequests").after(markForFledge),on(EVENTS$1.AUCTION_END,onAuctionEnd),getGlobal().getPAAPIConfig=e=>getPAAPIConfig$1(e),registerOrtbProcessor({type:IMP,name:"impExtAe",fn:setImpExtAe}),registerOrtbProcessor({type:RESPONSE$1,name:"extPrebidFledge",fn:parseExtPrebidFledge,dialects:[PBS]}),registerOrtbProcessor({type:RESPONSE$1,name:"fledgeAuctionConfigs",priority:-1,fn:setResponseFledgeConfigs,dialects:[PBS]});const MODULE="fledgeForGpt";let getPAAPIConfig,autoconfig=!0;function slotConfigurator(){const e={};return function(t,i,r=!0){const n=getGptSlotForAdUnitCode(t);if(n&&n.setConfig){let a=e[t]??{},o=Object.fromEntries(i.map((e=>[e.seller,e])));const s=Object.keys(o);r?(o=Object.assign(a,o),a=Object.fromEntries(s.map((e=>[e,null])))):s.forEach((e=>{a[e]=null})),Object.keys(a).length?e[t]=a:delete e[t];const d=Object.entries(o).map((([e,t])=>({configKey:e,auctionConfig:t})));d.length>0&&(n.setConfig({componentAuction:d}),logInfo(MODULE,`register component auction configs for: ${t}: ${n.getAdUnitPath()}`,i))}else i.length>0&&logWarn(MODULE,`unable to register component auction config for ${t}`,i)}}Object.entries({[MODULE]:MODULE,paapi:"paapi.gpt"}).forEach((([e,t])=>{const i=`${t}.autoconfig`;config.getConfig(e,(e=>{autoconfig=dlv(e,i,!0)}))}));const setComponentAuction=slotConfigurator();function onAuctionConfigFactory(e=setComponentAuction){return function(t,i,r){autoconfig&&Object.entries(i).forEach((([t,i])=>{e(t,(null==i?void 0:i.componentAuctions)??[]),r(t)}))}}function setPAAPIConfigFactory(e=(e=>getPAAPIConfig(e,!0)),t=setComponentAuction){return function(i={}){let r=!1;Object.entries(e(i)||{}).forEach((([e,i])=>{null!=i&&(r=!0),t(e,(null==i?void 0:i.componentAuctions)||[],!0)})),r||logInfo(`${MODULE}: No component auctions available to set`)}}getGlobal().setPAAPIConfigForGPT=setPAAPIConfigFactory(),submodule("paapi",{name:"gpt",onAuctionConfig:onAuctionConfigFactory(),init(e){getPAAPIConfig=e.getPAAPIConfig}});const logger$1=new Logger("Missena");class Missena{constructor(){hooks.before("loadConfig",(e=>{logger$1.info("Set up aliases and bid adjustments"),window.slmpbjs=window.slmpbjs||{que:[]},window.slmpbjs.que.push((()=>{window.slmpbjs.aliasBidder("criteo","missenanative")})),e.params=e.params||{},e.params.prebidBidAdjustments=e.params.prebidBidAdjustments||[],e.params.prebidBidAdjustments.push({bidder:"missena",adjustment:e=>.6*e},{bidder:"missenanative",adjustment:e=>.6*e})})),hooks.before("addAdUnit",(e=>{var t,i,r;!0===(null===(r=null===(i=null===(t=e.adUnit.params)||void 0===t?void 0:t.partners)||void 0===i?void 0:i.missena)||void 0===r?void 0:r.enabled)&&this.configureAdUnit(e.adUnit)}))}configureAdUnit(e){logger$1.info("Configuring ad unit",e);const t=e.params.partners.missena;e.bids=e.bids||[],e.mediaTypes=e.mediaTypes||{},t.bannerApiKey&&(e.bids.push({bidder:"missena",params:{apiKey:t.bannerApiKey}}),e.mediaTypes.banner={sizes:[[300,250],[300,600]]}),t.nativeApiKey&&(e.bids.push({bidder:"missenanative",params:{networkId:10593,zoneId:1628946,publisherSubId:`${t.nativeApiKey}:criteo-prebid-native`,nativeCallback:e=>{const i=document.createElement("script");i.src=`https://ad.missena.io/renderer.js?t=${t.nativeApiKey}`,document.getElementsByTagName("head")[0].append(i),setTimeout((()=>{window.renderMissenaNativeAd(e,window.slmpbjs,10593)}),1e3)}}}),e.mediaTypes.native={title:{required:!0,len:50},sponsoredBy:{required:!0},image:{required:!0,sendId:!0},icon:{required:!1,sendId:!0},price:{required:!1},privacyLink:{required:!1,sendId:!0},clickUrl:{required:!1,sendId:!0}})}}new Missena;const mosaikTemplate='<style>\n    .akcelo-mosaik {\n        position: fixed;\n    <% if (position?.includes("left")) {%> left: 0;\n    <% } else {%>\n        right: 0;\n    <% } %><% if (position?.includes("top")) {%> top: <%= yOffset %>px;\n    <% } else {%> bottom: <%= yOffset %>px;\n    <% } %>\n        width: 300px;\n        height: 250px;\n        display: flex;\n        flex-direction: column;\n        margin-right: 10px;\n        margin-bottom: 10px;\n        z-index: 10000;\n    }\n\n    .akcelo-mosaik-row {\n        display: flex;\n        position: relative;\n        flex-direction: row;\n        width: 100%;\n        height: 50%;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n    }\n\n    .akcelo-mosaik-cell {\n        display: flex;\n        position: absolute !important;\n        top: 0;\n        transform: scale(0.5);\n        transform-origin: top left;\n        width: 300px;\n        max-width: 300px !important;\n        height: 250px !important;\n        max-height: 250px !important;\n        /*\n        background: url(\'https://ads.sportslocalmedia.com/akcelo_icon.svg\') no-repeat center;\n        background-size: cover;\n        */\n        background: rgba(0, 0, 0, 0.7);\n    }\n\n    .akcelo-mosaik-cell:nth-child(1) {\n        left: 0;\n    }\n\n    .akcelo-mosaik-cell:nth-child(2) {\n        left: 50%;\n    }\n\n    .akcelo-mosaik-close {\n        position: absolute;\n        top: -30px;\n        right: 0;\n        width: 70px;\n        height: 70px;\n        display: flex;\n        align-items: start;\n        justify-content: end;\n        cursor: pointer;\n    }\n</style>\n<div class="akcelo-mosaik">\n    <div class="akcelo-mosaik-row">\n        <div class="akcelo-mosaik-cell" id="<%= adUnitId %>_1"></div>\n        <div class="akcelo-mosaik-cell" id="<%= adUnitId %>_2"></div>\n    </div>\n    <div class="akcelo-mosaik-row">\n        <div class="akcelo-mosaik-cell" id="<%= adUnitId %>_3"></div>\n        <div class="akcelo-mosaik-cell" id="<%= adUnitId %>_4"></div>\n    </div>\n    <div class="akcelo-mosaik-close">\n        <svg xmlns="http://www.w3.org/2000/svg"\n             xml:space="preserve" width="20" height="20" version="1.1"\n             viewBox="0 0 20 20"\n             style="cursor:pointer;position:relative;display:inline;width:20px;margin-bottom:0;">\n            <g transform="matrix(0.0569703,0,0,0.0569703,-4.6066465,-4.6398328)">\n                <circle style="fill:#373737;fill-opacity:1;stroke-width:18.90076828"\n                        cx="258.31042" cy="257.79587" r="161.54251"/>\n                <path style="fill:#fffffd;fill-opacity:1;stroke-width:0.6150254"\n                      d="m 169.41211,156.49219 c -10.496,0.0497 -17.51765,14.20672 -9.88477,22.04101 7.85367,8.42001 16.59855,15.99758 24.44716,24.46542 18.54871,18.54359 37.07296,37.11162 55.62902,55.64786 -27.35069,28.13628 -56.58081,54.64717 -82.52735,84.03321 -4.80727,10.6808 9.79299,23.17713 19.35156,15.85937 11.18603,-9.25489 20.38437,-20.64133 31.12591,-30.40129 16.93264,-16.93265 33.86528,-33.86529 50.79792,-50.79793 28.1346,27.34154 54.64725,56.59829 84.05469,82.53907 10.67333,4.77287 23.14434,-9.80942 15.8418,-19.35547 -9.25182,-11.19086 -20.6499,-20.38132 -30.40521,-31.12982 -16.93264,-16.93264 -33.86528,-33.86528 -50.79792,-50.79792 27.30512,-27.92294 56.11138,-54.51613 82.27539,-83.52148 5.21946,-10.52229 -8.42434,-23.47032 -18.50586,-16.69531 -7.93114,4.84596 -12.68507,13.31658 -19.97314,18.98074 -20.84814,20.84691 -41.69629,41.69383 -62.54443,62.54074 -28.17478,-27.33485 -54.61388,-56.67303 -84.11719,-82.51562 -1.50233,-0.63096 -3.13851,-0.93953 -4.76758,-0.89258 z"/>\n            </g>\n        </svg>\n    </div>\n</div>\n',logger=new Logger("Mosaik");class Mosaik{constructor(){this.container=null,this.containerId=null,hooks.before("addAdUnit",(e=>{var t,i,r,n;if("mosaik"===e.adUnit.type){e.adUnit.bids=null===(t=e.adUnit.bids)||void 0===t?void 0:t.filter((e=>"missena"!==e.bidder)),dset(e.adUnit,"params.partners.adExchange.enabled",!1),dset(e.adUnit,"params.gamMode","forbidden");for(let t=1;t<=4;t+=1){const a=collectionClone(e.adUnit);a.id=`${e.adUnit.id}_${t}`,a.type="bannervideo",null===(n=null===(r=null===(i=window.slmadshb)||void 0===i?void 0:i.setup)||void 0===r?void 0:r.adUnits)||void 0===n||n.push(a),Config.adUnits.set(a.id,a)}e.adUnit.bids=void 0,this.render(e.adUnit)}}))}render(e){var t,i,r,n,a,o;if(this.containerId=e.id,this.container=document.getElementById(e.id),!this.container)throw new Error("Mosaik container not found");this.container.innerHTML=ejs.render(mosaikTemplate,{adUnitId:this.containerId,position:null!==(r=null===(i=null===(t=e.params)||void 0===t?void 0:t.sticky)||void 0===i?void 0:i.position)&&void 0!==r?r:"bottom-right",yOffset:null!==(o=null===(a=null===(n=e.params)||void 0===n?void 0:n.sticky)||void 0===a?void 0:a.yOffset)&&void 0!==o?o:"0"});const s=this.container.querySelector(".akcelo-mosaik-close");if(s){s.onclick=()=>{this.destroy()};for(let e=1;e<=4;e+=1)window.slmadshb.que.push((()=>{window.slmadshb.display(`${this.containerId}_${e}`)}))}else this.destroy()}destroy(){if(logger.info("Destroying Mosaik container"),this.container){const e=this.container.parentElement;(null==e?void 0:e.classList.contains("akcelo-wrapper"))?e.remove():this.container.remove()}for(let e=1;e<=4;e+=1)removeAdUnit(`${this.containerId}_${e}`).then((()=>{logger.debug(`Removed Mosaik cell ${this.containerId}_${e}`)}))}}new Mosaik;const getGamVideoVastRequestFromBid=(e,t,i,r)=>{const n=Config.getAdUnitsConfigById([e]);if(0===n.length||void 0===t)return!1;const a=n[0],o={adUnit:a,params:{iu:t,output:"vast",cust_params:{slmadsId:a.slmadsId}}};return r&&r.amzniid&&r.amznp&&r.amznbid&&(o.params.cust_params.amzniid=r.amzniid,o.params.cust_params.amznp=r.amznp,o.params.cust_params.amznbid=r.amznbid),getReferrer()&&(o.params.description_url=getReferrer()),void 0!==i&&(o.bid=i,i.adId&&window.slmpbjs.markWinningBidAsUsed({adId:i.adId})),window.slmpbjs.adServers.dfp.buildVideoUrl(o)},_internal={ajax:ajax$1},ENDPOINT="endpoint",BUNDLE="bundle",DEFAULT_INCLUDE_EVENTS=Object.values(EVENTS$1).filter((e=>e!==EVENTS$1.AUCTION_DEBUG));let debounceDelay=100;function AnalyticsAdapter({url:e,analyticsType:t,global:i,handler:r}){const n=[];let a,o,s=!1,d=!0;const l=(()=>{let e,t=!1;const i=()=>{if(!t){t=!0;try{let e=0,t=0;for(;n.length>0;){e++;const i=n.length;if(n.shift()(),n.length>=i?t++:t=0,t>=10)return logError("Detected probable infinite loop, discarding events",n),void(n.length=0)}logMessage(`${o} analytics: processed ${e} events`)}finally{t=!1}}};return function(){null!=e&&(clearTimeout(e),e=null),0===debounceDelay?i():e=setTimeout(i,debounceDelay)}})();return Object.defineProperties({track:function({eventType:t,args:n}){this.getAdapterType()===BUNDLE&&window[i](r,t,n),this.getAdapterType()===ENDPOINT&&function({eventType:t,args:i,callback:r}){_internal.ajax(e,r,JSON.stringify({eventType:t,args:i}))}(...arguments)},enqueue:c,enableAnalytics:p,disableAnalytics:function(){Object.entries(a||{}).forEach((([e,t])=>{off(e,t)})),this.enableAnalytics=this._oldEnable?this._oldEnable:p,s=!1},getAdapterType:()=>t,getGlobal:()=>i,getHandler:()=>r,getUrl:()=>e},{enabled:{get:()=>s}});function c({eventType:e,args:t}){n.push((()=>{this.track({eventType:e,args:t})})),l()}function p(e){o=null==e?void 0:e.provider;var t=this;if(d="object"!=typeof e||"object"!=typeof e.options||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling),d){const i=(()=>{const{includeEvents:t=DEFAULT_INCLUDE_EVENTS,excludeEvents:i=[]}=e||{};return new Set(Object.values(EVENTS$1).filter((e=>t.includes(e))).filter((e=>!i.includes(e))))})();getEvents().forEach((e=>{if(!e||!i.has(e.eventType))return;const{eventType:r,args:n}=e;c.call(t,{eventType:r,args:n})})),a=Object.fromEntries(Array.from(i).map((e=>{const t=t=>this.enqueue({eventType:e,args:t});return on(e,t),[e,t]})))}else logMessage(`Analytics adapter for "${i}" disabled by sampling`);this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return logMessage(`Analytics adapter for "${i}" already enabled, unnecessary call to \`enableAnalytics\`.`)},s=!0}}const MODULE_CODE="atsAnalytics",storage=getStorageManager({moduleType:MODULE_TYPE_ANALYTICS,moduleName:MODULE_CODE}),analyticsType="endpoint",preflightUrl="https://check.analytics.rlcdn.com/check/",analyticsUrl="https://analytics.rlcdn.com";let handlerRequest=[],handlerResponse=[],atsAnalyticsAdapterVersion=3,browsersList=[{test:/googlebot/i,name:"Googlebot"},{test:/opera/i,name:"Opera"},{test:/opr\/|opios/i,name:"Opera"},{test:/SamsungBrowser/i,name:"Samsung Internet for Android"},{test:/Whale/i,name:"NAVER Whale Browser"},{test:/MZBrowser/i,name:"MZ Browser"},{test:/focus/i,name:"Focus"},{test:/swing/i,name:"Swing"},{test:/coast/i,name:"Opera Coast"},{test:/opt\/\d+(?:.?_?\d+)+/i,name:"Opera Touch"},{test:/yabrowser/i,name:"Yandex Browser"},{test:/ucbrowser/i,name:"UC Browser"},{test:/Maxthon|mxios/i,name:"Maxthon"},{test:/epiphany/i,name:"Epiphany"},{test:/puffin/i,name:"Puffin"},{test:/sleipnir/i,name:"Sleipnir"},{test:/k-meleon/i,name:"K-Meleon"},{test:/micromessenger/i,name:"WeChat"},{test:/qqbrowser/i,name:/qqbrowserlite/i.test(window.navigator.userAgent)?"QQ Browser Lite":"QQ Browser"},{test:/msie|trident/i,name:"Internet Explorer"},{test:/\sedg\//i,name:"Microsoft Edge"},{test:/edg([ea]|ios)/i,name:"Microsoft Edge"},{test:/vivaldi/i,name:"Vivaldi"},{test:/seamonkey/i,name:"SeaMonkey"},{test:/sailfish/i,name:"Sailfish"},{test:/silk/i,name:"Amazon Silk"},{test:/phantom/i,name:"PhantomJS"},{test:/slimerjs/i,name:"SlimerJS"},{test:/blackberry|\bbb\d+/i,name:"BlackBerry"},{test:/(web|hpw)[o0]s/i,name:"WebOS Browser"},{test:/bada/i,name:"Bada"},{test:/tizen/i,name:"Tizen"},{test:/qupzilla/i,name:"QupZilla"},{test:/firefox|iceweasel|fxios/i,name:"Firefox"},{test:/electron/i,name:"Electron"},{test:/MiuiBrowser/i,name:"Miui"},{test:/chromium/i,name:"Chromium"},{test:/chrome|crios|crmo/i,name:"Chrome"},{test:/GSA/i,name:"Google Search"},{test:/android/i,name:"Android Browser"},{test:/playstation 4/i,name:"PlayStation 4"},{test:/safari|applewebkit/i,name:"Safari"}],listOfSupportedBrowsers=["Safari","Chrome","Firefox","Microsoft Edge"];function bidRequestedHandler(e){let t,i="true"===storage.getCookie("_lr_env_src_ats");return t=e.bids.map((function(t){return{envelope_source:i,has_envelope:!!t.userId&&!!t.userId.idl_env,bidder:t.bidder,bid_id:t.bidId,auction_id:e.auctionId,user_browser:parseBrowser(),user_platform:navigator.platform,auction_start:new Date(e.auctionStart).toJSON(),domain:window.location.hostname,pid:atsAnalyticsAdapter.context.pid,adapter_version:atsAnalyticsAdapterVersion,bid_won:!1}})),t}function bidResponseHandler(e){return{bid_id:e.requestId,response_time_stamp:new Date(e.responseTimestamp).toJSON(),currency:e.currency,cpm:e.cpm,net_revenue:e.netRevenue}}function parseBrowser(){let e=atsAnalyticsAdapter.getUserAgent();try{let t=browsersList.filter((function(t){return t.test.test(e)})),i=t&&t.length?t[0].name:"";return listOfSupportedBrowsers.indexOf(i)>=0?i:"Unknown"}catch(t){logError("ATS Analytics - Error while checking user browser!",t)}}function sendDataToAnalytic(e){try{let t={Data:e},i=JSON.stringify(t);logInfo("ATS Analytics - tried to send analytics data!"),ajax$1(analyticsUrl,(function(){logInfo("ATS Analytics - events sent successfully!")}),i,{method:"POST",contentType:"application/json"})}catch(t){logError("ATS Analytics - request encounter an error: ",t)}}function preflightRequest(e){logInfo("ATS Analytics - preflight request!"),ajax$1(preflightUrl+atsAnalyticsAdapter.context.pid,{success:function(t){let i=JSON.parse(t);logInfo("ATS Analytics - Sampling Rate: ",i);let r=i.samplingRate;atsAnalyticsAdapter.setSamplingCookie(r);let n=Number(r);t&&r&&atsAnalyticsAdapter.shouldFireRequest(n)&&(logInfo("ATS Analytics - events to send: ",e),sendDataToAnalytic(e))},error:function(){atsAnalyticsAdapter.setSamplingCookie(0),logInfo("ATS Analytics - Sampling Rate Request Error!")}},void 0,{method:"GET",crossOrigin:!0})}let atsAnalyticsAdapter=Object.assign(AnalyticsAdapter({analyticsType:analyticsType}),{track({eventType:e,args:t}){void 0!==t&&atsAnalyticsAdapter.callHandler(e,t)}});function getAdUnitSizes(e){if(!e)return;let t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){let i=e.mediaTypes.banner.sizes;Array.isArray(i[0])?t=i:t.push(i)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t}atsAnalyticsAdapter.originEnableAnalytics=atsAnalyticsAdapter.enableAnalytics,atsAnalyticsAdapter.shouldFireRequest=function(e){if(0!==e){let e=100===Math.floor(100*Math.random()+1);return logInfo("ATS Analytics - Should Fire Request: ",e),e}return logInfo("ATS Analytics - Should Fire Request: ",!1),!1},atsAnalyticsAdapter.getUserAgent=function(){return window.navigator.userAgent},atsAnalyticsAdapter.setSamplingCookie=function(e){const t=new Date;t.setTime(t.getTime()+864e5),storage.setCookie("_lr_sampling_rate",e,t.toUTCString())},atsAnalyticsAdapter.enableAnalytics=function(e){if(!e.options.pid)return void logError("ATS Analytics - Publisher ID (pid) option is not defined. Analytics won't work");atsAnalyticsAdapter.context={events:[],pid:e.options.pid,bidWonTimeout:e.options.bidWonTimeout};let t=e.options;logInfo("ATS Analytics - adapter enabled! "),atsAnalyticsAdapter.originEnableAnalytics(t)},atsAnalyticsAdapter.callHandler=function(e,t){if(e===EVENTS$1.BID_REQUESTED?handlerRequest=handlerRequest.concat(bidRequestedHandler(t)):e===EVENTS$1.BID_RESPONSE&&handlerResponse.push(bidResponseHandler(t)),e===EVENTS$1.AUCTION_END){let e=atsAnalyticsAdapter.context.bidWonTimeout?atsAnalyticsAdapter.context.bidWonTimeout:2e3,t=[];setTimeout((()=>{let e=getGlobal().getAllWinningBids();if(logInfo("ATS Analytics - winning bids: ",e),handlerRequest.length){let r={};handlerResponse.length?(t=handlerRequest.filter((e=>handlerResponse.filter((function(t){e.bid_id===t.bid_id&&Object.assign(e,t)})))),e.length&&(t=t.filter((t=>e.filter((function(e){r.bid_id=e.requestId,r.bid_won=!0,t.bid_id===r.bid_id&&Object.assign(t,r)})))))):t=handlerRequest;try{let e=storage.getCookie("_lr_sampling_rate");e?atsAnalyticsAdapter.shouldFireRequest(parseInt(e))&&(logInfo("ATS Analytics - events to send: ",t),sendDataToAnalytic(t)):preflightRequest(t),t=[]}catch(i){logError("ATS Analytics - preflight request encounter an error: ",i)}}}),e)}},adaptermanager.registerAnalyticsAdapter({adapter:atsAnalyticsAdapter,code:MODULE_CODE,gvlid:97});const BIDDER_CODE$1="optidigital",GVL_ID=915,ENDPOINT_URL="https://pbs.optidigital.com/bidder",USER_SYNC_URL_IFRAME="https://scripts.opti-digital.com/js/presync.html?endpoint=optidigital";let CUR="USD",isSynced=!1;const spec$1={code:BIDDER_CODE$1,gvlid:GVL_ID,supportedMediaTypes:[BANNER],isBidRequestValid:function(e){let t=!1;return void 0!==e.params&&e.params.placementId&&e.params.publisherId&&(t=!0),t},buildRequests:function(e,t){var i,r,n;if(!e||0===e.length||!t||!t.bids)return[];const a=t.ortb2||{bcat:[],badv:[]},o={referrer:t.refererInfo&&t.refererInfo.page?t.refererInfo.page:"",hb_version:"8.47.0",deviceWidth:document.documentElement.clientWidth,bidderRequestId:dlv(e[0],"bidderRequestId"),publisherId:dlv(e[0],"params.publisherId"),imp:e.map((e=>buildImp(e,a))),badv:a.badv||dlv(e[0],"params.badv")||[],bcat:a.bcat||dlv(e[0],"params.bcat")||[],bapp:dlv(e[0],"params.bapp")||[]};e[0].auctionId&&(o.auctionId=e[0].auctionId),e[0].params.pageTemplate&&""!==e[0].params.pageTemplate&&(o.pageTemplate=e[0].params.pageTemplate),e[0].schain&&(o.schain=e[0].schain);const s=dlv(t,"gdprConsent");if(t&&s){const e="string"==typeof s.consentString;o.gdpr={consent:e?s.consentString:"",required:!0}}t&&!s&&(o.gdpr={consent:"",required:!1}),(null==(i=null==t?void 0:t.gppConsent)?void 0:i.gppString)?o.gpp={consent:t.gppConsent.gppString,sid:t.gppConsent.applicableSections}:(null==(n=null==(r=null==t?void 0:t.ortb2)?void 0:r.regs)?void 0:n.gpp)&&(o.gpp={consent:t.ortb2.regs.gpp,sid:t.ortb2.regs.gpp_sid}),-1!==window.location.href.indexOf("optidigitalTestMode=true")&&(o.testMode=!0),t&&t.uspConsent&&(o.us_privacy=t.uspConsent),_getEids(e[0])&&(o.user={eids:_getEids(e[0])});const d=JSON.stringify(o);return{method:"POST",url:ENDPOINT_URL,data:d}},interpretResponse:function(e,t){const i=[];return(e=e.body).bids&&e.bids.forEach((e=>{const t={placementId:e.placementId,requestId:e.bidId,ttl:e.ttl,creativeId:e.creativeId,currency:e.cur,cpm:e.cpm,width:e.w,height:e.h,ad:e.adm,netRevenue:!0,meta:{advertiserDomains:e.adomain&&e.adomain.length>0?e.adomain:[]}};i.push(t)})),i},getUserSyncs:function(e,t,i,r,n){var a,o;let s="";if(!isSynced&&(i&&(s+="&gdpr="+(i.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(i.consentString||"")),r&&(s+="&us_privacy="+encodeURIComponent(r)),(null==n?void 0:n.gppString)&&(null==(a=null==n?void 0:n.applicableSections)?void 0:a.length)&&(s+="&gpp="+encodeURIComponent(n.gppString),s+="&gpp_sid="+encodeURIComponent(null==(o=null==n?void 0:n.applicableSections)?void 0:o.join(","))),e.iframeEnabled))return isSynced=!0,[{type:"iframe",url:USER_SYNC_URL_IFRAME+s}]}};function buildImp(e,t){let i={};i={sizes:parseSizesInput(dlv(e,"mediaTypes.banner.sizes")),bidId:dlv(e,"bidId"),adUnitCode:dlv(e,"adUnitCode"),transactionId:dlv(e,"ortb2Imp.ext.tid"),placementId:dlv(e,"params.placementId")},e.params.divId&&""!==e.params.divId&&getAdContainer(e.params.divId)&&(i.adContainerWidth=getAdContainer(e.params.divId).offsetWidth,i.adContainerHeight=getAdContainer(e.params.divId).offsetHeight);let r=[];dlv(e,"mediaTypes.banner")&&(r=getAdUnitSizes(e)),e.params.currency&&""!==e.params.currency&&(CUR=e.params.currency);let n=_getFloor(e,r,CUR);n&&(i.bidFloor=n);let a=t.battr||dlv(e,"params.battr");return a&&Array.isArray(a)&&a.length&&(i.battr=a),i}function getAdContainer(e){if(document.getElementById(e))return document.getElementById(e)}function _getFloor(e,t,i){let r=null,n=1===t.length?t[0]:"*";if("function"==typeof e.getFloor)try{const t=e.getFloor({currency:i,mediaType:"banner",size:n});"object"!=typeof t||t.currency!==CUR||isNaN(parseFloat(t.floor))||(r=parseFloat(t.floor))}catch(a){}return null!==r?r:e.params.floor}function _getEids(e){if(dlv(e,"userIdAsEids"))return e.userIdAsEids}var _a,_b;registerBidder(spec$1);const blockThroughScript=document.createElement("script");blockThroughScript.type="text/javascript",blockThroughScript.src="https://btloader.com/tag?o=5094764668518400&upapi=true",document.head.appendChild(blockThroughScript),window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting("advertiser","slmads")}));const setup={adUnits:[{adUnitPath:"/1009133/PC_728x90",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15854999}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016939}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1058971}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[2],zoneId:1278172}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"atf",siteId:257452,zoneId:1278172}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5415"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15285"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37584,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=764"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"764",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"db968567dfe47170b653fca93fe2de3e"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562583",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"764"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"764"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-3/Ptitchefportugal_ATF_728x90"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:216215486}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"I5Jtozgwxe",supplyType:"site"}}],device:"desktop",id:"PC_728x90",mediaTypes:{banner:{sizes:[[728,90]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:1},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.728x90.js",sendTargetingKeys:!1}},ortb2Imp:{ext:{gpid:"/1009133/PC_728x90#PC_728x90"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[728,90]],slmadsId:764},{adUnitPath:"/1009133/PC_300x600_2018",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855005}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:16289770,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855006}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016940}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1055700}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1055765,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"improvedigital",params:{placementId:22497089,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23053210,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[10,15],zoneId:1278174}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"atf",siteId:257452,zoneId:1278174}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:1278174}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5416"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"14961"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"14999"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37582,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=765"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=765",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:57646,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=765"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"765",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e6e727a2758df5ed11fe284472a0483b"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"befc9dcbdd085e9a7e51331000712a05"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562584",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"765"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"765"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"765"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-3/Ptitchefportugal_ATF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"IOvJegrqe8",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"7jJ3OXXeR3",supplyType:"site"}}],device:"desktop",id:"PC_300x600_1",mediaTypes:{banner:{sizes:[[300,250],[300,600]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.300x600.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_300x600_2018#PC_300x600_1"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[300,600]],slmadsId:765,type:"bannervideo"},{adUnitPath:"/1009133/PC_300x600_bottom_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855011}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855012}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670116}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016941}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[9,10,15],zoneId:1278176}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5417"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:62905,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=766"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37583,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=766"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:62871,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=766"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"766",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"989a817e48ebb3e2562184de30e0d9be"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"530039ee71680ab62a690cab1db6c2da"}},{bidder:"seedtag",params:{adUnitId:"30562585",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"766"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:488475546}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"HHrie3rh0s",supplyType:"site"}}],device:"desktop",id:"PC_300x600_4",mediaTypes:{banner:{sizes:[[160,600],[300,250],[300,600]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_300x600_bottom_2#PC_300x600_4"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[160,600],[300,250],[300,600]],slmadsId:766},{adUnitPath:"/1009133/PC_300x600_bottom",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855014}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855015}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670117}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016942}},{bidder:"improvedigital",params:{placementId:22497093,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[9,10,15],zoneId:1278178}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5418"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:67919,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=767"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:44883,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=767"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:63568,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=767"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"767",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"542312a61db3e978e6f8e55d60dfa868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"f4045336810775fd25e592e609999b17"}},{bidder:"seedtag",params:{adUnitId:"30562586",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"767"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_MTF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:488475546}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"9AuJxa5NWJ",supplyType:"site"}}],device:"desktop",id:"PC_300x600_3",mediaTypes:{banner:{sizes:[[160,600],[300,250],[300,600]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_300x600_bottom#PC_300x600_3"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[160,600],[300,250],[300,600]],slmadsId:767},{adUnitPath:"/1009133/PC_300x600_middle",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855017}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855018}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670118}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:31396600,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016943}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1059579,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[9,10,15],zoneId:1278180}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:1278180}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5419"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"15904"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:62477,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=768"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70128,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=768"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=768",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:72605,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=768"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"768",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"d7ca19d16f16e03128c8ec0c6eb34444"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"c369df872878fdcaf659d6df4c787369"}},{bidder:"seedtag",params:{adUnitId:"30562587",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"768"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"768"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-3/Ptitchefportugal_ATF2_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:488475546}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"BAzLK6LqQ6",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"TZnfRKpIYr",supplyType:"site"}}],device:"desktop",id:"PC_300x600_2",mediaTypes:{banner:{sizes:[[160,600],[300,250],[300,600]]},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_300x600_middle#PC_300x600_2"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[160,600],[300,250],[300,600]],slmadsId:768,type:"bannervideo"},{adUnitPath:"/1009133/PC_AMP_300x600",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855025}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:18552786}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:18552787}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016944}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[9,10,15],zoneId:2502066}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5420"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:80900,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=769"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37238,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=769"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:65666,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=769"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugalmobile_ATF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:488475546}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x600-0",mediaTypes:{banner:{sizes:[[160,600],[300,250],[300,600]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x600#div-gpt-ad-PC_AMP_300x600-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[160,600],[300,250],[300,600]],slmadsId:769},{adUnitPath:"/1009133/PC_AMP_300x250_top",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855033}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016945}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15],zoneId:2502068}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5421"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70129,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=770"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"0484bf453ff491a7223f0d9e25684f00"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugalmobile_ATF2_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x250_top-0",mediaTypes:{banner:{sizes:[[300,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x250_top#div-gpt-ad-PC_AMP_300x250_top-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250]],slmadsId:770},{adUnitPath:"/1009133/PC_AMP_300x600_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855040}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855041}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016946}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[10,15],zoneId:2502070}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5422"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37272,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=771"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64053,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=771"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"1f1f517cbaa3640137cbe3ca3d182082"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_BTF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x600_2-0",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x600_2#div-gpt-ad-PC_AMP_300x600_2-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[300,600]],slmadsId:771},{adUnitPath:"/1009133/PC_AMP_300x600_bottom",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855065}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855066}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016947}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[10,15],zoneId:2502072}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5423"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64298,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=772"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:65667,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=772"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"5adbdab4d72276a1c508a73829668a96"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_MTF_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:785338443}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x600_bottom-0",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x600_bottom#div-gpt-ad-PC_AMP_300x600_bottom-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[300,600]],slmadsId:772},{adUnitPath:"/1009133/PC_Skin_passback2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:17618549}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016948}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[68],zoneId:1483006}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"4266"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:85458,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=1678"}},{bidder:"onetag",params:{ext:{placement_name:"1678"},pubId:"64b1d8aba9df31e"}}],device:"desktop",id:"Ptitchef_Habillage",mediaTypes:{banner:{sizes:[[1800,1e3]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_Skin_passback2#Ptitchef_Habillage"}},params:{partners:{amazon:{enabled:!0}},passbackCallback:()=>{const e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://sac.ayads.co/sublime/8676"),document.body.appendChild(e)},skin:{position:"fixed",renderCallback:(e,t)=>{const i=document.createElement("style");i.id="akcelo_skin_body_style",i.innerText="body {margin-left: auto; margin-right: auto; margin-top: 220px;}",document.head.appendChild(i);const r=document.getElementById("Ptitchef_Habillage");r&&(r.style.top="0",r.style.zIndex="-1")}}},sizes:[[1,1],[1800,1e3]],slmadsId:1678,type:"skin"},{adUnitPath:"/1009133/PC_970x250_1",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:17789826}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:17789827}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:17789828}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016949}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[2,55,57],zoneId:1490610}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5424"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70487,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=1694"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64900,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=1694"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:57645,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=1694"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"1694",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e10d4e6f52c33c0957d2d402d6420152"}},{bidder:"onetag",params:{ext:{placement_name:"1694"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-3/Ptitchefportugal_ATF2_728x90"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:216215486}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:347514002}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:650322472}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"1g1DchH5sy",supplyType:"site"}}],device:"desktop",id:"PC_970x250_1",mediaTypes:{banner:{sizes:[[728,90],[970,90],[970,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_970x250_1#PC_970x250_1"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[728,90],[970,90],[970,250]],slmadsId:1694},{adUnitPath:"/1009133/PC_AMP_320x100",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855026}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855028}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016950}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[43,117],zoneId:2502074}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5425"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37601,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1968"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:43100,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1968"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"61f60bb9a7ba5c9d084f312685d23036"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugalmobile_ATF_320x100"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:804524803}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:410840444}}],device:"mobile",id:"div-gpt-ad-PC_AMP_320x100-0",mediaTypes:{banner:{sizes:[[320,50],[320,100]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_320x100#div-gpt-ad-PC_AMP_320x100-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[320,50],[320,100]],slmadsId:1968},{adUnitPath:"/1009133/PC_AMP_320x50",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:15855026}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016951}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[43],zoneId:2502076}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5426"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:37601,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1969"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugalmobile_ATF_320x50"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:804524803}}],device:"mobile",id:"div-gpt-ad-PC_AMP_320x50-0",mediaTypes:{banner:{sizes:[[320,50]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_320x50#div-gpt-ad-PC_AMP_320x50-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[320,50]],slmadsId:1969},{adUnitPath:"/1009133/PC_AMP_300x250_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:18552927}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016952}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15],zoneId:2502078}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5427"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:67446,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1970"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"dc84fc0070e730f841ac50f84a736f2c"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_BTF2_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x250_2",mediaTypes:{banner:{sizes:[[300,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x250_2#div-gpt-ad-PC_AMP_300x250_2"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250]],slmadsId:1970},{adUnitPath:"/1009133/PC_AMP_300x250_3",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:18552953}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016953}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15],zoneId:2502080}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5428"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:83317,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1971"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"2957f01f816cc9a2fbf484c6c15dd8de"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_BTF3_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x250_3-0",mediaTypes:{banner:{sizes:[[300,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x250_3#div-gpt-ad-PC_AMP_300x250_3-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250]],slmadsId:1971},{adUnitPath:"/1009133/PC_AMP_300x250_4",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:18552957}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016954}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15],zoneId:2502082}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5429"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:85040,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=1972"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"12c9dd4cb7ab4a7584ecf66131a4917e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_BTF4_300x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}}],device:"mobile",id:"div-gpt-ad-PC_AMP_300x250_4-0",mediaTypes:{banner:{sizes:[[300,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_AMP_300x250_4#div-gpt-ad-PC_AMP_300x250_4-0"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250]],slmadsId:1972},{adUnitPath:"/1009133/PC_970x250_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670137}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670138}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670139}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016955}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[2,55,57],zoneId:2060994}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5430"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:56150,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3775"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64903,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3775"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64469,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3775"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3775",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"0eb477dbe02fef69fcf9b99381f89a81"}},{bidder:"onetag",params:{ext:{placement_name:"3775"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF_970x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:216215486}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:347514002}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:650322472}}],device:"desktop",id:"PC_970x250_2",mediaTypes:{banner:{sizes:[[728,90],[970,90],[970,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_970x250_2#PC_970x250_2"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[728,90],[970,90],[970,250]],slmadsId:3775},{adUnitPath:"/1009133/PC_970x250_3",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670142}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670143}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670144}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016956}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[2,55,57],zoneId:2060996}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5431"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70488,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3776"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114835,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3776"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64471,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3776"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3776",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"bcdd2524b3f330e1152dc79336c4db9a"}},{bidder:"onetag",params:{ext:{placement_name:"3776"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF2_970_250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:216215486}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:347514002}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:650322472}}],device:"desktop",id:"PC_970x250_3",mediaTypes:{banner:{sizes:[[728,90],[970,90],[970,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_970x250_3#PC_970x250_3"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[728,90],[970,90],[970,250]],slmadsId:3776},{adUnitPath:"/1009133/PC_970x250_4",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670153}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670154}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670155}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016957}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[2,55,57],zoneId:2060998}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5432"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64499,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3778"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114630,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3778"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114631,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3778"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3778",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"eaa9711749bf55c33465fd5e8102f7e1"}},{bidder:"onetag",params:{ext:{placement_name:"3778"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF3_970x250"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:216215486}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:347514002}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:650322472}}],device:"desktop",id:"PC_970x250_4",mediaTypes:{banner:{sizes:[[728,90],[970,90],[970,250]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_970x250_4#PC_970x250_4"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[728,90],[970,90],[970,250]],slmadsId:3778},{adUnitPath:"/1009133/PC_Incontent",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670164}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670166}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:29223981,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:950224}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:950225,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15,16],zoneId:2061004}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061004}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5433"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"10893"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70485,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3779"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=3779",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:87057,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3779"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3779",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"07ca0ae742b48d08e2949f0ff4d0aa4d"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"9000782d6a8e43a581e410df10b4a18b"}},{bidder:"seedtag",params:{adUnitId:"26892420",placement:"inArticle",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3779"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3779"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugal_Incontent"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"bLNeK07chL",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"MpytEx5mWk",supplyType:"site"}}],device:"desktop",id:"PC_Incontent",mediaTypes:{banner:{sizes:[[300,250],[336,280]]},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_Incontent#PC_Incontent"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3779,type:"bannervideo"},{adUnitPath:"/1009133/PC_336x280_1",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670202}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670203}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:31396658,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016958}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1059609,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061006}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061006}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5434"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"15933"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=3780",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114864,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3780"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:64906,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3780"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3780",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e34066852a22965bdc011a1852744e1d"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"5cd7e872f0afa195c562d5e37ee2a794"}},{bidder:"seedtag",params:{adUnitId:"30562588",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3780"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3780"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"4zmb8OsvzN",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"6mTntlRQWl",supplyType:"site"}}],device:"desktop",id:"PC_336x280_1",mediaTypes:{banner:{sizes:[[300,250],[336,280]]},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_1#PC_336x280_1"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3780,type:"bannervideo"},{adUnitPath:"/1009133/PC_336x280_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670206}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670207}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016959}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061008}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5435"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:65934,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3781"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:89505,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3781"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3781",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"5e0d53a328e826983c4c6cad5b03db08"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"2a896533587f05b6fd0fe945f0566449"}},{bidder:"seedtag",params:{adUnitId:"30562589",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3781"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF2_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"n9sQXpyBIH",supplyType:"site"}}],device:"desktop",id:"PC_336x280_2",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_2#PC_336x280_2"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3781},{adUnitPath:"/1009133/PC_336x280_3",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670209}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670210}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016960}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061010}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5436"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:72609,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3782"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114854,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3782"}},{bidder:"teads",params:{pageId:138236,placementId:151704}},{bidder:"amx",params:{adUnitId:"3782",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"a9c53dc1a59b5bb5fd8d2850ef8e1e2e"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"b18a2271c9e0c767afb4ad4c489017d6"}},{bidder:"seedtag",params:{adUnitId:"30562591",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3782"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF3_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"3v8ewgMPKU",supplyType:"site"}}],device:"desktop",id:"PC_336x280_3",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_3#PC_336x280_3"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3782},{adUnitPath:"/1009133/PC_336x280_4",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670220}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670221}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016961}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061012}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5437"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:70486,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3783"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114855,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3783"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3783",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6b212ea8f5e612251e7c72e160dbf95a"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"3e5b626718eb1d14f50729c38c7356c2"}},{bidder:"seedtag",params:{adUnitId:"30562592",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3783"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF4_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"dL6wUycTda",supplyType:"site"}}],device:"desktop",id:"PC_336x280_4",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_4#PC_336x280_4"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3783},{adUnitPath:"/1009133/PC_336x280_5",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670245}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670246}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016962}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15,16],zoneId:2061014}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5438"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:72608,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3784"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:91155,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3784"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3784",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6b84eef5c92605829d0a61e57e63beda"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e7336f0cf58649ec10a665fd015fab30"}},{bidder:"seedtag",params:{adUnitId:"30562595",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3784"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-3/Ptitchefportugal_BTF5_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"uDXhGp4AZg",supplyType:"site"}}],device:"desktop",id:"PC_336x280_5",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_5#PC_336x280_5"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3784},{adUnitPath:"/1009133/PC_336x280_6",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670250}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670252}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016963}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061016}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5439"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:85041,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3785"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114856,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3785"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3785",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"ee155a43798af5933e02b9614d4a76d7"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"d89b2fe34e4c0185bebe0b0bf1cda975"}},{bidder:"seedtag",params:{adUnitId:"30562596",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3785"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF6_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"WNOGhp9VJl",supplyType:"site"}}],device:"desktop",id:"PC_336x280_6",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_6#PC_336x280_6"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3785},{adUnitPath:"/1009133/PC_336x280_7",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670260}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670261}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016964}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061018}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5440"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114862,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3786"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114857,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3786"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3786",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6ab25d32c64a3ea8a331eaa1d5299271"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"bf13783fa5d83b4ee06f6bf711f63f7f"}},{bidder:"seedtag",params:{adUnitId:"30562597",placement:"inBanner",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3786"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF7_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"FZ14qTYXXH",supplyType:"site"}}],device:"desktop",id:"PC_336x280_7",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_7#PC_336x280_7"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3786},{adUnitPath:"/1009133/PC_336x280_8",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670268}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670269}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016965}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061020}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5441"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114863,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3787"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114858,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=3787"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e6e727a2758df5ed11fe284472a0483b"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"9000782d6a8e43a581e410df10b4a18b"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_BTF8_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}}],device:"desktop",id:"PC_336x280_8",mediaTypes:{banner:{sizes:[[300,250],[336,280]]}},ortb2Imp:{ext:{gpid:"/1009133/PC_336x280_8#PC_336x280_8"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3787},{bids:[{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:21670285,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[640,480]],siteId:1016966,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"instream",playerSize:[[640,480]]},zoneId:2103654}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"7701"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42329,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=3789",video:{protocol:8,startDelay:1}}},{bidder:"freewheel-ssp",params:{zoneId:"15578879"}},{bidder:"amx",params:{adUnitId:"3789",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"seedtag",params:{adUnitId:"30562598",placement:"inStream",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"3789"},pubId:"64b1d8aba9df31e"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:878440487}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"uBqNTok0Nf",supplyType:"site"}}],device:"desktop",id:"Ptitchef_Video",mediaTypes:{video:{api:[2],context:"instream",h:480,linearity:1,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/x-ms-wmv","application/javascript"],minbitrate:200,placement:1,playbackmethod:[2],playerSize:[[640,480]],pos:1,protocols:[2,3,5,6],sizes:[[640,480]],skip:0,w:640}},params:{partners:{adExchange:{allowAtRefresh:!1,enabled:!0},amazon:{enabled:!0,videoSlot:"videoSlot1"}},passbackCallback:()=>{const e=document.createElement("div");e.id="Ptitchefportugal_Sticky_Passback_Video",e.style.maxHeight="250px",document.body.appendChild(e),window.slmadshb.display(e.id)},refresh:{enabled:!0,timeout:1e3},video:{allowNoAd:!1,closeButtonMode:"ONLY_CONTENT",closeButtonPosition:"TOP_RIGHT",dailymotion:{playlistId:"x7dx7q",refresh:{capping:5,enabled:!0}},mode:"CORNER",position:"BOTTOM_RIGHT"}},sizes:[[640,480]],slmadsId:3789,type:"video"},{adUnitPath:"/1009133/PC_mobile_336x280_1",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670324}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670325}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670326}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:26451700,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:848895}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:848896,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1059183}},{bidder:"improvedigital",params:{placementId:22503214,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041233,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061022}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061022}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061022}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5442"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"8299"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15475"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3791",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114836,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3791"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:87058,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3791"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114074,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3791"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3791",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"d985bc042c7ca86976eec25b21067e8b"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"a9e5c66427ceaf0f15acb422cb8bf399"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562570",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3791"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3791"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3791"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"4x2I5VkM20",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"ye8LwzRRre",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_1",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_1#PC_mobile_336x280_1"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3791,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_2",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670327}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670328}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670329}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:26610259,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:855020}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:855021,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1059184}},{bidder:"improvedigital",params:{placementId:22503220,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041234,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061024}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061024}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061024}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5443"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"8390"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15476"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3792",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114837,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3792"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114069,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3792"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114075,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3792"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3792",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"c7c69d1731cee2ea379850becc2ee5b9"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e8a63f09df9ef80712299572de16493a"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562571",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3792"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3792"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3792"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF2_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"8PESQqhwi4",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"OljraPyu4Z",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_2",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_2#PC_mobile_336x280_2"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3792,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_3",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670340}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670341}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670342}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:26610298,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:855089}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:855090,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1059185}},{bidder:"improvedigital",params:{placementId:22503226,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041235,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061026}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061026}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061026}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5444"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"8429"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15477"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3793",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114838,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3793"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114157,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3793"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114158,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3793"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3793",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"20e7809ad34cec85be57372cf50efc04"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562572",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3793"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3793"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3793"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF3_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"hm8utqKyQe",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"aeG2pWGPqX",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_3",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_3#PC_mobile_336x280_3"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3793,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_4",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670347}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670348}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670349}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:31396434,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016967}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1059186}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1059187,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061028}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061028}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061028}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5445"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15478"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"15479"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3795",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114839,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3795"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114620,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3795"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114621,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3795"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3795",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"10d97cc44f82e6fda431a85ca1694ccf"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562573",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3795"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3795"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3795"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF4_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"Vv4rqhNHGp",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"Y7h3lgvMP9",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_4",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_4#PC_mobile_336x280_4"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3795,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_5",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670352}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670353}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670354}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:31396659,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016968}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1059610,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061030}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061030}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5446"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"15934"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3796",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114840,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3796"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114842,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3796"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114848,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3796"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3796",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"c3d02a41fc83c23a2607d623e46af365"}},{bidder:"seedtag",params:{adUnitId:"30562574",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3796"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3796"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF5_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"Yf8k5ljeDa",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"xNsP5GsFig",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_5",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_5#PC_mobile_336x280_5"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3796,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_6",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670361}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670362}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670363}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:31396660,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016969}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1059611,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061032}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061032}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5447"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"15935"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3797",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114841,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3797"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114843,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3797"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114849,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3797"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3797",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"a7553b776bba442deb1e5c0ffb08a630"}},{bidder:"seedtag",params:{adUnitId:"30562575",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3797"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3797"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF6_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"Ghmi3760xR",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"J0ujPE6mxe",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_6",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_6#PC_mobile_336x280_6"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3797,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_7",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670366}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670367}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670368}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:32783732,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016970}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1107493}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1107494,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061034}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061034}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061034}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5448"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"19814"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"19815"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3798",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114844,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3798"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114850,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3798"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3798",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"def19882654e95d88512f94403e633d3"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562576",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3798"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3798"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3798"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF7_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"ZPHWaESZmX",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"8We3mtv8A9",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_7",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:1},{data:{type:2},id:3,required:1},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_7#PC_mobile_336x280_7"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3798,type:"bannervideo"},{adUnitPath:"/1009133/PC_mobile_336x280_8",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670369}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670370}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21670371}},{bidder:"ix",params:{mediaType:"BANNER",siteId:1016971}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1107492}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"btf",siteId:257452,sizes:[15,16],zoneId:2061038}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"btf",siteId:257452,zoneId:2061038}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5449"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"19813"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114845,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3800"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:114851,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3800"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"3800",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"c5b1b35632eefb53b252d1e82d4e958c"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562577",placement:"inBanner",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3800"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3800"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugalmobile_BTF8_336x280"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:524518626}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"rdW91B3Bxu",supplyType:"site"}}],device:"mobile",id:"PC_mobile_336x280_8",mediaTypes:{banner:{sizes:[[300,250],[336,280],[336,320]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:1},{data:{type:2},id:3,required:1},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_336x280_8#PC_mobile_336x280_8"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280],[336,320]],slmadsId:3800},{adUnitPath:"/1009133/PC_mobile_Incontent",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21675068}},{bidder:"appnexus",params:{mediaType:"BANNER",placementId:21675069}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:29161798,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"BANNER",siteId:944881}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:944882,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:1059188}},{bidder:"improvedigital",params:{placementId:22504699,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041236,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15,16],zoneId:2061608}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"atf",siteId:257452,zoneId:2061608}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"outstream",playerSize:[[300,250]]},zoneId:2061608}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"5450"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"10790"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"15480"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3801",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:81041,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3801"}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:87056,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=3801"}},{bidder:"teads",params:{pageId:120076,placementId:130207}},{bidder:"amx",params:{adUnitId:"3801",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"831b50f5f7eed197c140e7ce779a2fe8"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"26731569",placement:"inArticle",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3801"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3801"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"3801"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"ATF-2/Ptitchefportugalmobile_Incontent"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:313215219}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"K7T6L3yg0g",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"EOcLfdu9KX",supplyType:"site"}}],device:"mobile",id:"PC_mobile_Incontent",mediaTypes:{banner:{sizes:[[300,250],[336,280]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.336x280.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/PC_mobile_Incontent#PC_mobile_Incontent"}},params:{lazyLoad:{enabled:!0},partners:{amazon:{enabled:!0}}},sizes:[[300,250],[336,280]],slmadsId:3801,type:"bannervideo"},{bids:[{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:21675472,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[640,480]],siteId:1016972,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"instream",playerSize:[[640,480]]},zoneId:2103652}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"7700"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42329,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=3802",video:{protocol:8,startDelay:1}}},{bidder:"freewheel-ssp",params:{zoneId:"15578831"}},{bidder:"amx",params:{adUnitId:"3802",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"seedtag",params:{adUnitId:"30562579",placement:"inStream",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"3802"},pubId:"64b1d8aba9df31e"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:714861400}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"gI7jd2CFJu",supplyType:"site"}}],device:"mobile",id:"Ptitchef_Video",mediaTypes:{video:{api:[2],context:"instream",h:480,linearity:1,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/x-ms-wmv","application/javascript"],minbitrate:200,placement:1,playbackmethod:[2],playerSize:[[640,480]],pos:1,protocols:[2,3,5,6],sizes:[[640,480]],skip:0,w:640}},params:{partners:{adExchange:{allowAtRefresh:!1,enabled:!0},amazon:{enabled:!0,videoSlot:"videoSlot2"}},refresh:{enabled:!0,timeout:1e3},video:{allowNoAd:!1,closeButtonMode:"ONLY_CONTENT",closeButtonPosition:"TOP_RIGHT",dailymotion:{playlistId:"x7dx7q",refresh:{capping:5,enabled:!0}},mode:"CORNER",position:"BOTTOM_RIGHT"}},sizes:[[640,480]],slmadsId:3802,type:"video"},{adUnitPath:"/1009133/Ptitchef_Video",bids:[{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:25069524,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[640,480]],siteId:1016973,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"instream",playerSize:[[640,480]]},zoneId:2404056}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"7971"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42329,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=4850",video:{protocol:8,startDelay:1}}},{bidder:"freewheel-ssp",params:{zoneId:"30216466"}},{bidder:"amx",params:{adUnitId:"4850",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"seedtag",params:{adUnitId:"30562599",placement:"inStream",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"4850"},pubId:"64b1d8aba9df31e"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:878440487}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"pQYj6QxRcy",supplyType:"site"}}],device:"desktop",id:"Ptitchef_Video2",mediaTypes:{video:{api:[2],context:"instream",h:480,linearity:1,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/x-ms-wmv","application/javascript"],minbitrate:200,placement:1,playbackmethod:[2],playerSize:[[640,480]],pos:1,protocols:[2,3,5,6],sizes:[[640,480]],skip:0,w:640}},ortb2Imp:{ext:{gpid:"/1009133/Ptitchef_Video#Ptitchef_Video2"}},params:{partners:{adExchange:{allowAtRefresh:!1,enabled:!0},amazon:{enabled:!0,videoSlot:"videoSlot3"}},passbackCallback:()=>{const e=document.createElement("div");e.id="Ptitchef_Sticky_Passback_Video",e.style.maxHeight="250px",document.body.appendChild(e),window.slmadshb.display(e.id)},refresh:{enabled:!0,timeout:1e3},video:{allowNoAd:!1,closeButtonMode:"ONLY_CONTENT",closeButtonPosition:"TOP_RIGHT",dailymotion:{playlistId:"x7dprf",refresh:{capping:5,enabled:!0}},mode:"CORNER",position:"BOTTOM_RIGHT"}},sizes:[[640,480]],slmadsId:4850,type:"video"},{adUnitPath:"/1009133/Ptitchefmobile_Video",bids:[{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:25069525,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[640,480]],siteId:1016974,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"VIDEO",siteId:257452,video:{context:"instream",playerSize:[[640,480]]},zoneId:2404058}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"7972"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42329,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=4851",video:{protocol:8,startDelay:1}}},{bidder:"freewheel-ssp",params:{zoneId:"33003638"}},{bidder:"amx",params:{adUnitId:"4851",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"seedtag",params:{adUnitId:"30562580",placement:"inStream",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"4851"},pubId:"64b1d8aba9df31e"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:714861400}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"bGKCAgcc23",supplyType:"site"}}],device:"mobile",id:"Ptitchef_Video2",mediaTypes:{video:{api:[2],context:"instream",h:480,linearity:1,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/x-ms-wmv","application/javascript"],minbitrate:200,placement:1,playbackmethod:[2],playerSize:[[640,480]],pos:1,protocols:[2,3,5,6],sizes:[[640,480]],skip:0,w:640}},ortb2Imp:{ext:{gpid:"/1009133/Ptitchefmobile_Video#Ptitchef_Video2"}},params:{partners:{adExchange:{allowAtRefresh:!1,enabled:!0},amazon:{enabled:!0,videoSlot:"videoSlot4"}},passbackCallback:()=>{const e=document.createElement("div");e.id="Ptitchef_Sticky_Passback_Video",e.style.maxHeight="250px",document.body.appendChild(e),window.slmadshb.display(e.id)},refresh:{enabled:!0,timeout:1e3},video:{allowNoAd:!1,closeButtonMode:"ONLY_CONTENT",closeButtonPosition:"TOP_RIGHT",dailymotion:{playlistId:"x7dprf",refresh:{capping:5,enabled:!0}},mode:"CORNER",position:"BOTTOM_RIGHT"}},sizes:[[640,480]],slmadsId:4851,type:"video"},{adUnitPath:"/1009133/Ptitchefportugal_Sticky_Passback_Video",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:30091355}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:30091358,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"appnexus",params:{allowSmallerSizes:!0,mediaType:"NATIVE",placementId:30091357}},{bidder:"ix",params:{mediaType:"BANNER",siteId:966865}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:966866}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:1016975,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15],zoneId:2825890}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"atf",siteId:257452,zoneId:2825890}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"11612"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"11613"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"11614"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089317,siteId:296392,target:"slmadsId=6995",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:84530,mediaType:"BANNER",pageId:1089317,siteId:296392,target:"slmadsId=6995"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"6995",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"e6e727a2758df5ed11fe284472a0483b"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30562601",placement:"inScreen",publisherId:"0046-4298-01"}},{bidder:"onetag",params:{ext:{placement_name:"6995"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"6995"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"6995"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-3/Ptitchefportugal_Sticky_Passback_Video"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:632515377}},{bidder:"missena",params:{apiKey:"PA-94967533"}},{bidder:"missenanative",params:{nativeCallback:e=>{const t=document.createElement("script");t.src="https://ad.missena.io/renderer.js?t=PA-94967533",document.getElementsByTagName("head")[0].append(t),setTimeout((()=>{window.renderMissenaNativeAd(e,window.slmpbjs,10593)}),1e3)},networkId:10593,publisherSubId:"PA-94967533:criteo-prebid-native",zoneId:1628946}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"HXHaoXEbg7",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"kPGCLallvV",supplyType:"site"}}],device:"desktop",id:"Ptitchef_Sticky_Passback_Video",mediaTypes:{banner:{sizes:[[300,250]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.300x250.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/Ptitchefportugal_Sticky_Passback_Video#Ptitchef_Sticky_Passback_Video"}},params:{gamMode:"a9only",partners:{amazon:{enabled:!0}},refresh:{enabled:!0,timeout:6e3},sticky:{closeButtonPosition:"top-right",margin:20,position:"bottom-right",yOffset:0}},sizes:[[1,1],[300,250]],slmadsId:6995,type:"mosaik"},{adUnitPath:"/1009133/Ptitchefportugalmobile_Sticky_Passback_Video",bids:[{bidder:"appnexus",params:{mediaType:"BANNER",placementId:30091738}},{bidder:"appnexus",params:{mediaType:"VIDEO",placementId:30091741,video:{playback_method:["auto_play_sound_off"],skippable:!1}}},{bidder:"appnexus",params:{allowSmallerSizes:!0,mediaType:"NATIVE",placementId:30091739}},{bidder:"ix",params:{mediaType:"BANNER",siteId:985067}},{bidder:"ix",params:{mediaType:"NATIVE",siteId:985068}},{bidder:"ix",params:{mediaType:"VIDEO",playerSize:[[300,250]],siteId:987495,video:{maxduration:60,mimes:["video/mp4","video/webm","application/javascript"],minduration:0,protocols:[2,3,5,6,7,8]}}},{bidder:"improvedigital",params:{placementId:23041282,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041283,publisherId:1082}},{bidder:"improvedigital",params:{placementId:23041284,publisherId:1082}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"BANNER",position:"atf",siteId:257452,sizes:[15],zoneId:2872356}},{bidder:"rubicon",params:{accountId:"9528",mediaType:"NATIVE",position:"atf",siteId:257452,zoneId:2872356}},{bidder:"criteo",params:{mediaType:"BANNER",networkId:"6917",publisherSubId:"12382"}},{bidder:"criteo",params:{mediaType:"NATIVE",networkId:"6917",publisherSubId:"12383"}},{bidder:"criteo",params:{mediaType:"VIDEO",networkId:"6917",publisherSubId:"12384"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",formatId:42330,mediaType:"VIDEO",pageId:1089321,siteId:296392,target:"slmadsId=7600",video:{protocol:8,startDelay:1}}},{bidder:"smartadserver",params:{domain:"https://www3.smartadserver.com",formatId:85038,mediaType:"BANNER",pageId:1089321,siteId:296392,target:"slmadsId=7600"}},{bidder:"teads",params:{pageId:138494,placementId:151972}},{bidder:"amx",params:{adUnitId:"7600",tagId:"YWtjZWxvLXJvbi5pbw"}},{bidder:"adyoulike",params:{mediaType:"BANNER",placement:"6c1765e8afb4a41ce61f54b675b7c868"}},{bidder:"adyoulike",params:{mediaType:"NATIVE",placement:"106b9f9e64f574c9abf142808b4f7219"}},{bidder:"seedtag",params:{adUnitId:"30496863",placement:"inScreen",publisherId:"0461-1089-01"}},{bidder:"onetag",params:{ext:{placement_name:"7600"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"7600"},pubId:"64b1d8aba9df31e"}},{bidder:"onetag",params:{ext:{placement_name:"7600"},pubId:"64b1d8aba9df31e"}},{bidder:"outbrain",params:{publisher:{id:"00e00c9618dc0513ce33e78182853bfd54"},tagid:"BTF-2/Ptitchefportugalmobile_Sticky_Passback_Video"}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:432392059}},{bidder:"medianet",params:{cid:"8CUSSC604",crid:632515377}},{bidder:"missena",params:{apiKey:"PA-94967533"}},{bidder:"missenanative",params:{nativeCallback:e=>{const t=document.createElement("script");t.src="https://ad.missena.io/renderer.js?t=PA-94967533",document.getElementsByTagName("head")[0].append(t),setTimeout((()=>{window.renderMissenaNativeAd(e,window.slmpbjs,10593)}),1e3)},networkId:10593,publisherSubId:"PA-94967533:criteo-prebid-native",zoneId:1628946}},{bidder:"richaudience",params:{mediaType:"BANNER",pid:"QYxTpCgtAu",supplyType:"site"}},{bidder:"richaudience",params:{mediaType:"VIDEO",pid:"6pHdPhAYD6",supplyType:"site"}}],device:"mobile",id:"Ptitchef_Sticky_Passback_Video",mediaTypes:{banner:{sizes:[[300,250]]},native:{ortb:{assets:[{id:0,img:{hmin:0,type:3,wmin:0},required:1},{id:1,required:1,title:{len:80}},{data:{type:1},id:2,required:0},{data:{type:2},id:3,required:0},{data:{type:11},id:4,required:0},{data:{type:12},id:5,required:0}],context:1,eventtrackers:[{event:1,methods:[1,2]}],plcmttype:2,ver:"1.2"},rendererUrl:"https://ads.sportslocalmedia.com/slm.native.render.300x250.js",sendTargetingKeys:!1},video:{api:[1,2],context:"outstream",h:250,linearity:2,maxbitrate:5e3,maxduration:60,mimes:["video/mp4","video/webm","video/ogg","application/javascript"],minbitrate:200,minduration:1,placement:2,playbackmethod:[2],playerSize:[[300,250]],pos:1,protocols:[1,2,3,4,5,6,7,8],renderer:getOutstreamRenderer(),sizes:[[300,250]],skip:0,w:300}},ortb2Imp:{ext:{gpid:"/1009133/Ptitchefportugalmobile_Sticky_Passback_Video#Ptitchef_Sticky_Passback_Video"}},params:{gamMode:"a9only",partners:{amazon:{enabled:!0}},refresh:{enabled:!0,timeout:6e3},sticky:{closeButtonPosition:"top-right",margin:10,position:"bottom-right",scale:.8,yOffset:100}},sizes:[[1,1],[300,250]],slmadsId:7600,type:"mosaik"}],params:{advertisersMapping:{Amazon:11248123,Google:4818319175,Prebid:4725230856},allowedDomains:["petitchef.com"],desktopParams:{floors:{auctionDelay:300,endpoint:{url:"https://floor.sportslocalmedia.com/ptitchefportugal2-desktop.json"}}},mobileParams:{floors:{auctionDelay:300,endpoint:{url:"https://floor.sportslocalmedia.com/ptitchefportugal2-mobile.json"}},prebidTimeout:2700},placeholder:{allowIcon:!0,allowWatermark:!0},refresh:{capping:12,enabled:!0,targeting:{false:"false_pt.petitchef.com",true:"true_pt.petitchef.com"},timeout:3e4,visibleTimeout:2e4},schain:{complete:1,nodes:[{asi:"spacefoot.com",hp:1,sid:"c48b441c-4aab-484e-88b5-474309e15eae"}],ver:"1.0"},siteId:98}};setup.params&&(setup.params.gamDelayAddService=!0,setup.params.identityLinkPID="13897",setup.params.userSync={pairId:!0}),window.slmpbjs=window.slmpbjs||{},window.slmpbjs.que=window.slmpbjs.que||[],window.slmpbjs.que.push((()=>{window.slmpbjs.enableAnalytics([{provider:"atsAnalytics",options:{pid:"13897"}}])}));const fixAdunits=e=>{var t,i;"Ptitchef_Video"===e.id&&(null===(t=e.params)||void 0===t?void 0:t.video)&&(e.params.autoload=!0,e.params.autoInjection=e.params.autoInjection||{},e.params.autoInjection.target="body",e.params.refresh={enabled:!1},e.params.video.type="STANDALONE",e.params.video.renderer=(e,t,i)=>{const r=getGamVideoVastRequestFromBid(e,"/1009133/PC_Video",t,i);r&&(window.akcelo_vast_url=r,window.postMessage({akcelo_vast_url:r},"*"))},-1!==document.location.search.indexOf("akcelo_video_demo")&&(e.bids=[{bidder:"appnexus",params:{placementId:13232361,video:{playback_method:["auto_play_sound_off"],skippable:!0}}}])),isMobile()&&"Ptitchef_Video2"===e.id&&(null===(i=e.params)||void 0===i?void 0:i.video)&&(e.params.video.scale=.5),e.bids&&-1!==Object.keys(e.mediaTypes).indexOf("banner")&&e.bids.push({bidder:"optidigital",params:{publisherId:"p281",placementId:e.id,divId:e.id}})};null===(_a=setup.adUnits)||void 0===_a||_a.forEach(fixAdunits),window.slmpbjs.que.push((()=>{var e,t,i,r,n,a,o,s;if(null===(r=null===(i=null===(t=null===(e=null===window||void 0===window?void 0:window.ats)||void 0===e?void 0:e.outputCurrentConfiguration())||void 0===t?void 0:t.ENVELOPE_MODULE_INFO)||void 0===i?void 0:i.ENVELOPE_MODULE_CONFIG)||void 0===r?void 0:r.emailHashes){const e=null===(s=null===(o=null===(a=null===(n=null===window||void 0===window?void 0:window.ats)||void 0===n?void 0:n.outputCurrentConfiguration())||void 0===a?void 0:a.ENVELOPE_MODULE_INFO)||void 0===o?void 0:o.ENVELOPE_MODULE_CONFIG)||void 0===s?void 0:s.emailHashes,t=e[2],i=e[0];t&&i&&window.slmpbjs.setBidderConfig({bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{uids:[{id:t,atype:3,ext:{stype:"hemmd5"}},{id:i,atype:3,ext:{stype:"hemsha256"}}]}]}}}}}})}}));const fixPassbackAdunits=e=>(e.id.includes("Sticky_Passback_Video")&&e.bids&&(e.bids.push({bidder:"missena",params:{apiKey:"PA-63674272"}}),e.bids.push({bidder:"missenanative",params:{networkId:10593,zoneId:1628946,publisherSubId:"PA-63674272:criteo-prebid-native",nativeCallback:e=>{const t=document.createElement("script");t.src="https://ad.missena.io/renderer.js?t=PA-63674272",document.getElementsByTagName("head")[0].append(t),setTimeout((()=>{window.renderMissenaNativeAd(e,window.slmpbjs,10593)}),1e3)}}})),e);null===(_b=setup.adUnits)||void 0===_b||_b.forEach(fixPassbackAdunits),setup.params&&(setup.params.prebidBidAdjustments=[{bidder:"missena",adjustment:(e,t)=>.6*e},{bidder:"missenanative",adjustment:(e,t)=>.6*e}]),window.slmpbjs=window.slmpbjs||{que:[]},window.slmpbjs.que.push((()=>{window.slmpbjs.aliasBidder("criteo","missenanative")})),window.slmadshb.onload=()=>init$5(setup),window.slmadshb=window.slmadshb||{},window.slmadshb.que=window.slmadshb.que||[],window.slmadshb.setup=window.slmadshb.setup||setup;const demoAdTemplate='<style>\n    .demo-ad{\n        height: <%=height%>px;\n        width: <%=width%>px;\n        background: linear-gradient(<%=hueRotate%>deg, #034154, #16b49b);\n        color: white;\n        font-weight: bold ;\n        font-family: \'Arial\',serif;\n    }\n    .vertical-line{\n        height: <%= height%>px;\n        border-left: solid white 3px;\n        margin-left: 15% ;\n        position: absolute;\n    }\n    .horizontal-line{\n        width: <%=width%>px;\n        border-top: solid white 3px;\n        bottom: 15% ;\n        position: absolute;\n    }\n    .vertical-line::before, .vertical-line::after,\n    .horizontal-line::before, .horizontal-line::after {\n        content: "";\n        display: block;\n        position: absolute;\n        background-color: white;\n        border-radius: 50%;\n        width: 15px;\n        height: 15px;\n    }\n    .vertical-line::after, .vertical-line::before {\n        left: -9px;\n    }\n    .vertical-line::after{\n        bottom: 0;\n    }\n    .vertical-line::before {\n        top: 0;\n    }\n    .horizontal-line::before, .horizontal-line::after {\n        bottom: -6px;\n    }\n    .horizontal-line::before{\n        left: 0;\n    }\n    .horizontal-line::after {\n        bottom:  -6px;\n        right: 0;\n    }\n    .size-height {\n        transform: rotate(-90deg);\n        position: absolute;\n        bottom: 30%;\n        left: 13%;\n        transform-origin: bottom left;\n    }\n\n    .size-width {\n        position: absolute;\n        bottom: 16%;\n        left: 50%;\n        transform: translateX(-50%);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        width: 100px;\n    }\n    .akcelo-logo{\n        height: 40%;\n        width: 40%;\n        left: 50%;\n        transform: translateX(-50%);\n        top: 6%;\n        position: absolute;\n        filter: brightness(0) invert(1);\n    }\n</style>\n<a href="https://akcelo.io" target="_blank">\n    <div class="demo-ad">\n        <img class="akcelo-logo" src="https://ads.sportslocalmedia.com/akcelo_logo.svg" alt="Logo Akcelo">\n        <div class="vertical-line"></div>\n        <div class="size-height"><%= height%> px</div>\n        <div class="horizontal-line"></div>\n        <div class="size-width"><%=width%> px</div>\n    </div>\n</a>\n',BIDDER_CODE="akcelo-demo",DEMO_ADS=new Map([["1800x1000","https://ads.sportslocalmedia.com/demo/1800x1000.jpg"],["970x250","https://ads.sportslocalmedia.com/demo/970x250.jpg"],["970x90","https://ads.sportslocalmedia.com/demo/970x90.jpg"],["728x90","https://ads.sportslocalmedia.com/demo/728x90.jpg"],["300x250","https://ads.sportslocalmedia.com/demo/300x250.jpg"],["300x600","https://ads.sportslocalmedia.com/demo/300x600.jpg"],["160x600","https://ads.sportslocalmedia.com/demo/300x600.jpg"],["320x100","https://ads.sportslocalmedia.com/demo/320x100.jpg"],["320x50","https://ads.sportslocalmedia.com/demo/320x50.jpg"],["320x480","https://ads.sportslocalmedia.com/demo/320x480.jpg"]]),spec={code:BIDDER_CODE,supportedMediaTypes:[BANNER,NATIVE$1,VIDEO],isBidRequestValid:()=>!0,buildRequests(e){const t={bids:[]};return e.forEach((e=>{const i=Object.keys(e.mediaTypes),r=i[Math.floor(Math.random()*i.length)],n={requestId:e.bidderRequestId,bidId:e.bidId,cpm:Math.random()+5,creativeId:Math.random().toString(36).substr(2,5),currency:"EUR",netRevenue:!0,ttl:300,adUnitCode:e.adUnitCode};if(r===BANNER&&e.mediaTypes&&e.mediaTypes.banner){const{sizes:t}=e.mediaTypes.banner,i=t.sort(((e,t)=>t[0]*t[1]-e[0]*e[1]));for(let e=0;e<i.length;e++)if(DEMO_ADS.has(`${i[e][0]}x${i[e][1]}`)){n.mediaType=BANNER,n.width=i[e][0],n.height=i[e][1],n.player_height=i[e][0],n.player_width=i[e][1],1800===n.width&&1e3===n.height?n.ad='<a href="https://akcelo.io" target="_blank"><img style="filter: hue-rotate(140deg)" src="https://ads.sportslocalmedia.com/demo/1800x1000.jpg" width="1800" height="1000" /></a>':n.ad=ejs.render(demoAdTemplate,{height:n.height,width:n.width,hueRotate:360*Math.random()});break}}else if(r===NATIVE$1&&e.mediaTypes&&e.mediaTypes.native)n.mediaType=NATIVE$1,n.width=1,n.height=1,n[NATIVE$1]={title:"Akcelo Prebid Native Creative",body:"This is a Prebid Native Creative. There are many like it, but this one is mine.",body2:void 0,cta:void 0,sponsoredBy:"Akcelo.io",privacyLink:void 0,address:void 0,clickUrl:"https://akcelo.io/fr/",displayUrl:void 0,clickTrackers:"https://akcelo.io/fr/",impressionTrackers:["data:,akcelo_fake_impression"],javascriptTrackers:void 0,image:{url:"https://ads.sportslocalmedia.com/demo/native-bg.jpg",height:900,width:1600}};else if(r===VIDEO&&e.mediaTypes&&e.mediaTypes.video)switch(n.mediaType=VIDEO,n.width=e.mediaTypes.video.playerSize[0][0],n.height=e.mediaTypes.video.playerSize[0][1],e.mediaTypes.video.context){case INSTREAM:n.vastUrl="https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&sz=640x480&cust_params=sample_ct%3Dlinear&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=";break;case OUTSTREAM$1:n.vastXml='<?xml version="1.0" encoding="UTF-8" ?>\n<VAST version="2.0">\n    <Ad id="akcelo_video_demo">\n        <InLine>\n            <AdSystem version="1.0">Akcelo Video</AdSystem>\n            <AdTitle><![CDATA[Demo Akcelo Video]]></AdTitle>\n            <Creatives>\n                <Creative sequence="1">\n                    <Linear>\n                        <Duration>00:00:24</Duration>\n                        <VideoClicks>\n                            <ClickThrough><![CDATA[https://akcelo.io]]></ClickThrough>\n                        </VideoClicks>\n                        <MediaFiles>\n                            <MediaFile delivery="progressive" width="640" height="480" type="video/mp4" scalable="true" maintainAspectRatio="false">\n                                <![CDATA[//ads.sportslocalmedia.com/demo/akcelo-video-demo.mp4]]>\n                            </MediaFile>\n                        </MediaFiles>\n                    </Linear>\n                </Creative>\n            </Creatives>\n        </InLine>\n    </Ad>\n</VAST>'}t.bids.push(n)})),{method:"GET",url:`data:text/plain;base64,${window.btoa(JSON.stringify(t))}`}},interpretResponse(e){const t=[];return e.body.bids.forEach((e=>{e.requestId=e.bidId,t.push(e)})),t},getUserSyncs:(e,t,i,r)=>[],onTimeout(e){},onBidWon(e){},onSetTargeting(e){},onBidderError({error:e,bidderRequest:t}){}};registerBidder(spec);const akceloDemoAdapter=Object.freeze(Object.defineProperty({__proto__:null,spec:spec},Symbol.toStringTag,{value:"Module"}))})),window.slmadshb&&window.slmadshb.setup&&window.slmadshb.setup.desktop&&window.slmadshb.setup.desktop.params?window.slmadshb.setup.desktop.params.floors={data:{floorProvider:"sam",floorsSchemaVersion:2,currency:"EUR",modelGroups:[{modelWeight:100,modelVersion:"simple",schema:{fields:["id"]},values:{Ptitchef_Habillage:1.5,Ptitchef_Video:.6,Ptitchef_Video2:.3}}]}}:window.slmadshb&&window.slmadshb.setup&&window.slmadshb.setup.params&&window.slmadshb.setup.params.desktopParams&&window.slmadshb.setup.params.desktopParams.floors&&(window.slmadshb.setup.params.desktopParams.floors={data:{floorProvider:"sam",floorsSchemaVersion:2,currency:"EUR",modelGroups:[{modelWeight:100,modelVersion:"simple",schema:{fields:["id"]},values:{Ptitchef_Habillage:1.5,Ptitchef_Video:.6,Ptitchef_Video2:.3}}]}}),window.slmadshb&&window.slmadshb.setup&&window.slmadshb.setup.params&&(window.slmadshb.setup.params.contextTargeting=window.slmadshb.setup.params.contextTargeting||{},window.slmadshb.setup.params.contextTargeting.pagesInfos={"/":29}),window.slmadshb&&(window.slmadshb.context=window.slmadshb.context||{},window.slmadshb.context.countryCode="NL",window.slmadshb.context.continentCode="EU",window.slmadshb.context.regionCode="NH"),window.slmadshb&&window.slmadshb.setup&&window.slmadshb.setup.params){const adUnits=window.slmadshb.setup.desktop?.adUnits??window.slmadshb.setup.adUnits??[];window.slmadshb.setup.params.setupOverrides=window.slmadshb.setup.params.setupOverrides||[];const countriesToExclude={smartadserver:["MA","SN","CI","DZ","IN","TN","GA","MQ","RS","GP","TR","GR","PL","EG","IE","ID","AE","CG","BF","IL","UA","CO","PK","AL","TG","SA","ML","VN","DK","TH","JP","NZ","CZ","MK","MU","MG","BJ","HU","PH","BG","MC","IQ","HR","LB","KR","AO","DO","AD","MY","RU","SG","HK","SK","SI","HT","UY","CN","GF","TW","RW","KE","NG","BY","GT","LT","GH","QA","CR","CY","MZ","CF","JO","PF","VE","PA","TD","NE","EE","KW","HN","NC","ET","MT","LV","BA","LY","ME","LK","AZ","MR","MD","KH","UG","TZ","UZ","KZ","PY","MF","PR","BI","DJ","TT"]};Object.keys(countriesToExclude).forEach((bidderName=>{countriesToExclude[bidderName].includes("NL")&&window.slmadshb.setup.params.setupOverrides.push((()=>{adUnits.forEach((adUnit=>{adUnit.bids&&(adUnit.bids=adUnit.bids.filter((bid=>bid.bidder!==bidderName)))}))}))}))}window.slmadshb&&window.slmadshb.setup&&window.slmadshb.setup.params&&(window.slmadshb.setup.params.gdprApplies=!0),window.slmadshb&&window.slmadshb.onload&&window.slmadshb.onload();(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxy'+'fy3sjy4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));